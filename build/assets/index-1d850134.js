var GR=Object.defineProperty;var WR=(e,t,n)=>t in e?GR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $m=(e,t,n)=>(WR(e,typeof t!="symbol"?t+"":t,n),n);function ZR(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in e)){const h=Object.getOwnPropertyDescriptor(s,c);h&&Object.defineProperty(e,c,h.get?h:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const m of h.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function n(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(c){if(c.ep)return;c.ep=!0;const h=n(c);fetch(c.href,h)}})();var sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Y={},XR={get exports(){return Y},set exports(e){Y=e}},Zy={},U={},HR={get exports(){return U},set exports(e){U=e}},hn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep=Symbol.for("react.element"),YR=Symbol.for("react.portal"),KR=Symbol.for("react.fragment"),JR=Symbol.for("react.strict_mode"),QR=Symbol.for("react.profiler"),e3=Symbol.for("react.provider"),t3=Symbol.for("react.context"),n3=Symbol.for("react.forward_ref"),r3=Symbol.for("react.suspense"),i3=Symbol.for("react.memo"),o3=Symbol.for("react.lazy"),j2=Symbol.iterator;function s3(e){return e===null||typeof e!="object"?null:(e=j2&&e[j2]||e["@@iterator"],typeof e=="function"?e:null)}var YC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},KC=Object.assign,JC={};function Yd(e,t,n){this.props=e,this.context=t,this.refs=JC,this.updater=n||YC}Yd.prototype.isReactComponent={};Yd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Yd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function QC(){}QC.prototype=Yd.prototype;function rb(e,t,n){this.props=e,this.context=t,this.refs=JC,this.updater=n||YC}var ib=rb.prototype=new QC;ib.constructor=rb;KC(ib,Yd.prototype);ib.isPureReactComponent=!0;var V2=Array.isArray,eI=Object.prototype.hasOwnProperty,ob={current:null},tI={key:!0,ref:!0,__self:!0,__source:!0};function nI(e,t,n){var s,c={},h=null,m=null;if(t!=null)for(s in t.ref!==void 0&&(m=t.ref),t.key!==void 0&&(h=""+t.key),t)eI.call(t,s)&&!tI.hasOwnProperty(s)&&(c[s]=t[s]);var l=arguments.length-2;if(l===1)c.children=n;else if(1<l){for(var b=Array(l),w=0;w<l;w++)b[w]=arguments[w+2];c.children=b}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)c[s]===void 0&&(c[s]=l[s]);return{$$typeof:Ep,type:e,key:h,ref:m,props:c,_owner:ob.current}}function a3(e,t){return{$$typeof:Ep,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function sb(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ep}function l3(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var U2=/\/+/g;function $v(e,t){return typeof e=="object"&&e!==null&&e.key!=null?l3(""+e.key):t.toString(36)}function wg(e,t,n,s,c){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var m=!1;if(e===null)m=!0;else switch(h){case"string":case"number":m=!0;break;case"object":switch(e.$$typeof){case Ep:case YR:m=!0}}if(m)return m=e,c=c(m),e=s===""?"."+$v(m,0):s,V2(c)?(n="",e!=null&&(n=e.replace(U2,"$&/")+"/"),wg(c,t,n,"",function(w){return w})):c!=null&&(sb(c)&&(c=a3(c,n+(!c.key||m&&m.key===c.key?"":(""+c.key).replace(U2,"$&/")+"/")+e)),t.push(c)),1;if(m=0,s=s===""?".":s+":",V2(e))for(var l=0;l<e.length;l++){h=e[l];var b=s+$v(h,l);m+=wg(h,t,n,b,c)}else if(b=s3(e),typeof b=="function")for(e=b.call(e),l=0;!(h=e.next()).done;)h=h.value,b=s+$v(h,l++),m+=wg(h,t,n,b,c);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return m}function jm(e,t,n){if(e==null)return e;var s=[],c=0;return wg(e,s,"","",function(h){return t.call(n,h,c++)}),s}function c3(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Zi={current:null},Sg={transition:null},u3={ReactCurrentDispatcher:Zi,ReactCurrentBatchConfig:Sg,ReactCurrentOwner:ob};hn.Children={map:jm,forEach:function(e,t,n){jm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return jm(e,function(){t++}),t},toArray:function(e){return jm(e,function(t){return t})||[]},only:function(e){if(!sb(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};hn.Component=Yd;hn.Fragment=KR;hn.Profiler=QR;hn.PureComponent=rb;hn.StrictMode=JR;hn.Suspense=r3;hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u3;hn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=KC({},e.props),c=e.key,h=e.ref,m=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,m=ob.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(b in t)eI.call(t,b)&&!tI.hasOwnProperty(b)&&(s[b]=t[b]===void 0&&l!==void 0?l[b]:t[b])}var b=arguments.length-2;if(b===1)s.children=n;else if(1<b){l=Array(b);for(var w=0;w<b;w++)l[w]=arguments[w+2];s.children=l}return{$$typeof:Ep,type:e.type,key:c,ref:h,props:s,_owner:m}};hn.createContext=function(e){return e={$$typeof:t3,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:e3,_context:e},e.Consumer=e};hn.createElement=nI;hn.createFactory=function(e){var t=nI.bind(null,e);return t.type=e,t};hn.createRef=function(){return{current:null}};hn.forwardRef=function(e){return{$$typeof:n3,render:e}};hn.isValidElement=sb;hn.lazy=function(e){return{$$typeof:o3,_payload:{_status:-1,_result:e},_init:c3}};hn.memo=function(e,t){return{$$typeof:i3,type:e,compare:t===void 0?null:t}};hn.startTransition=function(e){var t=Sg.transition;Sg.transition={};try{e()}finally{Sg.transition=t}};hn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};hn.useCallback=function(e,t){return Zi.current.useCallback(e,t)};hn.useContext=function(e){return Zi.current.useContext(e)};hn.useDebugValue=function(){};hn.useDeferredValue=function(e){return Zi.current.useDeferredValue(e)};hn.useEffect=function(e,t){return Zi.current.useEffect(e,t)};hn.useId=function(){return Zi.current.useId()};hn.useImperativeHandle=function(e,t,n){return Zi.current.useImperativeHandle(e,t,n)};hn.useInsertionEffect=function(e,t){return Zi.current.useInsertionEffect(e,t)};hn.useLayoutEffect=function(e,t){return Zi.current.useLayoutEffect(e,t)};hn.useMemo=function(e,t){return Zi.current.useMemo(e,t)};hn.useReducer=function(e,t,n){return Zi.current.useReducer(e,t,n)};hn.useRef=function(e){return Zi.current.useRef(e)};hn.useState=function(e){return Zi.current.useState(e)};hn.useSyncExternalStore=function(e,t,n){return Zi.current.useSyncExternalStore(e,t,n)};hn.useTransition=function(){return Zi.current.useTransition()};hn.version="18.2.0";(function(e){e.exports=hn})(HR);const da=qR(U),Hg=ZR({__proto__:null,default:da},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d3=U,h3=Symbol.for("react.element"),f3=Symbol.for("react.fragment"),p3=Object.prototype.hasOwnProperty,m3=d3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g3={key:!0,ref:!0,__self:!0,__source:!0};function rI(e,t,n){var s,c={},h=null,m=null;n!==void 0&&(h=""+n),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(m=t.ref);for(s in t)p3.call(t,s)&&!g3.hasOwnProperty(s)&&(c[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)c[s]===void 0&&(c[s]=t[s]);return{$$typeof:h3,type:e,key:h,ref:m,props:c,_owner:m3.current}}Zy.Fragment=f3;Zy.jsx=rI;Zy.jsxs=rI;(function(e){e.exports=Zy})(XR);var Yg={},zd={},y3={get exports(){return zd},set exports(e){zd=e}},Io={},ox={},v3={get exports(){return ox},set exports(e){ox=e}},iI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Me,We){var Ye=Me.length;Me.push(We);e:for(;0<Ye;){var st=Ye-1>>>1,Ke=Me[st];if(0<c(Ke,We))Me[st]=We,Me[Ye]=Ke,Ye=st;else break e}}function n(Me){return Me.length===0?null:Me[0]}function s(Me){if(Me.length===0)return null;var We=Me[0],Ye=Me.pop();if(Ye!==We){Me[0]=Ye;e:for(var st=0,Ke=Me.length,Je=Ke>>>1;st<Je;){var pt=2*(st+1)-1,St=Me[pt],Ot=pt+1,Vt=Me[Ot];if(0>c(St,Ye))Ot<Ke&&0>c(Vt,St)?(Me[st]=Vt,Me[Ot]=Ye,st=Ot):(Me[st]=St,Me[pt]=Ye,st=pt);else if(Ot<Ke&&0>c(Vt,Ye))Me[st]=Vt,Me[Ot]=Ye,st=Ot;else break e}}return We}function c(Me,We){var Ye=Me.sortIndex-We.sortIndex;return Ye!==0?Ye:Me.id-We.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var m=Date,l=m.now();e.unstable_now=function(){return m.now()-l}}var b=[],w=[],k=1,M=null,E=3,L=!1,N=!1,V=!1,J=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(Me){for(var We=n(w);We!==null;){if(We.callback===null)s(w);else if(We.startTime<=Me)s(w),We.sortIndex=We.expirationTime,t(b,We);else break;We=n(w)}}function te(Me){if(V=!1,W(Me),!N)if(n(b)!==null)N=!0,Ce(de);else{var We=n(w);We!==null&&Ee(te,We.startTime-Me)}}function de(Me,We){N=!1,V&&(V=!1,$(oe),oe=-1),L=!0;var Ye=E;try{for(W(We),M=n(b);M!==null&&(!(M.expirationTime>We)||Me&&!Ae());){var st=M.callback;if(typeof st=="function"){M.callback=null,E=M.priorityLevel;var Ke=st(M.expirationTime<=We);We=e.unstable_now(),typeof Ke=="function"?M.callback=Ke:M===n(b)&&s(b),W(We)}else s(b);M=n(b)}if(M!==null)var Je=!0;else{var pt=n(w);pt!==null&&Ee(te,pt.startTime-We),Je=!1}return Je}finally{M=null,E=Ye,L=!1}}var pe=!1,ce=null,oe=-1,be=5,ye=-1;function Ae(){return!(e.unstable_now()-ye<be)}function Ze(){if(ce!==null){var Me=e.unstable_now();ye=Me;var We=!0;try{We=ce(!0,Me)}finally{We?Xe():(pe=!1,ce=null)}}else pe=!1}var Xe;if(typeof F=="function")Xe=function(){F(Ze)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,ft=ot.port2;ot.port1.onmessage=Ze,Xe=function(){ft.postMessage(null)}}else Xe=function(){J(Ze,0)};function Ce(Me){ce=Me,pe||(pe=!0,Xe())}function Ee(Me,We){oe=J(function(){Me(e.unstable_now())},We)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Me){Me.callback=null},e.unstable_continueExecution=function(){N||L||(N=!0,Ce(de))},e.unstable_forceFrameRate=function(Me){0>Me||125<Me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):be=0<Me?Math.floor(1e3/Me):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_getFirstCallbackNode=function(){return n(b)},e.unstable_next=function(Me){switch(E){case 1:case 2:case 3:var We=3;break;default:We=E}var Ye=E;E=We;try{return Me()}finally{E=Ye}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Me,We){switch(Me){case 1:case 2:case 3:case 4:case 5:break;default:Me=3}var Ye=E;E=Me;try{return We()}finally{E=Ye}},e.unstable_scheduleCallback=function(Me,We,Ye){var st=e.unstable_now();switch(typeof Ye=="object"&&Ye!==null?(Ye=Ye.delay,Ye=typeof Ye=="number"&&0<Ye?st+Ye:st):Ye=st,Me){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=Ye+Ke,Me={id:k++,callback:We,priorityLevel:Me,startTime:Ye,expirationTime:Ke,sortIndex:-1},Ye>st?(Me.sortIndex=Ye,t(w,Me),n(b)===null&&Me===n(w)&&(V?($(oe),oe=-1):V=!0,Ee(te,Ye-st))):(Me.sortIndex=Ke,t(b,Me),N||L||(N=!0,Ce(de))),Me},e.unstable_shouldYield=Ae,e.unstable_wrapCallback=function(Me){var We=E;return function(){var Ye=E;E=We;try{return Me.apply(this,arguments)}finally{E=Ye}}}})(iI);(function(e){e.exports=iI})(v3);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oI=U,Eo=ox;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sI=new Set,Uf={};function yu(e,t){Ad(e,t),Ad(e+"Capture",t)}function Ad(e,t){for(Uf[e]=t,e=0;e<t.length;e++)sI.add(t[e])}var tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sx=Object.prototype.hasOwnProperty,_3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,G2={},W2={};function x3(e){return sx.call(W2,e)?!0:sx.call(G2,e)?!1:_3.test(e)?W2[e]=!0:(G2[e]=!0,!1)}function b3(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function w3(e,t,n,s){if(t===null||typeof t>"u"||b3(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qi(e,t,n,s,c,h,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=m}var vi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vi[e]=new qi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vi[t]=new qi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vi[e]=new qi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vi[e]=new qi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vi[e]=new qi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vi[e]=new qi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vi[e]=new qi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vi[e]=new qi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vi[e]=new qi(e,5,!1,e.toLowerCase(),null,!1,!1)});var ab=/[\-:]([a-z])/g;function lb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ab,lb);vi[t]=new qi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ab,lb);vi[t]=new qi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ab,lb);vi[t]=new qi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vi[e]=new qi(e,1,!1,e.toLowerCase(),null,!1,!1)});vi.xlinkHref=new qi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vi[e]=new qi(e,1,!1,e.toLowerCase(),null,!0,!0)});function cb(e,t,n,s){var c=vi.hasOwnProperty(t)?vi[t]:null;(c!==null?c.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(w3(t,n,c,s)&&(n=null),s||c===null?x3(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,s=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var ll=oI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vm=Symbol.for("react.element"),id=Symbol.for("react.portal"),od=Symbol.for("react.fragment"),ub=Symbol.for("react.strict_mode"),ax=Symbol.for("react.profiler"),aI=Symbol.for("react.provider"),lI=Symbol.for("react.context"),db=Symbol.for("react.forward_ref"),lx=Symbol.for("react.suspense"),cx=Symbol.for("react.suspense_list"),hb=Symbol.for("react.memo"),Dl=Symbol.for("react.lazy"),cI=Symbol.for("react.offscreen"),Z2=Symbol.iterator;function jh(e){return e===null||typeof e!="object"?null:(e=Z2&&e[Z2]||e["@@iterator"],typeof e=="function"?e:null)}var mr=Object.assign,jv;function af(e){if(jv===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);jv=t&&t[1]||""}return`
`+jv+e}var Vv=!1;function Uv(e,t){if(!e||Vv)return"";Vv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var s=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){s=w}e.call(t.prototype)}else{try{throw Error()}catch(w){s=w}e()}}catch(w){if(w&&s&&typeof w.stack=="string"){for(var c=w.stack.split(`
`),h=s.stack.split(`
`),m=c.length-1,l=h.length-1;1<=m&&0<=l&&c[m]!==h[l];)l--;for(;1<=m&&0<=l;m--,l--)if(c[m]!==h[l]){if(m!==1||l!==1)do if(m--,l--,0>l||c[m]!==h[l]){var b=`
`+c[m].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=m&&0<=l);break}}}finally{Vv=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?af(e):""}function S3(e){switch(e.tag){case 5:return af(e.type);case 16:return af("Lazy");case 13:return af("Suspense");case 19:return af("SuspenseList");case 0:case 2:case 15:return e=Uv(e.type,!1),e;case 11:return e=Uv(e.type.render,!1),e;case 1:return e=Uv(e.type,!0),e;default:return""}}function ux(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case od:return"Fragment";case id:return"Portal";case ax:return"Profiler";case ub:return"StrictMode";case lx:return"Suspense";case cx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case lI:return(e.displayName||"Context")+".Consumer";case aI:return(e._context.displayName||"Context")+".Provider";case db:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case hb:return t=e.displayName||null,t!==null?t:ux(e.type)||"Memo";case Dl:t=e._payload,e=e._init;try{return ux(e(t))}catch{}}return null}function T3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ux(t);case 8:return t===ub?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ql(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uI(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function k3(e){var t=uI(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,h=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){s=""+m,h.call(this,m)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(m){s=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Um(e){e._valueTracker||(e._valueTracker=k3(e))}function dI(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=uI(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Kg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function dx(e,t){var n=t.checked;return mr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function q2(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Ql(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hI(e,t){t=t.checked,t!=null&&cb(e,"checked",t,!1)}function hx(e,t){hI(e,t);var n=Ql(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?fx(e,t.type,n):t.hasOwnProperty("defaultValue")&&fx(e,t.type,Ql(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function X2(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function fx(e,t,n){(t!=="number"||Kg(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var lf=Array.isArray;function _d(e,t,n,s){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Ql(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function px(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return mr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function H2(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(et(92));if(lf(n)){if(1<n.length)throw Error(et(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ql(n)}}function fI(e,t){var n=Ql(t.value),s=Ql(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Y2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function pI(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?pI(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gm,mI=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Gm=Gm||document.createElement("div"),Gm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var yf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E3=["Webkit","ms","Moz","O"];Object.keys(yf).forEach(function(e){E3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yf[t]=yf[e]})});function gI(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||yf.hasOwnProperty(e)&&yf[e]?(""+t).trim():t+"px"}function yI(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,c=gI(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,c):e[n]=c}}var C3=mr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gx(e,t){if(t){if(C3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function yx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vx=null;function fb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _x=null,xd=null,bd=null;function K2(e){if(e=Mp(e)){if(typeof _x!="function")throw Error(et(280));var t=e.stateNode;t&&(t=Ky(t),_x(e.stateNode,e.type,t))}}function vI(e){xd?bd?bd.push(e):bd=[e]:xd=e}function _I(){if(xd){var e=xd,t=bd;if(bd=xd=null,K2(e),t)for(e=0;e<t.length;e++)K2(t[e])}}function xI(e,t){return e(t)}function bI(){}var Gv=!1;function wI(e,t,n){if(Gv)return e(t,n);Gv=!0;try{return xI(e,t,n)}finally{Gv=!1,(xd!==null||bd!==null)&&(bI(),_I())}}function Wf(e,t){var n=e.stateNode;if(n===null)return null;var s=Ky(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(et(231,t,typeof n));return n}var xx=!1;if(tl)try{var Vh={};Object.defineProperty(Vh,"passive",{get:function(){xx=!0}}),window.addEventListener("test",Vh,Vh),window.removeEventListener("test",Vh,Vh)}catch{xx=!1}function I3(e,t,n,s,c,h,m,l,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(n,w)}catch(k){this.onError(k)}}var vf=!1,Jg=null,Qg=!1,bx=null,M3={onError:function(e){vf=!0,Jg=e}};function P3(e,t,n,s,c,h,m,l,b){vf=!1,Jg=null,I3.apply(M3,arguments)}function z3(e,t,n,s,c,h,m,l,b){if(P3.apply(this,arguments),vf){if(vf){var w=Jg;vf=!1,Jg=null}else throw Error(et(198));Qg||(Qg=!0,bx=w)}}function vu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function SI(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function J2(e){if(vu(e)!==e)throw Error(et(188))}function A3(e){var t=e.alternate;if(!t){if(t=vu(e),t===null)throw Error(et(188));return t!==e?null:e}for(var n=e,s=t;;){var c=n.return;if(c===null)break;var h=c.alternate;if(h===null){if(s=c.return,s!==null){n=s;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===n)return J2(c),e;if(h===s)return J2(c),t;h=h.sibling}throw Error(et(188))}if(n.return!==s.return)n=c,s=h;else{for(var m=!1,l=c.child;l;){if(l===n){m=!0,n=c,s=h;break}if(l===s){m=!0,s=c,n=h;break}l=l.sibling}if(!m){for(l=h.child;l;){if(l===n){m=!0,n=h,s=c;break}if(l===s){m=!0,s=h,n=c;break}l=l.sibling}if(!m)throw Error(et(189))}}if(n.alternate!==s)throw Error(et(190))}if(n.tag!==3)throw Error(et(188));return n.stateNode.current===n?e:t}function TI(e){return e=A3(e),e!==null?kI(e):null}function kI(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kI(e);if(t!==null)return t;e=e.sibling}return null}var EI=Eo.unstable_scheduleCallback,Q2=Eo.unstable_cancelCallback,D3=Eo.unstable_shouldYield,R3=Eo.unstable_requestPaint,Ar=Eo.unstable_now,L3=Eo.unstable_getCurrentPriorityLevel,pb=Eo.unstable_ImmediatePriority,CI=Eo.unstable_UserBlockingPriority,ey=Eo.unstable_NormalPriority,O3=Eo.unstable_LowPriority,II=Eo.unstable_IdlePriority,qy=null,ra=null;function B3(e){if(ra&&typeof ra.onCommitFiberRoot=="function")try{ra.onCommitFiberRoot(qy,e,void 0,(e.current.flags&128)===128)}catch{}}var Ts=Math.clz32?Math.clz32:$3,F3=Math.log,N3=Math.LN2;function $3(e){return e>>>=0,e===0?32:31-(F3(e)/N3|0)|0}var Wm=64,Zm=4194304;function cf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ty(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,c=e.suspendedLanes,h=e.pingedLanes,m=n&268435455;if(m!==0){var l=m&~c;l!==0?s=cf(l):(h&=m,h!==0&&(s=cf(h)))}else m=n&~c,m!==0?s=cf(m):h!==0&&(s=cf(h));if(s===0)return 0;if(t!==0&&t!==s&&!(t&c)&&(c=s&-s,h=t&-t,c>=h||c===16&&(h&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Ts(t),c=1<<n,s|=e[n],t&=~c;return s}function j3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V3(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes;0<h;){var m=31-Ts(h),l=1<<m,b=c[m];b===-1?(!(l&n)||l&s)&&(c[m]=j3(l,t)):b<=t&&(e.expiredLanes|=l),h&=~l}}function wx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function MI(){var e=Wm;return Wm<<=1,!(Wm&4194240)&&(Wm=64),e}function Wv(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Cp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ts(t),e[t]=n}function U3(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var c=31-Ts(n),h=1<<c;t[c]=0,s[c]=-1,e[c]=-1,n&=~h}}function mb(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Ts(n),c=1<<s;c&t|e[s]&t&&(e[s]|=t),n&=~c}}var Fn=0;function PI(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var zI,gb,AI,DI,RI,Sx=!1,qm=[],Gl=null,Wl=null,Zl=null,Zf=new Map,qf=new Map,Ol=[],G3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eT(e,t){switch(e){case"focusin":case"focusout":Gl=null;break;case"dragenter":case"dragleave":Wl=null;break;case"mouseover":case"mouseout":Zl=null;break;case"pointerover":case"pointerout":Zf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qf.delete(t.pointerId)}}function Uh(e,t,n,s,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:h,targetContainers:[c]},t!==null&&(t=Mp(t),t!==null&&gb(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function W3(e,t,n,s,c){switch(t){case"focusin":return Gl=Uh(Gl,e,t,n,s,c),!0;case"dragenter":return Wl=Uh(Wl,e,t,n,s,c),!0;case"mouseover":return Zl=Uh(Zl,e,t,n,s,c),!0;case"pointerover":var h=c.pointerId;return Zf.set(h,Uh(Zf.get(h)||null,e,t,n,s,c)),!0;case"gotpointercapture":return h=c.pointerId,qf.set(h,Uh(qf.get(h)||null,e,t,n,s,c)),!0}return!1}function LI(e){var t=Yc(e.target);if(t!==null){var n=vu(t);if(n!==null){if(t=n.tag,t===13){if(t=SI(n),t!==null){e.blockedOn=t,RI(e.priority,function(){AI(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Tg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Tx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);vx=s,n.target.dispatchEvent(s),vx=null}else return t=Mp(n),t!==null&&gb(t),e.blockedOn=n,!1;t.shift()}return!0}function tT(e,t,n){Tg(e)&&n.delete(t)}function Z3(){Sx=!1,Gl!==null&&Tg(Gl)&&(Gl=null),Wl!==null&&Tg(Wl)&&(Wl=null),Zl!==null&&Tg(Zl)&&(Zl=null),Zf.forEach(tT),qf.forEach(tT)}function Gh(e,t){e.blockedOn===t&&(e.blockedOn=null,Sx||(Sx=!0,Eo.unstable_scheduleCallback(Eo.unstable_NormalPriority,Z3)))}function Xf(e){function t(c){return Gh(c,e)}if(0<qm.length){Gh(qm[0],e);for(var n=1;n<qm.length;n++){var s=qm[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Gl!==null&&Gh(Gl,e),Wl!==null&&Gh(Wl,e),Zl!==null&&Gh(Zl,e),Zf.forEach(t),qf.forEach(t),n=0;n<Ol.length;n++)s=Ol[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Ol.length&&(n=Ol[0],n.blockedOn===null);)LI(n),n.blockedOn===null&&Ol.shift()}var wd=ll.ReactCurrentBatchConfig,ny=!0;function q3(e,t,n,s){var c=Fn,h=wd.transition;wd.transition=null;try{Fn=1,yb(e,t,n,s)}finally{Fn=c,wd.transition=h}}function X3(e,t,n,s){var c=Fn,h=wd.transition;wd.transition=null;try{Fn=4,yb(e,t,n,s)}finally{Fn=c,wd.transition=h}}function yb(e,t,n,s){if(ny){var c=Tx(e,t,n,s);if(c===null)t_(e,t,s,ry,n),eT(e,s);else if(W3(c,e,t,n,s))s.stopPropagation();else if(eT(e,s),t&4&&-1<G3.indexOf(e)){for(;c!==null;){var h=Mp(c);if(h!==null&&zI(h),h=Tx(e,t,n,s),h===null&&t_(e,t,s,ry,n),h===c)break;c=h}c!==null&&s.stopPropagation()}else t_(e,t,s,null,n)}}var ry=null;function Tx(e,t,n,s){if(ry=null,e=fb(s),e=Yc(e),e!==null)if(t=vu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=SI(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ry=e,null}function OI(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(L3()){case pb:return 1;case CI:return 4;case ey:case O3:return 16;case II:return 536870912;default:return 16}default:return 16}}var Nl=null,vb=null,kg=null;function BI(){if(kg)return kg;var e,t=vb,n=t.length,s,c="value"in Nl?Nl.value:Nl.textContent,h=c.length;for(e=0;e<n&&t[e]===c[e];e++);var m=n-e;for(s=1;s<=m&&t[n-s]===c[h-s];s++);return kg=c.slice(e,1<s?1-s:void 0)}function Eg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xm(){return!0}function nT(){return!1}function Mo(e){function t(n,s,c,h,m){this._reactName=n,this._targetInst=c,this.type=s,this.nativeEvent=h,this.target=m,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(h):h[l]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Xm:nT,this.isPropagationStopped=nT,this}return mr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xm)},persist:function(){},isPersistent:Xm}),t}var Kd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_b=Mo(Kd),Ip=mr({},Kd,{view:0,detail:0}),H3=Mo(Ip),Zv,qv,Wh,Xy=mr({},Ip,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xb,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wh&&(Wh&&e.type==="mousemove"?(Zv=e.screenX-Wh.screenX,qv=e.screenY-Wh.screenY):qv=Zv=0,Wh=e),Zv)},movementY:function(e){return"movementY"in e?e.movementY:qv}}),rT=Mo(Xy),Y3=mr({},Xy,{dataTransfer:0}),K3=Mo(Y3),J3=mr({},Ip,{relatedTarget:0}),Xv=Mo(J3),Q3=mr({},Kd,{animationName:0,elapsedTime:0,pseudoElement:0}),eL=Mo(Q3),tL=mr({},Kd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nL=Mo(tL),rL=mr({},Kd,{data:0}),iT=Mo(rL),iL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sL[e])?!!t[e]:!1}function xb(){return aL}var lL=mr({},Ip,{key:function(e){if(e.key){var t=iL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Eg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?oL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xb,charCode:function(e){return e.type==="keypress"?Eg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Eg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cL=Mo(lL),uL=mr({},Xy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oT=Mo(uL),dL=mr({},Ip,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xb}),hL=Mo(dL),fL=mr({},Kd,{propertyName:0,elapsedTime:0,pseudoElement:0}),pL=Mo(fL),mL=mr({},Xy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gL=Mo(mL),yL=[9,13,27,32],bb=tl&&"CompositionEvent"in window,_f=null;tl&&"documentMode"in document&&(_f=document.documentMode);var vL=tl&&"TextEvent"in window&&!_f,FI=tl&&(!bb||_f&&8<_f&&11>=_f),sT=String.fromCharCode(32),aT=!1;function NI(e,t){switch(e){case"keyup":return yL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $I(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var sd=!1;function _L(e,t){switch(e){case"compositionend":return $I(t);case"keypress":return t.which!==32?null:(aT=!0,sT);case"textInput":return e=t.data,e===sT&&aT?null:e;default:return null}}function xL(e,t){if(sd)return e==="compositionend"||!bb&&NI(e,t)?(e=BI(),kg=vb=Nl=null,sd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return FI&&t.locale!=="ko"?null:t.data;default:return null}}var bL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bL[e.type]:t==="textarea"}function jI(e,t,n,s){vI(s),t=iy(t,"onChange"),0<t.length&&(n=new _b("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var xf=null,Hf=null;function wL(e){JI(e,0)}function Hy(e){var t=cd(e);if(dI(t))return e}function SL(e,t){if(e==="change")return t}var VI=!1;if(tl){var Hv;if(tl){var Yv="oninput"in document;if(!Yv){var cT=document.createElement("div");cT.setAttribute("oninput","return;"),Yv=typeof cT.oninput=="function"}Hv=Yv}else Hv=!1;VI=Hv&&(!document.documentMode||9<document.documentMode)}function uT(){xf&&(xf.detachEvent("onpropertychange",UI),Hf=xf=null)}function UI(e){if(e.propertyName==="value"&&Hy(Hf)){var t=[];jI(t,Hf,e,fb(e)),wI(wL,t)}}function TL(e,t,n){e==="focusin"?(uT(),xf=t,Hf=n,xf.attachEvent("onpropertychange",UI)):e==="focusout"&&uT()}function kL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hy(Hf)}function EL(e,t){if(e==="click")return Hy(t)}function CL(e,t){if(e==="input"||e==="change")return Hy(t)}function IL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cs=typeof Object.is=="function"?Object.is:IL;function Yf(e,t){if(Cs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var c=n[s];if(!sx.call(t,c)||!Cs(e[c],t[c]))return!1}return!0}function dT(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hT(e,t){var n=dT(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dT(n)}}function GI(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?GI(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function WI(){for(var e=window,t=Kg();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Kg(e.document)}return t}function wb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ML(e){var t=WI(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&GI(n.ownerDocument.documentElement,n)){if(s!==null&&wb(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=n.textContent.length,h=Math.min(s.start,c);s=s.end===void 0?h:Math.min(s.end,c),!e.extend&&h>s&&(c=s,s=h,h=c),c=hT(n,h);var m=hT(n,s);c&&m&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),h>s?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var PL=tl&&"documentMode"in document&&11>=document.documentMode,ad=null,kx=null,bf=null,Ex=!1;function fT(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ex||ad==null||ad!==Kg(s)||(s=ad,"selectionStart"in s&&wb(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),bf&&Yf(bf,s)||(bf=s,s=iy(kx,"onSelect"),0<s.length&&(t=new _b("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=ad)))}function Hm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ld={animationend:Hm("Animation","AnimationEnd"),animationiteration:Hm("Animation","AnimationIteration"),animationstart:Hm("Animation","AnimationStart"),transitionend:Hm("Transition","TransitionEnd")},Kv={},ZI={};tl&&(ZI=document.createElement("div").style,"AnimationEvent"in window||(delete ld.animationend.animation,delete ld.animationiteration.animation,delete ld.animationstart.animation),"TransitionEvent"in window||delete ld.transitionend.transition);function Yy(e){if(Kv[e])return Kv[e];if(!ld[e])return e;var t=ld[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ZI)return Kv[e]=t[n];return e}var qI=Yy("animationend"),XI=Yy("animationiteration"),HI=Yy("animationstart"),YI=Yy("transitionend"),KI=new Map,pT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rc(e,t){KI.set(e,t),yu(t,[e])}for(var Jv=0;Jv<pT.length;Jv++){var Qv=pT[Jv],zL=Qv.toLowerCase(),AL=Qv[0].toUpperCase()+Qv.slice(1);rc(zL,"on"+AL)}rc(qI,"onAnimationEnd");rc(XI,"onAnimationIteration");rc(HI,"onAnimationStart");rc("dblclick","onDoubleClick");rc("focusin","onFocus");rc("focusout","onBlur");rc(YI,"onTransitionEnd");Ad("onMouseEnter",["mouseout","mouseover"]);Ad("onMouseLeave",["mouseout","mouseover"]);Ad("onPointerEnter",["pointerout","pointerover"]);Ad("onPointerLeave",["pointerout","pointerover"]);yu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yu("onBeforeInput",["compositionend","keypress","textInput","paste"]);yu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DL=new Set("cancel close invalid load scroll toggle".split(" ").concat(uf));function mT(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,z3(s,t,void 0,e),e.currentTarget=null}function JI(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],c=s.event;s=s.listeners;e:{var h=void 0;if(t)for(var m=s.length-1;0<=m;m--){var l=s[m],b=l.instance,w=l.currentTarget;if(l=l.listener,b!==h&&c.isPropagationStopped())break e;mT(c,l,w),h=b}else for(m=0;m<s.length;m++){if(l=s[m],b=l.instance,w=l.currentTarget,l=l.listener,b!==h&&c.isPropagationStopped())break e;mT(c,l,w),h=b}}}if(Qg)throw e=bx,Qg=!1,bx=null,e}function tr(e,t){var n=t[zx];n===void 0&&(n=t[zx]=new Set);var s=e+"__bubble";n.has(s)||(QI(t,e,2,!1),n.add(s))}function e_(e,t,n){var s=0;t&&(s|=4),QI(n,e,s,t)}var Ym="_reactListening"+Math.random().toString(36).slice(2);function Kf(e){if(!e[Ym]){e[Ym]=!0,sI.forEach(function(n){n!=="selectionchange"&&(DL.has(n)||e_(n,!1,e),e_(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ym]||(t[Ym]=!0,e_("selectionchange",!1,t))}}function QI(e,t,n,s){switch(OI(t)){case 1:var c=q3;break;case 4:c=X3;break;default:c=yb}n=c.bind(null,t,n,e),c=void 0,!xx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function t_(e,t,n,s,c){var h=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var m=s.tag;if(m===3||m===4){var l=s.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(m===4)for(m=s.return;m!==null;){var b=m.tag;if((b===3||b===4)&&(b=m.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;m=m.return}for(;l!==null;){if(m=Yc(l),m===null)return;if(b=m.tag,b===5||b===6){s=h=m;continue e}l=l.parentNode}}s=s.return}wI(function(){var w=h,k=fb(n),M=[];e:{var E=KI.get(e);if(E!==void 0){var L=_b,N=e;switch(e){case"keypress":if(Eg(n)===0)break e;case"keydown":case"keyup":L=cL;break;case"focusin":N="focus",L=Xv;break;case"focusout":N="blur",L=Xv;break;case"beforeblur":case"afterblur":L=Xv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=rT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=K3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=hL;break;case qI:case XI:case HI:L=eL;break;case YI:L=pL;break;case"scroll":L=H3;break;case"wheel":L=gL;break;case"copy":case"cut":case"paste":L=nL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=oT}var V=(t&4)!==0,J=!V&&e==="scroll",$=V?E!==null?E+"Capture":null:E;V=[];for(var F=w,W;F!==null;){W=F;var te=W.stateNode;if(W.tag===5&&te!==null&&(W=te,$!==null&&(te=Wf(F,$),te!=null&&V.push(Jf(F,te,W)))),J)break;F=F.return}0<V.length&&(E=new L(E,N,null,n,k),M.push({event:E,listeners:V}))}}if(!(t&7)){e:{if(E=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",E&&n!==vx&&(N=n.relatedTarget||n.fromElement)&&(Yc(N)||N[nl]))break e;if((L||E)&&(E=k.window===k?k:(E=k.ownerDocument)?E.defaultView||E.parentWindow:window,L?(N=n.relatedTarget||n.toElement,L=w,N=N?Yc(N):null,N!==null&&(J=vu(N),N!==J||N.tag!==5&&N.tag!==6)&&(N=null)):(L=null,N=w),L!==N)){if(V=rT,te="onMouseLeave",$="onMouseEnter",F="mouse",(e==="pointerout"||e==="pointerover")&&(V=oT,te="onPointerLeave",$="onPointerEnter",F="pointer"),J=L==null?E:cd(L),W=N==null?E:cd(N),E=new V(te,F+"leave",L,n,k),E.target=J,E.relatedTarget=W,te=null,Yc(k)===w&&(V=new V($,F+"enter",N,n,k),V.target=W,V.relatedTarget=J,te=V),J=te,L&&N)t:{for(V=L,$=N,F=0,W=V;W;W=Ju(W))F++;for(W=0,te=$;te;te=Ju(te))W++;for(;0<F-W;)V=Ju(V),F--;for(;0<W-F;)$=Ju($),W--;for(;F--;){if(V===$||$!==null&&V===$.alternate)break t;V=Ju(V),$=Ju($)}V=null}else V=null;L!==null&&gT(M,E,L,V,!1),N!==null&&J!==null&&gT(M,J,N,V,!0)}}e:{if(E=w?cd(w):window,L=E.nodeName&&E.nodeName.toLowerCase(),L==="select"||L==="input"&&E.type==="file")var de=SL;else if(lT(E))if(VI)de=CL;else{de=kL;var pe=TL}else(L=E.nodeName)&&L.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(de=EL);if(de&&(de=de(e,w))){jI(M,de,n,k);break e}pe&&pe(e,E,w),e==="focusout"&&(pe=E._wrapperState)&&pe.controlled&&E.type==="number"&&fx(E,"number",E.value)}switch(pe=w?cd(w):window,e){case"focusin":(lT(pe)||pe.contentEditable==="true")&&(ad=pe,kx=w,bf=null);break;case"focusout":bf=kx=ad=null;break;case"mousedown":Ex=!0;break;case"contextmenu":case"mouseup":case"dragend":Ex=!1,fT(M,n,k);break;case"selectionchange":if(PL)break;case"keydown":case"keyup":fT(M,n,k)}var ce;if(bb)e:{switch(e){case"compositionstart":var oe="onCompositionStart";break e;case"compositionend":oe="onCompositionEnd";break e;case"compositionupdate":oe="onCompositionUpdate";break e}oe=void 0}else sd?NI(e,n)&&(oe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(oe="onCompositionStart");oe&&(FI&&n.locale!=="ko"&&(sd||oe!=="onCompositionStart"?oe==="onCompositionEnd"&&sd&&(ce=BI()):(Nl=k,vb="value"in Nl?Nl.value:Nl.textContent,sd=!0)),pe=iy(w,oe),0<pe.length&&(oe=new iT(oe,e,null,n,k),M.push({event:oe,listeners:pe}),ce?oe.data=ce:(ce=$I(n),ce!==null&&(oe.data=ce)))),(ce=vL?_L(e,n):xL(e,n))&&(w=iy(w,"onBeforeInput"),0<w.length&&(k=new iT("onBeforeInput","beforeinput",null,n,k),M.push({event:k,listeners:w}),k.data=ce))}JI(M,t)})}function Jf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function iy(e,t){for(var n=t+"Capture",s=[];e!==null;){var c=e,h=c.stateNode;c.tag===5&&h!==null&&(c=h,h=Wf(e,n),h!=null&&s.unshift(Jf(e,h,c)),h=Wf(e,t),h!=null&&s.push(Jf(e,h,c))),e=e.return}return s}function Ju(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gT(e,t,n,s,c){for(var h=t._reactName,m=[];n!==null&&n!==s;){var l=n,b=l.alternate,w=l.stateNode;if(b!==null&&b===s)break;l.tag===5&&w!==null&&(l=w,c?(b=Wf(n,h),b!=null&&m.unshift(Jf(n,b,l))):c||(b=Wf(n,h),b!=null&&m.push(Jf(n,b,l)))),n=n.return}m.length!==0&&e.push({event:t,listeners:m})}var RL=/\r\n?/g,LL=/\u0000|\uFFFD/g;function yT(e){return(typeof e=="string"?e:""+e).replace(RL,`
`).replace(LL,"")}function Km(e,t,n){if(t=yT(t),yT(e)!==t&&n)throw Error(et(425))}function oy(){}var Cx=null,Ix=null;function Mx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Px=typeof setTimeout=="function"?setTimeout:void 0,OL=typeof clearTimeout=="function"?clearTimeout:void 0,vT=typeof Promise=="function"?Promise:void 0,BL=typeof queueMicrotask=="function"?queueMicrotask:typeof vT<"u"?function(e){return vT.resolve(null).then(e).catch(FL)}:Px;function FL(e){setTimeout(function(){throw e})}function n_(e,t){var n=t,s=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"){if(s===0){e.removeChild(c),Xf(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=c}while(n);Xf(t)}function ql(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _T(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Jd=Math.random().toString(36).slice(2),Qs="__reactFiber$"+Jd,Qf="__reactProps$"+Jd,nl="__reactContainer$"+Jd,zx="__reactEvents$"+Jd,NL="__reactListeners$"+Jd,$L="__reactHandles$"+Jd;function Yc(e){var t=e[Qs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[nl]||n[Qs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_T(e);e!==null;){if(n=e[Qs])return n;e=_T(e)}return t}e=n,n=e.parentNode}return null}function Mp(e){return e=e[Qs]||e[nl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function cd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function Ky(e){return e[Qf]||null}var Ax=[],ud=-1;function ic(e){return{current:e}}function ir(e){0>ud||(e.current=Ax[ud],Ax[ud]=null,ud--)}function Qn(e,t){ud++,Ax[ud]=e.current,e.current=t}var ec={},Ai=ic(ec),no=ic(!1),lu=ec;function Dd(e,t){var n=e.type.contextTypes;if(!n)return ec;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var c={},h;for(h in n)c[h]=t[h];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function ro(e){return e=e.childContextTypes,e!=null}function sy(){ir(no),ir(Ai)}function xT(e,t,n){if(Ai.current!==ec)throw Error(et(168));Qn(Ai,t),Qn(no,n)}function eM(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var c in s)if(!(c in t))throw Error(et(108,T3(e)||"Unknown",c));return mr({},n,s)}function ay(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ec,lu=Ai.current,Qn(Ai,e),Qn(no,no.current),!0}function bT(e,t,n){var s=e.stateNode;if(!s)throw Error(et(169));n?(e=eM(e,t,lu),s.__reactInternalMemoizedMergedChildContext=e,ir(no),ir(Ai),Qn(Ai,e)):ir(no),Qn(no,n)}var Na=null,Jy=!1,r_=!1;function tM(e){Na===null?Na=[e]:Na.push(e)}function jL(e){Jy=!0,tM(e)}function oc(){if(!r_&&Na!==null){r_=!0;var e=0,t=Fn;try{var n=Na;for(Fn=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Na=null,Jy=!1}catch(c){throw Na!==null&&(Na=Na.slice(e+1)),EI(pb,oc),c}finally{Fn=t,r_=!1}}return null}var dd=[],hd=0,ly=null,cy=0,$o=[],jo=0,cu=null,Ua=1,Ga="";function Vc(e,t){dd[hd++]=cy,dd[hd++]=ly,ly=e,cy=t}function nM(e,t,n){$o[jo++]=Ua,$o[jo++]=Ga,$o[jo++]=cu,cu=e;var s=Ua;e=Ga;var c=32-Ts(s)-1;s&=~(1<<c),n+=1;var h=32-Ts(t)+c;if(30<h){var m=c-c%5;h=(s&(1<<m)-1).toString(32),s>>=m,c-=m,Ua=1<<32-Ts(t)+c|n<<c|s,Ga=h+e}else Ua=1<<h|n<<c|s,Ga=e}function Sb(e){e.return!==null&&(Vc(e,1),nM(e,1,0))}function Tb(e){for(;e===ly;)ly=dd[--hd],dd[hd]=null,cy=dd[--hd],dd[hd]=null;for(;e===cu;)cu=$o[--jo],$o[jo]=null,Ga=$o[--jo],$o[jo]=null,Ua=$o[--jo],$o[jo]=null}var So=null,wo=null,cr=!1,_s=null;function rM(e,t){var n=Uo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function wT(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,So=e,wo=ql(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,So=e,wo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=cu!==null?{id:Ua,overflow:Ga}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Uo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,So=e,wo=null,!0):!1;default:return!1}}function Dx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Rx(e){if(cr){var t=wo;if(t){var n=t;if(!wT(e,t)){if(Dx(e))throw Error(et(418));t=ql(n.nextSibling);var s=So;t&&wT(e,t)?rM(s,n):(e.flags=e.flags&-4097|2,cr=!1,So=e)}}else{if(Dx(e))throw Error(et(418));e.flags=e.flags&-4097|2,cr=!1,So=e}}}function ST(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;So=e}function Jm(e){if(e!==So)return!1;if(!cr)return ST(e),cr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mx(e.type,e.memoizedProps)),t&&(t=wo)){if(Dx(e))throw iM(),Error(et(418));for(;t;)rM(e,t),t=ql(t.nextSibling)}if(ST(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){wo=ql(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}wo=null}}else wo=So?ql(e.stateNode.nextSibling):null;return!0}function iM(){for(var e=wo;e;)e=ql(e.nextSibling)}function Rd(){wo=So=null,cr=!1}function kb(e){_s===null?_s=[e]:_s.push(e)}var VL=ll.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){t=mr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var uy=ic(null),dy=null,fd=null,Eb=null;function Cb(){Eb=fd=dy=null}function Ib(e){var t=uy.current;ir(uy),e._currentValue=t}function Lx(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Sd(e,t){dy=e,Eb=fd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(to=!0),e.firstContext=null)}function Ho(e){var t=e._currentValue;if(Eb!==e)if(e={context:e,memoizedValue:t,next:null},fd===null){if(dy===null)throw Error(et(308));fd=e,dy.dependencies={lanes:0,firstContext:e}}else fd=fd.next=e;return t}var Kc=null;function Mb(e){Kc===null?Kc=[e]:Kc.push(e)}function oM(e,t,n,s){var c=t.interleaved;return c===null?(n.next=n,Mb(t)):(n.next=c.next,c.next=n),t.interleaved=n,rl(e,s)}function rl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Rl=!1;function Pb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sM(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xl(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Sn&2){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,rl(e,n)}return c=s.interleaved,c===null?(t.next=t,Mb(s)):(t.next=c.next,c.next=t),s.interleaved=t,rl(e,n)}function Cg(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,mb(e,n)}}function TT(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var c=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var m={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};h===null?c=h=m:h=h.next=m,n=n.next}while(n!==null);h===null?c=h=t:h=h.next=t}else c=h=t;n={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function hy(e,t,n,s){var c=e.updateQueue;Rl=!1;var h=c.firstBaseUpdate,m=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var b=l,w=b.next;b.next=null,m===null?h=w:m.next=w,m=b;var k=e.alternate;k!==null&&(k=k.updateQueue,l=k.lastBaseUpdate,l!==m&&(l===null?k.firstBaseUpdate=w:l.next=w,k.lastBaseUpdate=b))}if(h!==null){var M=c.baseState;m=0,k=w=b=null,l=h;do{var E=l.lane,L=l.eventTime;if((s&E)===E){k!==null&&(k=k.next={eventTime:L,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=e,V=l;switch(E=t,L=n,V.tag){case 1:if(N=V.payload,typeof N=="function"){M=N.call(L,M,E);break e}M=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=V.payload,E=typeof N=="function"?N.call(L,M,E):N,E==null)break e;M=mr({},M,E);break e;case 2:Rl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,E=c.effects,E===null?c.effects=[l]:E.push(l))}else L={eventTime:L,lane:E,tag:l.tag,payload:l.payload,callback:l.callback,next:null},k===null?(w=k=L,b=M):k=k.next=L,m|=E;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;E=l,l=E.next,E.next=null,c.lastBaseUpdate=E,c.shared.pending=null}}while(1);if(k===null&&(b=M),c.baseState=b,c.firstBaseUpdate=w,c.lastBaseUpdate=k,t=c.shared.interleaved,t!==null){c=t;do m|=c.lane,c=c.next;while(c!==t)}else h===null&&(c.shared.lanes=0);du|=m,e.lanes=m,e.memoizedState=M}}function kT(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],c=s.callback;if(c!==null){if(s.callback=null,s=n,typeof c!="function")throw Error(et(191,c));c.call(s)}}}var aM=new oI.Component().refs;function Ox(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:mr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Qy={isMounted:function(e){return(e=e._reactInternals)?vu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Gi(),c=Yl(e),h=Xa(s,c);h.payload=t,n!=null&&(h.callback=n),t=Xl(e,h,c),t!==null&&(ks(t,e,c,s),Cg(t,e,c))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Gi(),c=Yl(e),h=Xa(s,c);h.tag=1,h.payload=t,n!=null&&(h.callback=n),t=Xl(e,h,c),t!==null&&(ks(t,e,c,s),Cg(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gi(),s=Yl(e),c=Xa(n,s);c.tag=2,t!=null&&(c.callback=t),t=Xl(e,c,s),t!==null&&(ks(t,e,s,n),Cg(t,e,s))}};function ET(e,t,n,s,c,h,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,h,m):t.prototype&&t.prototype.isPureReactComponent?!Yf(n,s)||!Yf(c,h):!0}function lM(e,t,n){var s=!1,c=ec,h=t.contextType;return typeof h=="object"&&h!==null?h=Ho(h):(c=ro(t)?lu:Ai.current,s=t.contextTypes,h=(s=s!=null)?Dd(e,c):ec),t=new t(n,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Qy,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=h),t}function CT(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Qy.enqueueReplaceState(t,t.state,null)}function Bx(e,t,n,s){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs=aM,Pb(e);var h=t.contextType;typeof h=="object"&&h!==null?c.context=Ho(h):(h=ro(t)?lu:Ai.current,c.context=Dd(e,h)),c.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(Ox(e,t,h,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Qy.enqueueReplaceState(c,c.state,null),hy(e,n,c,s),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Zh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(et(309));var s=n.stateNode}if(!s)throw Error(et(147,e));var c=s,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(m){var l=c.refs;l===aM&&(l=c.refs={}),m===null?delete l[h]:l[h]=m},t._stringRef=h,t)}if(typeof e!="string")throw Error(et(284));if(!n._owner)throw Error(et(290,e))}return e}function Qm(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function IT(e){var t=e._init;return t(e._payload)}function cM(e){function t($,F){if(e){var W=$.deletions;W===null?($.deletions=[F],$.flags|=16):W.push(F)}}function n($,F){if(!e)return null;for(;F!==null;)t($,F),F=F.sibling;return null}function s($,F){for($=new Map;F!==null;)F.key!==null?$.set(F.key,F):$.set(F.index,F),F=F.sibling;return $}function c($,F){return $=Kl($,F),$.index=0,$.sibling=null,$}function h($,F,W){return $.index=W,e?(W=$.alternate,W!==null?(W=W.index,W<F?($.flags|=2,F):W):($.flags|=2,F)):($.flags|=1048576,F)}function m($){return e&&$.alternate===null&&($.flags|=2),$}function l($,F,W,te){return F===null||F.tag!==6?(F=u_(W,$.mode,te),F.return=$,F):(F=c(F,W),F.return=$,F)}function b($,F,W,te){var de=W.type;return de===od?k($,F,W.props.children,te,W.key):F!==null&&(F.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Dl&&IT(de)===F.type)?(te=c(F,W.props),te.ref=Zh($,F,W),te.return=$,te):(te=Dg(W.type,W.key,W.props,null,$.mode,te),te.ref=Zh($,F,W),te.return=$,te)}function w($,F,W,te){return F===null||F.tag!==4||F.stateNode.containerInfo!==W.containerInfo||F.stateNode.implementation!==W.implementation?(F=d_(W,$.mode,te),F.return=$,F):(F=c(F,W.children||[]),F.return=$,F)}function k($,F,W,te,de){return F===null||F.tag!==7?(F=ru(W,$.mode,te,de),F.return=$,F):(F=c(F,W),F.return=$,F)}function M($,F,W){if(typeof F=="string"&&F!==""||typeof F=="number")return F=u_(""+F,$.mode,W),F.return=$,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Vm:return W=Dg(F.type,F.key,F.props,null,$.mode,W),W.ref=Zh($,null,F),W.return=$,W;case id:return F=d_(F,$.mode,W),F.return=$,F;case Dl:var te=F._init;return M($,te(F._payload),W)}if(lf(F)||jh(F))return F=ru(F,$.mode,W,null),F.return=$,F;Qm($,F)}return null}function E($,F,W,te){var de=F!==null?F.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return de!==null?null:l($,F,""+W,te);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Vm:return W.key===de?b($,F,W,te):null;case id:return W.key===de?w($,F,W,te):null;case Dl:return de=W._init,E($,F,de(W._payload),te)}if(lf(W)||jh(W))return de!==null?null:k($,F,W,te,null);Qm($,W)}return null}function L($,F,W,te,de){if(typeof te=="string"&&te!==""||typeof te=="number")return $=$.get(W)||null,l(F,$,""+te,de);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Vm:return $=$.get(te.key===null?W:te.key)||null,b(F,$,te,de);case id:return $=$.get(te.key===null?W:te.key)||null,w(F,$,te,de);case Dl:var pe=te._init;return L($,F,W,pe(te._payload),de)}if(lf(te)||jh(te))return $=$.get(W)||null,k(F,$,te,de,null);Qm(F,te)}return null}function N($,F,W,te){for(var de=null,pe=null,ce=F,oe=F=0,be=null;ce!==null&&oe<W.length;oe++){ce.index>oe?(be=ce,ce=null):be=ce.sibling;var ye=E($,ce,W[oe],te);if(ye===null){ce===null&&(ce=be);break}e&&ce&&ye.alternate===null&&t($,ce),F=h(ye,F,oe),pe===null?de=ye:pe.sibling=ye,pe=ye,ce=be}if(oe===W.length)return n($,ce),cr&&Vc($,oe),de;if(ce===null){for(;oe<W.length;oe++)ce=M($,W[oe],te),ce!==null&&(F=h(ce,F,oe),pe===null?de=ce:pe.sibling=ce,pe=ce);return cr&&Vc($,oe),de}for(ce=s($,ce);oe<W.length;oe++)be=L(ce,$,oe,W[oe],te),be!==null&&(e&&be.alternate!==null&&ce.delete(be.key===null?oe:be.key),F=h(be,F,oe),pe===null?de=be:pe.sibling=be,pe=be);return e&&ce.forEach(function(Ae){return t($,Ae)}),cr&&Vc($,oe),de}function V($,F,W,te){var de=jh(W);if(typeof de!="function")throw Error(et(150));if(W=de.call(W),W==null)throw Error(et(151));for(var pe=de=null,ce=F,oe=F=0,be=null,ye=W.next();ce!==null&&!ye.done;oe++,ye=W.next()){ce.index>oe?(be=ce,ce=null):be=ce.sibling;var Ae=E($,ce,ye.value,te);if(Ae===null){ce===null&&(ce=be);break}e&&ce&&Ae.alternate===null&&t($,ce),F=h(Ae,F,oe),pe===null?de=Ae:pe.sibling=Ae,pe=Ae,ce=be}if(ye.done)return n($,ce),cr&&Vc($,oe),de;if(ce===null){for(;!ye.done;oe++,ye=W.next())ye=M($,ye.value,te),ye!==null&&(F=h(ye,F,oe),pe===null?de=ye:pe.sibling=ye,pe=ye);return cr&&Vc($,oe),de}for(ce=s($,ce);!ye.done;oe++,ye=W.next())ye=L(ce,$,oe,ye.value,te),ye!==null&&(e&&ye.alternate!==null&&ce.delete(ye.key===null?oe:ye.key),F=h(ye,F,oe),pe===null?de=ye:pe.sibling=ye,pe=ye);return e&&ce.forEach(function(Ze){return t($,Ze)}),cr&&Vc($,oe),de}function J($,F,W,te){if(typeof W=="object"&&W!==null&&W.type===od&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case Vm:e:{for(var de=W.key,pe=F;pe!==null;){if(pe.key===de){if(de=W.type,de===od){if(pe.tag===7){n($,pe.sibling),F=c(pe,W.props.children),F.return=$,$=F;break e}}else if(pe.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Dl&&IT(de)===pe.type){n($,pe.sibling),F=c(pe,W.props),F.ref=Zh($,pe,W),F.return=$,$=F;break e}n($,pe);break}else t($,pe);pe=pe.sibling}W.type===od?(F=ru(W.props.children,$.mode,te,W.key),F.return=$,$=F):(te=Dg(W.type,W.key,W.props,null,$.mode,te),te.ref=Zh($,F,W),te.return=$,$=te)}return m($);case id:e:{for(pe=W.key;F!==null;){if(F.key===pe)if(F.tag===4&&F.stateNode.containerInfo===W.containerInfo&&F.stateNode.implementation===W.implementation){n($,F.sibling),F=c(F,W.children||[]),F.return=$,$=F;break e}else{n($,F);break}else t($,F);F=F.sibling}F=d_(W,$.mode,te),F.return=$,$=F}return m($);case Dl:return pe=W._init,J($,F,pe(W._payload),te)}if(lf(W))return N($,F,W,te);if(jh(W))return V($,F,W,te);Qm($,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,F!==null&&F.tag===6?(n($,F.sibling),F=c(F,W),F.return=$,$=F):(n($,F),F=u_(W,$.mode,te),F.return=$,$=F),m($)):n($,F)}return J}var Ld=cM(!0),uM=cM(!1),Pp={},ia=ic(Pp),ep=ic(Pp),tp=ic(Pp);function Jc(e){if(e===Pp)throw Error(et(174));return e}function zb(e,t){switch(Qn(tp,t),Qn(ep,e),Qn(ia,Pp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:mx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=mx(t,e)}ir(ia),Qn(ia,t)}function Od(){ir(ia),ir(ep),ir(tp)}function dM(e){Jc(tp.current);var t=Jc(ia.current),n=mx(t,e.type);t!==n&&(Qn(ep,e),Qn(ia,n))}function Ab(e){ep.current===e&&(ir(ia),ir(ep))}var hr=ic(0);function fy(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var i_=[];function Db(){for(var e=0;e<i_.length;e++)i_[e]._workInProgressVersionPrimary=null;i_.length=0}var Ig=ll.ReactCurrentDispatcher,o_=ll.ReactCurrentBatchConfig,uu=0,pr=null,Zr=null,ti=null,py=!1,wf=!1,np=0,UL=0;function Ei(){throw Error(et(321))}function Rb(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Cs(e[n],t[n]))return!1;return!0}function Lb(e,t,n,s,c,h){if(uu=h,pr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ig.current=e===null||e.memoizedState===null?qL:XL,e=n(s,c),wf){h=0;do{if(wf=!1,np=0,25<=h)throw Error(et(301));h+=1,ti=Zr=null,t.updateQueue=null,Ig.current=HL,e=n(s,c)}while(wf)}if(Ig.current=my,t=Zr!==null&&Zr.next!==null,uu=0,ti=Zr=pr=null,py=!1,t)throw Error(et(300));return e}function Ob(){var e=np!==0;return np=0,e}function Xs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ti===null?pr.memoizedState=ti=e:ti=ti.next=e,ti}function Yo(){if(Zr===null){var e=pr.alternate;e=e!==null?e.memoizedState:null}else e=Zr.next;var t=ti===null?pr.memoizedState:ti.next;if(t!==null)ti=t,Zr=e;else{if(e===null)throw Error(et(310));Zr=e,e={memoizedState:Zr.memoizedState,baseState:Zr.baseState,baseQueue:Zr.baseQueue,queue:Zr.queue,next:null},ti===null?pr.memoizedState=ti=e:ti=ti.next=e}return ti}function rp(e,t){return typeof t=="function"?t(e):t}function s_(e){var t=Yo(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var s=Zr,c=s.baseQueue,h=n.pending;if(h!==null){if(c!==null){var m=c.next;c.next=h.next,h.next=m}s.baseQueue=c=h,n.pending=null}if(c!==null){h=c.next,s=s.baseState;var l=m=null,b=null,w=h;do{var k=w.lane;if((uu&k)===k)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),s=w.hasEagerState?w.eagerState:e(s,w.action);else{var M={lane:k,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(l=b=M,m=s):b=b.next=M,pr.lanes|=k,du|=k}w=w.next}while(w!==null&&w!==h);b===null?m=s:b.next=l,Cs(s,t.memoizedState)||(to=!0),t.memoizedState=s,t.baseState=m,t.baseQueue=b,n.lastRenderedState=s}if(e=n.interleaved,e!==null){c=e;do h=c.lane,pr.lanes|=h,du|=h,c=c.next;while(c!==e)}else c===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function a_(e){var t=Yo(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var s=n.dispatch,c=n.pending,h=t.memoizedState;if(c!==null){n.pending=null;var m=c=c.next;do h=e(h,m.action),m=m.next;while(m!==c);Cs(h,t.memoizedState)||(to=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,s]}function hM(){}function fM(e,t){var n=pr,s=Yo(),c=t(),h=!Cs(s.memoizedState,c);if(h&&(s.memoizedState=c,to=!0),s=s.queue,Bb(gM.bind(null,n,s,e),[e]),s.getSnapshot!==t||h||ti!==null&&ti.memoizedState.tag&1){if(n.flags|=2048,ip(9,mM.bind(null,n,s,c,t),void 0,null),ni===null)throw Error(et(349));uu&30||pM(n,t,c)}return c}function pM(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=pr.updateQueue,t===null?(t={lastEffect:null,stores:null},pr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function mM(e,t,n,s){t.value=n,t.getSnapshot=s,yM(t)&&vM(e)}function gM(e,t,n){return n(function(){yM(t)&&vM(e)})}function yM(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Cs(e,n)}catch{return!0}}function vM(e){var t=rl(e,1);t!==null&&ks(t,e,1,-1)}function MT(e){var t=Xs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rp,lastRenderedState:e},t.queue=e,e=e.dispatch=ZL.bind(null,pr,e),[t.memoizedState,e]}function ip(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=pr.updateQueue,t===null?(t={lastEffect:null,stores:null},pr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function _M(){return Yo().memoizedState}function Mg(e,t,n,s){var c=Xs();pr.flags|=e,c.memoizedState=ip(1|t,n,void 0,s===void 0?null:s)}function e0(e,t,n,s){var c=Yo();s=s===void 0?null:s;var h=void 0;if(Zr!==null){var m=Zr.memoizedState;if(h=m.destroy,s!==null&&Rb(s,m.deps)){c.memoizedState=ip(t,n,h,s);return}}pr.flags|=e,c.memoizedState=ip(1|t,n,h,s)}function PT(e,t){return Mg(8390656,8,e,t)}function Bb(e,t){return e0(2048,8,e,t)}function xM(e,t){return e0(4,2,e,t)}function bM(e,t){return e0(4,4,e,t)}function wM(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function SM(e,t,n){return n=n!=null?n.concat([e]):null,e0(4,4,wM.bind(null,t,e),n)}function Fb(){}function TM(e,t){var n=Yo();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Rb(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function kM(e,t){var n=Yo();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Rb(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function EM(e,t,n){return uu&21?(Cs(n,t)||(n=MI(),pr.lanes|=n,du|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,to=!0),e.memoizedState=n)}function GL(e,t){var n=Fn;Fn=n!==0&&4>n?n:4,e(!0);var s=o_.transition;o_.transition={};try{e(!1),t()}finally{Fn=n,o_.transition=s}}function CM(){return Yo().memoizedState}function WL(e,t,n){var s=Yl(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},IM(e))MM(t,n);else if(n=oM(e,t,n,s),n!==null){var c=Gi();ks(n,e,s,c),PM(n,t,s)}}function ZL(e,t,n){var s=Yl(e),c={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(IM(e))MM(t,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var m=t.lastRenderedState,l=h(m,n);if(c.hasEagerState=!0,c.eagerState=l,Cs(l,m)){var b=t.interleaved;b===null?(c.next=c,Mb(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}n=oM(e,t,c,s),n!==null&&(c=Gi(),ks(n,e,s,c),PM(n,t,s))}}function IM(e){var t=e.alternate;return e===pr||t!==null&&t===pr}function MM(e,t){wf=py=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function PM(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,mb(e,n)}}var my={readContext:Ho,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useInsertionEffect:Ei,useLayoutEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useMutableSource:Ei,useSyncExternalStore:Ei,useId:Ei,unstable_isNewReconciler:!1},qL={readContext:Ho,useCallback:function(e,t){return Xs().memoizedState=[e,t===void 0?null:t],e},useContext:Ho,useEffect:PT,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Mg(4194308,4,wM.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mg(4,2,e,t)},useMemo:function(e,t){var n=Xs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Xs();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=WL.bind(null,pr,e),[s.memoizedState,e]},useRef:function(e){var t=Xs();return e={current:e},t.memoizedState=e},useState:MT,useDebugValue:Fb,useDeferredValue:function(e){return Xs().memoizedState=e},useTransition:function(){var e=MT(!1),t=e[0];return e=GL.bind(null,e[1]),Xs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=pr,c=Xs();if(cr){if(n===void 0)throw Error(et(407));n=n()}else{if(n=t(),ni===null)throw Error(et(349));uu&30||pM(s,t,n)}c.memoizedState=n;var h={value:n,getSnapshot:t};return c.queue=h,PT(gM.bind(null,s,h,e),[e]),s.flags|=2048,ip(9,mM.bind(null,s,h,n,t),void 0,null),n},useId:function(){var e=Xs(),t=ni.identifierPrefix;if(cr){var n=Ga,s=Ua;n=(s&~(1<<32-Ts(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=np++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=UL++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},XL={readContext:Ho,useCallback:TM,useContext:Ho,useEffect:Bb,useImperativeHandle:SM,useInsertionEffect:xM,useLayoutEffect:bM,useMemo:kM,useReducer:s_,useRef:_M,useState:function(){return s_(rp)},useDebugValue:Fb,useDeferredValue:function(e){var t=Yo();return EM(t,Zr.memoizedState,e)},useTransition:function(){var e=s_(rp)[0],t=Yo().memoizedState;return[e,t]},useMutableSource:hM,useSyncExternalStore:fM,useId:CM,unstable_isNewReconciler:!1},HL={readContext:Ho,useCallback:TM,useContext:Ho,useEffect:Bb,useImperativeHandle:SM,useInsertionEffect:xM,useLayoutEffect:bM,useMemo:kM,useReducer:a_,useRef:_M,useState:function(){return a_(rp)},useDebugValue:Fb,useDeferredValue:function(e){var t=Yo();return Zr===null?t.memoizedState=e:EM(t,Zr.memoizedState,e)},useTransition:function(){var e=a_(rp)[0],t=Yo().memoizedState;return[e,t]},useMutableSource:hM,useSyncExternalStore:fM,useId:CM,unstable_isNewReconciler:!1};function Bd(e,t){try{var n="",s=t;do n+=S3(s),s=s.return;while(s);var c=n}catch(h){c=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:c,digest:null}}function l_(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Fx(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var YL=typeof WeakMap=="function"?WeakMap:Map;function zM(e,t,n){n=Xa(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){yy||(yy=!0,Xx=s),Fx(e,t)},n}function AM(e,t,n){n=Xa(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var c=t.value;n.payload=function(){return s(c)},n.callback=function(){Fx(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(n.callback=function(){Fx(e,t),typeof s!="function"&&(Hl===null?Hl=new Set([this]):Hl.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),n}function zT(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new YL;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(n)||(c.add(n),e=u4.bind(null,e,t,n),t.then(e,e))}function AT(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function DT(e,t,n,s,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Xa(-1,1),t.tag=2,Xl(n,t,1))),n.lanes|=1),e)}var KL=ll.ReactCurrentOwner,to=!1;function Vi(e,t,n,s){t.child=e===null?uM(t,null,n,s):Ld(t,e.child,n,s)}function RT(e,t,n,s,c){n=n.render;var h=t.ref;return Sd(t,c),s=Lb(e,t,n,s,h,c),n=Ob(),e!==null&&!to?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,il(e,t,c)):(cr&&n&&Sb(t),t.flags|=1,Vi(e,t,s,c),t.child)}function LT(e,t,n,s,c){if(e===null){var h=n.type;return typeof h=="function"&&!Zb(h)&&h.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=h,DM(e,t,h,s,c)):(e=Dg(n.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&c)){var m=h.memoizedProps;if(n=n.compare,n=n!==null?n:Yf,n(m,s)&&e.ref===t.ref)return il(e,t,c)}return t.flags|=1,e=Kl(h,s),e.ref=t.ref,e.return=t,t.child=e}function DM(e,t,n,s,c){if(e!==null){var h=e.memoizedProps;if(Yf(h,s)&&e.ref===t.ref)if(to=!1,t.pendingProps=s=h,(e.lanes&c)!==0)e.flags&131072&&(to=!0);else return t.lanes=e.lanes,il(e,t,c)}return Nx(e,t,n,s,c)}function RM(e,t,n){var s=t.pendingProps,c=s.children,h=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qn(md,xo),xo|=n;else{if(!(n&1073741824))return e=h!==null?h.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Qn(md,xo),xo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=h!==null?h.baseLanes:n,Qn(md,xo),xo|=s}else h!==null?(s=h.baseLanes|n,t.memoizedState=null):s=n,Qn(md,xo),xo|=s;return Vi(e,t,c,n),t.child}function LM(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Nx(e,t,n,s,c){var h=ro(n)?lu:Ai.current;return h=Dd(t,h),Sd(t,c),n=Lb(e,t,n,s,h,c),s=Ob(),e!==null&&!to?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,il(e,t,c)):(cr&&s&&Sb(t),t.flags|=1,Vi(e,t,n,c),t.child)}function OT(e,t,n,s,c){if(ro(n)){var h=!0;ay(t)}else h=!1;if(Sd(t,c),t.stateNode===null)Pg(e,t),lM(t,n,s),Bx(t,n,s,c),s=!0;else if(e===null){var m=t.stateNode,l=t.memoizedProps;m.props=l;var b=m.context,w=n.contextType;typeof w=="object"&&w!==null?w=Ho(w):(w=ro(n)?lu:Ai.current,w=Dd(t,w));var k=n.getDerivedStateFromProps,M=typeof k=="function"||typeof m.getSnapshotBeforeUpdate=="function";M||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(l!==s||b!==w)&&CT(t,m,s,w),Rl=!1;var E=t.memoizedState;m.state=E,hy(t,s,m,c),b=t.memoizedState,l!==s||E!==b||no.current||Rl?(typeof k=="function"&&(Ox(t,n,k,s),b=t.memoizedState),(l=Rl||ET(t,n,l,s,E,b,w))?(M||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=b),m.props=s,m.state=b,m.context=w,s=l):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{m=t.stateNode,sM(e,t),l=t.memoizedProps,w=t.type===t.elementType?l:gs(t.type,l),m.props=w,M=t.pendingProps,E=m.context,b=n.contextType,typeof b=="object"&&b!==null?b=Ho(b):(b=ro(n)?lu:Ai.current,b=Dd(t,b));var L=n.getDerivedStateFromProps;(k=typeof L=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(l!==M||E!==b)&&CT(t,m,s,b),Rl=!1,E=t.memoizedState,m.state=E,hy(t,s,m,c);var N=t.memoizedState;l!==M||E!==N||no.current||Rl?(typeof L=="function"&&(Ox(t,n,L,s),N=t.memoizedState),(w=Rl||ET(t,n,w,s,E,N,b)||!1)?(k||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(s,N,b),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(s,N,b)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||l===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=N),m.props=s,m.state=N,m.context=b,s=w):(typeof m.componentDidUpdate!="function"||l===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),s=!1)}return $x(e,t,n,s,h,c)}function $x(e,t,n,s,c,h){LM(e,t);var m=(t.flags&128)!==0;if(!s&&!m)return c&&bT(t,n,!1),il(e,t,h);s=t.stateNode,KL.current=t;var l=m&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&m?(t.child=Ld(t,e.child,null,h),t.child=Ld(t,null,l,h)):Vi(e,t,l,h),t.memoizedState=s.state,c&&bT(t,n,!0),t.child}function OM(e){var t=e.stateNode;t.pendingContext?xT(e,t.pendingContext,t.pendingContext!==t.context):t.context&&xT(e,t.context,!1),zb(e,t.containerInfo)}function BT(e,t,n,s,c){return Rd(),kb(c),t.flags|=256,Vi(e,t,n,s),t.child}var jx={dehydrated:null,treeContext:null,retryLane:0};function Vx(e){return{baseLanes:e,cachePool:null,transitions:null}}function BM(e,t,n){var s=t.pendingProps,c=hr.current,h=!1,m=(t.flags&128)!==0,l;if((l=m)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Qn(hr,c&1),e===null)return Rx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(m=s.children,e=s.fallback,h?(s=t.mode,h=t.child,m={mode:"hidden",children:m},!(s&1)&&h!==null?(h.childLanes=0,h.pendingProps=m):h=r0(m,s,0,null),e=ru(e,s,n,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=Vx(n),t.memoizedState=jx,e):Nb(t,m));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return JL(e,t,m,s,l,c,n);if(h){h=s.fallback,m=t.mode,c=e.child,l=c.sibling;var b={mode:"hidden",children:s.children};return!(m&1)&&t.child!==c?(s=t.child,s.childLanes=0,s.pendingProps=b,t.deletions=null):(s=Kl(c,b),s.subtreeFlags=c.subtreeFlags&14680064),l!==null?h=Kl(l,h):(h=ru(h,m,n,null),h.flags|=2),h.return=t,s.return=t,s.sibling=h,t.child=s,s=h,h=t.child,m=e.child.memoizedState,m=m===null?Vx(n):{baseLanes:m.baseLanes|n,cachePool:null,transitions:m.transitions},h.memoizedState=m,h.childLanes=e.childLanes&~n,t.memoizedState=jx,s}return h=e.child,e=h.sibling,s=Kl(h,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Nb(e,t){return t=r0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function eg(e,t,n,s){return s!==null&&kb(s),Ld(t,e.child,null,n),e=Nb(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function JL(e,t,n,s,c,h,m){if(n)return t.flags&256?(t.flags&=-257,s=l_(Error(et(422))),eg(e,t,m,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=s.fallback,c=t.mode,s=r0({mode:"visible",children:s.children},c,0,null),h=ru(h,c,m,null),h.flags|=2,s.return=t,h.return=t,s.sibling=h,t.child=s,t.mode&1&&Ld(t,e.child,null,m),t.child.memoizedState=Vx(m),t.memoizedState=jx,h);if(!(t.mode&1))return eg(e,t,m,null);if(c.data==="$!"){if(s=c.nextSibling&&c.nextSibling.dataset,s)var l=s.dgst;return s=l,h=Error(et(419)),s=l_(h,s,void 0),eg(e,t,m,s)}if(l=(m&e.childLanes)!==0,to||l){if(s=ni,s!==null){switch(m&-m){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(s.suspendedLanes|m)?0:c,c!==0&&c!==h.retryLane&&(h.retryLane=c,rl(e,c),ks(s,e,c,-1))}return Wb(),s=l_(Error(et(421))),eg(e,t,m,s)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=d4.bind(null,e),c._reactRetry=t,null):(e=h.treeContext,wo=ql(c.nextSibling),So=t,cr=!0,_s=null,e!==null&&($o[jo++]=Ua,$o[jo++]=Ga,$o[jo++]=cu,Ua=e.id,Ga=e.overflow,cu=t),t=Nb(t,s.children),t.flags|=4096,t)}function FT(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Lx(e.return,t,n)}function c_(e,t,n,s,c){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:c}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=s,h.tail=n,h.tailMode=c)}function FM(e,t,n){var s=t.pendingProps,c=s.revealOrder,h=s.tail;if(Vi(e,t,s.children,n),s=hr.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&FT(e,n,t);else if(e.tag===19)FT(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Qn(hr,s),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&fy(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),c_(t,!1,c,n,h);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&fy(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}c_(t,!0,n,null,h);break;case"together":c_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function il(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),du|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,n=Kl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Kl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function QL(e,t,n){switch(t.tag){case 3:OM(t),Rd();break;case 5:dM(t);break;case 1:ro(t.type)&&ay(t);break;case 4:zb(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,c=t.memoizedProps.value;Qn(uy,s._currentValue),s._currentValue=c;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Qn(hr,hr.current&1),t.flags|=128,null):n&t.child.childLanes?BM(e,t,n):(Qn(hr,hr.current&1),e=il(e,t,n),e!==null?e.sibling:null);Qn(hr,hr.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return FM(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Qn(hr,hr.current),s)break;return null;case 22:case 23:return t.lanes=0,RM(e,t,n)}return il(e,t,n)}var NM,Ux,$M,jM;NM=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ux=function(){};$M=function(e,t,n,s){var c=e.memoizedProps;if(c!==s){e=t.stateNode,Jc(ia.current);var h=null;switch(n){case"input":c=dx(e,c),s=dx(e,s),h=[];break;case"select":c=mr({},c,{value:void 0}),s=mr({},s,{value:void 0}),h=[];break;case"textarea":c=px(e,c),s=px(e,s),h=[];break;default:typeof c.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=oy)}gx(n,s);var m;n=null;for(w in c)if(!s.hasOwnProperty(w)&&c.hasOwnProperty(w)&&c[w]!=null)if(w==="style"){var l=c[w];for(m in l)l.hasOwnProperty(m)&&(n||(n={}),n[m]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(Uf.hasOwnProperty(w)?h||(h=[]):(h=h||[]).push(w,null));for(w in s){var b=s[w];if(l=c!=null?c[w]:void 0,s.hasOwnProperty(w)&&b!==l&&(b!=null||l!=null))if(w==="style")if(l){for(m in l)!l.hasOwnProperty(m)||b&&b.hasOwnProperty(m)||(n||(n={}),n[m]="");for(m in b)b.hasOwnProperty(m)&&l[m]!==b[m]&&(n||(n={}),n[m]=b[m])}else n||(h||(h=[]),h.push(w,n)),n=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,l=l?l.__html:void 0,b!=null&&l!==b&&(h=h||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(h=h||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(Uf.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&tr("scroll",e),h||l===b||(h=[])):(h=h||[]).push(w,b))}n&&(h=h||[]).push("style",n);var w=h;(t.updateQueue=w)&&(t.flags|=4)}};jM=function(e,t,n,s){n!==s&&(t.flags|=4)};function qh(e,t){if(!cr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ci(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,s|=c.subtreeFlags&14680064,s|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function e4(e,t,n){var s=t.pendingProps;switch(Tb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ci(t),null;case 1:return ro(t.type)&&sy(),Ci(t),null;case 3:return s=t.stateNode,Od(),ir(no),ir(Ai),Db(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Jm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_s!==null&&(Kx(_s),_s=null))),Ux(e,t),Ci(t),null;case 5:Ab(t);var c=Jc(tp.current);if(n=t.type,e!==null&&t.stateNode!=null)$M(e,t,n,s,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(et(166));return Ci(t),null}if(e=Jc(ia.current),Jm(t)){s=t.stateNode,n=t.type;var h=t.memoizedProps;switch(s[Qs]=t,s[Qf]=h,e=(t.mode&1)!==0,n){case"dialog":tr("cancel",s),tr("close",s);break;case"iframe":case"object":case"embed":tr("load",s);break;case"video":case"audio":for(c=0;c<uf.length;c++)tr(uf[c],s);break;case"source":tr("error",s);break;case"img":case"image":case"link":tr("error",s),tr("load",s);break;case"details":tr("toggle",s);break;case"input":q2(s,h),tr("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!h.multiple},tr("invalid",s);break;case"textarea":H2(s,h),tr("invalid",s)}gx(n,h),c=null;for(var m in h)if(h.hasOwnProperty(m)){var l=h[m];m==="children"?typeof l=="string"?s.textContent!==l&&(h.suppressHydrationWarning!==!0&&Km(s.textContent,l,e),c=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(h.suppressHydrationWarning!==!0&&Km(s.textContent,l,e),c=["children",""+l]):Uf.hasOwnProperty(m)&&l!=null&&m==="onScroll"&&tr("scroll",s)}switch(n){case"input":Um(s),X2(s,h,!0);break;case"textarea":Um(s),Y2(s);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(s.onclick=oy)}s=c,t.updateQueue=s,s!==null&&(t.flags|=4)}else{m=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=pI(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=m.createElement(n,{is:s.is}):(e=m.createElement(n),n==="select"&&(m=e,s.multiple?m.multiple=!0:s.size&&(m.size=s.size))):e=m.createElementNS(e,n),e[Qs]=t,e[Qf]=s,NM(e,t,!1,!1),t.stateNode=e;e:{switch(m=yx(n,s),n){case"dialog":tr("cancel",e),tr("close",e),c=s;break;case"iframe":case"object":case"embed":tr("load",e),c=s;break;case"video":case"audio":for(c=0;c<uf.length;c++)tr(uf[c],e);c=s;break;case"source":tr("error",e),c=s;break;case"img":case"image":case"link":tr("error",e),tr("load",e),c=s;break;case"details":tr("toggle",e),c=s;break;case"input":q2(e,s),c=dx(e,s),tr("invalid",e);break;case"option":c=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},c=mr({},s,{value:void 0}),tr("invalid",e);break;case"textarea":H2(e,s),c=px(e,s),tr("invalid",e);break;default:c=s}gx(n,c),l=c;for(h in l)if(l.hasOwnProperty(h)){var b=l[h];h==="style"?yI(e,b):h==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&mI(e,b)):h==="children"?typeof b=="string"?(n!=="textarea"||b!=="")&&Gf(e,b):typeof b=="number"&&Gf(e,""+b):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Uf.hasOwnProperty(h)?b!=null&&h==="onScroll"&&tr("scroll",e):b!=null&&cb(e,h,b,m))}switch(n){case"input":Um(e),X2(e,s,!1);break;case"textarea":Um(e),Y2(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Ql(s.value));break;case"select":e.multiple=!!s.multiple,h=s.value,h!=null?_d(e,!!s.multiple,h,!1):s.defaultValue!=null&&_d(e,!!s.multiple,s.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=oy)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ci(t),null;case 6:if(e&&t.stateNode!=null)jM(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(et(166));if(n=Jc(tp.current),Jc(ia.current),Jm(t)){if(s=t.stateNode,n=t.memoizedProps,s[Qs]=t,(h=s.nodeValue!==n)&&(e=So,e!==null))switch(e.tag){case 3:Km(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Km(s.nodeValue,n,(e.mode&1)!==0)}h&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Qs]=t,t.stateNode=s}return Ci(t),null;case 13:if(ir(hr),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(cr&&wo!==null&&t.mode&1&&!(t.flags&128))iM(),Rd(),t.flags|=98560,h=!1;else if(h=Jm(t),s!==null&&s.dehydrated!==null){if(e===null){if(!h)throw Error(et(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(et(317));h[Qs]=t}else Rd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ci(t),h=!1}else _s!==null&&(Kx(_s),_s=null),h=!0;if(!h)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||hr.current&1?qr===0&&(qr=3):Wb())),t.updateQueue!==null&&(t.flags|=4),Ci(t),null);case 4:return Od(),Ux(e,t),e===null&&Kf(t.stateNode.containerInfo),Ci(t),null;case 10:return Ib(t.type._context),Ci(t),null;case 17:return ro(t.type)&&sy(),Ci(t),null;case 19:if(ir(hr),h=t.memoizedState,h===null)return Ci(t),null;if(s=(t.flags&128)!==0,m=h.rendering,m===null)if(s)qh(h,!1);else{if(qr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(m=fy(e),m!==null){for(t.flags|=128,qh(h,!1),s=m.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)h=n,e=s,h.flags&=14680066,m=h.alternate,m===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=m.childLanes,h.lanes=m.lanes,h.child=m.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=m.memoizedProps,h.memoizedState=m.memoizedState,h.updateQueue=m.updateQueue,h.type=m.type,e=m.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Qn(hr,hr.current&1|2),t.child}e=e.sibling}h.tail!==null&&Ar()>Fd&&(t.flags|=128,s=!0,qh(h,!1),t.lanes=4194304)}else{if(!s)if(e=fy(m),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),qh(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!cr)return Ci(t),null}else 2*Ar()-h.renderingStartTime>Fd&&n!==1073741824&&(t.flags|=128,s=!0,qh(h,!1),t.lanes=4194304);h.isBackwards?(m.sibling=t.child,t.child=m):(n=h.last,n!==null?n.sibling=m:t.child=m,h.last=m)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=Ar(),t.sibling=null,n=hr.current,Qn(hr,s?n&1|2:n&1),t):(Ci(t),null);case 22:case 23:return Gb(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?xo&1073741824&&(Ci(t),t.subtreeFlags&6&&(t.flags|=8192)):Ci(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function t4(e,t){switch(Tb(t),t.tag){case 1:return ro(t.type)&&sy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Od(),ir(no),ir(Ai),Db(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ab(t),null;case 13:if(ir(hr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));Rd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ir(hr),null;case 4:return Od(),null;case 10:return Ib(t.type._context),null;case 22:case 23:return Gb(),null;case 24:return null;default:return null}}var tg=!1,Pi=!1,n4=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function pd(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Tr(e,t,s)}else n.current=null}function Gx(e,t,n){try{n()}catch(s){Tr(e,t,s)}}var NT=!1;function r4(e,t){if(Cx=ny,e=WI(),wb(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var c=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{n.nodeType,h.nodeType}catch{n=null;break e}var m=0,l=-1,b=-1,w=0,k=0,M=e,E=null;t:for(;;){for(var L;M!==n||c!==0&&M.nodeType!==3||(l=m+c),M!==h||s!==0&&M.nodeType!==3||(b=m+s),M.nodeType===3&&(m+=M.nodeValue.length),(L=M.firstChild)!==null;)E=M,M=L;for(;;){if(M===e)break t;if(E===n&&++w===c&&(l=m),E===h&&++k===s&&(b=m),(L=M.nextSibling)!==null)break;M=E,E=M.parentNode}M=L}n=l===-1||b===-1?null:{start:l,end:b}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ix={focusedElem:e,selectionRange:n},ny=!1,Ct=t;Ct!==null;)if(t=Ct,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ct=e;else for(;Ct!==null;){t=Ct;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var V=N.memoizedProps,J=N.memoizedState,$=t.stateNode,F=$.getSnapshotBeforeUpdate(t.elementType===t.type?V:gs(t.type,V),J);$.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var W=t.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(te){Tr(t,t.return,te)}if(e=t.sibling,e!==null){e.return=t.return,Ct=e;break}Ct=t.return}return N=NT,NT=!1,N}function Sf(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&e)===e){var h=c.destroy;c.destroy=void 0,h!==void 0&&Gx(t,n,h)}c=c.next}while(c!==s)}}function t0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Wx(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function VM(e){var t=e.alternate;t!==null&&(e.alternate=null,VM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qs],delete t[Qf],delete t[zx],delete t[NL],delete t[$L])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function UM(e){return e.tag===5||e.tag===3||e.tag===4}function $T(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||UM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zx(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=oy));else if(s!==4&&(e=e.child,e!==null))for(Zx(e,t,n),e=e.sibling;e!==null;)Zx(e,t,n),e=e.sibling}function qx(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(qx(e,t,n),e=e.sibling;e!==null;)qx(e,t,n),e=e.sibling}var pi=null,vs=!1;function Cl(e,t,n){for(n=n.child;n!==null;)GM(e,t,n),n=n.sibling}function GM(e,t,n){if(ra&&typeof ra.onCommitFiberUnmount=="function")try{ra.onCommitFiberUnmount(qy,n)}catch{}switch(n.tag){case 5:Pi||pd(n,t);case 6:var s=pi,c=vs;pi=null,Cl(e,t,n),pi=s,vs=c,pi!==null&&(vs?(e=pi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pi.removeChild(n.stateNode));break;case 18:pi!==null&&(vs?(e=pi,n=n.stateNode,e.nodeType===8?n_(e.parentNode,n):e.nodeType===1&&n_(e,n),Xf(e)):n_(pi,n.stateNode));break;case 4:s=pi,c=vs,pi=n.stateNode.containerInfo,vs=!0,Cl(e,t,n),pi=s,vs=c;break;case 0:case 11:case 14:case 15:if(!Pi&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){c=s=s.next;do{var h=c,m=h.destroy;h=h.tag,m!==void 0&&(h&2||h&4)&&Gx(n,t,m),c=c.next}while(c!==s)}Cl(e,t,n);break;case 1:if(!Pi&&(pd(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Tr(n,t,l)}Cl(e,t,n);break;case 21:Cl(e,t,n);break;case 22:n.mode&1?(Pi=(s=Pi)||n.memoizedState!==null,Cl(e,t,n),Pi=s):Cl(e,t,n);break;default:Cl(e,t,n)}}function jT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new n4),t.forEach(function(s){var c=h4.bind(null,e,s);n.has(s)||(n.add(s),s.then(c,c))})}}function fs(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var c=n[s];try{var h=e,m=t,l=m;e:for(;l!==null;){switch(l.tag){case 5:pi=l.stateNode,vs=!1;break e;case 3:pi=l.stateNode.containerInfo,vs=!0;break e;case 4:pi=l.stateNode.containerInfo,vs=!0;break e}l=l.return}if(pi===null)throw Error(et(160));GM(h,m,c),pi=null,vs=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(w){Tr(c,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)WM(t,e),t=t.sibling}function WM(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fs(t,e),Zs(e),s&4){try{Sf(3,e,e.return),t0(3,e)}catch(V){Tr(e,e.return,V)}try{Sf(5,e,e.return)}catch(V){Tr(e,e.return,V)}}break;case 1:fs(t,e),Zs(e),s&512&&n!==null&&pd(n,n.return);break;case 5:if(fs(t,e),Zs(e),s&512&&n!==null&&pd(n,n.return),e.flags&32){var c=e.stateNode;try{Gf(c,"")}catch(V){Tr(e,e.return,V)}}if(s&4&&(c=e.stateNode,c!=null)){var h=e.memoizedProps,m=n!==null?n.memoizedProps:h,l=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{l==="input"&&h.type==="radio"&&h.name!=null&&hI(c,h),yx(l,m);var w=yx(l,h);for(m=0;m<b.length;m+=2){var k=b[m],M=b[m+1];k==="style"?yI(c,M):k==="dangerouslySetInnerHTML"?mI(c,M):k==="children"?Gf(c,M):cb(c,k,M,w)}switch(l){case"input":hx(c,h);break;case"textarea":fI(c,h);break;case"select":var E=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!h.multiple;var L=h.value;L!=null?_d(c,!!h.multiple,L,!1):E!==!!h.multiple&&(h.defaultValue!=null?_d(c,!!h.multiple,h.defaultValue,!0):_d(c,!!h.multiple,h.multiple?[]:"",!1))}c[Qf]=h}catch(V){Tr(e,e.return,V)}}break;case 6:if(fs(t,e),Zs(e),s&4){if(e.stateNode===null)throw Error(et(162));c=e.stateNode,h=e.memoizedProps;try{c.nodeValue=h}catch(V){Tr(e,e.return,V)}}break;case 3:if(fs(t,e),Zs(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Xf(t.containerInfo)}catch(V){Tr(e,e.return,V)}break;case 4:fs(t,e),Zs(e);break;case 13:fs(t,e),Zs(e),c=e.child,c.flags&8192&&(h=c.memoizedState!==null,c.stateNode.isHidden=h,!h||c.alternate!==null&&c.alternate.memoizedState!==null||(Vb=Ar())),s&4&&jT(e);break;case 22:if(k=n!==null&&n.memoizedState!==null,e.mode&1?(Pi=(w=Pi)||k,fs(t,e),Pi=w):fs(t,e),Zs(e),s&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!k&&e.mode&1)for(Ct=e,k=e.child;k!==null;){for(M=Ct=k;Ct!==null;){switch(E=Ct,L=E.child,E.tag){case 0:case 11:case 14:case 15:Sf(4,E,E.return);break;case 1:pd(E,E.return);var N=E.stateNode;if(typeof N.componentWillUnmount=="function"){s=E,n=E.return;try{t=s,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(V){Tr(s,n,V)}}break;case 5:pd(E,E.return);break;case 22:if(E.memoizedState!==null){UT(M);continue}}L!==null?(L.return=E,Ct=L):UT(M)}k=k.sibling}e:for(k=null,M=e;;){if(M.tag===5){if(k===null){k=M;try{c=M.stateNode,w?(h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(l=M.stateNode,b=M.memoizedProps.style,m=b!=null&&b.hasOwnProperty("display")?b.display:null,l.style.display=gI("display",m))}catch(V){Tr(e,e.return,V)}}}else if(M.tag===6){if(k===null)try{M.stateNode.nodeValue=w?"":M.memoizedProps}catch(V){Tr(e,e.return,V)}}else if((M.tag!==22&&M.tag!==23||M.memoizedState===null||M===e)&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===e)break e;for(;M.sibling===null;){if(M.return===null||M.return===e)break e;k===M&&(k=null),M=M.return}k===M&&(k=null),M.sibling.return=M.return,M=M.sibling}}break;case 19:fs(t,e),Zs(e),s&4&&jT(e);break;case 21:break;default:fs(t,e),Zs(e)}}function Zs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(UM(n)){var s=n;break e}n=n.return}throw Error(et(160))}switch(s.tag){case 5:var c=s.stateNode;s.flags&32&&(Gf(c,""),s.flags&=-33);var h=$T(e);qx(e,h,c);break;case 3:case 4:var m=s.stateNode.containerInfo,l=$T(e);Zx(e,l,m);break;default:throw Error(et(161))}}catch(b){Tr(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function i4(e,t,n){Ct=e,ZM(e)}function ZM(e,t,n){for(var s=(e.mode&1)!==0;Ct!==null;){var c=Ct,h=c.child;if(c.tag===22&&s){var m=c.memoizedState!==null||tg;if(!m){var l=c.alternate,b=l!==null&&l.memoizedState!==null||Pi;l=tg;var w=Pi;if(tg=m,(Pi=b)&&!w)for(Ct=c;Ct!==null;)m=Ct,b=m.child,m.tag===22&&m.memoizedState!==null?GT(c):b!==null?(b.return=m,Ct=b):GT(c);for(;h!==null;)Ct=h,ZM(h),h=h.sibling;Ct=c,tg=l,Pi=w}VT(e)}else c.subtreeFlags&8772&&h!==null?(h.return=c,Ct=h):VT(e)}}function VT(e){for(;Ct!==null;){var t=Ct;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pi||t0(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Pi)if(n===null)s.componentDidMount();else{var c=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);s.componentDidUpdate(c,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&kT(t,h,s);break;case 3:var m=t.updateQueue;if(m!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}kT(t,m,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&n.focus();break;case"img":b.src&&(n.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var k=w.memoizedState;if(k!==null){var M=k.dehydrated;M!==null&&Xf(M)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}Pi||t.flags&512&&Wx(t)}catch(E){Tr(t,t.return,E)}}if(t===e){Ct=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ct=n;break}Ct=t.return}}function UT(e){for(;Ct!==null;){var t=Ct;if(t===e){Ct=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ct=n;break}Ct=t.return}}function GT(e){for(;Ct!==null;){var t=Ct;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{t0(4,t)}catch(b){Tr(t,n,b)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var c=t.return;try{s.componentDidMount()}catch(b){Tr(t,c,b)}}var h=t.return;try{Wx(t)}catch(b){Tr(t,h,b)}break;case 5:var m=t.return;try{Wx(t)}catch(b){Tr(t,m,b)}}}catch(b){Tr(t,t.return,b)}if(t===e){Ct=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ct=l;break}Ct=t.return}}var o4=Math.ceil,gy=ll.ReactCurrentDispatcher,$b=ll.ReactCurrentOwner,Zo=ll.ReactCurrentBatchConfig,Sn=0,ni=null,Vr=null,yi=0,xo=0,md=ic(0),qr=0,op=null,du=0,n0=0,jb=0,Tf=null,Qi=null,Vb=0,Fd=1/0,Fa=null,yy=!1,Xx=null,Hl=null,ng=!1,$l=null,vy=0,kf=0,Hx=null,zg=-1,Ag=0;function Gi(){return Sn&6?Ar():zg!==-1?zg:zg=Ar()}function Yl(e){return e.mode&1?Sn&2&&yi!==0?yi&-yi:VL.transition!==null?(Ag===0&&(Ag=MI()),Ag):(e=Fn,e!==0||(e=window.event,e=e===void 0?16:OI(e.type)),e):1}function ks(e,t,n,s){if(50<kf)throw kf=0,Hx=null,Error(et(185));Cp(e,n,s),(!(Sn&2)||e!==ni)&&(e===ni&&(!(Sn&2)&&(n0|=n),qr===4&&Bl(e,yi)),io(e,s),n===1&&Sn===0&&!(t.mode&1)&&(Fd=Ar()+500,Jy&&oc()))}function io(e,t){var n=e.callbackNode;V3(e,t);var s=ty(e,e===ni?yi:0);if(s===0)n!==null&&Q2(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Q2(n),t===1)e.tag===0?jL(WT.bind(null,e)):tM(WT.bind(null,e)),BL(function(){!(Sn&6)&&oc()}),n=null;else{switch(PI(s)){case 1:n=pb;break;case 4:n=CI;break;case 16:n=ey;break;case 536870912:n=II;break;default:n=ey}n=eP(n,qM.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function qM(e,t){if(zg=-1,Ag=0,Sn&6)throw Error(et(327));var n=e.callbackNode;if(Td()&&e.callbackNode!==n)return null;var s=ty(e,e===ni?yi:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=_y(e,s);else{t=s;var c=Sn;Sn|=2;var h=HM();(ni!==e||yi!==t)&&(Fa=null,Fd=Ar()+500,nu(e,t));do try{l4();break}catch(l){XM(e,l)}while(1);Cb(),gy.current=h,Sn=c,Vr!==null?t=0:(ni=null,yi=0,t=qr)}if(t!==0){if(t===2&&(c=wx(e),c!==0&&(s=c,t=Yx(e,c))),t===1)throw n=op,nu(e,0),Bl(e,s),io(e,Ar()),n;if(t===6)Bl(e,s);else{if(c=e.current.alternate,!(s&30)&&!s4(c)&&(t=_y(e,s),t===2&&(h=wx(e),h!==0&&(s=h,t=Yx(e,h))),t===1))throw n=op,nu(e,0),Bl(e,s),io(e,Ar()),n;switch(e.finishedWork=c,e.finishedLanes=s,t){case 0:case 1:throw Error(et(345));case 2:Uc(e,Qi,Fa);break;case 3:if(Bl(e,s),(s&130023424)===s&&(t=Vb+500-Ar(),10<t)){if(ty(e,0)!==0)break;if(c=e.suspendedLanes,(c&s)!==s){Gi(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Px(Uc.bind(null,e,Qi,Fa),t);break}Uc(e,Qi,Fa);break;case 4:if(Bl(e,s),(s&4194240)===s)break;for(t=e.eventTimes,c=-1;0<s;){var m=31-Ts(s);h=1<<m,m=t[m],m>c&&(c=m),s&=~h}if(s=c,s=Ar()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*o4(s/1960))-s,10<s){e.timeoutHandle=Px(Uc.bind(null,e,Qi,Fa),s);break}Uc(e,Qi,Fa);break;case 5:Uc(e,Qi,Fa);break;default:throw Error(et(329))}}}return io(e,Ar()),e.callbackNode===n?qM.bind(null,e):null}function Yx(e,t){var n=Tf;return e.current.memoizedState.isDehydrated&&(nu(e,t).flags|=256),e=_y(e,t),e!==2&&(t=Qi,Qi=n,t!==null&&Kx(t)),e}function Kx(e){Qi===null?Qi=e:Qi.push.apply(Qi,e)}function s4(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var c=n[s],h=c.getSnapshot;c=c.value;try{if(!Cs(h(),c))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bl(e,t){for(t&=~jb,t&=~n0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ts(t),s=1<<n;e[n]=-1,t&=~s}}function WT(e){if(Sn&6)throw Error(et(327));Td();var t=ty(e,0);if(!(t&1))return io(e,Ar()),null;var n=_y(e,t);if(e.tag!==0&&n===2){var s=wx(e);s!==0&&(t=s,n=Yx(e,s))}if(n===1)throw n=op,nu(e,0),Bl(e,t),io(e,Ar()),n;if(n===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Uc(e,Qi,Fa),io(e,Ar()),null}function Ub(e,t){var n=Sn;Sn|=1;try{return e(t)}finally{Sn=n,Sn===0&&(Fd=Ar()+500,Jy&&oc())}}function hu(e){$l!==null&&$l.tag===0&&!(Sn&6)&&Td();var t=Sn;Sn|=1;var n=Zo.transition,s=Fn;try{if(Zo.transition=null,Fn=1,e)return e()}finally{Fn=s,Zo.transition=n,Sn=t,!(Sn&6)&&oc()}}function Gb(){xo=md.current,ir(md)}function nu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,OL(n)),Vr!==null)for(n=Vr.return;n!==null;){var s=n;switch(Tb(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&sy();break;case 3:Od(),ir(no),ir(Ai),Db();break;case 5:Ab(s);break;case 4:Od();break;case 13:ir(hr);break;case 19:ir(hr);break;case 10:Ib(s.type._context);break;case 22:case 23:Gb()}n=n.return}if(ni=e,Vr=e=Kl(e.current,null),yi=xo=t,qr=0,op=null,jb=n0=du=0,Qi=Tf=null,Kc!==null){for(t=0;t<Kc.length;t++)if(n=Kc[t],s=n.interleaved,s!==null){n.interleaved=null;var c=s.next,h=n.pending;if(h!==null){var m=h.next;h.next=c,s.next=m}n.pending=s}Kc=null}return e}function XM(e,t){do{var n=Vr;try{if(Cb(),Ig.current=my,py){for(var s=pr.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}py=!1}if(uu=0,ti=Zr=pr=null,wf=!1,np=0,$b.current=null,n===null||n.return===null){qr=1,op=t,Vr=null;break}e:{var h=e,m=n.return,l=n,b=t;if(t=yi,l.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,k=l,M=k.tag;if(!(k.mode&1)&&(M===0||M===11||M===15)){var E=k.alternate;E?(k.updateQueue=E.updateQueue,k.memoizedState=E.memoizedState,k.lanes=E.lanes):(k.updateQueue=null,k.memoizedState=null)}var L=AT(m);if(L!==null){L.flags&=-257,DT(L,m,l,h,t),L.mode&1&&zT(h,w,t),t=L,b=w;var N=t.updateQueue;if(N===null){var V=new Set;V.add(b),t.updateQueue=V}else N.add(b);break e}else{if(!(t&1)){zT(h,w,t),Wb();break e}b=Error(et(426))}}else if(cr&&l.mode&1){var J=AT(m);if(J!==null){!(J.flags&65536)&&(J.flags|=256),DT(J,m,l,h,t),kb(Bd(b,l));break e}}h=b=Bd(b,l),qr!==4&&(qr=2),Tf===null?Tf=[h]:Tf.push(h),h=m;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var $=zM(h,b,t);TT(h,$);break e;case 1:l=b;var F=h.type,W=h.stateNode;if(!(h.flags&128)&&(typeof F.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Hl===null||!Hl.has(W)))){h.flags|=65536,t&=-t,h.lanes|=t;var te=AM(h,l,t);TT(h,te);break e}}h=h.return}while(h!==null)}KM(n)}catch(de){t=de,Vr===n&&n!==null&&(Vr=n=n.return);continue}break}while(1)}function HM(){var e=gy.current;return gy.current=my,e===null?my:e}function Wb(){(qr===0||qr===3||qr===2)&&(qr=4),ni===null||!(du&268435455)&&!(n0&268435455)||Bl(ni,yi)}function _y(e,t){var n=Sn;Sn|=2;var s=HM();(ni!==e||yi!==t)&&(Fa=null,nu(e,t));do try{a4();break}catch(c){XM(e,c)}while(1);if(Cb(),Sn=n,gy.current=s,Vr!==null)throw Error(et(261));return ni=null,yi=0,qr}function a4(){for(;Vr!==null;)YM(Vr)}function l4(){for(;Vr!==null&&!D3();)YM(Vr)}function YM(e){var t=QM(e.alternate,e,xo);e.memoizedProps=e.pendingProps,t===null?KM(e):Vr=t,$b.current=null}function KM(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=t4(n,t),n!==null){n.flags&=32767,Vr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qr=6,Vr=null;return}}else if(n=e4(n,t,xo),n!==null){Vr=n;return}if(t=t.sibling,t!==null){Vr=t;return}Vr=t=e}while(t!==null);qr===0&&(qr=5)}function Uc(e,t,n){var s=Fn,c=Zo.transition;try{Zo.transition=null,Fn=1,c4(e,t,n,s)}finally{Zo.transition=c,Fn=s}return null}function c4(e,t,n,s){do Td();while($l!==null);if(Sn&6)throw Error(et(327));n=e.finishedWork;var c=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var h=n.lanes|n.childLanes;if(U3(e,h),e===ni&&(Vr=ni=null,yi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ng||(ng=!0,eP(ey,function(){return Td(),null})),h=(n.flags&15990)!==0,n.subtreeFlags&15990||h){h=Zo.transition,Zo.transition=null;var m=Fn;Fn=1;var l=Sn;Sn|=4,$b.current=null,r4(e,n),WM(n,e),ML(Ix),ny=!!Cx,Ix=Cx=null,e.current=n,i4(n),R3(),Sn=l,Fn=m,Zo.transition=h}else e.current=n;if(ng&&(ng=!1,$l=e,vy=c),h=e.pendingLanes,h===0&&(Hl=null),B3(n.stateNode),io(e,Ar()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)c=t[n],s(c.value,{componentStack:c.stack,digest:c.digest});if(yy)throw yy=!1,e=Xx,Xx=null,e;return vy&1&&e.tag!==0&&Td(),h=e.pendingLanes,h&1?e===Hx?kf++:(kf=0,Hx=e):kf=0,oc(),null}function Td(){if($l!==null){var e=PI(vy),t=Zo.transition,n=Fn;try{if(Zo.transition=null,Fn=16>e?16:e,$l===null)var s=!1;else{if(e=$l,$l=null,vy=0,Sn&6)throw Error(et(331));var c=Sn;for(Sn|=4,Ct=e.current;Ct!==null;){var h=Ct,m=h.child;if(Ct.flags&16){var l=h.deletions;if(l!==null){for(var b=0;b<l.length;b++){var w=l[b];for(Ct=w;Ct!==null;){var k=Ct;switch(k.tag){case 0:case 11:case 15:Sf(8,k,h)}var M=k.child;if(M!==null)M.return=k,Ct=M;else for(;Ct!==null;){k=Ct;var E=k.sibling,L=k.return;if(VM(k),k===w){Ct=null;break}if(E!==null){E.return=L,Ct=E;break}Ct=L}}}var N=h.alternate;if(N!==null){var V=N.child;if(V!==null){N.child=null;do{var J=V.sibling;V.sibling=null,V=J}while(V!==null)}}Ct=h}}if(h.subtreeFlags&2064&&m!==null)m.return=h,Ct=m;else e:for(;Ct!==null;){if(h=Ct,h.flags&2048)switch(h.tag){case 0:case 11:case 15:Sf(9,h,h.return)}var $=h.sibling;if($!==null){$.return=h.return,Ct=$;break e}Ct=h.return}}var F=e.current;for(Ct=F;Ct!==null;){m=Ct;var W=m.child;if(m.subtreeFlags&2064&&W!==null)W.return=m,Ct=W;else e:for(m=F;Ct!==null;){if(l=Ct,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:t0(9,l)}}catch(de){Tr(l,l.return,de)}if(l===m){Ct=null;break e}var te=l.sibling;if(te!==null){te.return=l.return,Ct=te;break e}Ct=l.return}}if(Sn=c,oc(),ra&&typeof ra.onPostCommitFiberRoot=="function")try{ra.onPostCommitFiberRoot(qy,e)}catch{}s=!0}return s}finally{Fn=n,Zo.transition=t}}return!1}function ZT(e,t,n){t=Bd(n,t),t=zM(e,t,1),e=Xl(e,t,1),t=Gi(),e!==null&&(Cp(e,1,t),io(e,t))}function Tr(e,t,n){if(e.tag===3)ZT(e,e,n);else for(;t!==null;){if(t.tag===3){ZT(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Hl===null||!Hl.has(s))){e=Bd(n,e),e=AM(t,e,1),t=Xl(t,e,1),e=Gi(),t!==null&&(Cp(t,1,e),io(t,e));break}}t=t.return}}function u4(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Gi(),e.pingedLanes|=e.suspendedLanes&n,ni===e&&(yi&n)===n&&(qr===4||qr===3&&(yi&130023424)===yi&&500>Ar()-Vb?nu(e,0):jb|=n),io(e,t)}function JM(e,t){t===0&&(e.mode&1?(t=Zm,Zm<<=1,!(Zm&130023424)&&(Zm=4194304)):t=1);var n=Gi();e=rl(e,t),e!==null&&(Cp(e,t,n),io(e,n))}function d4(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),JM(e,n)}function h4(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(et(314))}s!==null&&s.delete(t),JM(e,n)}var QM;QM=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||no.current)to=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return to=!1,QL(e,t,n);to=!!(e.flags&131072)}else to=!1,cr&&t.flags&1048576&&nM(t,cy,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Pg(e,t),e=t.pendingProps;var c=Dd(t,Ai.current);Sd(t,n),c=Lb(null,t,s,e,c,n);var h=Ob();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ro(s)?(h=!0,ay(t)):h=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,Pb(t),c.updater=Qy,t.stateNode=c,c._reactInternals=t,Bx(t,s,e,n),t=$x(null,t,s,!0,h,n)):(t.tag=0,cr&&h&&Sb(t),Vi(null,t,c,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Pg(e,t),e=t.pendingProps,c=s._init,s=c(s._payload),t.type=s,c=t.tag=p4(s),e=gs(s,e),c){case 0:t=Nx(null,t,s,e,n);break e;case 1:t=OT(null,t,s,e,n);break e;case 11:t=RT(null,t,s,e,n);break e;case 14:t=LT(null,t,s,gs(s.type,e),n);break e}throw Error(et(306,s,""))}return t;case 0:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:gs(s,c),Nx(e,t,s,c,n);case 1:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:gs(s,c),OT(e,t,s,c,n);case 3:e:{if(OM(t),e===null)throw Error(et(387));s=t.pendingProps,h=t.memoizedState,c=h.element,sM(e,t),hy(t,s,null,n);var m=t.memoizedState;if(s=m.element,h.isDehydrated)if(h={element:s,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){c=Bd(Error(et(423)),t),t=BT(e,t,s,n,c);break e}else if(s!==c){c=Bd(Error(et(424)),t),t=BT(e,t,s,n,c);break e}else for(wo=ql(t.stateNode.containerInfo.firstChild),So=t,cr=!0,_s=null,n=uM(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rd(),s===c){t=il(e,t,n);break e}Vi(e,t,s,n)}t=t.child}return t;case 5:return dM(t),e===null&&Rx(t),s=t.type,c=t.pendingProps,h=e!==null?e.memoizedProps:null,m=c.children,Mx(s,c)?m=null:h!==null&&Mx(s,h)&&(t.flags|=32),LM(e,t),Vi(e,t,m,n),t.child;case 6:return e===null&&Rx(t),null;case 13:return BM(e,t,n);case 4:return zb(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Ld(t,null,s,n):Vi(e,t,s,n),t.child;case 11:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:gs(s,c),RT(e,t,s,c,n);case 7:return Vi(e,t,t.pendingProps,n),t.child;case 8:return Vi(e,t,t.pendingProps.children,n),t.child;case 12:return Vi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,c=t.pendingProps,h=t.memoizedProps,m=c.value,Qn(uy,s._currentValue),s._currentValue=m,h!==null)if(Cs(h.value,m)){if(h.children===c.children&&!no.current){t=il(e,t,n);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var l=h.dependencies;if(l!==null){m=h.child;for(var b=l.firstContext;b!==null;){if(b.context===s){if(h.tag===1){b=Xa(-1,n&-n),b.tag=2;var w=h.updateQueue;if(w!==null){w=w.shared;var k=w.pending;k===null?b.next=b:(b.next=k.next,k.next=b),w.pending=b}}h.lanes|=n,b=h.alternate,b!==null&&(b.lanes|=n),Lx(h.return,n,t),l.lanes|=n;break}b=b.next}}else if(h.tag===10)m=h.type===t.type?null:h.child;else if(h.tag===18){if(m=h.return,m===null)throw Error(et(341));m.lanes|=n,l=m.alternate,l!==null&&(l.lanes|=n),Lx(m,n,t),m=h.sibling}else m=h.child;if(m!==null)m.return=h;else for(m=h;m!==null;){if(m===t){m=null;break}if(h=m.sibling,h!==null){h.return=m.return,m=h;break}m=m.return}h=m}Vi(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,s=t.pendingProps.children,Sd(t,n),c=Ho(c),s=s(c),t.flags|=1,Vi(e,t,s,n),t.child;case 14:return s=t.type,c=gs(s,t.pendingProps),c=gs(s.type,c),LT(e,t,s,c,n);case 15:return DM(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:gs(s,c),Pg(e,t),t.tag=1,ro(s)?(e=!0,ay(t)):e=!1,Sd(t,n),lM(t,s,c),Bx(t,s,c,n),$x(null,t,s,!0,e,n);case 19:return FM(e,t,n);case 22:return RM(e,t,n)}throw Error(et(156,t.tag))};function eP(e,t){return EI(e,t)}function f4(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Uo(e,t,n,s){return new f4(e,t,n,s)}function Zb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function p4(e){if(typeof e=="function")return Zb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===db)return 11;if(e===hb)return 14}return 2}function Kl(e,t){var n=e.alternate;return n===null?(n=Uo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dg(e,t,n,s,c,h){var m=2;if(s=e,typeof e=="function")Zb(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case od:return ru(n.children,c,h,t);case ub:m=8,c|=8;break;case ax:return e=Uo(12,n,t,c|2),e.elementType=ax,e.lanes=h,e;case lx:return e=Uo(13,n,t,c),e.elementType=lx,e.lanes=h,e;case cx:return e=Uo(19,n,t,c),e.elementType=cx,e.lanes=h,e;case cI:return r0(n,c,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case aI:m=10;break e;case lI:m=9;break e;case db:m=11;break e;case hb:m=14;break e;case Dl:m=16,s=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=Uo(m,n,t,c),t.elementType=e,t.type=s,t.lanes=h,t}function ru(e,t,n,s){return e=Uo(7,e,s,t),e.lanes=n,e}function r0(e,t,n,s){return e=Uo(22,e,s,t),e.elementType=cI,e.lanes=n,e.stateNode={isHidden:!1},e}function u_(e,t,n){return e=Uo(6,e,null,t),e.lanes=n,e}function d_(e,t,n){return t=Uo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function m4(e,t,n,s,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wv(0),this.expirationTimes=Wv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wv(0),this.identifierPrefix=s,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function qb(e,t,n,s,c,h,m,l,b){return e=new m4(e,t,n,l,b),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Uo(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pb(h),e}function g4(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:id,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function tP(e){if(!e)return ec;e=e._reactInternals;e:{if(vu(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ro(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var n=e.type;if(ro(n))return eM(e,n,t)}return t}function nP(e,t,n,s,c,h,m,l,b){return e=qb(n,s,!0,e,c,h,m,l,b),e.context=tP(null),n=e.current,s=Gi(),c=Yl(n),h=Xa(s,c),h.callback=t??null,Xl(n,h,c),e.current.lanes=c,Cp(e,c,s),io(e,s),e}function i0(e,t,n,s){var c=t.current,h=Gi(),m=Yl(c);return n=tP(n),t.context===null?t.context=n:t.pendingContext=n,t=Xa(h,m),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Xl(c,t,m),e!==null&&(ks(e,c,m,h),Cg(e,c,m)),m}function xy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xb(e,t){qT(e,t),(e=e.alternate)&&qT(e,t)}function y4(){return null}var rP=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hb(e){this._internalRoot=e}o0.prototype.render=Hb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));i0(e,t,null,null)};o0.prototype.unmount=Hb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hu(function(){i0(null,e,null,null)}),t[nl]=null}};function o0(e){this._internalRoot=e}o0.prototype.unstable_scheduleHydration=function(e){if(e){var t=DI();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ol.length&&t!==0&&t<Ol[n].priority;n++);Ol.splice(n,0,e),n===0&&LI(e)}};function Yb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function s0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function XT(){}function v4(e,t,n,s,c){if(c){if(typeof s=="function"){var h=s;s=function(){var w=xy(m);h.call(w)}}var m=nP(t,s,e,0,null,!1,!1,"",XT);return e._reactRootContainer=m,e[nl]=m.current,Kf(e.nodeType===8?e.parentNode:e),hu(),m}for(;c=e.lastChild;)e.removeChild(c);if(typeof s=="function"){var l=s;s=function(){var w=xy(b);l.call(w)}}var b=qb(e,0,!1,null,null,!1,!1,"",XT);return e._reactRootContainer=b,e[nl]=b.current,Kf(e.nodeType===8?e.parentNode:e),hu(function(){i0(t,b,n,s)}),b}function a0(e,t,n,s,c){var h=n._reactRootContainer;if(h){var m=h;if(typeof c=="function"){var l=c;c=function(){var b=xy(m);l.call(b)}}i0(t,m,e,c)}else m=v4(n,t,e,c,s);return xy(m)}zI=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=cf(t.pendingLanes);n!==0&&(mb(t,n|1),io(t,Ar()),!(Sn&6)&&(Fd=Ar()+500,oc()))}break;case 13:hu(function(){var s=rl(e,1);if(s!==null){var c=Gi();ks(s,e,1,c)}}),Xb(e,1)}};gb=function(e){if(e.tag===13){var t=rl(e,134217728);if(t!==null){var n=Gi();ks(t,e,134217728,n)}Xb(e,134217728)}};AI=function(e){if(e.tag===13){var t=Yl(e),n=rl(e,t);if(n!==null){var s=Gi();ks(n,e,t,s)}Xb(e,t)}};DI=function(){return Fn};RI=function(e,t){var n=Fn;try{return Fn=e,t()}finally{Fn=n}};_x=function(e,t,n){switch(t){case"input":if(hx(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var c=Ky(s);if(!c)throw Error(et(90));dI(s),hx(s,c)}}}break;case"textarea":fI(e,n);break;case"select":t=n.value,t!=null&&_d(e,!!n.multiple,t,!1)}};xI=Ub;bI=hu;var _4={usingClientEntryPoint:!1,Events:[Mp,cd,Ky,vI,_I,Ub]},Xh={findFiberByHostInstance:Yc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},x4={bundleType:Xh.bundleType,version:Xh.version,rendererPackageName:Xh.rendererPackageName,rendererConfig:Xh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ll.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=TI(e),e===null?null:e.stateNode},findFiberByHostInstance:Xh.findFiberByHostInstance||y4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rg.isDisabled&&rg.supportsFiber)try{qy=rg.inject(x4),ra=rg}catch{}}Io.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_4;Io.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yb(t))throw Error(et(200));return g4(e,t,null,n)};Io.createRoot=function(e,t){if(!Yb(e))throw Error(et(299));var n=!1,s="",c=rP;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=qb(e,1,!1,null,null,n,!1,s,c),e[nl]=t.current,Kf(e.nodeType===8?e.parentNode:e),new Hb(t)};Io.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=TI(t),e=e===null?null:e.stateNode,e};Io.flushSync=function(e){return hu(e)};Io.hydrate=function(e,t,n){if(!s0(t))throw Error(et(200));return a0(null,e,t,!0,n)};Io.hydrateRoot=function(e,t,n){if(!Yb(e))throw Error(et(405));var s=n!=null&&n.hydratedSources||null,c=!1,h="",m=rP;if(n!=null&&(n.unstable_strictMode===!0&&(c=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onRecoverableError!==void 0&&(m=n.onRecoverableError)),t=nP(t,null,e,1,n??null,c,!1,h,m),e[nl]=t.current,Kf(e),s)for(e=0;e<s.length;e++)n=s[e],c=n._getVersion,c=c(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,c]:t.mutableSourceEagerHydrationData.push(n,c);return new o0(t)};Io.render=function(e,t,n){if(!s0(t))throw Error(et(200));return a0(null,e,t,!1,n)};Io.unmountComponentAtNode=function(e){if(!s0(e))throw Error(et(40));return e._reactRootContainer?(hu(function(){a0(null,null,e,!1,function(){e._reactRootContainer=null,e[nl]=null})}),!0):!1};Io.unstable_batchedUpdates=Ub;Io.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!s0(n))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return a0(e,t,n,!1,s)};Io.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}t(),e.exports=Io})(y3);var HT=zd;Yg.createRoot=HT.createRoot,Yg.hydrateRoot=HT.hydrateRoot;function b4(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function w4(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var S4=function(){function e(n){var s=this;this._insertTag=function(c){var h;s.tags.length===0?s.insertionPoint?h=s.insertionPoint.nextSibling:s.prepend?h=s.container.firstChild:h=s.before:h=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(c,h),s.tags.push(c)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(w4(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var h=b4(c);try{h.insertRule(s,h.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){return s.parentNode&&s.parentNode.removeChild(s)}),this.tags=[],this.ctr=0},e}(),Ii="-ms-",by="-moz-",Pn="-webkit-",iP="comm",Kb="rule",Jb="decl",T4="@import",oP="@keyframes",k4=Math.abs,l0=String.fromCharCode,E4=Object.assign;function C4(e,t){return mi(e,0)^45?(((t<<2^mi(e,0))<<2^mi(e,1))<<2^mi(e,2))<<2^mi(e,3):0}function sP(e){return e.trim()}function I4(e,t){return(e=t.exec(e))?e[0]:e}function Rn(e,t,n){return e.replace(t,n)}function Jx(e,t){return e.indexOf(t)}function mi(e,t){return e.charCodeAt(t)|0}function sp(e,t,n){return e.slice(t,n)}function Ks(e){return e.length}function Qb(e){return e.length}function ig(e,t){return t.push(e),e}function M4(e,t){return e.map(t).join("")}var c0=1,Nd=1,aP=0,ao=0,jr=0,Qd="";function u0(e,t,n,s,c,h,m){return{value:e,root:t,parent:n,type:s,props:c,children:h,line:c0,column:Nd,length:m,return:""}}function Hh(e,t){return E4(u0("",null,null,"",null,null,0),e,{length:-e.length},t)}function P4(){return jr}function z4(){return jr=ao>0?mi(Qd,--ao):0,Nd--,jr===10&&(Nd=1,c0--),jr}function To(){return jr=ao<aP?mi(Qd,ao++):0,Nd++,jr===10&&(Nd=1,c0++),jr}function oa(){return mi(Qd,ao)}function Rg(){return ao}function zp(e,t){return sp(Qd,e,t)}function ap(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function lP(e){return c0=Nd=1,aP=Ks(Qd=e),ao=0,[]}function cP(e){return Qd="",e}function Lg(e){return sP(zp(ao-1,Qx(e===91?e+2:e===40?e+1:e)))}function A4(e){for(;(jr=oa())&&jr<33;)To();return ap(e)>2||ap(jr)>3?"":" "}function D4(e,t){for(;--t&&To()&&!(jr<48||jr>102||jr>57&&jr<65||jr>70&&jr<97););return zp(e,Rg()+(t<6&&oa()==32&&To()==32))}function Qx(e){for(;To();)switch(jr){case e:return ao;case 34:case 39:e!==34&&e!==39&&Qx(jr);break;case 40:e===41&&Qx(e);break;case 92:To();break}return ao}function R4(e,t){for(;To()&&e+jr!==47+10;)if(e+jr===42+42&&oa()===47)break;return"/*"+zp(t,ao-1)+"*"+l0(e===47?e:To())}function L4(e){for(;!ap(oa());)To();return zp(e,ao)}function O4(e){return cP(Og("",null,null,null,[""],e=lP(e),0,[0],e))}function Og(e,t,n,s,c,h,m,l,b){for(var w=0,k=0,M=m,E=0,L=0,N=0,V=1,J=1,$=1,F=0,W="",te=c,de=h,pe=s,ce=W;J;)switch(N=F,F=To()){case 40:if(N!=108&&mi(ce,M-1)==58){Jx(ce+=Rn(Lg(F),"&","&\f"),"&\f")!=-1&&($=-1);break}case 34:case 39:case 91:ce+=Lg(F);break;case 9:case 10:case 13:case 32:ce+=A4(N);break;case 92:ce+=D4(Rg()-1,7);continue;case 47:switch(oa()){case 42:case 47:ig(B4(R4(To(),Rg()),t,n),b);break;default:ce+="/"}break;case 123*V:l[w++]=Ks(ce)*$;case 125*V:case 59:case 0:switch(F){case 0:case 125:J=0;case 59+k:L>0&&Ks(ce)-M&&ig(L>32?KT(ce+";",s,n,M-1):KT(Rn(ce," ","")+";",s,n,M-2),b);break;case 59:ce+=";";default:if(ig(pe=YT(ce,t,n,w,k,c,l,W,te=[],de=[],M),h),F===123)if(k===0)Og(ce,t,pe,pe,te,h,M,l,de);else switch(E===99&&mi(ce,3)===110?100:E){case 100:case 109:case 115:Og(e,pe,pe,s&&ig(YT(e,pe,pe,0,0,c,l,W,c,te=[],M),de),c,de,M,l,s?te:de);break;default:Og(ce,pe,pe,pe,[""],de,0,l,de)}}w=k=L=0,V=$=1,W=ce="",M=m;break;case 58:M=1+Ks(ce),L=N;default:if(V<1){if(F==123)--V;else if(F==125&&V++==0&&z4()==125)continue}switch(ce+=l0(F),F*V){case 38:$=k>0?1:(ce+="\f",-1);break;case 44:l[w++]=(Ks(ce)-1)*$,$=1;break;case 64:oa()===45&&(ce+=Lg(To())),E=oa(),k=M=Ks(W=ce+=L4(Rg())),F++;break;case 45:N===45&&Ks(ce)==2&&(V=0)}}return h}function YT(e,t,n,s,c,h,m,l,b,w,k){for(var M=c-1,E=c===0?h:[""],L=Qb(E),N=0,V=0,J=0;N<s;++N)for(var $=0,F=sp(e,M+1,M=k4(V=m[N])),W=e;$<L;++$)(W=sP(V>0?E[$]+" "+F:Rn(F,/&\f/g,E[$])))&&(b[J++]=W);return u0(e,t,n,c===0?Kb:l,b,w,k)}function B4(e,t,n){return u0(e,t,n,iP,l0(P4()),sp(e,2,-2),0)}function KT(e,t,n,s){return u0(e,t,n,Jb,sp(e,0,s),sp(e,s+1,-1),s)}function kd(e,t){for(var n="",s=Qb(e),c=0;c<s;c++)n+=t(e[c],c,e,t)||"";return n}function F4(e,t,n,s){switch(e.type){case T4:case Jb:return e.return=e.return||e.value;case iP:return"";case oP:return e.return=e.value+"{"+kd(e.children,s)+"}";case Kb:e.value=e.props.join(",")}return Ks(n=kd(e.children,s))?e.return=e.value+"{"+n+"}":""}function N4(e){var t=Qb(e);return function(n,s,c,h){for(var m="",l=0;l<t;l++)m+=e[l](n,s,c,h)||"";return m}}function $4(e){return function(t){t.root||(t=t.return)&&e(t)}}var JT=function(t){var n=new WeakMap;return function(s){if(n.has(s))return n.get(s);var c=t(s);return n.set(s,c),c}};function uP(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var j4=function(t,n,s){for(var c=0,h=0;c=h,h=oa(),c===38&&h===12&&(n[s]=1),!ap(h);)To();return zp(t,ao)},V4=function(t,n){var s=-1,c=44;do switch(ap(c)){case 0:c===38&&oa()===12&&(n[s]=1),t[s]+=j4(ao-1,n,s);break;case 2:t[s]+=Lg(c);break;case 4:if(c===44){t[++s]=oa()===58?"&\f":"",n[s]=t[s].length;break}default:t[s]+=l0(c)}while(c=To());return t},U4=function(t,n){return cP(V4(lP(t),n))},QT=new WeakMap,G4=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,s=t.parent,c=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!QT.get(s))&&!c){QT.set(t,!0);for(var h=[],m=U4(n,h),l=s.props,b=0,w=0;b<m.length;b++)for(var k=0;k<l.length;k++,w++)t.props[w]=h[b]?m[b].replace(/&\f/g,l[k]):l[k]+" "+m[b]}}},W4=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function dP(e,t){switch(C4(e,t)){case 5103:return Pn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Pn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Pn+e+by+e+Ii+e+e;case 6828:case 4268:return Pn+e+Ii+e+e;case 6165:return Pn+e+Ii+"flex-"+e+e;case 5187:return Pn+e+Rn(e,/(\w+).+(:[^]+)/,Pn+"box-$1$2"+Ii+"flex-$1$2")+e;case 5443:return Pn+e+Ii+"flex-item-"+Rn(e,/flex-|-self/,"")+e;case 4675:return Pn+e+Ii+"flex-line-pack"+Rn(e,/align-content|flex-|-self/,"")+e;case 5548:return Pn+e+Ii+Rn(e,"shrink","negative")+e;case 5292:return Pn+e+Ii+Rn(e,"basis","preferred-size")+e;case 6060:return Pn+"box-"+Rn(e,"-grow","")+Pn+e+Ii+Rn(e,"grow","positive")+e;case 4554:return Pn+Rn(e,/([^-])(transform)/g,"$1"+Pn+"$2")+e;case 6187:return Rn(Rn(Rn(e,/(zoom-|grab)/,Pn+"$1"),/(image-set)/,Pn+"$1"),e,"")+e;case 5495:case 3959:return Rn(e,/(image-set\([^]*)/,Pn+"$1$`$1");case 4968:return Rn(Rn(e,/(.+:)(flex-)?(.*)/,Pn+"box-pack:$3"+Ii+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Pn+e+e;case 4095:case 3583:case 4068:case 2532:return Rn(e,/(.+)-inline(.+)/,Pn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ks(e)-1-t>6)switch(mi(e,t+1)){case 109:if(mi(e,t+4)!==45)break;case 102:return Rn(e,/(.+:)(.+)-([^]+)/,"$1"+Pn+"$2-$3$1"+by+(mi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Jx(e,"stretch")?dP(Rn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(mi(e,t+1)!==115)break;case 6444:switch(mi(e,Ks(e)-3-(~Jx(e,"!important")&&10))){case 107:return Rn(e,":",":"+Pn)+e;case 101:return Rn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Pn+(mi(e,14)===45?"inline-":"")+"box$3$1"+Pn+"$2$3$1"+Ii+"$2box$3")+e}break;case 5936:switch(mi(e,t+11)){case 114:return Pn+e+Ii+Rn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Pn+e+Ii+Rn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Pn+e+Ii+Rn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Pn+e+Ii+e+e}return e}var Z4=function(t,n,s,c){if(t.length>-1&&!t.return)switch(t.type){case Jb:t.return=dP(t.value,t.length);break;case oP:return kd([Hh(t,{value:Rn(t.value,"@","@"+Pn)})],c);case Kb:if(t.length)return M4(t.props,function(h){switch(I4(h,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return kd([Hh(t,{props:[Rn(h,/:(read-\w+)/,":"+by+"$1")]})],c);case"::placeholder":return kd([Hh(t,{props:[Rn(h,/:(plac\w+)/,":"+Pn+"input-$1")]}),Hh(t,{props:[Rn(h,/:(plac\w+)/,":"+by+"$1")]}),Hh(t,{props:[Rn(h,/:(plac\w+)/,Ii+"input-$1")]})],c)}return""})}},q4=[Z4],X4=function(t){var n=t.key;if(n==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(V){var J=V.getAttribute("data-emotion");J.indexOf(" ")!==-1&&(document.head.appendChild(V),V.setAttribute("data-s",""))})}var c=t.stylisPlugins||q4,h={},m,l=[];m=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(V){for(var J=V.getAttribute("data-emotion").split(" "),$=1;$<J.length;$++)h[J[$]]=!0;l.push(V)});var b,w=[G4,W4];{var k,M=[F4,$4(function(V){k.insert(V)})],E=N4(w.concat(c,M)),L=function(J){return kd(O4(J),E)};b=function(J,$,F,W){k=F,L(J?J+"{"+$.styles+"}":$.styles),W&&(N.inserted[$.name]=!0)}}var N={key:n,sheet:new S4({key:n,container:m,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:h,registered:{},insert:b};return N.sheet.hydrate(l),N};function wy(){return wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},wy.apply(this,arguments)}var e1={},H4={get exports(){return e1},set exports(e){e1=e}},Nn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ri=typeof Symbol=="function"&&Symbol.for,ew=ri?Symbol.for("react.element"):60103,tw=ri?Symbol.for("react.portal"):60106,d0=ri?Symbol.for("react.fragment"):60107,h0=ri?Symbol.for("react.strict_mode"):60108,f0=ri?Symbol.for("react.profiler"):60114,p0=ri?Symbol.for("react.provider"):60109,m0=ri?Symbol.for("react.context"):60110,nw=ri?Symbol.for("react.async_mode"):60111,g0=ri?Symbol.for("react.concurrent_mode"):60111,y0=ri?Symbol.for("react.forward_ref"):60112,v0=ri?Symbol.for("react.suspense"):60113,Y4=ri?Symbol.for("react.suspense_list"):60120,_0=ri?Symbol.for("react.memo"):60115,x0=ri?Symbol.for("react.lazy"):60116,K4=ri?Symbol.for("react.block"):60121,J4=ri?Symbol.for("react.fundamental"):60117,Q4=ri?Symbol.for("react.responder"):60118,eO=ri?Symbol.for("react.scope"):60119;function Po(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ew:switch(e=e.type,e){case nw:case g0:case d0:case f0:case h0:case v0:return e;default:switch(e=e&&e.$$typeof,e){case m0:case y0:case x0:case _0:case p0:return e;default:return t}}case tw:return t}}}function hP(e){return Po(e)===g0}Nn.AsyncMode=nw;Nn.ConcurrentMode=g0;Nn.ContextConsumer=m0;Nn.ContextProvider=p0;Nn.Element=ew;Nn.ForwardRef=y0;Nn.Fragment=d0;Nn.Lazy=x0;Nn.Memo=_0;Nn.Portal=tw;Nn.Profiler=f0;Nn.StrictMode=h0;Nn.Suspense=v0;Nn.isAsyncMode=function(e){return hP(e)||Po(e)===nw};Nn.isConcurrentMode=hP;Nn.isContextConsumer=function(e){return Po(e)===m0};Nn.isContextProvider=function(e){return Po(e)===p0};Nn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ew};Nn.isForwardRef=function(e){return Po(e)===y0};Nn.isFragment=function(e){return Po(e)===d0};Nn.isLazy=function(e){return Po(e)===x0};Nn.isMemo=function(e){return Po(e)===_0};Nn.isPortal=function(e){return Po(e)===tw};Nn.isProfiler=function(e){return Po(e)===f0};Nn.isStrictMode=function(e){return Po(e)===h0};Nn.isSuspense=function(e){return Po(e)===v0};Nn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===d0||e===g0||e===f0||e===h0||e===v0||e===Y4||typeof e=="object"&&e!==null&&(e.$$typeof===x0||e.$$typeof===_0||e.$$typeof===p0||e.$$typeof===m0||e.$$typeof===y0||e.$$typeof===J4||e.$$typeof===Q4||e.$$typeof===eO||e.$$typeof===K4)};Nn.typeOf=Po;(function(e){e.exports=Nn})(H4);var fP=e1,tO={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},nO={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},pP={};pP[fP.ForwardRef]=tO;pP[fP.Memo]=nO;var rO=!0;function iO(e,t,n){var s="";return n.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):s+=c+" "}),s}var mP=function(t,n,s){var c=t.key+"-"+n.name;(s===!1||rO===!1)&&t.registered[c]===void 0&&(t.registered[c]=n.styles)},gP=function(t,n,s){mP(t,n,s);var c=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var h=n;do t.insert(n===h?"."+c:"",h,t.sheet,!0),h=h.next;while(h!==void 0)}};function oO(e){for(var t=0,n,s=0,c=e.length;c>=4;++s,c-=4)n=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var sO={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},aO=/[A-Z]|^ms/g,lO=/_EMO_([^_]+?)_([^]*?)_EMO_/g,yP=function(t){return t.charCodeAt(1)===45},ek=function(t){return t!=null&&typeof t!="boolean"},h_=uP(function(e){return yP(e)?e:e.replace(aO,"-$&").toLowerCase()}),tk=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(lO,function(s,c,h){return Js={name:c,styles:h,next:Js},c})}return sO[t]!==1&&!yP(t)&&typeof n=="number"&&n!==0?n+"px":n};function lp(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Js={name:n.name,styles:n.styles,next:Js},n.name;if(n.styles!==void 0){var s=n.next;if(s!==void 0)for(;s!==void 0;)Js={name:s.name,styles:s.styles,next:Js},s=s.next;var c=n.styles+";";return c}return cO(e,t,n)}case"function":{if(e!==void 0){var h=Js,m=n(e);return Js=h,lp(e,t,m)}break}}if(t==null)return n;var l=t[n];return l!==void 0?l:n}function cO(e,t,n){var s="";if(Array.isArray(n))for(var c=0;c<n.length;c++)s+=lp(e,t,n[c])+";";else for(var h in n){var m=n[h];if(typeof m!="object")t!=null&&t[m]!==void 0?s+=h+"{"+t[m]+"}":ek(m)&&(s+=h_(h)+":"+tk(h,m)+";");else if(Array.isArray(m)&&typeof m[0]=="string"&&(t==null||t[m[0]]===void 0))for(var l=0;l<m.length;l++)ek(m[l])&&(s+=h_(h)+":"+tk(h,m[l])+";");else{var b=lp(e,t,m);switch(h){case"animation":case"animationName":{s+=h_(h)+":"+b+";";break}default:s+=h+"{"+b+"}"}}}return s}var nk=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Js,rw=function(t,n,s){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,h="";Js=void 0;var m=t[0];m==null||m.raw===void 0?(c=!1,h+=lp(s,n,m)):h+=m[0];for(var l=1;l<t.length;l++)h+=lp(s,n,t[l]),c&&(h+=m[l]);nk.lastIndex=0;for(var b="",w;(w=nk.exec(h))!==null;)b+="-"+w[1];var k=oO(h)+b;return{name:k,styles:h,next:Js}},uO=function(t){return t()},vP=Hg["useInsertionEffect"]?Hg["useInsertionEffect"]:!1,dO=vP||uO,rk=vP||U.useLayoutEffect,_P=U.createContext(typeof HTMLElement<"u"?X4({key:"css"}):null);_P.Provider;var xP=function(t){return U.forwardRef(function(n,s){var c=U.useContext(_P);return t(n,c,s)})},cp=U.createContext({}),hO=function(t,n){if(typeof n=="function"){var s=n(t);return s}return wy({},t,n)},fO=JT(function(e){return JT(function(t){return hO(e,t)})}),pO=function(t){var n=U.useContext(cp);return t.theme!==n&&(n=fO(n)(t.theme)),U.createElement(cp.Provider,{value:n},t.children)},b0=xP(function(e,t){var n=e.styles,s=rw([n],void 0,U.useContext(cp)),c=U.useRef();return rk(function(){var h=t.key+"-global",m=new t.sheet.constructor({key:h,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),l=!1,b=document.querySelector('style[data-emotion="'+h+" "+s.name+'"]');return t.sheet.tags.length&&(m.before=t.sheet.tags[0]),b!==null&&(l=!0,b.setAttribute("data-emotion",h),m.hydrate([b])),c.current=[m,l],function(){m.flush()}},[t]),rk(function(){var h=c.current,m=h[0],l=h[1];if(l){h[1]=!1;return}if(s.next!==void 0&&gP(t,s.next,!0),m.tags.length){var b=m.tags[m.tags.length-1].nextElementSibling;m.before=b,m.flush()}t.insert("",s,m,!1)},[t,s.name]),null});function mO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return rw(t)}var w0=function(){var t=mO.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},bP=`
  :root {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root {
      --chakra-vh: 100dvh;
    }
  }
`,gO=()=>Y.jsx(b0,{styles:bP}),yO=()=>Y.jsx(b0,{styles:`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        font-feature-settings: 'kern';
      }

      *,
      *::before,
      *::after {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
      }

      main {
        display: block;
      }

      hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      pre,
      code,
      kbd,
      samp {
        font-family: SFMono-Regular,  Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      b,
      strong {
        font-weight: bold;
      }

      small {
        font-size: 80%;
      }

      sub,
      sup {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      sub {
        bottom: -0.25em;
      }

      sup {
        top: -0.5em;
      }

      img {
        border-style: none;
      }

      button,
      input,
      optgroup,
      select,
      textarea {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      button,
      input {
        overflow: visible;
      }

      button,
      select {
        text-transform: none;
      }

      button::-moz-focus-inner,
      [type="button"]::-moz-focus-inner,
      [type="reset"]::-moz-focus-inner,
      [type="submit"]::-moz-focus-inner {
        border-style: none;
        padding: 0;
      }

      fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      progress {
        vertical-align: baseline;
      }

      textarea {
        overflow: auto;
      }

      [type="checkbox"],
      [type="radio"] {
        box-sizing: border-box;
        padding: 0;
      }

      [type="number"]::-webkit-inner-spin-button,
      [type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      input[type="number"] {
        -moz-appearance: textfield;
      }

      [type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      [type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      details {
        display: block;
      }

      summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      body,
      blockquote,
      dl,
      dd,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      hr,
      figure,
      p,
      pre {
        margin: 0;
      }

      button {
        background: transparent;
        padding: 0;
      }

      fieldset {
        margin: 0;
        padding: 0;
      }

      ol,
      ul {
        margin: 0;
        padding: 0;
      }

      textarea {
        resize: vertical;
      }

      button,
      [role="button"] {
        cursor: pointer;
      }

      button::-moz-focus-inner {
        border: 0 !important;
      }

      table {
        border-collapse: collapse;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-size: inherit;
        font-weight: inherit;
      }

      button,
      input,
      optgroup,
      select,
      textarea {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      img,
      svg,
      video,
      canvas,
      audio,
      iframe,
      embed,
      object {
        display: block;
      }

      img,
      video {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible] :focus:not([data-focus-visible-added]):not([data-focus-visible-disabled]) {
        outline: none;
        box-shadow: none;
      }

      select::-ms-expand {
        display: none;
      }

      ${bP}
    `});function vO(e,t){return`${e} returned \`undefined\`. Seems you forgot to wrap component within ${t}`}function _i(e={}){const{name:t,strict:n=!0,hookName:s="useContext",providerName:c="Provider",errorMessage:h}=e,m=U.createContext(void 0);m.displayName=t;function l(){var b;const w=U.useContext(m);if(!w&&n){const k=new Error(h??vO(s,c));throw k.name="ContextError",(b=Error.captureStackTrace)==null||b.call(Error,k,l),k}return w}return[m.Provider,l,m]}var[_O,xO]=_i({strict:!1,name:"PortalManagerContext"});function wP(e){const{children:t,zIndex:n}=e;return Y.jsx(_O,{value:{zIndex:n},children:t})}wP.displayName="PortalManager";var Ha=Boolean(globalThis==null?void 0:globalThis.document)?U.useLayoutEffect:U.useEffect,[SP,bO]=_i({strict:!1,name:"PortalContext"}),iw="chakra-portal",wO=".chakra-portal",SO=e=>Y.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),TO=e=>{const{appendToParentPortal:t,children:n}=e,[s,c]=U.useState(null),h=U.useRef(null),[,m]=U.useState({});U.useEffect(()=>m({}),[]);const l=bO(),b=xO();Ha(()=>{if(!s)return;const k=s.ownerDocument,M=t?l??k.body:k.body;if(!M)return;h.current=k.createElement("div"),h.current.className=iw,M.appendChild(h.current),m({});const E=h.current;return()=>{M.contains(E)&&M.removeChild(E)}},[s]);const w=b!=null&&b.zIndex?Y.jsx(SO,{zIndex:b==null?void 0:b.zIndex,children:n}):n;return h.current?zd.createPortal(Y.jsx(SP,{value:h.current,children:w}),h.current):Y.jsx("span",{ref:k=>{k&&c(k)}})},kO=e=>{const{children:t,containerRef:n,appendToParentPortal:s}=e,c=n.current,h=c??(typeof window<"u"?document.body:void 0),m=U.useMemo(()=>{const b=c==null?void 0:c.ownerDocument.createElement("div");return b&&(b.className=iw),b},[c]),[,l]=U.useState({});return Ha(()=>l({}),[]),Ha(()=>{if(!(!m||!h))return h.appendChild(m),()=>{h.removeChild(m)}},[m,h]),h&&m?zd.createPortal(Y.jsx(SP,{value:s?m:null,children:t}),m):null};function eh(e){const t={appendToParentPortal:!0,...e},{containerRef:n,...s}=t;return n?Y.jsx(kO,{containerRef:n,...s}):Y.jsx(TO,{...s})}eh.className=iw;eh.selector=wO;eh.displayName="Portal";function th(){const e=U.useContext(cp);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}var ow=U.createContext({});ow.displayName="ColorModeContext";function sw(){const e=U.useContext(ow);if(e===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return e}var og={light:"chakra-ui-light",dark:"chakra-ui-dark"};function EO(e={}){const{preventTransition:t=!0}=e,n={setDataset:s=>{const c=t?n.preventTransition():void 0;document.documentElement.dataset.theme=s,document.documentElement.style.colorScheme=s,c==null||c()},setClassName(s){document.body.classList.add(s?og.dark:og.light),document.body.classList.remove(s?og.light:og.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(s){var c;return((c=n.query().matches)!=null?c:s==="dark")?"dark":"light"},addListener(s){const c=n.query(),h=m=>{s(m.matches?"dark":"light")};return typeof c.addListener=="function"?c.addListener(h):c.addEventListener("change",h),()=>{typeof c.removeListener=="function"?c.removeListener(h):c.removeEventListener("change",h)}},preventTransition(){const s=document.createElement("style");return s.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(s),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(s)})})}}};return n}var CO="chakra-ui-color-mode";function IO(e){return{ssr:!1,type:"localStorage",get(t){if(!(globalThis!=null&&globalThis.document))return t;let n;try{n=localStorage.getItem(e)||t}catch{}return n||t},set(t){try{localStorage.setItem(e,t)}catch{}}}}var MO=IO(CO),ik=()=>{};function ok(e,t){return e.type==="cookie"&&e.ssr?e.get(t):t}function TP(e){const{value:t,children:n,options:{useSystemColorMode:s,initialColorMode:c,disableTransitionOnChange:h}={},colorModeManager:m=MO}=e,l=c==="dark"?"dark":"light",[b,w]=U.useState(()=>ok(m,l)),[k,M]=U.useState(()=>ok(m)),{getSystemTheme:E,setClassName:L,setDataset:N,addListener:V}=U.useMemo(()=>EO({preventTransition:h}),[h]),J=c==="system"&&!b?k:b,$=U.useCallback(te=>{const de=te==="system"?E():te;w(de),L(de==="dark"),N(de),m.set(de)},[m,E,L,N]);Ha(()=>{c==="system"&&M(E())},[]),U.useEffect(()=>{const te=m.get();if(te){$(te);return}if(c==="system"){$("system");return}$(l)},[m,l,c,$]);const F=U.useCallback(()=>{$(J==="dark"?"light":"dark")},[J,$]);U.useEffect(()=>{if(s)return V($)},[s,V,$]);const W=U.useMemo(()=>({colorMode:t??J,toggleColorMode:t?ik:F,setColorMode:t?ik:$,forced:t!==void 0}),[J,F,$,t]);return Y.jsx(ow.Provider,{value:W,children:n})}TP.displayName="ColorModeProvider";function kP(){const e=sw(),t=th();return{...e,theme:t}}function PO(e,t,n){var s,c;if(t==null)return t;const h=m=>{var l,b;return(b=(l=e.__breakpoints)==null?void 0:l.asArray)==null?void 0:b[m]};return(c=(s=h(t))!=null?s:h(n))!=null?c:n}function zO(e,t,n){var s,c;if(t==null)return t;const h=m=>{var l,b;return(b=(l=e.__cssMap)==null?void 0:l[m])==null?void 0:b.value};return(c=(s=h(t))!=null?s:h(n))!=null?c:n}function AO(e,t,n){const s=Array.isArray(t)?t:[t],c=Array.isArray(n)?n:[n];return h=>{const m=c.filter(Boolean),l=s.map((b,w)=>{var k,M;if(e==="breakpoints")return PO(h,b,(k=m[w])!=null?k:b);const E=`${e}.${b}`;return zO(h,E,(M=m[w])!=null?M:b)});return Array.isArray(t)?l:l[0]}}var Kt=(...e)=>e.filter(Boolean).join(" ");function zi(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!Array.isArray(e)}function Ss(e,...t){return DO(e)?e(...t):e}var DO=e=>typeof e=="function",dr=e=>e?"":void 0,f_=e=>e?!0:void 0;function rr(...e){return function(n){e.some(s=>(s==null||s(n),n==null?void 0:n.defaultPrevented))}}function EP(...e){return function(n){e.forEach(s=>{s==null||s(n)})}}var Sy={},RO={get exports(){return Sy},set exports(e){Sy=e}};(function(e,t){var n=200,s="__lodash_hash_undefined__",c=800,h=16,m=9007199254740991,l="[object Arguments]",b="[object Array]",w="[object AsyncFunction]",k="[object Boolean]",M="[object Date]",E="[object Error]",L="[object Function]",N="[object GeneratorFunction]",V="[object Map]",J="[object Number]",$="[object Null]",F="[object Object]",W="[object Proxy]",te="[object RegExp]",de="[object Set]",pe="[object String]",ce="[object Undefined]",oe="[object WeakMap]",be="[object ArrayBuffer]",ye="[object DataView]",Ae="[object Float32Array]",Ze="[object Float64Array]",Xe="[object Int8Array]",ot="[object Int16Array]",ft="[object Int32Array]",Ce="[object Uint8Array]",Ee="[object Uint8ClampedArray]",Me="[object Uint16Array]",We="[object Uint32Array]",Ye=/[\\^$.*+?()[\]{}|]/g,st=/^\[object .+?Constructor\]$/,Ke=/^(?:0|[1-9]\d*)$/,Je={};Je[Ae]=Je[Ze]=Je[Xe]=Je[ot]=Je[ft]=Je[Ce]=Je[Ee]=Je[Me]=Je[We]=!0,Je[l]=Je[b]=Je[be]=Je[k]=Je[ye]=Je[M]=Je[E]=Je[L]=Je[V]=Je[J]=Je[F]=Je[te]=Je[de]=Je[pe]=Je[oe]=!1;var pt=typeof sf=="object"&&sf&&sf.Object===Object&&sf,St=typeof self=="object"&&self&&self.Object===Object&&self,Ot=pt||St||Function("return this")(),Vt=t&&!t.nodeType&&t,Bt=Vt&&!0&&e&&!e.nodeType&&e,ln=Bt&&Bt.exports===Vt,Kn=ln&&pt.process,qt=function(){try{var ie=Bt&&Bt.require&&Bt.require("util").types;return ie||Kn&&Kn.binding&&Kn.binding("util")}catch{}}(),zt=qt&&qt.isTypedArray;function Ut(ie,xe,Le){switch(Le.length){case 0:return ie.call(xe);case 1:return ie.call(xe,Le[0]);case 2:return ie.call(xe,Le[0],Le[1]);case 3:return ie.call(xe,Le[0],Le[1],Le[2])}return ie.apply(xe,Le)}function kt(ie,xe){for(var Le=-1,xt=Array(ie);++Le<ie;)xt[Le]=xe(Le);return xt}function Jt(ie){return function(xe){return ie(xe)}}function $n(ie,xe){return ie==null?void 0:ie[xe]}function Tn(ie,xe){return function(Le){return ie(xe(Le))}}var gr=Array.prototype,jt=Function.prototype,jn=Object.prototype,yr=Ot["__core-js_shared__"],Er=jt.toString,yn=jn.hasOwnProperty,Vn=function(){var ie=/[^.]+$/.exec(yr&&yr.keys&&yr.keys.IE_PROTO||"");return ie?"Symbol(src)_1."+ie:""}(),Cr=jn.toString,Di=Er.call(Object),Dr=RegExp("^"+Er.call(yn).replace(Ye,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=ln?Ot.Buffer:void 0,nt=Ot.Symbol,zo=Ot.Uint8Array,xi=Ne?Ne.allocUnsafe:void 0,tn=Tn(Object.getPrototypeOf,Object),oi=Object.create,si=jn.propertyIsEnumerable,ai=gr.splice,Hr=nt?nt.toStringTag:void 0,Qe=function(){try{var ie=ma(Object,"defineProperty");return ie({},"",{}),ie}catch{}}(),Xt=Ne?Ne.isBuffer:void 0,$t=Math.max,Ir=Date.now,uo=ma(Ot,"Map"),Rt=ma(Object,"create"),ho=function(){function ie(){}return function(xe){if(!fo(xe))return{};if(oi)return oi(xe);ie.prototype=xe;var Le=new ie;return ie.prototype=void 0,Le}}();function Un(ie){var xe=-1,Le=ie==null?0:ie.length;for(this.clear();++xe<Le;){var xt=ie[xe];this.set(xt[0],xt[1])}}function Ms(){this.__data__=Rt?Rt(null):{},this.size=0}function sr(ie){var xe=this.has(ie)&&delete this.__data__[ie];return this.size-=xe?1:0,xe}function Ur(ie){var xe=this.__data__;if(Rt){var Le=xe[ie];return Le===s?void 0:Le}return yn.call(xe,ie)?xe[ie]:void 0}function pn(ie){var xe=this.__data__;return Rt?xe[ie]!==void 0:yn.call(xe,ie)}function Ps(ie,xe){var Le=this.__data__;return this.size+=this.has(ie)?0:1,Le[ie]=Rt&&xe===void 0?s:xe,this}Un.prototype.clear=Ms,Un.prototype.delete=sr,Un.prototype.get=Ur,Un.prototype.has=pn,Un.prototype.set=Ps;function vr(ie){var xe=-1,Le=ie==null?0:ie.length;for(this.clear();++xe<Le;){var xt=ie[xe];this.set(xt[0],xt[1])}}function es(){this.__data__=[],this.size=0}function ts(ie){var xe=this.__data__,Le=It(xe,ie);if(Le<0)return!1;var xt=xe.length-1;return Le==xt?xe.pop():ai.call(xe,Le,1),--this.size,!0}function zs(ie){var xe=this.__data__,Le=It(xe,ie);return Le<0?void 0:xe[Le][1]}function ns(ie){return It(this.__data__,ie)>-1}function ee(ie,xe){var Le=this.__data__,xt=It(Le,ie);return xt<0?(++this.size,Le.push([ie,xe])):Le[xt][1]=xe,this}vr.prototype.clear=es,vr.prototype.delete=ts,vr.prototype.get=zs,vr.prototype.has=ns,vr.prototype.set=ee;function D(ie){var xe=-1,Le=ie==null?0:ie.length;for(this.clear();++xe<Le;){var xt=ie[xe];this.set(xt[0],xt[1])}}function j(){this.size=0,this.__data__={hash:new Un,map:new(uo||vr),string:new Un}}function K(ie){var xe=rs(this,ie).delete(ie);return this.size-=xe?1:0,xe}function Q(ie){return rs(this,ie).get(ie)}function he(ie){return rs(this,ie).has(ie)}function ve(ie,xe){var Le=rs(this,ie),xt=Le.size;return Le.set(ie,xe),this.size+=Le.size==xt?0:1,this}D.prototype.clear=j,D.prototype.delete=K,D.prototype.get=Q,D.prototype.has=he,D.prototype.set=ve;function me(ie){var xe=this.__data__=new vr(ie);this.size=xe.size}function fe(){this.__data__=new vr,this.size=0}function _e(ie){var xe=this.__data__,Le=xe.delete(ie);return this.size=xe.size,Le}function Be(ie){return this.__data__.get(ie)}function Ge(ie){return this.__data__.has(ie)}function Oe(ie,xe){var Le=this.__data__;if(Le instanceof vr){var xt=Le.__data__;if(!uo||xt.length<n-1)return xt.push([ie,xe]),this.size=++Le.size,this;Le=this.__data__=new D(xt)}return Le.set(ie,xe),this.size=Le.size,this}me.prototype.clear=fe,me.prototype.delete=_e,me.prototype.get=Be,me.prototype.has=Ge,me.prototype.set=Oe;function vt(ie,xe){var Le=ba(ie),xt=!Le&&dl(ie),an=!Le&&!xt&&Cu(ie),mn=!Le&&!xt&&!an&&un(ie),Dn=Le||xt||an||mn,nn=Dn?kt(ie.length,String):[],Cn=nn.length;for(var ci in ie)(xe||yn.call(ie,ci))&&!(Dn&&(ci=="length"||an&&(ci=="offset"||ci=="parent")||mn&&(ci=="buffer"||ci=="byteLength"||ci=="byteOffset")||dc(ci,Cn)))&&nn.push(ci);return nn}function _t(ie,xe,Le){(Le!==void 0&&!xa(ie[xe],Le)||Le===void 0&&!(xe in ie))&&At(ie,xe,Le)}function lt(ie,xe,Le){var xt=ie[xe];(!(yn.call(ie,xe)&&xa(xt,Le))||Le===void 0&&!(xe in ie))&&At(ie,xe,Le)}function It(ie,xe){for(var Le=ie.length;Le--;)if(xa(ie[Le][0],xe))return Le;return-1}function At(ie,xe,Le){xe=="__proto__"&&Qe?Qe(ie,xe,{configurable:!0,enumerable:!0,value:Le,writable:!0}):ie[xe]=Le}var on=ih();function Lt(ie){return ie==null?ie===void 0?ce:$:Hr&&Hr in Object(ie)?Tu(ie):Rs(ie)}function Zt(ie){return os(ie)&&Lt(ie)==l}function sn(ie){if(!fo(ie)||Ds(ie))return!1;var xe=fc(ie)?Dr:st;return xe.test(_a(ie))}function vn(ie){return os(ie)&&hl(ie.length)&&!!Je[Lt(ie)]}function _r(ie){if(!fo(ie))return ul(ie);var xe=ya(ie),Le=[];for(var xt in ie)xt=="constructor"&&(xe||!yn.call(ie,xt))||Le.push(xt);return Le}function An(ie,xe,Le,xt,an){ie!==xe&&on(xe,function(mn,Dn){if(an||(an=new me),fo(mn))Rr(ie,xe,Dn,Le,An,xt,an);else{var nn=xt?xt(Ls(ie,Dn),mn,Dn+"",ie,xe,an):void 0;nn===void 0&&(nn=mn),_t(ie,Dn,nn)}},Mu)}function Rr(ie,xe,Le,xt,an,mn,Dn){var nn=Ls(ie,Le),Cn=Ls(xe,Le),ci=Dn.get(Cn);if(ci){_t(ie,Le,ci);return}var Yr=mn?mn(nn,Cn,Le+"",ie,xe,Dn):void 0,Xi=Yr===void 0;if(Xi){var gc=ba(Cn),yc=!gc&&Cu(Cn),Pu=!gc&&!yc&&un(Cn);Yr=Cn,gc||yc||Pu?ba(nn)?Yr=nn:Eu(nn)?Yr=wu(nn):yc?(Xi=!1,Yr=_n(Cn,!0)):Pu?(Xi=!1,Yr=cc(Cn,!0)):Yr=[]:pc(Cn)||dl(Cn)?(Yr=nn,dl(nn)?Yr=Iu(nn):(!fo(nn)||fc(nn))&&(Yr=ku(Cn))):Xi=!1}Xi&&(Dn.set(Cn,Yr),an(Yr,Cn,xt,mn,Dn),Dn.delete(Cn)),_t(ie,Le,Yr)}function As(ie,xe){return va(hc(ie,xe,mc),ie+"")}var pa=Qe?function(ie,xe){return Qe(ie,"toString",{configurable:!0,enumerable:!1,value:Sa(xe),writable:!0})}:mc;function _n(ie,xe){if(xe)return ie.slice();var Le=ie.length,xt=xi?xi(Le):new ie.constructor(Le);return ie.copy(xt),xt}function lc(ie){var xe=new ie.constructor(ie.byteLength);return new zo(xe).set(new zo(ie)),xe}function cc(ie,xe){var Le=xe?lc(ie.buffer):ie.buffer;return new ie.constructor(Le,ie.byteOffset,ie.length)}function wu(ie,xe){var Le=-1,xt=ie.length;for(xe||(xe=Array(xt));++Le<xt;)xe[Le]=ie[Le];return xe}function Su(ie,xe,Le,xt){var an=!Le;Le||(Le={});for(var mn=-1,Dn=xe.length;++mn<Dn;){var nn=xe[mn],Cn=xt?xt(Le[nn],ie[nn],nn,Le,ie):void 0;Cn===void 0&&(Cn=ie[nn]),an?At(Le,nn,Cn):lt(Le,nn,Cn)}return Le}function uc(ie){return As(function(xe,Le){var xt=-1,an=Le.length,mn=an>1?Le[an-1]:void 0,Dn=an>2?Le[2]:void 0;for(mn=ie.length>3&&typeof mn=="function"?(an--,mn):void 0,Dn&&is(Le[0],Le[1],Dn)&&(mn=an<3?void 0:mn,an=1),xe=Object(xe);++xt<an;){var nn=Le[xt];nn&&ie(xe,nn,xt,mn)}return xe})}function ih(ie){return function(xe,Le,xt){for(var an=-1,mn=Object(xe),Dn=xt(xe),nn=Dn.length;nn--;){var Cn=Dn[ie?nn:++an];if(Le(mn[Cn],Cn,mn)===!1)break}return xe}}function rs(ie,xe){var Le=ie.__data__;return ga(xe)?Le[typeof xe=="string"?"string":"hash"]:Le.map}function ma(ie,xe){var Le=$n(ie,xe);return sn(Le)?Le:void 0}function Tu(ie){var xe=yn.call(ie,Hr),Le=ie[Hr];try{ie[Hr]=void 0;var xt=!0}catch{}var an=Cr.call(ie);return xt&&(xe?ie[Hr]=Le:delete ie[Hr]),an}function ku(ie){return typeof ie.constructor=="function"&&!ya(ie)?ho(tn(ie)):{}}function dc(ie,xe){var Le=typeof ie;return xe=xe??m,!!xe&&(Le=="number"||Le!="symbol"&&Ke.test(ie))&&ie>-1&&ie%1==0&&ie<xe}function is(ie,xe,Le){if(!fo(Le))return!1;var xt=typeof xe;return(xt=="number"?Os(Le)&&dc(xe,Le.length):xt=="string"&&xe in Le)?xa(Le[xe],ie):!1}function ga(ie){var xe=typeof ie;return xe=="string"||xe=="number"||xe=="symbol"||xe=="boolean"?ie!=="__proto__":ie===null}function Ds(ie){return!!Vn&&Vn in ie}function ya(ie){var xe=ie&&ie.constructor,Le=typeof xe=="function"&&xe.prototype||jn;return ie===Le}function ul(ie){var xe=[];if(ie!=null)for(var Le in Object(ie))xe.push(Le);return xe}function Rs(ie){return Cr.call(ie)}function hc(ie,xe,Le){return xe=$t(xe===void 0?ie.length-1:xe,0),function(){for(var xt=arguments,an=-1,mn=$t(xt.length-xe,0),Dn=Array(mn);++an<mn;)Dn[an]=xt[xe+an];an=-1;for(var nn=Array(xe+1);++an<xe;)nn[an]=xt[an];return nn[xe]=Le(Dn),Ut(ie,this,nn)}}function Ls(ie,xe){if(!(xe==="constructor"&&typeof ie[xe]=="function")&&xe!="__proto__")return ie[xe]}var va=On(pa);function On(ie){var xe=0,Le=0;return function(){var xt=Ir(),an=h-(xt-Le);if(Le=xt,an>0){if(++xe>=c)return arguments[0]}else xe=0;return ie.apply(void 0,arguments)}}function _a(ie){if(ie!=null){try{return Er.call(ie)}catch{}try{return ie+""}catch{}}return""}function xa(ie,xe){return ie===xe||ie!==ie&&xe!==xe}var dl=Zt(function(){return arguments}())?Zt:function(ie){return os(ie)&&yn.call(ie,"callee")&&!si.call(ie,"callee")},ba=Array.isArray;function Os(ie){return ie!=null&&hl(ie.length)&&!fc(ie)}function Eu(ie){return os(ie)&&Os(ie)}var Cu=Xt||li;function fc(ie){if(!fo(ie))return!1;var xe=Lt(ie);return xe==L||xe==N||xe==w||xe==W}function hl(ie){return typeof ie=="number"&&ie>-1&&ie%1==0&&ie<=m}function fo(ie){var xe=typeof ie;return ie!=null&&(xe=="object"||xe=="function")}function os(ie){return ie!=null&&typeof ie=="object"}function pc(ie){if(!os(ie)||Lt(ie)!=F)return!1;var xe=tn(ie);if(xe===null)return!0;var Le=yn.call(xe,"constructor")&&xe.constructor;return typeof Le=="function"&&Le instanceof Le&&Er.call(Le)==Di}var un=zt?Jt(zt):vn;function Iu(ie){return Su(ie,Mu(ie))}function Mu(ie){return Os(ie)?vt(ie,!0):_r(ie)}var wa=uc(function(ie,xe,Le,xt){An(ie,xe,Le,xt)});function Sa(ie){return function(){return ie}}function mc(ie){return ie}function li(){return!1}e.exports=wa})(RO,Sy);const Go=Sy;var LO=e=>/!(important)?$/.test(e),sk=e=>typeof e=="string"?e.replace(/!(important)?$/,"").trim():e,OO=(e,t)=>n=>{const s=String(t),c=LO(s),h=sk(s),m=e?`${e}.${h}`:h;let l=zi(n.__cssMap)&&m in n.__cssMap?n.__cssMap[m].varRef:t;return l=sk(l),c?`${l} !important`:l};function aw(e){const{scale:t,transform:n,compose:s}=e;return(h,m)=>{var l;const b=OO(t,h)(m);let w=(l=n==null?void 0:n(b,m))!=null?l:b;return s&&(w=s(w,m)),w}}var sg=(...e)=>t=>e.reduce((n,s)=>s(n),t);function ps(e,t){return n=>{const s={property:n,scale:e};return s.transform=aw({scale:e,transform:t}),s}}var BO=({rtl:e,ltr:t})=>n=>n.direction==="rtl"?e:t;function FO(e){const{property:t,scale:n,transform:s}=e;return{scale:n,property:BO(t),transform:n?aw({scale:n,compose:s}):s}}var CP=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function NO(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...CP].join(" ")}function $O(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...CP].join(" ")}var jO={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},VO={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function UO(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var GO={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},t1={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},WO=new Set(Object.values(t1)),IP=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),ZO=e=>e.trim();function qO(e,t){if(e==null||IP.has(e))return e;const s=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),c=s==null?void 0:s[1],h=s==null?void 0:s[2];if(!c||!h)return e;const m=c.includes("-gradient")?c:`${c}-gradient`,[l,...b]=h.split(",").map(ZO).filter(Boolean);if((b==null?void 0:b.length)===0)return e;const w=l in t1?t1[l]:l;b.unshift(w);const k=b.map(M=>{if(WO.has(M))return M;const E=M.indexOf(" "),[L,N]=E!==-1?[M.substr(0,E),M.substr(E+1)]:[M],V=MP(N)?N:N&&N.split(" "),J=`colors.${L}`,$=J in t.__cssMap?t.__cssMap[J].varRef:L;return V?[$,...Array.isArray(V)?V:[V]].join(" "):$});return`${m}(${k.join(", ")})`}var MP=e=>typeof e=="string"&&e.includes("(")&&e.includes(")"),XO=(e,t)=>qO(e,t??{});function HO(e){return/^var\(--.+\)$/.test(e)}var YO=e=>{const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}},qs=e=>t=>`${e}(${t})`,wn={filter(e){return e!=="auto"?e:jO},backdropFilter(e){return e!=="auto"?e:VO},ring(e){return UO(wn.px(e))},bgClip(e){return e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform(e){return e==="auto"?NO():e==="auto-gpu"?$O():e},vh(e){return e==="$100vh"?"var(--chakra-vh)":e},px(e){if(e==null)return e;const{unitless:t}=YO(e);return t||typeof e=="number"?`${e}px`:e},fraction(e){return typeof e!="number"||e>1?e:`${e*100}%`},float(e,t){const n={left:"right",right:"left"};return t.direction==="rtl"?n[e]:e},degree(e){if(HO(e)||e==null)return e;const t=typeof e=="string"&&!e.endsWith("deg");return typeof e=="number"||t?`${e}deg`:e},gradient:XO,blur:qs("blur"),opacity:qs("opacity"),brightness:qs("brightness"),contrast:qs("contrast"),dropShadow:qs("drop-shadow"),grayscale:qs("grayscale"),hueRotate:qs("hue-rotate"),invert:qs("invert"),saturate:qs("saturate"),sepia:qs("sepia"),bgImage(e){return e==null||MP(e)||IP.has(e)?e:`url(${e})`},outline(e){const t=String(e)==="0"||String(e)==="none";return e!==null&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){var t;const{space:n,divide:s}=(t=GO[e])!=null?t:{},c={flexDirection:e};return n&&(c[n]=1),s&&(c[s]=1),c}},Te={borderWidths:ps("borderWidths"),borderStyles:ps("borderStyles"),colors:ps("colors"),borders:ps("borders"),radii:ps("radii",wn.px),space:ps("space",sg(wn.vh,wn.px)),spaceT:ps("space",sg(wn.vh,wn.px)),degreeT(e){return{property:e,transform:wn.degree}},prop(e,t,n){return{property:e,scale:t,...t&&{transform:aw({scale:t,transform:n})}}},propT(e,t){return{property:e,transform:t}},sizes:ps("sizes",sg(wn.vh,wn.px)),sizesT:ps("sizes",sg(wn.vh,wn.fraction)),shadows:ps("shadows"),logical:FO,blur:ps("blur",wn.blur)},Bg={background:Te.colors("background"),backgroundColor:Te.colors("backgroundColor"),backgroundImage:Te.propT("backgroundImage",wn.bgImage),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:wn.bgClip},bgSize:Te.prop("backgroundSize"),bgPosition:Te.prop("backgroundPosition"),bg:Te.colors("background"),bgColor:Te.colors("backgroundColor"),bgPos:Te.prop("backgroundPosition"),bgRepeat:Te.prop("backgroundRepeat"),bgAttachment:Te.prop("backgroundAttachment"),bgGradient:Te.propT("backgroundImage",wn.gradient),bgClip:{transform:wn.bgClip}};Object.assign(Bg,{bgImage:Bg.backgroundImage,bgImg:Bg.backgroundImage});var Mn={border:Te.borders("border"),borderWidth:Te.borderWidths("borderWidth"),borderStyle:Te.borderStyles("borderStyle"),borderColor:Te.colors("borderColor"),borderRadius:Te.radii("borderRadius"),borderTop:Te.borders("borderTop"),borderBlockStart:Te.borders("borderBlockStart"),borderTopLeftRadius:Te.radii("borderTopLeftRadius"),borderStartStartRadius:Te.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:Te.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:Te.radii("borderTopRightRadius"),borderStartEndRadius:Te.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:Te.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:Te.borders("borderRight"),borderInlineEnd:Te.borders("borderInlineEnd"),borderBottom:Te.borders("borderBottom"),borderBlockEnd:Te.borders("borderBlockEnd"),borderBottomLeftRadius:Te.radii("borderBottomLeftRadius"),borderBottomRightRadius:Te.radii("borderBottomRightRadius"),borderLeft:Te.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:Te.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:Te.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:Te.borders(["borderLeft","borderRight"]),borderInline:Te.borders("borderInline"),borderY:Te.borders(["borderTop","borderBottom"]),borderBlock:Te.borders("borderBlock"),borderTopWidth:Te.borderWidths("borderTopWidth"),borderBlockStartWidth:Te.borderWidths("borderBlockStartWidth"),borderTopColor:Te.colors("borderTopColor"),borderBlockStartColor:Te.colors("borderBlockStartColor"),borderTopStyle:Te.borderStyles("borderTopStyle"),borderBlockStartStyle:Te.borderStyles("borderBlockStartStyle"),borderBottomWidth:Te.borderWidths("borderBottomWidth"),borderBlockEndWidth:Te.borderWidths("borderBlockEndWidth"),borderBottomColor:Te.colors("borderBottomColor"),borderBlockEndColor:Te.colors("borderBlockEndColor"),borderBottomStyle:Te.borderStyles("borderBottomStyle"),borderBlockEndStyle:Te.borderStyles("borderBlockEndStyle"),borderLeftWidth:Te.borderWidths("borderLeftWidth"),borderInlineStartWidth:Te.borderWidths("borderInlineStartWidth"),borderLeftColor:Te.colors("borderLeftColor"),borderInlineStartColor:Te.colors("borderInlineStartColor"),borderLeftStyle:Te.borderStyles("borderLeftStyle"),borderInlineStartStyle:Te.borderStyles("borderInlineStartStyle"),borderRightWidth:Te.borderWidths("borderRightWidth"),borderInlineEndWidth:Te.borderWidths("borderInlineEndWidth"),borderRightColor:Te.colors("borderRightColor"),borderInlineEndColor:Te.colors("borderInlineEndColor"),borderRightStyle:Te.borderStyles("borderRightStyle"),borderInlineEndStyle:Te.borderStyles("borderInlineEndStyle"),borderTopRadius:Te.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:Te.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:Te.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:Te.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(Mn,{rounded:Mn.borderRadius,roundedTop:Mn.borderTopRadius,roundedTopLeft:Mn.borderTopLeftRadius,roundedTopRight:Mn.borderTopRightRadius,roundedTopStart:Mn.borderStartStartRadius,roundedTopEnd:Mn.borderStartEndRadius,roundedBottom:Mn.borderBottomRadius,roundedBottomLeft:Mn.borderBottomLeftRadius,roundedBottomRight:Mn.borderBottomRightRadius,roundedBottomStart:Mn.borderEndStartRadius,roundedBottomEnd:Mn.borderEndEndRadius,roundedLeft:Mn.borderLeftRadius,roundedRight:Mn.borderRightRadius,roundedStart:Mn.borderInlineStartRadius,roundedEnd:Mn.borderInlineEndRadius,borderStart:Mn.borderInlineStart,borderEnd:Mn.borderInlineEnd,borderTopStartRadius:Mn.borderStartStartRadius,borderTopEndRadius:Mn.borderStartEndRadius,borderBottomStartRadius:Mn.borderEndStartRadius,borderBottomEndRadius:Mn.borderEndEndRadius,borderStartRadius:Mn.borderInlineStartRadius,borderEndRadius:Mn.borderInlineEndRadius,borderStartWidth:Mn.borderInlineStartWidth,borderEndWidth:Mn.borderInlineEndWidth,borderStartColor:Mn.borderInlineStartColor,borderEndColor:Mn.borderInlineEndColor,borderStartStyle:Mn.borderInlineStartStyle,borderEndStyle:Mn.borderInlineEndStyle});var KO={color:Te.colors("color"),textColor:Te.colors("color"),fill:Te.colors("fill"),stroke:Te.colors("stroke")},n1={boxShadow:Te.shadows("boxShadow"),mixBlendMode:!0,blendMode:Te.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:Te.prop("backgroundBlendMode"),opacity:!0};Object.assign(n1,{shadow:n1.boxShadow});var JO={filter:{transform:wn.filter},blur:Te.blur("--chakra-blur"),brightness:Te.propT("--chakra-brightness",wn.brightness),contrast:Te.propT("--chakra-contrast",wn.contrast),hueRotate:Te.degreeT("--chakra-hue-rotate"),invert:Te.propT("--chakra-invert",wn.invert),saturate:Te.propT("--chakra-saturate",wn.saturate),dropShadow:Te.propT("--chakra-drop-shadow",wn.dropShadow),backdropFilter:{transform:wn.backdropFilter},backdropBlur:Te.blur("--chakra-backdrop-blur"),backdropBrightness:Te.propT("--chakra-backdrop-brightness",wn.brightness),backdropContrast:Te.propT("--chakra-backdrop-contrast",wn.contrast),backdropHueRotate:Te.degreeT("--chakra-backdrop-hue-rotate"),backdropInvert:Te.propT("--chakra-backdrop-invert",wn.invert),backdropSaturate:Te.propT("--chakra-backdrop-saturate",wn.saturate)},Ty={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:wn.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:Te.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:Te.space("gap"),rowGap:Te.space("rowGap"),columnGap:Te.space("columnGap")};Object.assign(Ty,{flexDir:Ty.flexDirection});var PP={gridGap:Te.space("gridGap"),gridColumnGap:Te.space("gridColumnGap"),gridRowGap:Te.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},QO={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:wn.outline},outlineOffset:!0,outlineColor:Te.colors("outlineColor")},No={width:Te.sizesT("width"),inlineSize:Te.sizesT("inlineSize"),height:Te.sizes("height"),blockSize:Te.sizes("blockSize"),boxSize:Te.sizes(["width","height"]),minWidth:Te.sizes("minWidth"),minInlineSize:Te.sizes("minInlineSize"),minHeight:Te.sizes("minHeight"),minBlockSize:Te.sizes("minBlockSize"),maxWidth:Te.sizes("maxWidth"),maxInlineSize:Te.sizes("maxInlineSize"),maxHeight:Te.sizes("maxHeight"),maxBlockSize:Te.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>{var n,s,c;return{[(c=(s=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:s.minWQuery)!=null?c:`@media screen and (min-width: ${e})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(e,t)=>{var n,s,c;return{[(c=(s=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:s.maxWQuery)!=null?c:`@media screen and (max-width: ${e})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:Te.propT("float",wn.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(No,{w:No.width,h:No.height,minW:No.minWidth,maxW:No.maxWidth,minH:No.minHeight,maxH:No.maxHeight,overscroll:No.overscrollBehavior,overscrollX:No.overscrollBehaviorX,overscrollY:No.overscrollBehaviorY});var eB={listStyleType:!0,listStylePosition:!0,listStylePos:Te.prop("listStylePosition"),listStyleImage:!0,listStyleImg:Te.prop("listStyleImage")};function tB(e,t,n,s){const c=typeof t=="string"?t.split("."):[t];for(s=0;s<c.length&&e;s+=1)e=e[c[s]];return e===void 0?n:e}var nB=e=>{const t=new WeakMap;return(s,c,h,m)=>{if(typeof s>"u")return e(s,c,h);t.has(s)||t.set(s,new Map);const l=t.get(s);if(l.has(c))return l.get(c);const b=e(s,c,h,m);return l.set(c,b),b}},rB=nB(tB),iB={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},oB={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},p_=(e,t,n)=>{const s={},c=rB(e,t,{});for(const h in c)h in n&&n[h]!=null||(s[h]=c[h]);return s},sB={srOnly:{transform(e){return e===!0?iB:e==="focusable"?oB:{}}},layerStyle:{processResult:!0,transform:(e,t,n)=>p_(t,`layerStyles.${e}`,n)},textStyle:{processResult:!0,transform:(e,t,n)=>p_(t,`textStyles.${e}`,n)},apply:{processResult:!0,transform:(e,t,n)=>p_(t,e,n)}},Ef={position:!0,pos:Te.prop("position"),zIndex:Te.prop("zIndex","zIndices"),inset:Te.spaceT("inset"),insetX:Te.spaceT(["left","right"]),insetInline:Te.spaceT("insetInline"),insetY:Te.spaceT(["top","bottom"]),insetBlock:Te.spaceT("insetBlock"),top:Te.spaceT("top"),insetBlockStart:Te.spaceT("insetBlockStart"),bottom:Te.spaceT("bottom"),insetBlockEnd:Te.spaceT("insetBlockEnd"),left:Te.spaceT("left"),insetInlineStart:Te.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:Te.spaceT("right"),insetInlineEnd:Te.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(Ef,{insetStart:Ef.insetInlineStart,insetEnd:Ef.insetInlineEnd});var aB={ring:{transform:wn.ring},ringColor:Te.colors("--chakra-ring-color"),ringOffset:Te.prop("--chakra-ring-offset-width"),ringOffsetColor:Te.colors("--chakra-ring-offset-color"),ringInset:Te.prop("--chakra-ring-inset")},nr={margin:Te.spaceT("margin"),marginTop:Te.spaceT("marginTop"),marginBlockStart:Te.spaceT("marginBlockStart"),marginRight:Te.spaceT("marginRight"),marginInlineEnd:Te.spaceT("marginInlineEnd"),marginBottom:Te.spaceT("marginBottom"),marginBlockEnd:Te.spaceT("marginBlockEnd"),marginLeft:Te.spaceT("marginLeft"),marginInlineStart:Te.spaceT("marginInlineStart"),marginX:Te.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:Te.spaceT("marginInline"),marginY:Te.spaceT(["marginTop","marginBottom"]),marginBlock:Te.spaceT("marginBlock"),padding:Te.space("padding"),paddingTop:Te.space("paddingTop"),paddingBlockStart:Te.space("paddingBlockStart"),paddingRight:Te.space("paddingRight"),paddingBottom:Te.space("paddingBottom"),paddingBlockEnd:Te.space("paddingBlockEnd"),paddingLeft:Te.space("paddingLeft"),paddingInlineStart:Te.space("paddingInlineStart"),paddingInlineEnd:Te.space("paddingInlineEnd"),paddingX:Te.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:Te.space("paddingInline"),paddingY:Te.space(["paddingTop","paddingBottom"]),paddingBlock:Te.space("paddingBlock")};Object.assign(nr,{m:nr.margin,mt:nr.marginTop,mr:nr.marginRight,me:nr.marginInlineEnd,marginEnd:nr.marginInlineEnd,mb:nr.marginBottom,ml:nr.marginLeft,ms:nr.marginInlineStart,marginStart:nr.marginInlineStart,mx:nr.marginX,my:nr.marginY,p:nr.padding,pt:nr.paddingTop,py:nr.paddingY,px:nr.paddingX,pb:nr.paddingBottom,pl:nr.paddingLeft,ps:nr.paddingInlineStart,paddingStart:nr.paddingInlineStart,pr:nr.paddingRight,pe:nr.paddingInlineEnd,paddingEnd:nr.paddingInlineEnd});var lB={textDecorationColor:Te.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:Te.shadows("textShadow")},cB={clipPath:!0,transform:Te.propT("transform",wn.transform),transformOrigin:!0,translateX:Te.spaceT("--chakra-translate-x"),translateY:Te.spaceT("--chakra-translate-y"),skewX:Te.degreeT("--chakra-skew-x"),skewY:Te.degreeT("--chakra-skew-y"),scaleX:Te.prop("--chakra-scale-x"),scaleY:Te.prop("--chakra-scale-y"),scale:Te.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:Te.degreeT("--chakra-rotate")},uB={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:Te.prop("transitionDuration","transition.duration"),transitionProperty:Te.prop("transitionProperty","transition.property"),transitionTimingFunction:Te.prop("transitionTimingFunction","transition.easing")},dB={fontFamily:Te.prop("fontFamily","fonts"),fontSize:Te.prop("fontSize","fontSizes",wn.px),fontWeight:Te.prop("fontWeight","fontWeights"),lineHeight:Te.prop("lineHeight","lineHeights"),letterSpacing:Te.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(e===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},hB={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:Te.spaceT("scrollMargin"),scrollMarginTop:Te.spaceT("scrollMarginTop"),scrollMarginBottom:Te.spaceT("scrollMarginBottom"),scrollMarginLeft:Te.spaceT("scrollMarginLeft"),scrollMarginRight:Te.spaceT("scrollMarginRight"),scrollMarginX:Te.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:Te.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:Te.spaceT("scrollPadding"),scrollPaddingTop:Te.spaceT("scrollPaddingTop"),scrollPaddingBottom:Te.spaceT("scrollPaddingBottom"),scrollPaddingLeft:Te.spaceT("scrollPaddingLeft"),scrollPaddingRight:Te.spaceT("scrollPaddingRight"),scrollPaddingX:Te.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:Te.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function zP(e){return zi(e)&&e.reference?e.reference:String(e)}var S0=(e,...t)=>t.map(zP).join(` ${e} `).replace(/calc/g,""),ak=(...e)=>`calc(${S0("+",...e)})`,lk=(...e)=>`calc(${S0("-",...e)})`,r1=(...e)=>`calc(${S0("*",...e)})`,ck=(...e)=>`calc(${S0("/",...e)})`,uk=e=>{const t=zP(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:r1(t,-1)},Xc=Object.assign(e=>({add:(...t)=>Xc(ak(e,...t)),subtract:(...t)=>Xc(lk(e,...t)),multiply:(...t)=>Xc(r1(e,...t)),divide:(...t)=>Xc(ck(e,...t)),negate:()=>Xc(uk(e)),toString:()=>e.toString()}),{add:ak,subtract:lk,multiply:r1,divide:ck,negate:uk});function fB(e,t="-"){return e.replace(/\s+/g,t)}function pB(e){const t=fB(e.toString());return gB(mB(t))}function mB(e){return e.includes("\\.")?e:!Number.isInteger(parseFloat(e.toString()))?e.replace(".","\\."):e}function gB(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function yB(e,t=""){return[t,e].filter(Boolean).join("-")}function vB(e,t){return`var(${e}${t?`, ${t}`:""})`}function _B(e,t=""){return pB(`--${yB(e,t)}`)}function En(e,t,n){const s=_B(e,n);return{variable:s,reference:vB(s,t)}}function xB(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}function bB(e){const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}}function i1(e){if(e==null)return e;const{unitless:t}=bB(e);return t||typeof e=="number"?`${e}px`:e}var AP=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,lw=e=>Object.fromEntries(Object.entries(e).sort(AP));function dk(e){const t=lw(e);return Object.assign(Object.values(t),t)}function wB(e){const t=Object.keys(lw(e));return new Set(t)}function hk(e){var t;if(!e)return e;e=(t=i1(e))!=null?t:e;const n=-.02;return typeof e=="number"?`${e+n}`:e.replace(/(\d+\.?\d*)/u,s=>`${parseFloat(s)+n}`)}function df(e,t){const n=["@media screen"];return e&&n.push("and",`(min-width: ${i1(e)})`),t&&n.push("and",`(max-width: ${i1(t)})`),n.join(" ")}function SB(e){var t;if(!e)return null;e.base=(t=e.base)!=null?t:"0px";const n=dk(e),s=Object.entries(e).sort(AP).map(([m,l],b,w)=>{var k;let[,M]=(k=w[b+1])!=null?k:[];return M=parseFloat(M)>0?hk(M):void 0,{_minW:hk(l),breakpoint:m,minW:l,maxW:M,maxWQuery:df(null,M),minWQuery:df(l),minMaxQuery:df(l,M)}}),c=wB(e),h=Array.from(c.values());return{keys:c,normalized:n,isResponsive(m){const l=Object.keys(m);return l.length>0&&l.every(b=>c.has(b))},asObject:lw(e),asArray:dk(e),details:s,get(m){return s.find(l=>l.breakpoint===m)},media:[null,...n.map(m=>df(m)).slice(1)],toArrayValue(m){if(!zi(m))throw new Error("toArrayValue: value must be an object");const l=h.map(b=>{var w;return(w=m[b])!=null?w:null});for(;xB(l)===null;)l.pop();return l},toObjectValue(m){if(!Array.isArray(m))throw new Error("toObjectValue: value must be an array");return m.reduce((l,b,w)=>{const k=h[w];return k!=null&&b!=null&&(l[k]=b),l},{})}}}var fi={hover:(e,t)=>`${e}:hover ${t}, ${e}[data-hover] ${t}`,focus:(e,t)=>`${e}:focus ${t}, ${e}[data-focus] ${t}`,focusVisible:(e,t)=>`${e}:focus-visible ${t}`,focusWithin:(e,t)=>`${e}:focus-within ${t}`,active:(e,t)=>`${e}:active ${t}, ${e}[data-active] ${t}`,disabled:(e,t)=>`${e}:disabled ${t}, ${e}[data-disabled] ${t}`,invalid:(e,t)=>`${e}:invalid ${t}, ${e}[data-invalid] ${t}`,checked:(e,t)=>`${e}:checked ${t}, ${e}[data-checked] ${t}`,indeterminate:(e,t)=>`${e}:indeterminate ${t}, ${e}[aria-checked=mixed] ${t}, ${e}[data-indeterminate] ${t}`,readOnly:(e,t)=>`${e}:read-only ${t}, ${e}[readonly] ${t}, ${e}[data-read-only] ${t}`,expanded:(e,t)=>`${e}:read-only ${t}, ${e}[aria-expanded=true] ${t}, ${e}[data-expanded] ${t}`,placeholderShown:(e,t)=>`${e}:placeholder-shown ${t}`},Il=e=>DP(t=>e(t,"&"),"[role=group]","[data-group]",".group"),Ba=e=>DP(t=>e(t,"~ &"),"[data-peer]",".peer"),DP=(e,...t)=>t.map(e).join(", "),T0={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:Il(fi.hover),_peerHover:Ba(fi.hover),_groupFocus:Il(fi.focus),_peerFocus:Ba(fi.focus),_groupFocusVisible:Il(fi.focusVisible),_peerFocusVisible:Ba(fi.focusVisible),_groupActive:Il(fi.active),_peerActive:Ba(fi.active),_groupDisabled:Il(fi.disabled),_peerDisabled:Ba(fi.disabled),_groupInvalid:Il(fi.invalid),_peerInvalid:Ba(fi.invalid),_groupChecked:Il(fi.checked),_peerChecked:Ba(fi.checked),_groupFocusWithin:Il(fi.focusWithin),_peerFocusWithin:Ba(fi.focusWithin),_peerPlaceholderShown:Ba(fi.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]"},TB=Object.keys(T0);function fk(e,t){return En(String(e).replace(/\./g,"-"),void 0,t)}function kB(e,t){let n={};const s={};for(const[c,h]of Object.entries(e)){const{isSemantic:m,value:l}=h,{variable:b,reference:w}=fk(c,t==null?void 0:t.cssVarPrefix);if(!m){if(c.startsWith("space")){const E=c.split("."),[L,...N]=E,V=`${L}.-${N.join(".")}`,J=Xc.negate(l),$=Xc.negate(w);s[V]={value:J,var:b,varRef:$}}n[b]=l,s[c]={value:l,var:b,varRef:w};continue}const k=E=>{const N=[String(c).split(".")[0],E].join(".");if(!e[N])return E;const{reference:J}=fk(N,t==null?void 0:t.cssVarPrefix);return J},M=zi(l)?l:{default:l};n=Go(n,Object.entries(M).reduce((E,[L,N])=>{var V,J;const $=k(N);if(L==="default")return E[b]=$,E;const F=(J=(V=T0)==null?void 0:V[L])!=null?J:L;return E[F]={[b]:$},E},{})),s[c]={value:w,var:b,varRef:w}}return{cssVars:n,cssMap:s}}function EB(e,t=[]){const n=Object.assign({},e);for(const s of t)s in n&&delete n[s];return n}function CB(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}var IB=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function MB(e){return CB(e,IB)}function PB(e){return e.semanticTokens}function zB(e){const{__cssMap:t,__cssVars:n,__breakpoints:s,...c}=e;return c}function AB({tokens:e,semanticTokens:t}){var n,s;const c=Object.entries((n=o1(e))!=null?n:{}).map(([m,l])=>[m,{isSemantic:!1,value:l}]),h=Object.entries((s=o1(t,1))!=null?s:{}).map(([m,l])=>[m,{isSemantic:!0,value:l}]);return Object.fromEntries([...c,...h])}function o1(e,t=1/0){return!zi(e)&&!Array.isArray(e)||!t?e:Object.entries(e).reduce((n,[s,c])=>(zi(c)||Array.isArray(c)?Object.entries(o1(c,t-1)).forEach(([h,m])=>{n[`${s}.${h}`]=m}):n[s]=c,n),{})}function DB(e){var t;const n=zB(e),s=MB(n),c=PB(n),h=AB({tokens:s,semanticTokens:c}),m=(t=n.config)==null?void 0:t.cssVarPrefix,{cssMap:l,cssVars:b}=kB(h,{cssVarPrefix:m});return Object.assign(n,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...b},__cssMap:l,__breakpoints:SB(n.breakpoints)}),n}var cw=Go({},Bg,Mn,KO,Ty,No,JO,aB,QO,PP,sB,Ef,n1,nr,hB,dB,lB,cB,eB,uB);Object.assign({},nr,No,Ty,PP,Ef);var RB=[...Object.keys(cw),...TB],LB={...cw,...T0},OB=e=>e in LB,BB=e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:n,toArrayValue:s,media:c}=t.__breakpoints,h={};for(const m in e){let l=Ss(e[m],t);if(l==null)continue;if(l=zi(l)&&n(l)?s(l):l,!Array.isArray(l)){h[m]=l;continue}const b=l.slice(0,c.length).length;for(let w=0;w<b;w+=1){const k=c==null?void 0:c[w];if(!k){h[m]=l[w];continue}h[k]=h[k]||{},l[w]!=null&&(h[k][m]=l[w])}}return h};function FB(e){const t=[];let n="",s=!1;for(let c=0;c<e.length;c++){const h=e[c];h==="("?(s=!0,n+=h):h===")"?(s=!1,n+=h):h===","&&!s?(t.push(n),n=""):n+=h}return n=n.trim(),n&&t.push(n),t}function NB(e){return/^var\(--.+\)$/.test(e)}var $B=(e,t)=>e.startsWith("--")&&typeof t=="string"&&!NB(t),jB=(e,t)=>{var n,s;if(t==null)return t;const c=b=>{var w,k;return(k=(w=e.__cssMap)==null?void 0:w[b])==null?void 0:k.varRef},h=b=>{var w;return(w=c(b))!=null?w:b},[m,l]=FB(t);return t=(s=(n=c(m))!=null?n:h(l))!=null?s:h(t),t};function VB(e){const{configs:t={},pseudos:n={},theme:s}=e,c=(h,m=!1)=>{var l,b,w;const k=Ss(h,s),M=BB(k)(s);let E={};for(let L in M){const N=M[L];let V=Ss(N,s);L in n&&(L=n[L]),$B(L,V)&&(V=jB(s,V));let J=t[L];if(J===!0&&(J={property:L}),zi(V)){E[L]=(l=E[L])!=null?l:{},E[L]=Go({},E[L],c(V,!0));continue}let $=(w=(b=J==null?void 0:J.transform)==null?void 0:b.call(J,V,s,k))!=null?w:V;$=J!=null&&J.processResult?c($,!0):$;const F=Ss(J==null?void 0:J.property,s);if(!m&&(J!=null&&J.static)){const W=Ss(J.static,s);E=Go({},E,W)}if(F&&Array.isArray(F)){for(const W of F)E[W]=$;continue}if(F){F==="&"&&zi($)?E=Go({},E,$):E[F]=$;continue}if(zi($)){E=Go({},E,$);continue}E[L]=$}return E};return c}var RP=e=>t=>VB({theme:t,pseudos:T0,configs:cw})(e);function or(e){return{definePartsStyle(t){return t},defineMultiStyleConfig(t){return{parts:e,...t}}}}function UB(e,t){if(Array.isArray(e))return e;if(zi(e))return t(e);if(e!=null)return[e]}function GB(e,t){for(let n=t+1;n<e.length;n++)if(e[n]!=null)return n;return-1}function WB(e){const t=e.__breakpoints;return function(s,c,h,m){var l,b;if(!t)return;const w={},k=UB(h,t.toArrayValue);if(!k)return w;const M=k.length,E=M===1,L=!!s.parts;for(let N=0;N<M;N++){const V=t.details[N],J=t.details[GB(k,N)],$=df(V.minW,J==null?void 0:J._minW),F=Ss((l=s[c])==null?void 0:l[k[N]],m);if(F){if(L){(b=s.parts)==null||b.forEach(W=>{Go(w,{[W]:E?F[W]:{[$]:F[W]}})});continue}if(!L){E?Go(w,F):w[$]=F;continue}w[$]=F}}return w}}function ZB(e){return t=>{var n;const{variant:s,size:c,theme:h}=t,m=WB(h);return Go({},Ss((n=e.baseStyle)!=null?n:{},t),m(e,"sizes",c,t),m(e,"variants",s,t))}}function qB(e,t,n){var s,c,h;return(h=(c=(s=e.__cssMap)==null?void 0:s[`${t}.${n}`])==null?void 0:c.varRef)!=null?h:n}function ii(e){return EB(e,["styleConfig","size","variant","colorScheme"])}var XB=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function HB(e){return zi(e)?XB.every(t=>Object.prototype.hasOwnProperty.call(e,t)):!1}var YB={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},KB=YB,JB={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},QB=JB,eF={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},tF=eF,nF={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},rF=nF,iF={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},oF=iF,sF={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},aF={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},lF={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},cF={property:sF,easing:aF,duration:lF},uF=cF,dF={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},hF=dF,fF={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},pF=fF,mF={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},LP=mF,OP={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},gF={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},yF={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},vF={...OP,...gF,container:yF},BP=vF,_F={breakpoints:QB,zIndices:KB,radii:rF,blur:hF,colors:tF,...LP,sizes:BP,shadows:oF,space:OP,borders:pF,transition:uF};function Ln(e,t={}){let n=!1;function s(){if(!n){n=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function c(...k){s();for(const M of k)t[M]=b(M);return Ln(e,t)}function h(...k){for(const M of k)M in t||(t[M]=b(M));return Ln(e,t)}function m(){return Object.fromEntries(Object.entries(t).map(([M,E])=>[M,E.selector]))}function l(){return Object.fromEntries(Object.entries(t).map(([M,E])=>[M,E.className]))}function b(k){const L=`chakra-${(["container","root"].includes(k??"")?[e]:[e,k]).filter(Boolean).join("__")}`;return{className:L,selector:`.${L}`,toString:()=>k}}return{parts:c,toPart:b,extend:h,selectors:m,classnames:l,get keys(){return Object.keys(t)},__type:{}}}var xF=Ln("accordion").parts("root","container","button","panel").extend("icon"),bF=Ln("alert").parts("title","description","container").extend("icon","spinner"),wF=Ln("avatar").parts("label","badge","container").extend("excessLabel","group"),SF=Ln("breadcrumb").parts("link","item","container").extend("separator");Ln("button").parts();var TF=Ln("checkbox").parts("control","icon","container").extend("label");Ln("progress").parts("track","filledTrack").extend("label");var kF=Ln("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),EF=Ln("editable").parts("preview","input","textarea"),CF=Ln("form").parts("container","requiredIndicator","helperText"),IF=Ln("formError").parts("text","icon"),MF=Ln("input").parts("addon","field","element"),PF=Ln("list").parts("container","item","icon"),zF=Ln("menu").parts("button","list","item").extend("groupTitle","command","divider"),AF=Ln("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),DF=Ln("numberinput").parts("root","field","stepperGroup","stepper");Ln("pininput").parts("field");var RF=Ln("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),LF=Ln("progress").parts("label","filledTrack","track"),OF=Ln("radio").parts("container","control","label"),BF=Ln("select").parts("field","icon"),FF=Ln("slider").parts("container","track","thumb","filledTrack","mark"),NF=Ln("stat").parts("container","label","helpText","number","icon"),$F=Ln("switch").parts("container","track","thumb"),jF=Ln("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),VF=Ln("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),UF=Ln("tag").parts("container","label","closeButton"),GF=Ln("card").parts("container","header","body","footer");function Qc(e,t,n){return Math.min(Math.max(e,n),t)}class WF extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}var hf=WF;function uw(e){if(typeof e!="string")throw new hf(e);if(e.trim().toLowerCase()==="transparent")return[0,0,0,0];let t=e.trim();t=QF.test(e)?XF(e):e;const n=HF.exec(t);if(n){const m=Array.from(n).slice(1);return[...m.slice(0,3).map(l=>parseInt(up(l,2),16)),parseInt(up(m[3]||"f",2),16)/255]}const s=YF.exec(t);if(s){const m=Array.from(s).slice(1);return[...m.slice(0,3).map(l=>parseInt(l,16)),parseInt(m[3]||"ff",16)/255]}const c=KF.exec(t);if(c){const m=Array.from(c).slice(1);return[...m.slice(0,3).map(l=>parseInt(l,10)),parseFloat(m[3]||"1")]}const h=JF.exec(t);if(h){const[m,l,b,w]=Array.from(h).slice(1).map(parseFloat);if(Qc(0,100,l)!==l)throw new hf(e);if(Qc(0,100,b)!==b)throw new hf(e);return[...e6(m,l,b),Number.isNaN(w)?1:w]}throw new hf(e)}function ZF(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return(t>>>0)%2341}const pk=e=>parseInt(e.replace(/_/g,""),36),qF="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{const n=pk(t.substring(0,3)),s=pk(t.substring(3)).toString(16);let c="";for(let h=0;h<6-s.length;h++)c+="0";return e[n]=`${c}${s}`,e},{});function XF(e){const t=e.toLowerCase().trim(),n=qF[ZF(t)];if(!n)throw new hf(e);return`#${n}`}const up=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),HF=new RegExp(`^#${up("([a-f0-9])",3)}([a-f0-9])?$`,"i"),YF=new RegExp(`^#${up("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),KF=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${up(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),JF=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,QF=/^[a-z]+$/i,mk=e=>Math.round(e*255),e6=(e,t,n)=>{let s=n/100;if(t===0)return[s,s,s].map(mk);const c=(e%360+360)%360/60,h=(1-Math.abs(2*s-1))*(t/100),m=h*(1-Math.abs(c%2-1));let l=0,b=0,w=0;c>=0&&c<1?(l=h,b=m):c>=1&&c<2?(l=m,b=h):c>=2&&c<3?(b=h,w=m):c>=3&&c<4?(b=m,w=h):c>=4&&c<5?(l=m,w=h):c>=5&&c<6&&(l=h,w=m);const k=s-h/2,M=l+k,E=b+k,L=w+k;return[M,E,L].map(mk)};function t6(e,t,n,s){return`rgba(${Qc(0,255,e).toFixed()}, ${Qc(0,255,t).toFixed()}, ${Qc(0,255,n).toFixed()}, ${parseFloat(Qc(0,1,s).toFixed(3))})`}function n6(e,t){const[n,s,c,h]=uw(e);return t6(n,s,c,h-t)}function r6(e){const[t,n,s,c]=uw(e);let h=m=>{const l=Qc(0,255,m).toString(16);return l.length===1?`0${l}`:l};return`#${h(t)}${h(n)}${h(s)}${c<1?h(Math.round(c*255)):""}`}function i6(e,t,n,s,c){for(t=t.split?t.split("."):t,s=0;s<t.length;s++)e=e?e[t[s]]:c;return e===c?n:e}var o6=e=>Object.keys(e).length===0,Ui=(e,t,n)=>{const s=i6(e,`colors.${t}`,t);try{return r6(s),s}catch{return n??"#000000"}},s6=e=>{const[t,n,s]=uw(e);return(t*299+n*587+s*114)/1e3},a6=e=>t=>{const n=Ui(t,e);return s6(n)<128?"dark":"light"},l6=e=>t=>a6(e)(t)==="dark",$d=(e,t)=>n=>{const s=Ui(n,e);return n6(s,1-t)};function gk(e="1rem",t="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${t} 25%,
    transparent 25%,
    transparent 50%,
    ${t} 50%,
    ${t} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${e} ${e}`}}var c6=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function u6(e){const t=c6();return!e||o6(e)?t:e.string&&e.colors?h6(e.string,e.colors):e.string&&!e.colors?d6(e.string):e.colors&&!e.string?f6(e.colors):t}function d6(e){let t=0;if(e.length===0)return t.toString();for(let s=0;s<e.length;s+=1)t=e.charCodeAt(s)+((t<<5)-t),t=t&t;let n="#";for(let s=0;s<3;s+=1){const c=t>>s*8&255;n+=`00${c.toString(16)}`.substr(-2)}return n}function h6(e,t){let n=0;if(e.length===0)return t[0];for(let s=0;s<e.length;s+=1)n=e.charCodeAt(s)+((n<<5)-n),n=n&n;return n=(n%t.length+t.length)%t.length,t[n]}function f6(e){return e[Math.floor(Math.random()*e.length)]}function Nt(e,t){return n=>n.colorMode==="dark"?t:e}function dw(e){const{orientation:t,vertical:n,horizontal:s}=e;return t?t==="vertical"?n:s:{}}function FP(e){return zi(e)&&e.reference?e.reference:String(e)}var k0=(e,...t)=>t.map(FP).join(` ${e} `).replace(/calc/g,""),yk=(...e)=>`calc(${k0("+",...e)})`,vk=(...e)=>`calc(${k0("-",...e)})`,s1=(...e)=>`calc(${k0("*",...e)})`,_k=(...e)=>`calc(${k0("/",...e)})`,xk=e=>{const t=FP(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:s1(t,-1)},$a=Object.assign(e=>({add:(...t)=>$a(yk(e,...t)),subtract:(...t)=>$a(vk(e,...t)),multiply:(...t)=>$a(s1(e,...t)),divide:(...t)=>$a(_k(e,...t)),negate:()=>$a(xk(e)),toString:()=>e.toString()}),{add:yk,subtract:vk,multiply:s1,divide:_k,negate:xk});function p6(e){return!Number.isInteger(parseFloat(e.toString()))}function m6(e,t="-"){return e.replace(/\s+/g,t)}function NP(e){const t=m6(e.toString());return t.includes("\\.")?e:p6(e)?t.replace(".","\\."):e}function g6(e,t=""){return[t,NP(e)].filter(Boolean).join("-")}function y6(e,t){return`var(${NP(e)}${t?`, ${t}`:""})`}function v6(e,t=""){return`--${g6(e,t)}`}function Xr(e,t){const n=v6(e,t==null?void 0:t.prefix);return{variable:n,reference:y6(n,_6(t==null?void 0:t.fallback))}}function _6(e){return typeof e=="string"?e:e==null?void 0:e.reference}var{defineMultiStyleConfig:x6,definePartsStyle:Fg}=or($F.keys),Cf=Xr("switch-track-width"),iu=Xr("switch-track-height"),m_=Xr("switch-track-diff"),b6=$a.subtract(Cf,iu),a1=Xr("switch-thumb-x"),Yh=Xr("switch-bg"),w6=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"0.5",width:[Cf.reference],height:[iu.reference],transitionProperty:"common",transitionDuration:"fast",[Yh.variable]:"colors.gray.300",_dark:{[Yh.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[Yh.variable]:`colors.${t}.500`,_dark:{[Yh.variable]:`colors.${t}.200`}},bg:Yh.reference}},S6={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[iu.reference],height:[iu.reference],_checked:{transform:`translateX(${a1.reference})`}},T6=Fg(e=>({container:{[m_.variable]:b6,[a1.variable]:m_.reference,_rtl:{[a1.variable]:$a(m_).negate().toString()}},track:w6(e),thumb:S6})),k6={sm:Fg({container:{[Cf.variable]:"1.375rem",[iu.variable]:"sizes.3"}}),md:Fg({container:{[Cf.variable]:"1.875rem",[iu.variable]:"sizes.4"}}),lg:Fg({container:{[Cf.variable]:"2.875rem",[iu.variable]:"sizes.6"}})},E6=x6({baseStyle:T6,sizes:k6,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:C6,definePartsStyle:Ed}=or(jF.keys),I6=Ed({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),ky={"&[data-is-numeric=true]":{textAlign:"end"}},M6=Ed(e=>{const{colorScheme:t}=e;return{th:{color:Nt("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Nt(`${t}.100`,`${t}.700`)(e),...ky},td:{borderBottom:"1px",borderColor:Nt(`${t}.100`,`${t}.700`)(e),...ky},caption:{color:Nt("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),P6=Ed(e=>{const{colorScheme:t}=e;return{th:{color:Nt("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Nt(`${t}.100`,`${t}.700`)(e),...ky},td:{borderBottom:"1px",borderColor:Nt(`${t}.100`,`${t}.700`)(e),...ky},caption:{color:Nt("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:Nt(`${t}.100`,`${t}.700`)(e)},td:{background:Nt(`${t}.100`,`${t}.700`)(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),z6={simple:M6,striped:P6,unstyled:{}},A6={sm:Ed({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:Ed({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:Ed({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},D6=C6({baseStyle:I6,variants:z6,sizes:A6,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),eo=En("tabs-color"),bs=En("tabs-bg"),ag=En("tabs-border-color"),{defineMultiStyleConfig:R6,definePartsStyle:sa}=or(VF.keys),L6=e=>{const{orientation:t}=e;return{display:t==="vertical"?"flex":"block"}},O6=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},B6=e=>{const{align:t="start",orientation:n}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:n==="vertical"?"column":"row"}},F6={p:4},N6=sa(e=>({root:L6(e),tab:O6(e),tablist:B6(e),tabpanel:F6})),$6={sm:sa({tab:{py:1,px:4,fontSize:"sm"}}),md:sa({tab:{fontSize:"md",py:2,px:4}}),lg:sa({tab:{fontSize:"lg",py:3,px:4}})},j6=sa(e=>{const{colorScheme:t,orientation:n}=e,s=n==="vertical",c=n==="vertical"?"borderStart":"borderBottom",h=s?"marginStart":"marginBottom";return{tablist:{[c]:"2px solid",borderColor:"inherit"},tab:{[c]:"2px solid",borderColor:"transparent",[h]:"-2px",_selected:{[eo.variable]:`colors.${t}.600`,_dark:{[eo.variable]:`colors.${t}.300`},borderColor:"currentColor"},_active:{[bs.variable]:"colors.gray.200",_dark:{[bs.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:eo.reference,bg:bs.reference}}}),V6=sa(e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[ag.variable]:"transparent",_selected:{[eo.variable]:`colors.${t}.600`,[ag.variable]:"colors.white",_dark:{[eo.variable]:`colors.${t}.300`,[ag.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:ag.reference},color:eo.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),U6=sa(e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",[bs.variable]:"colors.gray.50",_dark:{[bs.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[bs.variable]:"colors.white",[eo.variable]:`colors.${t}.600`,_dark:{[bs.variable]:"colors.gray.800",[eo.variable]:`colors.${t}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:eo.reference,bg:bs.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),G6=sa(e=>{const{colorScheme:t,theme:n}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Ui(n,`${t}.700`),bg:Ui(n,`${t}.100`)}}}}),W6=sa(e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[eo.variable]:"colors.gray.600",_dark:{[eo.variable]:"inherit"},_selected:{[eo.variable]:"colors.white",[bs.variable]:`colors.${t}.600`,_dark:{[eo.variable]:"colors.gray.800",[bs.variable]:`colors.${t}.300`}},color:eo.reference,bg:bs.reference}}}),Z6=sa({}),q6={line:j6,enclosed:V6,"enclosed-colored":U6,"soft-rounded":G6,"solid-rounded":W6,unstyled:Z6},X6=R6({baseStyle:N6,sizes:$6,variants:q6,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),H6={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold"},Cd=En("badge-bg"),na=En("badge-color"),Y6=e=>{const{colorScheme:t,theme:n}=e,s=$d(`${t}.500`,.6)(n);return{[Cd.variable]:`colors.${t}.500`,[na.variable]:"colors.white",_dark:{[Cd.variable]:s,[na.variable]:"colors.whiteAlpha.800"},bg:Cd.reference,color:na.reference}},K6=e=>{const{colorScheme:t,theme:n}=e,s=$d(`${t}.200`,.16)(n);return{[Cd.variable]:`colors.${t}.100`,[na.variable]:`colors.${t}.800`,_dark:{[Cd.variable]:s,[na.variable]:`colors.${t}.200`},bg:Cd.reference,color:na.reference}},J6=e=>{const{colorScheme:t,theme:n}=e,s=$d(`${t}.200`,.8)(n);return{[na.variable]:`colors.${t}.500`,_dark:{[na.variable]:s},color:na.reference,boxShadow:`inset 0 0 0px 1px ${na.reference}`}},Q6={solid:Y6,subtle:K6,outline:J6},If={baseStyle:H6,variants:Q6,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:eN,definePartsStyle:ou}=or(UF.keys),tN={fontWeight:"medium",lineHeight:1.2,outline:0,borderRadius:"md",_focusVisible:{boxShadow:"outline"}},nN={lineHeight:1.2,overflow:"visible"},rN={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},iN=ou({container:tN,label:nN,closeButton:rN}),oN={sm:ou({container:{minH:"5",minW:"5",fontSize:"xs",px:"2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:ou({container:{minH:"6",minW:"6",fontSize:"sm",px:"2"}}),lg:ou({container:{minH:"8",minW:"8",fontSize:"md",px:"3"}})},sN={subtle:ou(e=>{var t;return{container:(t=If.variants)==null?void 0:t.subtle(e)}}),solid:ou(e=>{var t;return{container:(t=If.variants)==null?void 0:t.solid(e)}}),outline:ou(e=>{var t;return{container:(t=If.variants)==null?void 0:t.outline(e)}})},aN=eN({variants:sN,baseStyle:iN,sizes:oN,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:Wa,defineMultiStyleConfig:lN}=or(MF.keys),cN=Wa({field:{width:"100%",minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),Ml={lg:{fontSize:"lg",px:"4",h:"12",borderRadius:"md"},md:{fontSize:"md",px:"4",h:"10",borderRadius:"md"},sm:{fontSize:"sm",px:"3",h:"8",borderRadius:"sm"},xs:{fontSize:"xs",px:"2",h:"6",borderRadius:"sm"}},uN={lg:Wa({field:Ml.lg,addon:Ml.lg}),md:Wa({field:Ml.md,addon:Ml.md}),sm:Wa({field:Ml.sm,addon:Ml.sm}),xs:Wa({field:Ml.xs,addon:Ml.xs})};function hw(e){const{focusBorderColor:t,errorBorderColor:n}=e;return{focusBorderColor:t||Nt("blue.500","blue.300")(e),errorBorderColor:n||Nt("red.500","red.300")(e)}}var dN=Wa(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:s}=hw(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:Nt("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Ui(t,s),boxShadow:`0 0 0 1px ${Ui(t,s)}`},_focusVisible:{zIndex:1,borderColor:Ui(t,n),boxShadow:`0 0 0 1px ${Ui(t,n)}`}},addon:{border:"1px solid",borderColor:Nt("inherit","whiteAlpha.50")(e),bg:Nt("gray.100","whiteAlpha.300")(e)}}}),hN=Wa(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:s}=hw(e);return{field:{border:"2px solid",borderColor:"transparent",bg:Nt("gray.100","whiteAlpha.50")(e),_hover:{bg:Nt("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Ui(t,s)},_focusVisible:{bg:"transparent",borderColor:Ui(t,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:Nt("gray.100","whiteAlpha.50")(e)}}}),fN=Wa(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:s}=hw(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Ui(t,s),boxShadow:`0px 1px 0px 0px ${Ui(t,s)}`},_focusVisible:{borderColor:Ui(t,n),boxShadow:`0px 1px 0px 0px ${Ui(t,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),pN=Wa({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),mN={outline:dN,filled:hN,flushed:fN,unstyled:pN},zn=lN({baseStyle:cN,sizes:uN,variants:mN,defaultProps:{size:"md",variant:"outline"}}),bk,gN={...(bk=zn.baseStyle)==null?void 0:bk.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},wk,Sk,yN={outline:e=>{var t,n;return(n=(t=zn.variants)==null?void 0:t.outline(e).field)!=null?n:{}},flushed:e=>{var t,n;return(n=(t=zn.variants)==null?void 0:t.flushed(e).field)!=null?n:{}},filled:e=>{var t,n;return(n=(t=zn.variants)==null?void 0:t.filled(e).field)!=null?n:{}},unstyled:(Sk=(wk=zn.variants)==null?void 0:wk.unstyled.field)!=null?Sk:{}},Tk,kk,Ek,Ck,Ik,Mk,Pk,zk,vN={xs:(kk=(Tk=zn.sizes)==null?void 0:Tk.xs.field)!=null?kk:{},sm:(Ck=(Ek=zn.sizes)==null?void 0:Ek.sm.field)!=null?Ck:{},md:(Mk=(Ik=zn.sizes)==null?void 0:Ik.md.field)!=null?Mk:{},lg:(zk=(Pk=zn.sizes)==null?void 0:Pk.lg.field)!=null?zk:{}},_N={baseStyle:gN,sizes:vN,variants:yN,defaultProps:{size:"md",variant:"outline"}},lg=Xr("tooltip-bg"),g_=Xr("tooltip-fg"),xN=Xr("popper-arrow-bg"),bN={bg:lg.reference,color:g_.reference,[lg.variable]:"colors.gray.700",[g_.variable]:"colors.whiteAlpha.900",_dark:{[lg.variable]:"colors.gray.300",[g_.variable]:"colors.gray.900"},[xN.variable]:lg.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},wN={baseStyle:bN},{defineMultiStyleConfig:SN,definePartsStyle:ff}=or(LF.keys),TN=e=>{const{colorScheme:t,theme:n,isIndeterminate:s,hasStripe:c}=e,h=Nt(gk(),gk("1rem","rgba(0,0,0,0.1)"))(e),m=Nt(`${t}.500`,`${t}.200`)(e),l=`linear-gradient(
    to right,
    transparent 0%,
    ${Ui(n,m)} 50%,
    transparent 100%
  )`;return{...!s&&c&&h,...s?{bgImage:l}:{bgColor:m}}},kN={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},EN=e=>({bg:Nt("gray.100","whiteAlpha.300")(e)}),CN=e=>({transitionProperty:"common",transitionDuration:"slow",...TN(e)}),IN=ff(e=>({label:kN,filledTrack:CN(e),track:EN(e)})),MN={xs:ff({track:{h:"1"}}),sm:ff({track:{h:"2"}}),md:ff({track:{h:"3"}}),lg:ff({track:{h:"4"}})},PN=SN({sizes:MN,baseStyle:IN,defaultProps:{size:"md",colorScheme:"blue"}}),zN=e=>typeof e=="function";function Wi(e,...t){return zN(e)?e(...t):e}var{definePartsStyle:Ng,defineMultiStyleConfig:AN}=or(TF.keys),Mf=En("checkbox-size"),DN=e=>{const{colorScheme:t}=e;return{w:Mf.reference,h:Mf.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:Nt(`${t}.500`,`${t}.200`)(e),borderColor:Nt(`${t}.500`,`${t}.200`)(e),color:Nt("white","gray.900")(e),_hover:{bg:Nt(`${t}.600`,`${t}.300`)(e),borderColor:Nt(`${t}.600`,`${t}.300`)(e)},_disabled:{borderColor:Nt("gray.200","transparent")(e),bg:Nt("gray.200","whiteAlpha.300")(e),color:Nt("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:Nt(`${t}.500`,`${t}.200`)(e),borderColor:Nt(`${t}.500`,`${t}.200`)(e),color:Nt("white","gray.900")(e)},_disabled:{bg:Nt("gray.100","whiteAlpha.100")(e),borderColor:Nt("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:Nt("red.500","red.300")(e)}}},RN={_disabled:{cursor:"not-allowed"}},LN={userSelect:"none",_disabled:{opacity:.4}},ON={transitionProperty:"transform",transitionDuration:"normal"},BN=Ng(e=>({icon:ON,container:RN,control:Wi(DN,e),label:LN})),FN={sm:Ng({control:{[Mf.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:Ng({control:{[Mf.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:Ng({control:{[Mf.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},Ey=AN({baseStyle:BN,sizes:FN,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:NN,definePartsStyle:$g}=or(OF.keys),$N=e=>{var t;const n=(t=Wi(Ey.baseStyle,e))==null?void 0:t.control;return{...n,borderRadius:"full",_checked:{...n==null?void 0:n._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},jN=$g(e=>{var t,n,s,c;return{label:(n=(t=Ey).baseStyle)==null?void 0:n.call(t,e).label,container:(c=(s=Ey).baseStyle)==null?void 0:c.call(s,e).container,control:$N(e)}}),VN={md:$g({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:$g({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:$g({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},UN=NN({baseStyle:jN,sizes:VN,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:GN,definePartsStyle:WN}=or(BF.keys),cg=En("select-bg"),Ak,ZN={...(Ak=zn.baseStyle)==null?void 0:Ak.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:cg.reference,[cg.variable]:"colors.white",_dark:{[cg.variable]:"colors.gray.700"},"> option, > optgroup":{bg:cg.reference}},qN={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},XN=WN({field:ZN,icon:qN}),ug={paddingInlineEnd:"8"},Dk,Rk,Lk,Ok,Bk,Fk,Nk,$k,HN={lg:{...(Dk=zn.sizes)==null?void 0:Dk.lg,field:{...(Rk=zn.sizes)==null?void 0:Rk.lg.field,...ug}},md:{...(Lk=zn.sizes)==null?void 0:Lk.md,field:{...(Ok=zn.sizes)==null?void 0:Ok.md.field,...ug}},sm:{...(Bk=zn.sizes)==null?void 0:Bk.sm,field:{...(Fk=zn.sizes)==null?void 0:Fk.sm.field,...ug}},xs:{...(Nk=zn.sizes)==null?void 0:Nk.xs,field:{...($k=zn.sizes)==null?void 0:$k.xs.field,...ug},icon:{insetEnd:"1"}}},YN=GN({baseStyle:XN,sizes:HN,variants:zn.variants,defaultProps:zn.defaultProps}),y_=En("skeleton-start-color"),v_=En("skeleton-end-color"),KN={[y_.variable]:"colors.gray.100",[v_.variable]:"colors.gray.400",_dark:{[y_.variable]:"colors.gray.800",[v_.variable]:"colors.gray.600"},background:y_.reference,borderColor:v_.reference,opacity:.7,borderRadius:"sm"},JN={baseStyle:KN},__=En("skip-link-bg"),QN={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[__.variable]:"colors.white",_dark:{[__.variable]:"colors.gray.700"},bg:__.reference}},e$={baseStyle:QN},{defineMultiStyleConfig:t$,definePartsStyle:E0}=or(FF.keys),dp=En("slider-thumb-size"),hp=En("slider-track-size"),Fl=En("slider-bg"),n$=e=>{const{orientation:t}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...dw({orientation:t,vertical:{h:"100%"},horizontal:{w:"100%"}})}},r$=e=>({...dw({orientation:e.orientation,horizontal:{h:hp.reference},vertical:{w:hp.reference}}),overflow:"hidden",borderRadius:"sm",[Fl.variable]:"colors.gray.200",_dark:{[Fl.variable]:"colors.whiteAlpha.200"},_disabled:{[Fl.variable]:"colors.gray.300",_dark:{[Fl.variable]:"colors.whiteAlpha.300"}},bg:Fl.reference}),i$=e=>{const{orientation:t}=e;return{...dw({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:dp.reference,h:dp.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},o$=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",[Fl.variable]:`colors.${t}.500`,_dark:{[Fl.variable]:`colors.${t}.200`},bg:Fl.reference}},s$=E0(e=>({container:n$(e),track:r$(e),thumb:i$(e),filledTrack:o$(e)})),a$=E0({container:{[dp.variable]:"sizes.4",[hp.variable]:"sizes.1"}}),l$=E0({container:{[dp.variable]:"sizes.3.5",[hp.variable]:"sizes.1"}}),c$=E0({container:{[dp.variable]:"sizes.2.5",[hp.variable]:"sizes.0.5"}}),u$={lg:a$,md:l$,sm:c$},d$=t$({baseStyle:s$,sizes:u$,defaultProps:{size:"md",colorScheme:"blue"}}),Hc=Xr("spinner-size"),h$={width:[Hc.reference],height:[Hc.reference]},f$={xs:{[Hc.variable]:"sizes.3"},sm:{[Hc.variable]:"sizes.4"},md:{[Hc.variable]:"sizes.6"},lg:{[Hc.variable]:"sizes.8"},xl:{[Hc.variable]:"sizes.12"}},p$={baseStyle:h$,sizes:f$,defaultProps:{size:"md"}},{defineMultiStyleConfig:m$,definePartsStyle:$P}=or(NF.keys),g$={fontWeight:"medium"},y$={opacity:.8,marginBottom:"2"},v$={verticalAlign:"baseline",fontWeight:"semibold"},_$={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},x$=$P({container:{},label:g$,helpText:y$,number:v$,icon:_$}),b$={md:$P({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},w$=m$({baseStyle:x$,sizes:b$,defaultProps:{size:"md"}}),x_=En("kbd-bg"),S$={[x_.variable]:"colors.gray.100",_dark:{[x_.variable]:"colors.whiteAlpha.100"},bg:x_.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},T$={baseStyle:S$},k$={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},E$={baseStyle:k$},{defineMultiStyleConfig:C$,definePartsStyle:I$}=or(PF.keys),M$={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},P$=I$({icon:M$}),z$=C$({baseStyle:P$}),{defineMultiStyleConfig:A$,definePartsStyle:D$}=or(zF.keys),Ys=En("menu-bg"),b_=En("menu-shadow"),R$={[Ys.variable]:"#fff",[b_.variable]:"shadows.sm",_dark:{[Ys.variable]:"colors.gray.700",[b_.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:Ys.reference,boxShadow:b_.reference},L$={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[Ys.variable]:"colors.gray.100",_dark:{[Ys.variable]:"colors.whiteAlpha.100"}},_active:{[Ys.variable]:"colors.gray.200",_dark:{[Ys.variable]:"colors.whiteAlpha.200"}},_expanded:{[Ys.variable]:"colors.gray.100",_dark:{[Ys.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:Ys.reference},O$={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},B$={opacity:.6},F$={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},N$={transitionProperty:"common",transitionDuration:"normal"},$$=D$({button:N$,list:R$,item:L$,groupTitle:O$,command:B$,divider:F$}),j$=A$({baseStyle:$$}),{defineMultiStyleConfig:V$,definePartsStyle:l1}=or(AF.keys),U$={bg:"blackAlpha.600",zIndex:"modal"},G$=e=>{const{isCentered:t,scrollBehavior:n}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:n==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},W$=e=>{const{scrollBehavior:t}=e;return{borderRadius:"md",bg:Nt("white","gray.700")(e),color:"inherit",my:"16",zIndex:"modal",maxH:t==="inside"?"calc(100% - 7.5rem)":void 0,boxShadow:Nt("lg","dark-lg")(e)}},Z$={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},q$={position:"absolute",top:"2",insetEnd:"3"},X$=e=>{const{scrollBehavior:t}=e;return{px:"6",py:"2",flex:"1",overflow:t==="inside"?"auto":void 0}},H$={px:"6",py:"4"},Y$=l1(e=>({overlay:U$,dialogContainer:Wi(G$,e),dialog:Wi(W$,e),header:Z$,closeButton:q$,body:Wi(X$,e),footer:H$}));function ms(e){return l1(e==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}var K$={xs:ms("xs"),sm:ms("sm"),md:ms("md"),lg:ms("lg"),xl:ms("xl"),"2xl":ms("2xl"),"3xl":ms("3xl"),"4xl":ms("4xl"),"5xl":ms("5xl"),"6xl":ms("6xl"),full:ms("full")},J$=V$({baseStyle:Y$,sizes:K$,defaultProps:{size:"md"}}),{defineMultiStyleConfig:Q$,definePartsStyle:jP}=or(DF.keys),fw=Xr("number-input-stepper-width"),VP=Xr("number-input-input-padding"),ej=$a(fw).add("0.5rem").toString(),w_=Xr("number-input-bg"),S_=Xr("number-input-color"),T_=Xr("number-input-border-color"),tj={[fw.variable]:"sizes.6",[VP.variable]:ej},nj=e=>{var t,n;return(n=(t=Wi(zn.baseStyle,e))==null?void 0:t.field)!=null?n:{}},rj={width:fw.reference},ij={borderStart:"1px solid",borderStartColor:T_.reference,color:S_.reference,bg:w_.reference,[S_.variable]:"colors.chakra-body-text",[T_.variable]:"colors.chakra-border-color",_dark:{[S_.variable]:"colors.whiteAlpha.800",[T_.variable]:"colors.whiteAlpha.300"},_active:{[w_.variable]:"colors.gray.200",_dark:{[w_.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},oj=jP(e=>{var t;return{root:tj,field:(t=Wi(nj,e))!=null?t:{},stepperGroup:rj,stepper:ij}});function dg(e){var t,n,s;const c=(t=zn.sizes)==null?void 0:t[e],h={lg:"md",md:"md",sm:"sm",xs:"sm"},m=(s=(n=c.field)==null?void 0:n.fontSize)!=null?s:"md",l=LP.fontSizes[m];return jP({field:{...c.field,paddingInlineEnd:VP.reference,verticalAlign:"top"},stepper:{fontSize:$a(l).multiply(.75).toString(),_first:{borderTopEndRadius:h[e]},_last:{borderBottomEndRadius:h[e],mt:"-1px",borderTopWidth:1}}})}var sj={xs:dg("xs"),sm:dg("sm"),md:dg("md"),lg:dg("lg")},aj=Q$({baseStyle:oj,sizes:sj,variants:zn.variants,defaultProps:zn.defaultProps}),jk,lj={...(jk=zn.baseStyle)==null?void 0:jk.field,textAlign:"center"},cj={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},Vk,Uk,uj={outline:e=>{var t,n,s;return(s=(n=Wi((t=zn.variants)==null?void 0:t.outline,e))==null?void 0:n.field)!=null?s:{}},flushed:e=>{var t,n,s;return(s=(n=Wi((t=zn.variants)==null?void 0:t.flushed,e))==null?void 0:n.field)!=null?s:{}},filled:e=>{var t,n,s;return(s=(n=Wi((t=zn.variants)==null?void 0:t.filled,e))==null?void 0:n.field)!=null?s:{}},unstyled:(Uk=(Vk=zn.variants)==null?void 0:Vk.unstyled.field)!=null?Uk:{}},dj={baseStyle:lj,sizes:cj,variants:uj,defaultProps:zn.defaultProps},{defineMultiStyleConfig:hj,definePartsStyle:fj}=or(RF.keys),hg=Xr("popper-bg"),pj=Xr("popper-arrow-bg"),Gk=Xr("popper-arrow-shadow-color"),mj={zIndex:10},gj={[hg.variable]:"colors.white",bg:hg.reference,[pj.variable]:hg.reference,[Gk.variable]:"colors.gray.200",_dark:{[hg.variable]:"colors.gray.700",[Gk.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},yj={px:3,py:2,borderBottomWidth:"1px"},vj={px:3,py:2},_j={px:3,py:2,borderTopWidth:"1px"},xj={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},bj=fj({popper:mj,content:gj,header:yj,body:vj,footer:_j,closeButton:xj}),wj=hj({baseStyle:bj}),{definePartsStyle:c1,defineMultiStyleConfig:Sj}=or(kF.keys),k_=En("drawer-bg"),E_=En("drawer-box-shadow");function Qu(e){return c1(e==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}var Tj={bg:"blackAlpha.600",zIndex:"overlay"},kj={display:"flex",zIndex:"modal",justifyContent:"center"},Ej=e=>{const{isFullHeight:t}=e;return{...t&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[k_.variable]:"colors.white",[E_.variable]:"shadows.lg",_dark:{[k_.variable]:"colors.gray.700",[E_.variable]:"shadows.dark-lg"},bg:k_.reference,boxShadow:E_.reference}},Cj={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},Ij={position:"absolute",top:"2",insetEnd:"3"},Mj={px:"6",py:"2",flex:"1",overflow:"auto"},Pj={px:"6",py:"4"},zj=c1(e=>({overlay:Tj,dialogContainer:kj,dialog:Wi(Ej,e),header:Cj,closeButton:Ij,body:Mj,footer:Pj})),Aj={xs:Qu("xs"),sm:Qu("md"),md:Qu("lg"),lg:Qu("2xl"),xl:Qu("4xl"),full:Qu("full")},Dj=Sj({baseStyle:zj,sizes:Aj,defaultProps:{size:"xs"}}),{definePartsStyle:Rj,defineMultiStyleConfig:Lj}=or(EF.keys),Oj={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},Bj={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},Fj={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},Nj=Rj({preview:Oj,input:Bj,textarea:Fj}),$j=Lj({baseStyle:Nj}),{definePartsStyle:jj,defineMultiStyleConfig:Vj}=or(CF.keys),Id=En("form-control-color"),Uj={marginStart:"1",[Id.variable]:"colors.red.500",_dark:{[Id.variable]:"colors.red.300"},color:Id.reference},Gj={mt:"2",[Id.variable]:"colors.gray.600",_dark:{[Id.variable]:"colors.whiteAlpha.600"},color:Id.reference,lineHeight:"normal",fontSize:"sm"},Wj=jj({container:{width:"100%",position:"relative"},requiredIndicator:Uj,helperText:Gj}),Zj=Vj({baseStyle:Wj}),{definePartsStyle:qj,defineMultiStyleConfig:Xj}=or(IF.keys),Md=En("form-error-color"),Hj={[Md.variable]:"colors.red.500",_dark:{[Md.variable]:"colors.red.300"},color:Md.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},Yj={marginEnd:"0.5em",[Md.variable]:"colors.red.500",_dark:{[Md.variable]:"colors.red.300"},color:Md.reference},Kj=qj({text:Hj,icon:Yj}),Jj=Xj({baseStyle:Kj}),Qj={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},eV={baseStyle:Qj},tV={fontFamily:"heading",fontWeight:"bold"},nV={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},rV={baseStyle:tV,sizes:nV,defaultProps:{size:"xl"}},{defineMultiStyleConfig:iV,definePartsStyle:oV}=or(SF.keys),sV={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},aV=oV({link:sV}),lV=iV({baseStyle:aV}),cV={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},UP=e=>{const{colorScheme:t,theme:n}=e;if(t==="gray")return{color:Nt("inherit","whiteAlpha.900")(e),_hover:{bg:Nt("gray.100","whiteAlpha.200")(e)},_active:{bg:Nt("gray.200","whiteAlpha.300")(e)}};const s=$d(`${t}.200`,.12)(n),c=$d(`${t}.200`,.24)(n);return{color:Nt(`${t}.600`,`${t}.200`)(e),bg:"transparent",_hover:{bg:Nt(`${t}.50`,s)(e)},_active:{bg:Nt(`${t}.100`,c)(e)}}},uV=e=>{const{colorScheme:t}=e,n=Nt("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:t==="gray"?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...Wi(UP,e)}},dV={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},hV=e=>{var t;const{colorScheme:n}=e;if(n==="gray"){const b=Nt("gray.100","whiteAlpha.200")(e);return{bg:b,_hover:{bg:Nt("gray.200","whiteAlpha.300")(e),_disabled:{bg:b}},_active:{bg:Nt("gray.300","whiteAlpha.400")(e)}}}const{bg:s=`${n}.500`,color:c="white",hoverBg:h=`${n}.600`,activeBg:m=`${n}.700`}=(t=dV[n])!=null?t:{},l=Nt(s,`${n}.200`)(e);return{bg:l,color:Nt(c,"gray.800")(e),_hover:{bg:Nt(h,`${n}.300`)(e),_disabled:{bg:l}},_active:{bg:Nt(m,`${n}.400`)(e)}}},fV=e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:Nt(`${t}.500`,`${t}.200`)(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:Nt(`${t}.700`,`${t}.500`)(e)}}},pV={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},mV={ghost:UP,outline:uV,solid:hV,link:fV,unstyled:pV},gV={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},yV={baseStyle:cV,variants:mV,sizes:gV,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:su,defineMultiStyleConfig:vV}=or(GF.keys),Cy=En("card-bg"),Ya=En("card-padding"),GP=En("card-shadow"),jg=En("card-radius"),WP=En("card-border-width","0"),ZP=En("card-border-color"),_V=su({container:{[Cy.variable]:"colors.chakra-body-bg",backgroundColor:Cy.reference,boxShadow:GP.reference,borderRadius:jg.reference,color:"chakra-body-text",borderWidth:WP.reference,borderColor:ZP.reference},body:{padding:Ya.reference,flex:"1 1 0%"},header:{padding:Ya.reference},footer:{padding:Ya.reference}}),xV={sm:su({container:{[jg.variable]:"radii.base",[Ya.variable]:"space.3"}}),md:su({container:{[jg.variable]:"radii.md",[Ya.variable]:"space.5"}}),lg:su({container:{[jg.variable]:"radii.xl",[Ya.variable]:"space.7"}})},bV={elevated:su({container:{[GP.variable]:"shadows.base",_dark:{[Cy.variable]:"colors.gray.700"}}}),outline:su({container:{[WP.variable]:"1px",[ZP.variable]:"colors.chakra-border-color"}}),filled:su({container:{[Cy.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[Ya.variable]:0},header:{[Ya.variable]:0},footer:{[Ya.variable]:0}}},wV=vV({baseStyle:_V,variants:bV,sizes:xV,defaultProps:{variant:"elevated",size:"md"}}),Pf=Xr("close-button-size"),Kh=Xr("close-button-bg"),SV={w:[Pf.reference],h:[Pf.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[Kh.variable]:"colors.blackAlpha.100",_dark:{[Kh.variable]:"colors.whiteAlpha.100"}},_active:{[Kh.variable]:"colors.blackAlpha.200",_dark:{[Kh.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:Kh.reference},TV={lg:{[Pf.variable]:"sizes.10",fontSize:"md"},md:{[Pf.variable]:"sizes.8",fontSize:"xs"},sm:{[Pf.variable]:"sizes.6",fontSize:"2xs"}},kV={baseStyle:SV,sizes:TV,defaultProps:{size:"md"}},{variants:EV,defaultProps:CV}=If,IV={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm"},MV={baseStyle:IV,variants:EV,defaultProps:CV},PV={w:"100%",mx:"auto",maxW:"prose",px:"4"},zV={baseStyle:PV},AV={opacity:.6,borderColor:"inherit"},DV={borderStyle:"solid"},RV={borderStyle:"dashed"},LV={solid:DV,dashed:RV},OV={baseStyle:AV,variants:LV,defaultProps:{variant:"solid"}},{definePartsStyle:BV,defineMultiStyleConfig:FV}=or(xF.keys),NV={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},$V={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},jV={pt:"2",px:"4",pb:"5"},VV={fontSize:"1.25em"},UV=BV({container:NV,button:$V,panel:jV,icon:VV}),GV=FV({baseStyle:UV}),{definePartsStyle:Ap,defineMultiStyleConfig:WV}=or(bF.keys),ko=En("alert-fg"),ol=En("alert-bg"),ZV=Ap({container:{bg:ol.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:ko.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:ko.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function pw(e){const{theme:t,colorScheme:n}=e,s=$d(`${n}.200`,.16)(t);return{light:`colors.${n}.100`,dark:s}}var qV=Ap(e=>{const{colorScheme:t}=e,n=pw(e);return{container:{[ko.variable]:`colors.${t}.500`,[ol.variable]:n.light,_dark:{[ko.variable]:`colors.${t}.200`,[ol.variable]:n.dark}}}}),XV=Ap(e=>{const{colorScheme:t}=e,n=pw(e);return{container:{[ko.variable]:`colors.${t}.500`,[ol.variable]:n.light,_dark:{[ko.variable]:`colors.${t}.200`,[ol.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:ko.reference}}}),HV=Ap(e=>{const{colorScheme:t}=e,n=pw(e);return{container:{[ko.variable]:`colors.${t}.500`,[ol.variable]:n.light,_dark:{[ko.variable]:`colors.${t}.200`,[ol.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:ko.reference}}}),YV=Ap(e=>{const{colorScheme:t}=e;return{container:{[ko.variable]:"colors.white",[ol.variable]:`colors.${t}.500`,_dark:{[ko.variable]:"colors.gray.900",[ol.variable]:`colors.${t}.200`},color:ko.reference}}}),KV={subtle:qV,"left-accent":XV,"top-accent":HV,solid:YV},JV=WV({baseStyle:ZV,variants:KV,defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:qP,defineMultiStyleConfig:QV}=or(wF.keys),Pd=En("avatar-border-color"),C_=En("avatar-bg"),eU={borderRadius:"full",border:"0.2em solid",[Pd.variable]:"white",_dark:{[Pd.variable]:"colors.gray.800"},borderColor:Pd.reference},tU={[C_.variable]:"colors.gray.200",_dark:{[C_.variable]:"colors.whiteAlpha.400"},bgColor:C_.reference},Wk=En("avatar-background"),nU=e=>{const{name:t,theme:n}=e,s=t?u6({string:t}):"colors.gray.400",c=l6(s)(n);let h="white";return c||(h="gray.800"),{bg:Wk.reference,"&:not([data-loaded])":{[Wk.variable]:s},color:h,[Pd.variable]:"colors.white",_dark:{[Pd.variable]:"colors.gray.800"},borderColor:Pd.reference,verticalAlign:"top"}},rU=qP(e=>({badge:Wi(eU,e),excessLabel:Wi(tU,e),container:Wi(nU,e)}));function Pl(e){const t=e!=="100%"?BP[e]:void 0;return qP({container:{width:e,height:e,fontSize:`calc(${t??e} / 2.5)`},excessLabel:{width:e,height:e},label:{fontSize:`calc(${t??e} / 2.5)`,lineHeight:e!=="100%"?t??e:void 0}})}var iU={"2xs":Pl(4),xs:Pl(6),sm:Pl(8),md:Pl(12),lg:Pl(16),xl:Pl(24),"2xl":Pl(32),full:Pl("100%")},oU=QV({baseStyle:rU,sizes:iU,defaultProps:{size:"md"}}),sU={Accordion:GV,Alert:JV,Avatar:oU,Badge:If,Breadcrumb:lV,Button:yV,Checkbox:Ey,CloseButton:kV,Code:MV,Container:zV,Divider:OV,Drawer:Dj,Editable:$j,Form:Zj,FormError:Jj,FormLabel:eV,Heading:rV,Input:zn,Kbd:T$,Link:E$,List:z$,Menu:j$,Modal:J$,NumberInput:aj,PinInput:dj,Popover:wj,Progress:PN,Radio:UN,Select:YN,Skeleton:JN,SkipLink:e$,Slider:d$,Spinner:p$,Stat:w$,Switch:E6,Table:D6,Tabs:X6,Tag:aN,Textarea:_N,Tooltip:wN,Card:wV},aU={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},lU={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color",wordWrap:"break-word"}}},cU="ltr",uU={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},XP={semanticTokens:aU,direction:cU,..._F,components:sU,styles:lU,config:uU};function pf(e){return typeof e=="function"}function dU(...e){return t=>e.reduce((n,s)=>s(n),t)}var hU=e=>function(...n){let s=[...n],c=n[n.length-1];return HB(c)&&s.length>1?s=s.slice(0,s.length-1):c=e,dU(...s.map(h=>m=>pf(h)?h(m):pU(m,h)))(c)},fU=hU(XP);function pU(...e){return Go({},...e,HP)}function HP(e,t,n,s){if((pf(e)||pf(t))&&Object.prototype.hasOwnProperty.call(s,n))return(...c)=>{const h=pf(e)?e(...c):e,m=pf(t)?t(...c):t;return Go({},h,m,HP)}}function mU(e,t){const n={};return Object.keys(e).forEach(s=>{t.includes(s)||(n[s]=e[s])}),n}function gU(e,t,n,s){const c=typeof t=="string"?t.split("."):[t];for(s=0;s<c.length&&e;s+=1)e=e[c[s]];return e===void 0?n:e}var yU=e=>{const t=new WeakMap;return(s,c,h,m)=>{if(typeof s>"u")return e(s,c,h);t.has(s)||t.set(s,new Map);const l=t.get(s);if(l.has(c))return l.get(c);const b=e(s,c,h,m);return l.set(c,b),b}},YP=yU(gU);function KP(e,t){const n={};return Object.keys(e).forEach(s=>{const c=e[s];t(c,s,e)&&(n[s]=c)}),n}var JP=e=>KP(e,t=>t!=null);function vU(e){return typeof e=="function"}function QP(e,...t){return vU(e)?e(...t):e}var _U=typeof Element<"u",xU=typeof Map=="function",bU=typeof Set=="function",wU=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Vg(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,s,c;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(s=n;s--!==0;)if(!Vg(e[s],t[s]))return!1;return!0}var h;if(xU&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(h=e.entries();!(s=h.next()).done;)if(!t.has(s.value[0]))return!1;for(h=e.entries();!(s=h.next()).done;)if(!Vg(s.value[1],t.get(s.value[0])))return!1;return!0}if(bU&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(h=e.entries();!(s=h.next()).done;)if(!t.has(s.value[0]))return!1;return!0}if(wU&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(s=n;s--!==0;)if(e[s]!==t[s])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(c=Object.keys(e),n=c.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,c[s]))return!1;if(_U&&e instanceof Element)return!1;for(s=n;s--!==0;)if(!((c[s]==="_owner"||c[s]==="__v"||c[s]==="__o")&&e.$$typeof)&&!Vg(e[c[s]],t[c[s]]))return!1;return!0}return e!==e&&t!==t}var SU=function(t,n){try{return Vg(t,n)}catch(s){if((s.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw s}};function ez(e,t={}){var n;const{styleConfig:s,...c}=t,{theme:h,colorMode:m}=kP(),l=e?YP(h,`components.${e}`):void 0,b=s||l,w=Go({theme:h,colorMode:m},(n=b==null?void 0:b.defaultProps)!=null?n:{},JP(mU(c,["children"]))),k=U.useRef({});if(b){const E=ZB(b)(w);SU(k.current,E)||(k.current=E)}return k.current}function fa(e,t={}){return ez(e,t)}function cl(e,t={}){return ez(e,t)}var TU=new Set([...RB,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),kU=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function EU(e){return kU.has(e)||!TU.has(e)}function tz(e){const t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function CU(e,...t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const n={...e};for(const s of t)if(s!=null)for(const c in s)Object.prototype.hasOwnProperty.call(s,c)&&(c in n&&delete n[c],n[c]=s[c]);return n}var IU=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,MU=uP(function(e){return IU.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),PU=MU,zU=function(t){return t!=="theme"},Zk=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?PU:zU},qk=function(t,n,s){var c;if(n){var h=n.shouldForwardProp;c=t.__emotion_forwardProp&&h?function(m){return t.__emotion_forwardProp(m)&&h(m)}:h}return typeof c!="function"&&s&&(c=t.__emotion_forwardProp),c},AU=function(t){var n=t.cache,s=t.serialized,c=t.isStringTag;return mP(n,s,c),dO(function(){return gP(n,s,c)}),null},DU=function e(t,n){var s=t.__emotion_real===t,c=s&&t.__emotion_base||t,h,m;n!==void 0&&(h=n.label,m=n.target);var l=qk(t,n,s),b=l||Zk(c),w=!b("as");return function(){var k=arguments,M=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(h!==void 0&&M.push("label:"+h+";"),k[0]==null||k[0].raw===void 0)M.push.apply(M,k);else{M.push(k[0][0]);for(var E=k.length,L=1;L<E;L++)M.push(k[L],k[0][L])}var N=xP(function(V,J,$){var F=w&&V.as||c,W="",te=[],de=V;if(V.theme==null){de={};for(var pe in V)de[pe]=V[pe];de.theme=U.useContext(cp)}typeof V.className=="string"?W=iO(J.registered,te,V.className):V.className!=null&&(W=V.className+" ");var ce=rw(M.concat(te),J.registered,de);W+=J.key+"-"+ce.name,m!==void 0&&(W+=" "+m);var oe=w&&l===void 0?Zk(F):b,be={};for(var ye in V)w&&ye==="as"||oe(ye)&&(be[ye]=V[ye]);return be.className=W,be.ref=$,U.createElement(U.Fragment,null,U.createElement(AU,{cache:J,serialized:ce,isStringTag:typeof F=="string"}),U.createElement(F,be))});return N.displayName=h!==void 0?h:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",N.defaultProps=t.defaultProps,N.__emotion_real=N,N.__emotion_base=c,N.__emotion_styles=M,N.__emotion_forwardProp=l,Object.defineProperty(N,"toString",{value:function(){return"."+m}}),N.withComponent=function(V,J){return e(V,wy({},n,J,{shouldForwardProp:qk(N,J,!0)})).apply(void 0,M)},N}},RU=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Iy=DU.bind();RU.forEach(function(e){Iy[e]=Iy(e)});var Xk,LU=(Xk=Iy.default)!=null?Xk:Iy,OU=({baseStyle:e})=>t=>{const{theme:n,css:s,__css:c,sx:h,...m}=t,l=KP(m,(M,E)=>OB(E)),b=QP(e,t),w=CU({},c,b,JP(l),h),k=RP(w)(t.theme);return s?[k,s]:k};function I_(e,t){const{baseStyle:n,...s}=t??{};s.shouldForwardProp||(s.shouldForwardProp=EU);const c=OU({baseStyle:n}),h=LU(e,s)(c);return da.forwardRef(function(b,w){const{colorMode:k,forced:M}=sw();return da.createElement(h,{ref:w,"data-theme":M?k:void 0,...b})})}function BU(){const e=new Map;return new Proxy(I_,{apply(t,n,s){return I_(...s)},get(t,n){return e.has(n)||e.set(n,I_(n)),e.get(n)}})}var bt=BU();function Ft(e){return U.forwardRef(e)}function nz(e={}){const{strict:t=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:s}=e,c=U.createContext(void 0);c.displayName=s;function h(){var m;const l=U.useContext(c);if(!l&&t){const b=new Error(n);throw b.name="ContextError",(m=Error.captureStackTrace)==null||m.call(Error,b,h),b}return l}return[c.Provider,h,c]}function FU(e){const{cssVarsRoot:t,theme:n,children:s}=e,c=U.useMemo(()=>DB(n),[n]);return Y.jsxs(pO,{theme:c,children:[Y.jsx(NU,{root:t}),s]})}function NU({root:e=":host, :root"}){const t=[e,"[data-theme]"].join(",");return Y.jsx(b0,{styles:n=>({[t]:n.__cssVars})})}nz({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function $U(e){return nz({name:`${e}StylesContext`,errorMessage:`useStyles: "styles" is undefined. Seems you forgot to wrap the components in "<${e} />" `})}function jU(){const{colorMode:e}=sw();return Y.jsx(b0,{styles:t=>{const n=YP(t,"styles.global"),s=QP(n,{theme:t,colorMode:e});return s?RP(s)(t):void 0}})}var mw=U.createContext({getDocument(){return document},getWindow(){return window}});mw.displayName="EnvironmentContext";function VU({defer:e}={}){const[,t]=U.useReducer(n=>n+1,0);return Ha(()=>{e&&t()},[e]),U.useContext(mw)}function rz(e){const{children:t,environment:n,disabled:s}=e,c=U.useRef(null),h=U.useMemo(()=>n||{getDocument:()=>{var l,b;return(b=(l=c.current)==null?void 0:l.ownerDocument)!=null?b:document},getWindow:()=>{var l,b;return(b=(l=c.current)==null?void 0:l.ownerDocument.defaultView)!=null?b:window}},[n]),m=!s||!n;return Y.jsxs(mw.Provider,{value:h,children:[t,m&&Y.jsx("span",{id:"__chakra_env",hidden:!0,ref:c})]})}rz.displayName="EnvironmentProvider";var UU=e=>{const{children:t,colorModeManager:n,portalZIndex:s,resetCSS:c=!0,theme:h={},environment:m,cssVarsRoot:l,disableEnvironment:b}=e,w=Y.jsx(rz,{environment:m,disabled:b,children:t});return Y.jsx(FU,{theme:h,cssVarsRoot:l,children:Y.jsxs(TP,{colorModeManager:n,options:h.config,children:[c?Y.jsx(yO,{}):Y.jsx(gO,{}),Y.jsx(jU,{}),s?Y.jsx(wP,{zIndex:s,children:w}):w]})})},GU=(e,t)=>e.find(n=>n.id===t);function Hk(e,t){const n=iz(e,t),s=n?e[n].findIndex(c=>c.id===t):-1;return{position:n,index:s}}function iz(e,t){for(const[n,s]of Object.entries(e))if(GU(s,t))return n}function WU(e){const t=e.includes("right"),n=e.includes("left");let s="center";return t&&(s="flex-end"),n&&(s="flex-start"),{display:"flex",flexDirection:"column",alignItems:s}}function ZU(e){const n=e==="top"||e==="bottom"?"0 auto":void 0,s=e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,c=e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,h=e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",m=e.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:5500,pointerEvents:"none",display:"flex",flexDirection:"column",margin:n,top:s,bottom:c,right:h,left:m}}function Es(e,t=[]){const n=U.useRef(e);return U.useEffect(()=>{n.current=e}),U.useCallback((...s)=>{var c;return(c=n.current)==null?void 0:c.call(n,...s)},t)}function qU(e,t){const n=Es(e);U.useEffect(()=>{if(t==null)return;let s=null;return s=window.setTimeout(()=>{n()},t),()=>{s&&window.clearTimeout(s)}},[t,n])}function jd(e,t){const n=U.useRef(!1),s=U.useRef(!1);U.useEffect(()=>{if(n.current&&s.current)return e();s.current=!0},t),U.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[])}const gw=U.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),C0=U.createContext({}),Dp=U.createContext(null),I0=typeof document<"u",fp=I0?U.useLayoutEffect:U.useEffect,oz=U.createContext({strict:!1});function XU(e,t,n,s){const{visualElement:c}=U.useContext(C0),h=U.useContext(oz),m=U.useContext(Dp),l=U.useContext(gw).reducedMotion,b=U.useRef();s=s||h.renderer,!b.current&&s&&(b.current=s(e,{visualState:t,parent:c,props:n,presenceContext:m,blockInitialAnimation:m?m.initial===!1:!1,reducedMotionConfig:l}));const w=b.current;return U.useInsertionEffect(()=>{w&&w.update(n,m)}),fp(()=>{w&&w.render()}),U.useEffect(()=>{w&&w.updateFeatures()}),(window.HandoffAppearAnimations?fp:U.useEffect)(()=>{w&&w.animationState&&w.animationState.animateChanges()}),w}function gd(e){return typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function HU(e,t,n){return U.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):gd(n)&&(n.current=s))},[t])}function pp(e){return typeof e=="string"||Array.isArray(e)}function M0(e){return typeof e=="object"&&typeof e.start=="function"}const yw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vw=["initial",...yw];function P0(e){return M0(e.animate)||vw.some(t=>pp(e[t]))}function sz(e){return Boolean(P0(e)||e.variants)}function YU(e,t){if(P0(e)){const{initial:n,animate:s}=e;return{initial:n===!1||pp(n)?n:void 0,animate:pp(s)?s:void 0}}return e.inherit!==!1?t:{}}function KU(e){const{initial:t,animate:n}=YU(e,U.useContext(C0));return U.useMemo(()=>({initial:t,animate:n}),[Yk(t),Yk(n)])}function Yk(e){return Array.isArray(e)?e.join(" "):e}const Kk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},mp={};for(const e in Kk)mp[e]={isEnabled:t=>Kk[e].some(n=>!!t[n])};function JU(e){for(const t in e)mp[t]={...mp[t],...e[t]}}function Rp(e){const t=U.useRef(null);return t.current===null&&(t.current=e()),t.current}const zf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let QU=1;function e8(){return Rp(()=>{if(zf.hasEverUpdated)return QU++})}const _w=U.createContext({}),az=U.createContext({}),t8=Symbol.for("motionComponentSymbol");function n8({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:c}){e&&JU(e);function h(l,b){let w;const k={...U.useContext(gw),...l,layoutId:r8(l)},{isStatic:M}=k,E=KU(l),L=M?void 0:e8(),N=s(l,M);if(!M&&I0){E.visualElement=XU(c,N,k,t);const V=U.useContext(az),J=U.useContext(oz).strict;E.visualElement&&(w=E.visualElement.loadFeatures(k,J,e,L,V))}return U.createElement(C0.Provider,{value:E},w&&E.visualElement?U.createElement(w,{visualElement:E.visualElement,...k}):null,n(c,l,L,HU(N,E.visualElement,b),N,M,E.visualElement))}const m=U.forwardRef(h);return m[t8]=c,m}function r8({layoutId:e}){const t=U.useContext(_w).id;return t&&e!==void 0?t+"-"+e:e}function i8(e){function t(s,c={}){return n8(e(s,c))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(s,c)=>(n.has(c)||n.set(c,t(c)),n.get(c))})}const o8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function xw(e){return typeof e!="string"||e.includes("-")?!1:!!(o8.indexOf(e)>-1||/[A-Z]/.test(e))}const My={};function s8(e){Object.assign(My,e)}const z0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_u=new Set(z0);function lz(e,{layout:t,layoutId:n}){return _u.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!My[e]||e==="opacity")}const lo=e=>Boolean(e&&e.getVelocity),a8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},l8=z0.length;function c8(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},s,c){let h="";for(let m=0;m<l8;m++){const l=z0[m];if(e[l]!==void 0){const b=a8[l]||l;h+=`${b}(${e[l]}) `}}return t&&!e.z&&(h+="translateZ(0)"),h=h.trim(),c?h=c(e,s?"":h):n&&s&&(h="none"),h}const cz=e=>t=>typeof t=="string"&&t.startsWith(e),uz=cz("--"),u1=cz("var(--"),u8=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Vd=(e,t,n)=>Math.min(Math.max(n,e),t),xu={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Af={...xu,transform:e=>Vd(0,1,e)},fg={...xu,default:1},Df=e=>Math.round(e*1e5)/1e5,gp=/(-)?([\d]*\.?[\d])+/g,d1=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,d8=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Lp(e){return typeof e=="string"}const Op=e=>({test:t=>Lp(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),zl=Op("deg"),aa=Op("%"),Wt=Op("px"),h8=Op("vh"),f8=Op("vw"),Jk={...aa,parse:e=>aa.parse(e)/100,transform:e=>aa.transform(e*100)},Qk={...xu,transform:Math.round},dz={borderWidth:Wt,borderTopWidth:Wt,borderRightWidth:Wt,borderBottomWidth:Wt,borderLeftWidth:Wt,borderRadius:Wt,radius:Wt,borderTopLeftRadius:Wt,borderTopRightRadius:Wt,borderBottomRightRadius:Wt,borderBottomLeftRadius:Wt,width:Wt,maxWidth:Wt,height:Wt,maxHeight:Wt,size:Wt,top:Wt,right:Wt,bottom:Wt,left:Wt,padding:Wt,paddingTop:Wt,paddingRight:Wt,paddingBottom:Wt,paddingLeft:Wt,margin:Wt,marginTop:Wt,marginRight:Wt,marginBottom:Wt,marginLeft:Wt,rotate:zl,rotateX:zl,rotateY:zl,rotateZ:zl,scale:fg,scaleX:fg,scaleY:fg,scaleZ:fg,skew:zl,skewX:zl,skewY:zl,distance:Wt,translateX:Wt,translateY:Wt,translateZ:Wt,x:Wt,y:Wt,z:Wt,perspective:Wt,transformPerspective:Wt,opacity:Af,originX:Jk,originY:Jk,originZ:Wt,zIndex:Qk,fillOpacity:Af,strokeOpacity:Af,numOctaves:Qk};function bw(e,t,n,s){const{style:c,vars:h,transform:m,transformOrigin:l}=e;let b=!1,w=!1,k=!0;for(const M in t){const E=t[M];if(uz(M)){h[M]=E;continue}const L=dz[M],N=u8(E,L);if(_u.has(M)){if(b=!0,m[M]=N,!k)continue;E!==(L.default||0)&&(k=!1)}else M.startsWith("origin")?(w=!0,l[M]=N):c[M]=N}if(t.transform||(b||s?c.transform=c8(e.transform,n,k,s):c.transform&&(c.transform="none")),w){const{originX:M="50%",originY:E="50%",originZ:L=0}=l;c.transformOrigin=`${M} ${E} ${L}`}}const ww=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function hz(e,t,n){for(const s in t)!lo(t[s])&&!lz(s,n)&&(e[s]=t[s])}function p8({transformTemplate:e},t,n){return U.useMemo(()=>{const s=ww();return bw(s,t,{enableHardwareAcceleration:!n},e),Object.assign({},s.vars,s.style)},[t])}function m8(e,t,n){const s=e.style||{},c={};return hz(c,s,e),Object.assign(c,p8(e,t,n)),e.transformValues?e.transformValues(c):c}function g8(e,t,n){const s={},c=m8(e,t,n);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,c.userSelect=c.WebkitUserSelect=c.WebkitTouchCallout="none",c.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=c,s}const y8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Py(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||y8.has(e)}let fz=e=>!Py(e);function v8(e){e&&(fz=t=>t.startsWith("on")?!Py(t):e(t))}try{v8(require("@emotion/is-prop-valid").default)}catch{}function _8(e,t,n){const s={};for(const c in e)c==="values"&&typeof e.values=="object"||(fz(c)||n===!0&&Py(c)||!t&&!Py(c)||e.draggable&&c.startsWith("onDrag"))&&(s[c]=e[c]);return s}function eE(e,t,n){return typeof e=="string"?e:Wt.transform(t+n*e)}function x8(e,t,n){const s=eE(t,e.x,e.width),c=eE(n,e.y,e.height);return`${s} ${c}`}const b8={offset:"stroke-dashoffset",array:"stroke-dasharray"},w8={offset:"strokeDashoffset",array:"strokeDasharray"};function S8(e,t,n=1,s=0,c=!0){e.pathLength=1;const h=c?b8:w8;e[h.offset]=Wt.transform(-s);const m=Wt.transform(t),l=Wt.transform(n);e[h.array]=`${m} ${l}`}function Sw(e,{attrX:t,attrY:n,originX:s,originY:c,pathLength:h,pathSpacing:m=1,pathOffset:l=0,...b},w,k,M){if(bw(e,b,w,M),k){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:E,style:L,dimensions:N}=e;E.transform&&(N&&(L.transform=E.transform),delete E.transform),N&&(s!==void 0||c!==void 0||L.transform)&&(L.transformOrigin=x8(N,s!==void 0?s:.5,c!==void 0?c:.5)),t!==void 0&&(E.x=t),n!==void 0&&(E.y=n),h!==void 0&&S8(E,h,m,l,!1)}const pz=()=>({...ww(),attrs:{}}),Tw=e=>typeof e=="string"&&e.toLowerCase()==="svg";function T8(e,t,n,s){const c=U.useMemo(()=>{const h=pz();return Sw(h,t,{enableHardwareAcceleration:!1},Tw(s),e.transformTemplate),{...h.attrs,style:{...h.style}}},[t]);if(e.style){const h={};hz(h,e.style,e),c.style={...h,...c.style}}return c}function k8(e=!1){return(n,s,c,h,{latestValues:m},l)=>{const w=(xw(n)?T8:g8)(s,m,l,n),M={..._8(s,typeof n=="string",e),...w,ref:h},{children:E}=s,L=U.useMemo(()=>lo(E)?E.get():E,[E]);return c&&(M["data-projection-id"]=c),U.createElement(n,{...M,children:L})}}const kw=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function mz(e,{style:t,vars:n},s,c){Object.assign(e.style,t,c&&c.getProjectionStyles(s));for(const h in n)e.style.setProperty(h,n[h])}const gz=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yz(e,t,n,s){mz(e,t,void 0,s);for(const c in t.attrs)e.setAttribute(gz.has(c)?c:kw(c),t.attrs[c])}function Ew(e,t){const{style:n}=e,s={};for(const c in n)(lo(n[c])||t.style&&lo(t.style[c])||lz(c,e))&&(s[c]=n[c]);return s}function vz(e,t){const n=Ew(e,t);for(const s in e)if(lo(e[s])||lo(t[s])){const c=s==="x"||s==="y"?"attr"+s.toUpperCase():s;n[c]=e[s]}return n}function Cw(e,t,n,s={},c={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,s,c)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,s,c)),t}const zy=e=>Array.isArray(e),E8=e=>Boolean(e&&typeof e=="object"&&e.mix&&e.toValue),C8=e=>zy(e)?e[e.length-1]||0:e;function Ug(e){const t=lo(e)?e.get():e;return E8(t)?t.toValue():t}function I8({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},s,c,h){const m={latestValues:M8(s,c,h,e),renderState:t()};return n&&(m.mount=l=>n(s,l,m)),m}const _z=e=>(t,n)=>{const s=U.useContext(C0),c=U.useContext(Dp),h=()=>I8(e,t,s,c);return n?h():Rp(h)};function M8(e,t,n,s){const c={},h=s(e,{});for(const E in h)c[E]=Ug(h[E]);let{initial:m,animate:l}=e;const b=P0(e),w=sz(e);t&&w&&!b&&e.inherit!==!1&&(m===void 0&&(m=t.initial),l===void 0&&(l=t.animate));let k=n?n.initial===!1:!1;k=k||m===!1;const M=k?l:m;return M&&typeof M!="boolean"&&!M0(M)&&(Array.isArray(M)?M:[M]).forEach(L=>{const N=Cw(e,L);if(!N)return;const{transitionEnd:V,transition:J,...$}=N;for(const F in $){let W=$[F];if(Array.isArray(W)){const te=k?W.length-1:0;W=W[te]}W!==null&&(c[F]=W)}for(const F in V)c[F]=V[F]}),c}const P8={useVisualState:_z({scrapeMotionValuesFromProps:vz,createRenderState:pz,onMount:(e,t,{renderState:n,latestValues:s})=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}Sw(n,s,{enableHardwareAcceleration:!1},Tw(t.tagName),e.transformTemplate),yz(t,n)}})},z8={useVisualState:_z({scrapeMotionValuesFromProps:Ew,createRenderState:ww})};function A8(e,{forwardMotionProps:t=!1},n,s){return{...xw(e)?P8:z8,preloadedFeatures:n,useRender:k8(t),createVisualElement:s,Component:e}}function Za(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}const xz=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function A0(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const D8=e=>t=>xz(t)&&e(t,A0(t));function Ka(e,t,n,s){return Za(e,t,D8(n),s)}const R8=(e,t)=>n=>t(e(n)),Jl=(...e)=>e.reduce(R8);function bz(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const tE=bz("dragHorizontal"),nE=bz("dragVertical");function wz(e){let t=!1;if(e==="y")t=nE();else if(e==="x")t=tE();else{const n=tE(),s=nE();n&&s?t=()=>{n(),s()}:(n&&n(),s&&s())}return t}function Sz(){const e=wz(!0);return e?(e(),!1):!0}class sc{constructor(t){this.isMounted=!1,this.node=t}update(){}}const Tz=1/60*1e3,L8=typeof performance<"u"?()=>performance.now():()=>Date.now(),kz=typeof window<"u"?e=>window.requestAnimationFrame(e):e=>setTimeout(()=>e(L8()),Tz);function O8(e){let t=[],n=[],s=0,c=!1,h=!1;const m=new WeakSet,l={schedule:(b,w=!1,k=!1)=>{const M=k&&c,E=M?t:n;return w&&m.add(b),E.indexOf(b)===-1&&(E.push(b),M&&c&&(s=t.length)),b},cancel:b=>{const w=n.indexOf(b);w!==-1&&n.splice(w,1),m.delete(b)},process:b=>{if(c){h=!0;return}if(c=!0,[t,n]=[n,t],n.length=0,s=t.length,s)for(let w=0;w<s;w++){const k=t[w];k(b),m.has(k)&&(l.schedule(k),e())}c=!1,h&&(h=!1,l.process(b))}};return l}const Ja={delta:0,timestamp:0},B8=40;let h1=!0,yp=!1,f1=!1;const Bp=["read","update","preRender","render","postRender"],D0=Bp.reduce((e,t)=>(e[t]=O8(()=>yp=!0),e),{}),er=Bp.reduce((e,t)=>{const n=D0[t];return e[t]=(s,c=!1,h=!1)=>(yp||N8(),n.schedule(s,c,h)),e},{}),sl=Bp.reduce((e,t)=>(e[t]=D0[t].cancel,e),{}),M_=Bp.reduce((e,t)=>(e[t]=()=>D0[t].process(Ja),e),{}),F8=e=>D0[e].process(Ja),Ez=e=>{yp=!1,Ja.delta=h1?Tz:Math.max(Math.min(e-Ja.timestamp,B8),1),Ja.timestamp=e,f1=!0,Bp.forEach(F8),f1=!1,yp&&(h1=!1,kz(Ez))},N8=()=>{yp=!0,h1=!0,f1||kz(Ez)};function rE(e,t){const n="pointer"+(t?"enter":"leave"),s="onHover"+(t?"Start":"End"),c=(h,m)=>{if(h.type==="touch"||Sz())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[s]&&er.update(()=>l[s](h,m))};return Ka(e.current,n,c,{passive:!e.getProps()[s]})}class $8 extends sc{mount(){this.unmount=Jl(rE(this.node,!0),rE(this.node,!1))}unmount(){}}class j8 extends sc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Jl(Za(this.node.current,"focus",()=>this.onFocus()),Za(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Cz=(e,t)=>t?e===t?!0:Cz(e,t.parentElement):!1,qo=e=>e;function P_(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,A0(n))}class V8 extends sc{constructor(){super(...arguments),this.removeStartListeners=qo,this.removeEndListeners=qo,this.removeAccessibleListeners=qo,this.startPointerPress=(t,n)=>{if(this.removeEndListeners(),this.isPressing)return;const s=this.node.getProps(),h=Ka(window,"pointerup",(l,b)=>{if(!this.checkPressEnd())return;const{onTap:w,onTapCancel:k}=this.node.getProps();er.update(()=>{Cz(this.node.current,l.target)?w&&w(l,b):k&&k(l,b)})},{passive:!(s.onTap||s.onPointerUp)}),m=Ka(window,"pointercancel",(l,b)=>this.cancelPress(l,b),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=Jl(h,m),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=h=>{if(h.key!=="Enter"||this.isPressing)return;const m=l=>{l.key!=="Enter"||!this.checkPressEnd()||P_("up",(b,w)=>{const{onTap:k}=this.node.getProps();k&&er.update(()=>k(b,w))})};this.removeEndListeners(),this.removeEndListeners=Za(this.node.current,"keyup",m),P_("down",(l,b)=>{this.startPress(l,b)})},n=Za(this.node.current,"keydown",t),s=()=>{this.isPressing&&P_("cancel",(h,m)=>this.cancelPress(h,m))},c=Za(this.node.current,"blur",s);this.removeAccessibleListeners=Jl(n,c)}}startPress(t,n){this.isPressing=!0;const{onTapStart:s,whileTap:c}=this.node.getProps();c&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&er.update(()=>s(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Sz()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&er.update(()=>s(t,n))}mount(){const t=this.node.getProps(),n=Ka(this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=Za(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Jl(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const p1=new WeakMap,z_=new WeakMap,U8=e=>{const t=p1.get(e.target);t&&t(e)},G8=e=>{e.forEach(U8)};function W8({root:e,...t}){const n=e||document;z_.has(n)||z_.set(n,{});const s=z_.get(n),c=JSON.stringify(t);return s[c]||(s[c]=new IntersectionObserver(G8,{root:e,...t})),s[c]}function Z8(e,t,n){const s=W8(t);return p1.set(e,n),s.observe(e),()=>{p1.delete(e),s.unobserve(e)}}const q8={some:0,all:1};class X8 extends sc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:c="some",once:h}=t,m={root:n?n.current:void 0,rootMargin:s,threshold:typeof c=="number"?c:q8[c]},l=b=>{const{isIntersecting:w}=b;if(this.isInView===w||(this.isInView=w,h&&!w&&this.hasEnteredView))return;w&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",w);const{onViewportEnter:k,onViewportLeave:M}=this.node.getProps(),E=w?k:M;E&&E(b)};return Z8(this.node.current,m,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(H8(t,n))&&this.startObserver()}unmount(){}}function H8({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Y8={inView:{Feature:X8},tap:{Feature:V8},focus:{Feature:j8},hover:{Feature:$8}};function Iz(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}const K8=e=>/^\-?\d*\.?\d+$/.test(e),J8=e=>/^0[^.\s]+$/.test(e);function Iw(e,t){e.indexOf(t)===-1&&e.push(t)}function Mw(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Pw{constructor(){this.subscriptions=[]}add(t){return Iw(this.subscriptions,t),()=>Mw(this.subscriptions,t)}notify(t,n,s){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](t,n,s);else for(let h=0;h<c;h++){const m=this.subscriptions[h];m&&m(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function zw(e,t){return t?e*(1e3/t):0}const Q8=e=>!isNaN(parseFloat(e));class e9{constructor(t,n={}){this.version="10.2.3",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,c=!0)=>{this.prev=this.current,this.current=s;const{delta:h,timestamp:m}=Ja;this.lastUpdated!==m&&(this.timeDelta=h,this.lastUpdated=m,er.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),c&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>er.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Q8(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Pw);const s=this.events[t].add(n);return t==="change"?()=>{s(),er.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=t,this.timeDelta=s}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?zw(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n)||null,this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){this.animation=null}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fu(e,t){return new e9(e,t)}const Aw=(e,t)=>n=>Boolean(Lp(n)&&d8.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Mz=(e,t,n)=>s=>{if(!Lp(s))return s;const[c,h,m,l]=s.match(gp);return{[e]:parseFloat(c),[t]:parseFloat(h),[n]:parseFloat(m),alpha:l!==void 0?parseFloat(l):1}},t9=e=>Vd(0,255,e),A_={...xu,transform:e=>Math.round(t9(e))},eu={test:Aw("rgb","red"),parse:Mz("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+A_.transform(e)+", "+A_.transform(t)+", "+A_.transform(n)+", "+Df(Af.transform(s))+")"};function n9(e){let t="",n="",s="",c="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),c=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),c=e.substring(4,5),t+=t,n+=n,s+=s,c+=c),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:c?parseInt(c,16)/255:1}}const m1={test:Aw("#"),parse:n9,transform:eu.transform},yd={test:Aw("hsl","hue"),parse:Mz("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+aa.transform(Df(t))+", "+aa.transform(Df(n))+", "+Df(Af.transform(s))+")"},ji={test:e=>eu.test(e)||m1.test(e)||yd.test(e),parse:e=>eu.test(e)?eu.parse(e):yd.test(e)?yd.parse(e):m1.parse(e),transform:e=>Lp(e)?e:e.hasOwnProperty("red")?eu.transform(e):yd.transform(e)},Pz="${c}",zz="${n}";function r9(e){var t,n;return isNaN(e)&&Lp(e)&&(((t=e.match(gp))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(d1))===null||n===void 0?void 0:n.length)||0)>0}function Ay(e){typeof e=="number"&&(e=`${e}`);const t=[];let n=0,s=0;const c=e.match(d1);c&&(n=c.length,e=e.replace(d1,Pz),t.push(...c.map(ji.parse)));const h=e.match(gp);return h&&(s=h.length,e=e.replace(gp,zz),t.push(...h.map(xu.parse))),{values:t,numColors:n,numNumbers:s,tokenised:e}}function Az(e){return Ay(e).values}function Dz(e){const{values:t,numColors:n,tokenised:s}=Ay(e),c=t.length;return h=>{let m=s;for(let l=0;l<c;l++)m=m.replace(l<n?Pz:zz,l<n?ji.transform(h[l]):Df(h[l]));return m}}const i9=e=>typeof e=="number"?0:e;function o9(e){const t=Az(e);return Dz(e)(t.map(i9))}const tc={test:r9,parse:Az,createTransformer:Dz,getAnimatableNone:o9},s9=new Set(["brightness","contrast","saturate","opacity"]);function a9(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(gp)||[];if(!s)return e;const c=n.replace(s,"");let h=s9.has(t)?1:0;return s!==n&&(h*=100),t+"("+h+c+")"}const l9=/([a-z-]*)\(.*?\)/g,g1={...tc,getAnimatableNone:e=>{const t=e.match(l9);return t?t.map(a9).join(" "):e}},c9={...dz,color:ji,backgroundColor:ji,outlineColor:ji,fill:ji,stroke:ji,borderColor:ji,borderTopColor:ji,borderRightColor:ji,borderBottomColor:ji,borderLeftColor:ji,filter:g1,WebkitFilter:g1},Dw=e=>c9[e];function Rw(e,t){let n=Dw(e);return n!==g1&&(n=tc),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Rz=e=>t=>t.test(e),u9={test:e=>e==="auto",parse:e=>e},Lz=[xu,Wt,aa,zl,f8,h8,u9],Jh=e=>Lz.find(Rz(e)),d9=[...Lz,ji,tc],h9=e=>d9.find(Rz(e));function f9(e){const t={};return e.values.forEach((n,s)=>t[s]=n.get()),t}function p9(e){const t={};return e.values.forEach((n,s)=>t[s]=n.getVelocity()),t}function R0(e,t,n){const s=e.getProps();return Cw(s,t,n!==void 0?n:s.custom,f9(e),p9(e))}function m9(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,fu(n))}function g9(e,t){const n=R0(e,t);let{transitionEnd:s={},transition:c={},...h}=n?e.makeTargetAnimatable(n,!1):{};h={...h,...s};for(const m in h){const l=C8(h[m]);m9(e,m,l)}}function y9(e,t,n){var s,c;const h=Object.keys(t).filter(l=>!e.hasValue(l)),m=h.length;if(m)for(let l=0;l<m;l++){const b=h[l],w=t[b];let k=null;Array.isArray(w)&&(k=w[0]),k===null&&(k=(c=(s=n[b])!==null&&s!==void 0?s:e.readValue(b))!==null&&c!==void 0?c:t[b]),k!=null&&(typeof k=="string"&&(K8(k)||J8(k))?k=parseFloat(k):!h9(k)&&tc.test(w)&&(k=Rw(b,w)),e.addValue(b,fu(k,{owner:e})),n[b]===void 0&&(n[b]=k),k!==null&&e.setBaseTarget(b,k))}}function v9(e,t){return t?(t[e]||t.default||t).from:void 0}function _9(e,t,n){const s={};for(const c in e){const h=v9(c,t);if(h!==void 0)s[c]=h;else{const m=n.getValue(c);m&&(s[c]=m.get())}}return s}function Dy(e){return Boolean(lo(e)&&e.add)}const x9="framerAppearId",b9="data-"+kw(x9);let w9=qo,Ry=qo;const Gg=e=>e*1e3,S9={current:!1},Lw=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ow=e=>t=>1-e(1-t),Bw=e=>e*e,T9=Ow(Bw),Fw=Lw(Bw),fr=(e,t,n)=>-n*e+n*t+e;function D_(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function k9({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let c=0,h=0,m=0;if(!t)c=h=m=n;else{const l=n<.5?n*(1+t):n+t-n*t,b=2*n-l;c=D_(b,l,e+1/3),h=D_(b,l,e),m=D_(b,l,e-1/3)}return{red:Math.round(c*255),green:Math.round(h*255),blue:Math.round(m*255),alpha:s}}const R_=(e,t,n)=>{const s=e*e;return Math.sqrt(Math.max(0,n*(t*t-s)+s))},E9=[m1,eu,yd],C9=e=>E9.find(t=>t.test(e));function iE(e){const t=C9(e);let n=t.parse(e);return t===yd&&(n=k9(n)),n}const Oz=(e,t)=>{const n=iE(e),s=iE(t),c={...n};return h=>(c.red=R_(n.red,s.red,h),c.green=R_(n.green,s.green,h),c.blue=R_(n.blue,s.blue,h),c.alpha=fr(n.alpha,s.alpha,h),eu.transform(c))};function Bz(e,t){return typeof e=="number"?n=>fr(e,t,n):ji.test(e)?Oz(e,t):Nz(e,t)}const Fz=(e,t)=>{const n=[...e],s=n.length,c=e.map((h,m)=>Bz(h,t[m]));return h=>{for(let m=0;m<s;m++)n[m]=c[m](h);return n}},I9=(e,t)=>{const n={...e,...t},s={};for(const c in n)e[c]!==void 0&&t[c]!==void 0&&(s[c]=Bz(e[c],t[c]));return c=>{for(const h in s)n[h]=s[h](c);return n}},Nz=(e,t)=>{const n=tc.createTransformer(t),s=Ay(e),c=Ay(t);return s.numColors===c.numColors&&s.numNumbers>=c.numNumbers?Jl(Fz(s.values,c.values),n):m=>`${m>0?t:e}`},vp=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},oE=(e,t)=>n=>fr(e,t,n);function M9(e){return typeof e=="number"?oE:typeof e=="string"?ji.test(e)?Oz:Nz:Array.isArray(e)?Fz:typeof e=="object"?I9:oE}function P9(e,t,n){const s=[],c=n||M9(e[0]),h=e.length-1;for(let m=0;m<h;m++){let l=c(e[m],e[m+1]);if(t){const b=Array.isArray(t)?t[m]:t;l=Jl(b,l)}s.push(l)}return s}function Nw(e,t,{clamp:n=!0,ease:s,mixer:c}={}){const h=e.length;Ry(h===t.length),Ry(!s||!Array.isArray(s)||s.length===h-1),e[0]>e[h-1]&&(e=[...e].reverse(),t=[...t].reverse());const m=P9(t,s,c),l=m.length,b=w=>{let k=0;if(l>1)for(;k<e.length-2&&!(w<e[k+1]);k++);const M=vp(e[k],e[k+1],w);return m[k](M)};return n?w=>b(Vd(e[0],e[h-1],w)):b}function z9(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const c=vp(0,t,s);e.push(fr(n,1,c))}}function A9(e){const t=[0];return z9(t,e.length-1),t}function D9(e,t){return e.map(n=>n*t)}const $z=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,R9=1e-7,L9=12;function O9(e,t,n,s,c){let h,m,l=0;do m=t+(n-t)/2,h=$z(m,s,c)-e,h>0?n=m:t=m;while(Math.abs(h)>R9&&++l<L9);return m}function jz(e,t,n,s){if(e===t&&n===s)return qo;const c=h=>O9(h,0,1,e,n);return h=>h===0||h===1?h:$z(c(h),t,s)}const Vz=e=>1-Math.sin(Math.acos(e)),$w=Ow(Vz),B9=Lw($w),Uz=jz(.33,1.53,.69,.99),jw=Ow(Uz),F9=Lw(jw),N9=e=>(e*=2)<1?.5*jw(e):.5*(2-Math.pow(2,-10*(e-1))),$9={linear:qo,easeIn:Bw,easeInOut:Fw,easeOut:T9,circIn:Vz,circInOut:B9,circOut:$w,backIn:jw,backInOut:F9,backOut:Uz,anticipate:N9},sE=e=>{if(Array.isArray(e)){Ry(e.length===4);const[t,n,s,c]=e;return jz(t,n,s,c)}else if(typeof e=="string")return $9[e];return e},j9=e=>Array.isArray(e)&&typeof e[0]!="number";function V9(e,t){return e.map(()=>t||Fw).splice(0,e.length-1)}function y1({keyframes:e,ease:t=Fw,times:n,duration:s=300}){e=[...e];const c=j9(t)?t.map(sE):sE(t),h={done:!1,value:e[0]},m=D9(n&&n.length===e.length?n:A9(e),s);function l(){return Nw(m,e,{ease:Array.isArray(c)?c:V9(e,c)})}let b=l();return{next:w=>(h.value=b(w),h.done=w>=s,h),flipTarget:()=>{e.reverse(),b=l()}}}const L_=.001,U9=.01,aE=10,G9=.05,W9=1;function Z9({duration:e=800,bounce:t=.25,velocity:n=0,mass:s=1}){let c,h;w9(e<=aE*1e3);let m=1-t;m=Vd(G9,W9,m),e=Vd(U9,aE,e/1e3),m<1?(c=w=>{const k=w*m,M=k*e,E=k-n,L=v1(w,m),N=Math.exp(-M);return L_-E/L*N},h=w=>{const M=w*m*e,E=M*n+n,L=Math.pow(m,2)*Math.pow(w,2)*e,N=Math.exp(-M),V=v1(Math.pow(w,2),m);return(-c(w)+L_>0?-1:1)*((E-L)*N)/V}):(c=w=>{const k=Math.exp(-w*e),M=(w-n)*e+1;return-L_+k*M},h=w=>{const k=Math.exp(-w*e),M=(n-w)*(e*e);return k*M});const l=5/e,b=X9(c,h,l);if(e=e*1e3,isNaN(b))return{stiffness:100,damping:10,duration:e};{const w=Math.pow(b,2)*s;return{stiffness:w,damping:m*2*Math.sqrt(s*w),duration:e}}}const q9=12;function X9(e,t,n){let s=n;for(let c=1;c<q9;c++)s=s-e(s)/t(s);return s}function v1(e,t){return e*Math.sqrt(1-t*t)}const H9=["duration","bounce"],Y9=["stiffness","damping","mass"];function lE(e,t){return t.some(n=>e[n]!==void 0)}function K9(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!lE(e,Y9)&&lE(e,H9)){const n=Z9(e);t={...t,...n,velocity:0,mass:1},t.isResolvedFromDuration=!0}return t}const J9=5;function Gz({keyframes:e,restDelta:t,restSpeed:n,...s}){let c=e[0],h=e[e.length-1];const m={done:!1,value:c},{stiffness:l,damping:b,mass:w,velocity:k,duration:M,isResolvedFromDuration:E}=K9(s);let L=Q9,N=k?-(k/1e3):0;const V=b/(2*Math.sqrt(l*w));function J(){const $=h-c,F=Math.sqrt(l/w)/1e3,W=Math.abs($)<5;if(n||(n=W?.01:2),t||(t=W?.005:.5),V<1){const te=v1(F,V);L=de=>{const pe=Math.exp(-V*F*de);return h-pe*((N+V*F*$)/te*Math.sin(te*de)+$*Math.cos(te*de))}}else if(V===1)L=te=>h-Math.exp(-F*te)*($+(N+F*$)*te);else{const te=F*Math.sqrt(V*V-1);L=de=>{const pe=Math.exp(-V*F*de),ce=Math.min(te*de,300);return h-pe*((N+V*F*$)*Math.sinh(ce)+te*$*Math.cosh(ce))/te}}}return J(),{next:$=>{const F=L($);if(E)m.done=$>=M;else{let W=N;if($!==0)if(V<1){const pe=Math.max(0,$-J9);W=zw(F-L(pe),$-pe)}else W=0;const te=Math.abs(W)<=n,de=Math.abs(h-F)<=t;m.done=te&&de}return m.value=m.done?h:F,m},flipTarget:()=>{N=-N,[c,h]=[h,c],J()}}}Gz.needsInterpolation=(e,t)=>typeof e=="string"||typeof t=="string";const Q9=e=>0;function e7({keyframes:e=[0],velocity:t=0,power:n=.8,timeConstant:s=350,restDelta:c=.5,modifyTarget:h}){const m=e[0],l={done:!1,value:m};let b=n*t;const w=m+b,k=h===void 0?w:h(w);return k!==w&&(b=k-m),{next:M=>{const E=-b*Math.exp(-M/s);return l.done=!(E>c||E<-c),l.value=l.done?k:k+E,l},flipTarget:()=>{}}}const t7={decay:e7,keyframes:y1,tween:y1,spring:Gz};function Wz(e,t,n=0){return e-t-n}function n7(e,t=0,n=0,s=!0){return s?Wz(t+-e,t,n):t-(e-t)+n}function r7(e,t,n,s){return s?e>=t+n:e<=-n}const i7=e=>{const t=({delta:n})=>e(n);return{start:()=>er.update(t,!0),stop:()=>sl.update(t)}};function Ly({duration:e,driver:t=i7,elapsed:n=0,repeat:s=0,repeatType:c="loop",repeatDelay:h=0,keyframes:m,autoplay:l=!0,onPlay:b,onStop:w,onComplete:k,onRepeat:M,onUpdate:E,type:L="keyframes",...N}){const V=n;let J,$=0,F=e,W=!1,te=!0,de;const pe=t7[m.length>2?"keyframes":L]||y1,ce=m[0],oe=m[m.length-1];let be={done:!1,value:ce};const{needsInterpolation:ye}=pe;ye&&ye(ce,oe)&&(de=Nw([0,100],[ce,oe],{clamp:!1}),m=[0,100]);const Ae=pe({...N,duration:e,keyframes:m});function Ze(){$++,c==="reverse"?(te=$%2===0,n=n7(n,F,h,te)):(n=Wz(n,F,h),c==="mirror"&&Ae.flipTarget()),W=!1,M&&M()}function Xe(){J&&J.stop(),k&&k()}function ot(Ce){te||(Ce=-Ce),n+=Ce,W||(be=Ae.next(Math.max(0,n)),de&&(be.value=de(be.value)),W=te?be.done:n<=0),E&&E(be.value),W&&($===0&&(F=F!==void 0?F:n),$<s?r7(n,F,h,te)&&Ze():Xe())}function ft(){b&&b(),J=t(ot),J.start()}return l&&ft(),{stop:()=>{w&&w(),J&&J.stop()},set currentTime(Ce){n=V,ot(Ce)},sample:(Ce,Ee=!1)=>{if(n=V,Ee)return ot(Ce),be;const Me=e&&typeof e=="number"?Math.max(e*.5,50):50;let We=0;for(ot(0);We<=Ce;){const Ye=Ce-We;ot(Math.min(Ye,Me)),We+=Me}return be}}}function o7(e){return!e||Array.isArray(e)||typeof e=="string"&&Zz[e]}const mf=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,Zz={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:mf([0,.65,.55,1]),circOut:mf([.55,0,1,.45]),backIn:mf([.31,.01,.66,-.59]),backOut:mf([.33,1.53,.69,.99])};function s7(e){if(e)return Array.isArray(e)?mf(e):Zz[e]}function a7(e,t,n,{delay:s=0,duration:c,repeat:h=0,repeatType:m="loop",ease:l,times:b}={}){const w={[t]:n};return b&&(w.offset=b),e.animate(w,{delay:s,duration:c,easing:s7(l),fill:"both",iterations:h+1,direction:m==="reverse"?"alternate":"normal"})}const cE={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},O_={},qz={};for(const e in cE)qz[e]=()=>(O_[e]===void 0&&(O_[e]=cE[e]()),O_[e]);function l7(e,{repeat:t,repeatType:n="loop"}){const s=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[s]}const c7=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),pg=10,u7=(e,t)=>t.type==="spring"||e==="backgroundColor"||!o7(t.ease);function d7(e,t,{onUpdate:n,onComplete:s,...c}){if(!(qz.waapi()&&c7.has(t)&&!c.repeatDelay&&c.repeatType!=="mirror"&&c.damping!==0))return!1;let{keyframes:m,duration:l=300,elapsed:b=0,ease:w}=c;if(u7(t,c)){const M=Ly({...c,repeat:0,elapsed:0});let E={done:!1,value:m[0]};const L=[];let N=0;for(;!E.done&&N<2e4;)E=M.sample(N,!0),L.push(E.value),N+=pg;m=L,l=N-pg,w="linear"}const k=a7(e.owner.current,t,m,{...c,delay:-b,duration:l,ease:w});return k.onfinish=()=>{e.set(l7(m,c)),er.update(()=>k.cancel()),s&&s()},{get currentTime(){return k.currentTime||0},set currentTime(M){k.currentTime=M},stop:()=>{const{currentTime:M}=k;if(M){const E=Ly({...c,autoplay:!1});e.setWithVelocity(E.sample(M-pg).value,E.sample(M).value,pg)}er.update(()=>k.cancel())}}}function Xz(e,t){const n=performance.now(),s=({timestamp:c})=>{const h=c-n;h>=t&&(sl.read(s),e(h-t))};return er.read(s,!0),()=>sl.read(s)}function h7({keyframes:e,elapsed:t,onUpdate:n,onComplete:s}){const c=()=>{n&&n(e[e.length-1]),s&&s()};return t?{stop:Xz(c,-t)}:c()}function f7({keyframes:e,velocity:t=0,min:n,max:s,power:c=.8,timeConstant:h=750,bounceStiffness:m=500,bounceDamping:l=10,restDelta:b=1,modifyTarget:w,driver:k,onUpdate:M,onComplete:E,onStop:L}){const N=e[0];let V;function J(te){return n!==void 0&&te<n||s!==void 0&&te>s}function $(te){return n===void 0?s:s===void 0||Math.abs(n-te)<Math.abs(s-te)?n:s}function F(te){V&&V.stop(),V=Ly({keyframes:[0,1],velocity:0,...te,driver:k,onUpdate:de=>{M&&M(de),te.onUpdate&&te.onUpdate(de)},onComplete:E,onStop:L})}function W(te){F({type:"spring",stiffness:m,damping:l,restDelta:b,...te})}if(J(N))W({velocity:t,keyframes:[N,$(N)]});else{let te=c*t+N;typeof w<"u"&&(te=w(te));const de=$(te),pe=de===n?-1:1;let ce,oe;const be=ye=>{ce=oe,oe=ye,t=zw(ye-ce,Ja.delta),(pe===1&&ye>de||pe===-1&&ye<de)&&W({keyframes:[ye,de],velocity:t})};F({type:"decay",keyframes:[N,0],velocity:t,timeConstant:h,power:c,restDelta:b,modifyTarget:w,onUpdate:J(te)?be:void 0})}return{stop:()=>V&&V.stop()}}const p7={type:"spring",stiffness:500,damping:25,restSpeed:10},m7=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),g7={type:"keyframes",duration:.8},y7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},v7=(e,{keyframes:t})=>t.length>2?g7:_u.has(e)?e.startsWith("scale")?m7(t[1]):p7:y7,_1=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&tc.test(t)&&!t.startsWith("url("));function _7({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:c,repeat:h,repeatType:m,repeatDelay:l,from:b,elapsed:w,...k}){return!!Object.keys(k).length}function uE(e){return e===0||typeof e=="string"&&parseFloat(e)===0&&e.indexOf(" ")===-1}function dE(e){return typeof e=="number"?0:Rw("",e)}function Hz(e,t){return e[t]||e.default||e}function x7(e,t,n,s){const c=_1(t,n);let h=s.from!==void 0?s.from:e.get();return h==="none"&&c&&typeof n=="string"?h=Rw(t,n):uE(h)&&typeof n=="string"?h=dE(n):!Array.isArray(n)&&uE(n)&&typeof h=="string"&&(n=dE(h)),Array.isArray(n)?(n[0]===null&&(n[0]=h),n):[h,n]}const Vw=(e,t,n,s={})=>c=>{const h=Hz(s,e)||{},m=h.delay||s.delay||0;let{elapsed:l=0}=s;l=l-Gg(m);const b=x7(t,e,n,h),w=b[0],k=b[b.length-1],M=_1(e,w),E=_1(e,k);let L={keyframes:b,velocity:t.getVelocity(),...h,elapsed:l,onUpdate:N=>{t.set(N),h.onUpdate&&h.onUpdate(N)},onComplete:()=>{c(),h.onComplete&&h.onComplete()}};if(!M||!E||S9.current||h.type===!1)return h7(L);if(h.type==="inertia")return f7(L);if(_7(h)||(L={...L,...v7(e,L)}),L.duration&&(L.duration=Gg(L.duration)),L.repeatDelay&&(L.repeatDelay=Gg(L.repeatDelay)),t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const N=d7(t,e,L);if(N)return N}return Ly(L)};function b7(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const c=t.map(h=>x1(e,h,n));s=Promise.all(c)}else if(typeof t=="string")s=x1(e,t,n);else{const c=typeof t=="function"?R0(e,t,n.custom):t;s=Yz(e,c,n)}return s.then(()=>e.notify("AnimationComplete",t))}function x1(e,t,n={}){const s=R0(e,t,n.custom);let{transition:c=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(c=n.transitionOverride);const h=s?()=>Yz(e,s,n):()=>Promise.resolve(),m=e.variantChildren&&e.variantChildren.size?(b=0)=>{const{delayChildren:w=0,staggerChildren:k,staggerDirection:M}=c;return w7(e,t,w+b,k,M,n)}:()=>Promise.resolve(),{when:l}=c;if(l){const[b,w]=l==="beforeChildren"?[h,m]:[m,h];return b().then(w)}else return Promise.all([h(),m(n.delay)])}function Yz(e,t,{delay:n=0,transitionOverride:s,type:c}={}){let{transition:h=e.getDefaultTransition(),transitionEnd:m,...l}=e.makeTargetAnimatable(t);const b=e.getValue("willChange");s&&(h=s);const w=[],k=c&&e.animationState&&e.animationState.getState()[c];for(const M in l){const E=e.getValue(M),L=l[M];if(!E||L===void 0||k&&T7(k,M))continue;const N={delay:n,elapsed:0,...h};if(window.HandoffAppearAnimations&&!E.hasAnimated){const J=e.getProps()[b9];J&&(N.elapsed=window.HandoffAppearAnimations(J,M,E,er))}let V=E.start(Vw(M,E,L,e.shouldReduceMotion&&_u.has(M)?{type:!1}:N));Dy(b)&&(b.add(M),V=V.then(()=>b.remove(M))),w.push(V)}return Promise.all(w).then(()=>{m&&g9(e,m)})}function w7(e,t,n=0,s=0,c=1,h){const m=[],l=(e.variantChildren.size-1)*s,b=c===1?(w=0)=>w*s:(w=0)=>l-w*s;return Array.from(e.variantChildren).sort(S7).forEach((w,k)=>{w.notify("AnimationStart",t),m.push(x1(w,t,{...h,delay:n+b(k)}).then(()=>w.notify("AnimationComplete",t)))}),Promise.all(m)}function S7(e,t){return e.sortNodePosition(t)}function T7({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}const k7=[...yw].reverse(),E7=yw.length;function C7(e){return t=>Promise.all(t.map(({animation:n,options:s})=>b7(e,n,s)))}function I7(e){let t=C7(e);const n=P7();let s=!0;const c=(b,w)=>{const k=R0(e,w);if(k){const{transition:M,transitionEnd:E,...L}=k;b={...b,...L,...E}}return b};function h(b){t=b(e)}function m(b,w){const k=e.getProps(),M=e.getVariantContext(!0)||{},E=[],L=new Set;let N={},V=1/0;for(let $=0;$<E7;$++){const F=k7[$],W=n[F],te=k[F]!==void 0?k[F]:M[F],de=pp(te),pe=F===w?W.isActive:null;pe===!1&&(V=$);let ce=te===M[F]&&te!==k[F]&&de;if(ce&&s&&e.manuallyAnimateOnMount&&(ce=!1),W.protectedKeys={...N},!W.isActive&&pe===null||!te&&!W.prevProp||M0(te)||typeof te=="boolean")continue;const oe=M7(W.prevProp,te);let be=oe||F===w&&W.isActive&&!ce&&de||$>V&&de;const ye=Array.isArray(te)?te:[te];let Ae=ye.reduce(c,{});pe===!1&&(Ae={});const{prevResolvedValues:Ze={}}=W,Xe={...Ze,...Ae},ot=ft=>{be=!0,L.delete(ft),W.needsAnimating[ft]=!0};for(const ft in Xe){const Ce=Ae[ft],Ee=Ze[ft];N.hasOwnProperty(ft)||(Ce!==Ee?zy(Ce)&&zy(Ee)?!Iz(Ce,Ee)||oe?ot(ft):W.protectedKeys[ft]=!0:Ce!==void 0?ot(ft):L.add(ft):Ce!==void 0&&L.has(ft)?ot(ft):W.protectedKeys[ft]=!0)}W.prevProp=te,W.prevResolvedValues=Ae,W.isActive&&(N={...N,...Ae}),s&&e.blockInitialAnimation&&(be=!1),be&&!ce&&E.push(...ye.map(ft=>({animation:ft,options:{type:F,...b}})))}if(L.size){const $={};L.forEach(F=>{const W=e.getBaseTarget(F);W!==void 0&&($[F]=W)}),E.push({animation:$})}let J=Boolean(E.length);return s&&k.initial===!1&&!e.manuallyAnimateOnMount&&(J=!1),s=!1,J?t(E):Promise.resolve()}function l(b,w,k){var M;if(n[b].isActive===w)return Promise.resolve();(M=e.variantChildren)===null||M===void 0||M.forEach(L=>{var N;return(N=L.animationState)===null||N===void 0?void 0:N.setActive(b,w)}),n[b].isActive=w;const E=m(k,b);for(const L in n)n[L].protectedKeys={};return E}return{animateChanges:m,setActive:l,setAnimateFunction:h,getState:()=>n}}function M7(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Iz(t,e):!1}function jc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function P7(){return{animate:jc(!0),whileInView:jc(),whileHover:jc(),whileTap:jc(),whileDrag:jc(),whileFocus:jc(),exit:jc()}}class z7 extends sc{constructor(t){super(t),t.animationState||(t.animationState=I7(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),M0(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let A7=0;class D7 extends sc{constructor(){super(...arguments),this.id=A7++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:s}=this.node.presenceContext,{isPresent:c}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===c)return;const h=this.node.animationState.setActive("exit",!t,{custom:s??this.node.getProps().custom});n&&!t&&h.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const R7={animation:{Feature:z7},exit:{Feature:D7}},hE=(e,t)=>Math.abs(e-t);function L7(e,t){const n=hE(e.x,t.x),s=hE(e.y,t.y);return Math.sqrt(n**2+s**2)}class Kz{constructor(t,n,{transformPagePoint:s}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=F_(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,M=L7(w.offset,{x:0,y:0})>=3;if(!k&&!M)return;const{point:E}=w,{timestamp:L}=Ja;this.history.push({...E,timestamp:L});const{onStart:N,onMove:V}=this.handlers;k||(N&&N(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,w)},this.handlePointerMove=(w,k)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=B_(k,this.transformPagePoint),er.update(this.updatePoint,!0)},this.handlePointerUp=(w,k)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:M,onSessionEnd:E}=this.handlers,L=F_(w.type==="pointercancel"?this.lastMoveEventInfo:B_(k,this.transformPagePoint),this.history);this.startEvent&&M&&M(w,L),E&&E(w,L)},!xz(t))return;this.handlers=n,this.transformPagePoint=s;const c=A0(t),h=B_(c,this.transformPagePoint),{point:m}=h,{timestamp:l}=Ja;this.history=[{...m,timestamp:l}];const{onSessionStart:b}=n;b&&b(t,F_(h,this.history)),this.removeListeners=Jl(Ka(window,"pointermove",this.handlePointerMove),Ka(window,"pointerup",this.handlePointerUp),Ka(window,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),sl.update(this.updatePoint)}}function B_(e,t){return t?{point:t(e.point)}:e}function fE(e,t){return{x:e.x-t.x,y:e.y-t.y}}function F_({point:e},t){return{point:e,delta:fE(e,Jz(t)),offset:fE(e,O7(t)),velocity:B7(t,.1)}}function O7(e){return e[0]}function Jz(e){return e[e.length-1]}function B7(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const c=Jz(e);for(;n>=0&&(s=e[n],!(c.timestamp-s.timestamp>Gg(t)));)n--;if(!s)return{x:0,y:0};const h=(c.timestamp-s.timestamp)/1e3;if(h===0)return{x:0,y:0};const m={x:(c.x-s.x)/h,y:(c.y-s.y)/h};return m.x===1/0&&(m.x=0),m.y===1/0&&(m.y=0),m}function Co(e){return e.max-e.min}function b1(e,t=0,n=.01){return Math.abs(e-t)<=n}function pE(e,t,n,s=.5){e.origin=s,e.originPoint=fr(t.min,t.max,e.origin),e.scale=Co(n)/Co(t),(b1(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=fr(n.min,n.max,e.origin)-e.originPoint,(b1(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Rf(e,t,n,s){pE(e.x,t.x,n.x,s?s.originX:void 0),pE(e.y,t.y,n.y,s?s.originY:void 0)}function mE(e,t,n){e.min=n.min+t.min,e.max=e.min+Co(t)}function F7(e,t,n){mE(e.x,t.x,n.x),mE(e.y,t.y,n.y)}function gE(e,t,n){e.min=t.min-n.min,e.max=e.min+Co(t)}function Lf(e,t,n){gE(e.x,t.x,n.x),gE(e.y,t.y,n.y)}function N7(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?fr(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?fr(n,e,s.max):Math.min(e,n)),e}function yE(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function $7(e,{top:t,left:n,bottom:s,right:c}){return{x:yE(e.x,n,c),y:yE(e.y,t,s)}}function vE(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function j7(e,t){return{x:vE(e.x,t.x),y:vE(e.y,t.y)}}function V7(e,t){let n=.5;const s=Co(e),c=Co(t);return c>s?n=vp(t.min,t.max-s,e.min):s>c&&(n=vp(e.min,e.max-c,t.min)),Vd(0,1,n)}function U7(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const w1=.35;function G7(e=w1){return e===!1?e=0:e===!0&&(e=w1),{x:_E(e,"left","right"),y:_E(e,"top","bottom")}}function _E(e,t,n){return{min:xE(e,t),max:xE(e,n)}}function xE(e,t){return typeof e=="number"?e:e[t]||0}const bE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Of=()=>({x:bE(),y:bE()}),wE=()=>({min:0,max:0}),$r=()=>({x:wE(),y:wE()});function Hs(e){return[e("x"),e("y")]}function Qz({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function W7({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Z7(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function N_(e){return e===void 0||e===1}function S1({scale:e,scaleX:t,scaleY:n}){return!N_(e)||!N_(t)||!N_(n)}function Gc(e){return S1(e)||eA(e)||e.z||e.rotate||e.rotateX||e.rotateY}function eA(e){return SE(e.x)||SE(e.y)}function SE(e){return e&&e!=="0%"}function Oy(e,t,n){const s=e-n,c=t*s;return n+c}function TE(e,t,n,s,c){return c!==void 0&&(e=Oy(e,c,s)),Oy(e,n,s)+t}function T1(e,t=0,n=1,s,c){e.min=TE(e.min,t,n,s,c),e.max=TE(e.max,t,n,s,c)}function tA(e,{x:t,y:n}){T1(e.x,t.translate,t.scale,t.originPoint),T1(e.y,n.translate,n.scale,n.originPoint)}function q7(e,t,n,s=!1){const c=n.length;if(!c)return;t.x=t.y=1;let h,m;for(let l=0;l<c;l++){h=n[l],m=h.projectionDelta;const b=h.instance;b&&b.style&&b.style.display==="contents"||(s&&h.options.layoutScroll&&h.scroll&&h!==h.root&&vd(e,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),m&&(t.x*=m.x.scale,t.y*=m.y.scale,tA(e,m)),s&&Gc(h.latestValues)&&vd(e,h.latestValues))}t.x=kE(t.x),t.y=kE(t.y)}function kE(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ll(e,t){e.min=e.min+t,e.max=e.max+t}function EE(e,t,[n,s,c]){const h=t[c]!==void 0?t[c]:.5,m=fr(e.min,e.max,h);T1(e,t[n],t[s],m,t.scale)}const X7=["x","scaleX","originX"],H7=["y","scaleY","originY"];function vd(e,t){EE(e.x,t,X7),EE(e.y,t,H7)}function nA(e,t){return Qz(Z7(e.getBoundingClientRect(),t))}function Y7(e,t,n){const s=nA(e,n),{scroll:c}=t;return c&&(Ll(s.x,c.offset.x),Ll(s.y,c.offset.y)),s}const K7=new WeakMap;class J7{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$r(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const c=b=>{this.stopAnimation(),n&&this.snapToCursor(A0(b,"page").point)},h=(b,w)=>{const{drag:k,dragPropagation:M,onDragStart:E}=this.getProps();if(k&&!M&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=wz(k),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Hs(N=>{let V=this.getAxisMotionValue(N).get()||0;if(aa.test(V)){const{projection:J}=this.visualElement;if(J&&J.layout){const $=J.layout.layoutBox[N];$&&(V=Co($)*(parseFloat(V)/100))}}this.originPoint[N]=V}),E&&er.update(()=>E(b,w));const{animationState:L}=this.visualElement;L&&L.setActive("whileDrag",!0)},m=(b,w)=>{const{dragPropagation:k,dragDirectionLock:M,onDirectionLock:E,onDrag:L}=this.getProps();if(!k&&!this.openGlobalLock)return;const{offset:N}=w;if(M&&this.currentDirection===null){this.currentDirection=Q7(N),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",w.point,N),this.updateAxis("y",w.point,N),this.visualElement.render(),L&&L(b,w)},l=(b,w)=>this.stop(b,w);this.panSession=new Kz(t,{onSessionStart:c,onStart:h,onMove:m,onSessionEnd:l},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:c}=n;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&er.update(()=>h(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:c}=this.getProps();if(!s||!mg(t,c,this.currentDirection))return;const h=this.getAxisMotionValue(t);let m=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(m=N7(m,this.constraints[t],this.elastic[t])),h.set(m)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),{layout:s}=this.visualElement.projection||{},c=this.constraints;t&&gd(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=$7(s.layoutBox,t):this.constraints=!1,this.elastic=G7(n),c!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Hs(h=>{this.getAxisMotionValue(h)&&(this.constraints[h]=U7(s.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!gd(t))return!1;const s=t.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const h=Y7(s,c.root,this.visualElement.getTransformPagePoint());let m=j7(c.layout.layoutBox,h);if(n){const l=n(W7(m));this.hasMutatedConstraints=!!l,l&&(m=Qz(l))}return m}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:c,dragTransition:h,dragSnapToOrigin:m,onDragTransitionEnd:l}=this.getProps(),b=this.constraints||{},w=Hs(k=>{if(!mg(k,n,this.currentDirection))return;let M=b&&b[k]||{};m&&(M={min:0,max:0});const E=c?200:1e6,L=c?40:1e7,N={type:"inertia",velocity:s?t[k]:0,bounceStiffness:E,bounceDamping:L,timeConstant:750,restDelta:1,restSpeed:10,...h,...M};return this.startAxisValueAnimation(k,N)});return Promise.all(w).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return s.start(Vw(t,s,0,n))}stopAnimation(){Hs(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),s=this.visualElement.getProps(),c=s[n];return c||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Hs(n=>{const{drag:s}=this.getProps();if(!mg(n,s,this.currentDirection))return;const{projection:c}=this.visualElement,h=this.getAxisMotionValue(n);if(c&&c.layout){const{min:m,max:l}=c.layout.layoutBox[n];h.set(t[n]-fr(m,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!gd(n)||!s||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};Hs(m=>{const l=this.getAxisMotionValue(m);if(l){const b=l.get();c[m]=V7({min:b,max:b},this.constraints[m])}});const{transformTemplate:h}=this.visualElement.getProps();this.visualElement.current.style.transform=h?h({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Hs(m=>{if(!mg(m,t,null))return;const l=this.getAxisMotionValue(m),{min:b,max:w}=this.constraints[m];l.set(fr(b,w,c[m]))})}addListeners(){if(!this.visualElement.current)return;K7.set(this.visualElement,this);const t=this.visualElement.current,n=Ka(t,"pointerdown",b=>{const{drag:w,dragListener:k=!0}=this.getProps();w&&k&&this.start(b)}),s=()=>{const{dragConstraints:b}=this.getProps();gd(b)&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,h=c.addEventListener("measure",s);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),s();const m=Za(window,"resize",()=>this.scalePositionWithinConstraints()),l=c.addEventListener("didUpdate",({delta:b,hasLayoutChanged:w})=>{this.isDragging&&w&&(Hs(k=>{const M=this.getAxisMotionValue(k);M&&(this.originPoint[k]+=b[k].translate,M.set(M.get()+b[k].translate))}),this.visualElement.render())});return()=>{m(),n(),h(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:c=!1,dragConstraints:h=!1,dragElastic:m=w1,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:c,dragConstraints:h,dragElastic:m,dragMomentum:l}}}function mg(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Q7(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class eG extends sc{constructor(t){super(t),this.removeGroupControls=qo,this.removeListeners=qo,this.controls=new J7(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qo}unmount(){this.removeGroupControls(),this.removeListeners()}}const CE=e=>(t,n)=>{e&&er.update(()=>e(t,n))};class tG extends sc{constructor(){super(...arguments),this.removePointerDownListener=qo}onPointerDown(t){this.session=new Kz(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:c}=this.node.getProps();return{onSessionStart:CE(t),onStart:CE(n),onMove:s,onEnd:(h,m)=>{delete this.session,c&&er.update(()=>c(h,m))}}}mount(){this.removePointerDownListener=Ka(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function nG(){const e=U.useContext(Dp);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,c=U.useId();return U.useEffect(()=>s(c),[]),!t&&n?[!1,()=>n&&n(c)]:[!0]}function rG(){return iG(U.useContext(Dp))}function iG(e){return e===null?!0:e.isPresent}function IE(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Qh={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Wt.test(e))e=parseFloat(e);else return e;const n=IE(e,t.target.x),s=IE(e,t.target.y);return`${n}% ${s}%`}},rA=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function oG(e){const t=rA.exec(e);if(!t)return[,];const[,n,s]=t;return[n,s]}function k1(e,t,n=1){const[s,c]=oG(e);if(!s)return;const h=window.getComputedStyle(t).getPropertyValue(s);return h?h.trim():u1(c)?k1(c,t,n+1):c}function sG(e,{...t},n){const s=e.current;if(!(s instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(c=>{const h=c.get();if(!u1(h))return;const m=k1(h,s);m&&c.set(m)});for(const c in t){const h=t[c];if(!u1(h))continue;const m=k1(h,s);m&&(t[c]=m,n&&n[c]===void 0&&(n[c]=h))}return{target:t,transitionEnd:n}}const ME="_$css",aG={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,c=e.includes("var("),h=[];c&&(e=e.replace(rA,L=>(h.push(L),ME)));const m=tc.parse(e);if(m.length>5)return s;const l=tc.createTransformer(e),b=typeof m[0]!="number"?1:0,w=n.x.scale*t.x,k=n.y.scale*t.y;m[0+b]/=w,m[1+b]/=k;const M=fr(w,k,.5);typeof m[2+b]=="number"&&(m[2+b]/=M),typeof m[3+b]=="number"&&(m[3+b]/=M);let E=l(m);if(c){let L=0;E=E.replace(ME,()=>{const N=h[L];return L++,N})}return E}};class lG extends da.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:c}=this.props,{projection:h}=t;s8(cG),h&&(n.group&&n.group.add(h),s&&s.register&&c&&s.register(h),h.root.didUpdate(),h.addEventListener("animationComplete",()=>{this.safeToRemove()}),h.setOptions({...h.options,onExitComplete:()=>this.safeToRemove()})),zf.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:c,isPresent:h}=this.props,m=s.projection;return m&&(m.isPresent=h,c||t.layoutDependency!==n||n===void 0?m.willUpdate():this.safeToRemove(),t.isPresent!==h&&(h?m.promote():m.relegate()||er.postRender(()=>{const l=m.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),!t.currentAnimation&&t.isLead()&&this.safeToRemove())}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:c}=t;c&&(c.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(c),s&&s.deregister&&s.deregister(c))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function iA(e){const[t,n]=nG(),s=U.useContext(_w);return da.createElement(lG,{...e,layoutGroup:s,switchLayoutGroup:U.useContext(az),isPresent:t,safeToRemove:n})}const cG={borderRadius:{...Qh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Qh,borderTopRightRadius:Qh,borderBottomLeftRadius:Qh,borderBottomRightRadius:Qh,boxShadow:aG};function E1(e,t,n={}){const s=lo(e)?e:fu(e);return s.start(Vw("",s,t,n)),{stop:()=>s.stop()}}const oA=["TopLeft","TopRight","BottomLeft","BottomRight"],uG=oA.length,PE=e=>typeof e=="string"?parseFloat(e):e,zE=e=>typeof e=="number"||Wt.test(e);function dG(e,t,n,s,c,h){c?(e.opacity=fr(0,n.opacity!==void 0?n.opacity:1,hG(s)),e.opacityExit=fr(t.opacity!==void 0?t.opacity:1,0,fG(s))):h&&(e.opacity=fr(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let m=0;m<uG;m++){const l=`border${oA[m]}Radius`;let b=AE(t,l),w=AE(n,l);if(b===void 0&&w===void 0)continue;b||(b=0),w||(w=0),b===0||w===0||zE(b)===zE(w)?(e[l]=Math.max(fr(PE(b),PE(w),s),0),(aa.test(w)||aa.test(b))&&(e[l]+="%")):e[l]=w}(t.rotate||n.rotate)&&(e.rotate=fr(t.rotate||0,n.rotate||0,s))}function AE(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const hG=sA(0,.5,$w),fG=sA(.5,.95,qo);function sA(e,t,n){return s=>s<e?0:s>t?1:n(vp(e,t,s))}function DE(e,t){e.min=t.min,e.max=t.max}function Fo(e,t){DE(e.x,t.x),DE(e.y,t.y)}function RE(e,t,n,s,c){return e-=t,e=Oy(e,1/n,s),c!==void 0&&(e=Oy(e,1/c,s)),e}function pG(e,t=0,n=1,s=.5,c,h=e,m=e){if(aa.test(t)&&(t=parseFloat(t),t=fr(m.min,m.max,t/100)-m.min),typeof t!="number")return;let l=fr(h.min,h.max,s);e===h&&(l-=t),e.min=RE(e.min,t,n,l,c),e.max=RE(e.max,t,n,l,c)}function LE(e,t,[n,s,c],h,m){pG(e,t[n],t[s],t[c],t.scale,h,m)}const mG=["x","scaleX","originX"],gG=["y","scaleY","originY"];function OE(e,t,n,s){LE(e.x,t,mG,n?n.x:void 0,s?s.x:void 0),LE(e.y,t,gG,n?n.y:void 0,s?s.y:void 0)}function BE(e){return e.translate===0&&e.scale===1}function aA(e){return BE(e.x)&&BE(e.y)}function C1(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function FE(e){return Co(e.x)/Co(e.y)}class yG{constructor(){this.members=[]}add(t){Iw(this.members,t),t.scheduleRender()}remove(t){if(Mw(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(c=>t===c);if(n===0)return!1;let s;for(let c=n;c>=0;c--){const h=this.members[c];if(h.isPresent!==!1){s=h;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:c}=t.options;c===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function NE(e,t,n){let s="";const c=e.x.translate/t.x,h=e.y.translate/t.y;if((c||h)&&(s=`translate3d(${c}px, ${h}px, 0) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:b,rotateX:w,rotateY:k}=n;b&&(s+=`rotate(${b}deg) `),w&&(s+=`rotateX(${w}deg) `),k&&(s+=`rotateY(${k}deg) `)}const m=e.x.scale*t.x,l=e.y.scale*t.y;return(m!==1||l!==1)&&(s+=`scale(${m}, ${l})`),s||"none"}const vG=(e,t)=>e.depth-t.depth;class _G{constructor(){this.children=[],this.isDirty=!1}add(t){Iw(this.children,t),this.isDirty=!0}remove(t){Mw(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(vG),this.isDirty=!1,this.children.forEach(t)}}function xG(e){window.MotionDebug&&window.MotionDebug.record(e)}const $E=["","X","Y","Z"],jE=1e3;let bG=0;const Wc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function lA({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:c}){return class{constructor(m,l={},b=t==null?void 0:t()){this.id=bG++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{Wc.totalNodes=Wc.resolvedTargetDeltas=Wc.recalculatedProjection=0,this.nodes.forEach(TG),this.nodes.forEach(IG),this.nodes.forEach(MG),this.nodes.forEach(kG),xG(Wc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.elementId=m,this.latestValues=l,this.root=b?b.root||b:this,this.path=b?[...b.path,b]:[],this.parent=b,this.depth=b?b.depth+1:0,m&&this.root.registerPotentialNode(m,this);for(let w=0;w<this.path.length;w++)this.path[w].shouldResetTransform=!0;this.root===this&&(this.nodes=new _G)}addEventListener(m,l){return this.eventHandlers.has(m)||this.eventHandlers.set(m,new Pw),this.eventHandlers.get(m).add(l)}notifyListeners(m,...l){const b=this.eventHandlers.get(m);b&&b.notify(...l)}hasListeners(m){return this.eventHandlers.has(m)}registerPotentialNode(m,l){this.potentialNodes.set(m,l)}mount(m,l=!1){if(this.instance)return;this.isSVG=m instanceof SVGElement&&m.tagName!=="svg",this.instance=m;const{layoutId:b,layout:w,visualElement:k}=this.options;if(k&&!k.current&&k.mount(m),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.elementId&&this.root.potentialNodes.delete(this.elementId),l&&(w||b)&&(this.isLayoutDirty=!0),e){let M;const E=()=>this.root.updateBlockedByResize=!1;e(m,()=>{this.root.updateBlockedByResize=!0,M&&M(),M=Xz(E,250),zf.hasAnimatedSinceResize&&(zf.hasAnimatedSinceResize=!1,this.nodes.forEach(UE))})}b&&this.root.registerSharedNode(b,this),this.options.animate!==!1&&k&&(b||w)&&this.addEventListener("didUpdate",({delta:M,hasLayoutChanged:E,hasRelativeTargetChanged:L,layout:N})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const V=this.options.transition||k.getDefaultTransition()||RG,{onLayoutAnimationStart:J,onLayoutAnimationComplete:$}=k.getProps(),F=!this.targetLayout||!C1(this.targetLayout,N)||L,W=!E&&L;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||W||E&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(M,W);const te={...Hz(V,"layout"),onPlay:J,onComplete:$};(k.shouldReduceMotion||this.options.layoutRoot)&&(te.delay=0,te.type=!1),this.startAnimation(te)}else!E&&this.animationProgress===0&&UE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=N})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const m=this.getStack();m&&m.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,sl.preRender(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PG),this.animationId++)}getTransformTemplate(){const{visualElement:m}=this.options;return m&&m.getProps().transformTemplate}willUpdate(m=!0){if(this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let k=0;k<this.path.length;k++){const M=this.path[k];M.shouldResetTransform=!0,M.updateScroll("snapshot"),M.options.layoutRoot&&M.willUpdate(!1)}const{layoutId:l,layout:b}=this.options;if(l===void 0&&!b)return;const w=this.getTransformTemplate();this.prevTransformTemplateValue=w?w(this.latestValues,""):void 0,this.updateSnapshot(),m&&this.notifyListeners("willUpdate")}didUpdate(){if(this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(VE);return}this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(LG),this.potentialNodes.clear()),this.nodes.forEach(CG),this.nodes.forEach(wG),this.nodes.forEach(SG),this.clearAllSnapshots(),M_.update(),M_.preRender(),M_.render())}clearAllSnapshots(){this.nodes.forEach(EG),this.sharedNodes.forEach(zG)}scheduleUpdateProjection(){er.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){er.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let b=0;b<this.path.length;b++)this.path[b].updateScroll();const m=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$r(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,m?m.layoutBox:void 0)}updateScroll(m="measure"){let l=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===m&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:m,isRoot:s(this.instance),offset:n(this.instance)})}resetTransform(){if(!c)return;const m=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!aA(this.projectionDelta),b=this.getTransformTemplate(),w=b?b(this.latestValues,""):void 0,k=w!==this.prevTransformTemplateValue;m&&(l||Gc(this.latestValues)||k)&&(c(this.instance,w),this.shouldResetTransform=!1,this.scheduleRender())}measure(m=!0){const l=this.measurePageBox();let b=this.removeElementScroll(l);return m&&(b=this.removeTransform(b)),OG(b),{animationId:this.root.animationId,measuredBox:l,layoutBox:b,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:m}=this.options;if(!m)return $r();const l=m.measureViewportBox(),{scroll:b}=this.root;return b&&(Ll(l.x,b.offset.x),Ll(l.y,b.offset.y)),l}removeElementScroll(m){const l=$r();Fo(l,m);for(let b=0;b<this.path.length;b++){const w=this.path[b],{scroll:k,options:M}=w;if(w!==this.root&&k&&M.layoutScroll){if(k.isRoot){Fo(l,m);const{scroll:E}=this.root;E&&(Ll(l.x,-E.offset.x),Ll(l.y,-E.offset.y))}Ll(l.x,k.offset.x),Ll(l.y,k.offset.y)}}return l}applyTransform(m,l=!1){const b=$r();Fo(b,m);for(let w=0;w<this.path.length;w++){const k=this.path[w];!l&&k.options.layoutScroll&&k.scroll&&k!==k.root&&vd(b,{x:-k.scroll.offset.x,y:-k.scroll.offset.y}),Gc(k.latestValues)&&vd(b,k.latestValues)}return Gc(this.latestValues)&&vd(b,this.latestValues),b}removeTransform(m){const l=$r();Fo(l,m);for(let b=0;b<this.path.length;b++){const w=this.path[b];if(!w.instance||!Gc(w.latestValues))continue;S1(w.latestValues)&&w.updateSnapshot();const k=$r(),M=w.measurePageBox();Fo(k,M),OE(l,w.latestValues,w.snapshot?w.snapshot.layoutBox:void 0,k)}return Gc(this.latestValues)&&OE(l,this.latestValues),l}setTargetDelta(m){this.targetDelta=m,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(m){this.options={...this.options,...m,crossfade:m.crossfade!==void 0?m.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}resolveTargetDelta(){var m;const l=this.getLead();if(this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty),!((Boolean(this.resumingFrom)||this!==l)&&this.isSharedProjectionDirty||this.isProjectionDirty||!((m=this.parent)===null||m===void 0)&&m.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:k,layoutId:M}=this.options;if(!(!this.layout||!(k||M))){if(!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout?(this.relativeParent=E,this.relativeTarget=$r(),this.relativeTargetOrigin=$r(),Lf(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),Fo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=$r(),this.targetWithTransforms=$r()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?F7(this.target,this.relativeTarget,this.relativeParent.target):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Fo(this.target,this.layout.layoutBox),tA(this.target,this.targetDelta)):Fo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&Boolean(E.resumingFrom)===Boolean(this.resumingFrom)&&!E.options.layoutScroll&&E.target?(this.relativeParent=E,this.relativeTarget=$r(),this.relativeTargetOrigin=$r(),Lf(this.relativeTargetOrigin,this.target,E.target),Fo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Wc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||S1(this.parent.latestValues)||eA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const l=this.getLead(),b=Boolean(this.resumingFrom)||this!==l;let w=!0;if((this.isProjectionDirty||!((m=this.parent)===null||m===void 0)&&m.isProjectionDirty)&&(w=!1),b&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(w=!1),w)return;const{layout:k,layoutId:M}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(k||M))return;Fo(this.layoutCorrected,this.layout.layoutBox),q7(this.layoutCorrected,this.treeScale,this.path,b);const{target:E}=l;if(!E)return;this.projectionDelta||(this.projectionDelta=Of(),this.projectionDeltaWithTransform=Of());const L=this.treeScale.x,N=this.treeScale.y,V=this.projectionTransform;Rf(this.projectionDelta,this.layoutCorrected,E,this.latestValues),this.projectionTransform=NE(this.projectionDelta,this.treeScale),(this.projectionTransform!==V||this.treeScale.x!==L||this.treeScale.y!==N)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),Wc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(m=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),m){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(m,l=!1){const b=this.snapshot,w=b?b.latestValues:{},k={...this.latestValues},M=Of();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const E=$r(),L=b?b.source:void 0,N=this.layout?this.layout.source:void 0,V=L!==N,J=this.getStack(),$=!J||J.members.length<=1,F=Boolean(V&&!$&&this.options.crossfade===!0&&!this.path.some(DG));this.animationProgress=0;let W;this.mixTargetDelta=te=>{const de=te/1e3;GE(M.x,m.x,de),GE(M.y,m.y,de),this.setTargetDelta(M),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lf(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),AG(this.relativeTarget,this.relativeTargetOrigin,E,de),W&&C1(this.relativeTarget,W)&&(this.isProjectionDirty=!1),W||(W=$r()),Fo(W,this.relativeTarget)),V&&(this.animationValues=k,dG(k,w,this.latestValues,de,F,$)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=de},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(m){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(sl.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=er.update(()=>{zf.hasAnimatedSinceResize=!0,this.currentAnimation=E1(0,jE,{...m,onUpdate:l=>{this.mixTargetDelta(l),m.onUpdate&&m.onUpdate(l)},onComplete:()=>{m.onComplete&&m.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const m=this.getStack();m&&m.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(jE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const m=this.getLead();let{targetWithTransforms:l,target:b,layout:w,latestValues:k}=m;if(!(!l||!b||!w)){if(this!==m&&this.layout&&w&&cA(this.options.animationType,this.layout.layoutBox,w.layoutBox)){b=this.target||$r();const M=Co(this.layout.layoutBox.x);b.x.min=m.target.x.min,b.x.max=b.x.min+M;const E=Co(this.layout.layoutBox.y);b.y.min=m.target.y.min,b.y.max=b.y.min+E}Fo(l,b),vd(l,k),Rf(this.projectionDeltaWithTransform,this.layoutCorrected,l,k)}}registerSharedNode(m,l){this.sharedNodes.has(m)||this.sharedNodes.set(m,new yG),this.sharedNodes.get(m).add(l);const w=l.options.initialPromotionConfig;l.promote({transition:w?w.transition:void 0,preserveFollowOpacity:w&&w.shouldPreserveFollowOpacity?w.shouldPreserveFollowOpacity(l):void 0})}isLead(){const m=this.getStack();return m?m.lead===this:!0}getLead(){var m;const{layoutId:l}=this.options;return l?((m=this.getStack())===null||m===void 0?void 0:m.lead)||this:this}getPrevLead(){var m;const{layoutId:l}=this.options;return l?(m=this.getStack())===null||m===void 0?void 0:m.prevLead:void 0}getStack(){const{layoutId:m}=this.options;if(m)return this.root.sharedNodes.get(m)}promote({needsReset:m,transition:l,preserveFollowOpacity:b}={}){const w=this.getStack();w&&w.promote(this,b),m&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const m=this.getStack();return m?m.relegate(this):!1}resetRotation(){const{visualElement:m}=this.options;if(!m)return;let l=!1;const{latestValues:b}=m;if((b.rotate||b.rotateX||b.rotateY||b.rotateZ)&&(l=!0),!l)return;const w={};for(let k=0;k<$E.length;k++){const M="rotate"+$E[k];b[M]&&(w[M]=b[M],m.setStaticValue(M,0))}m.render();for(const k in w)m.setStaticValue(k,w[k]);m.scheduleRender()}getProjectionStyles(m={}){var l,b;const w={};if(!this.instance||this.isSVG)return w;if(this.isVisible)w.visibility="";else return{visibility:"hidden"};const k=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,w.opacity="",w.pointerEvents=Ug(m.pointerEvents)||"",w.transform=k?k(this.latestValues,""):"none",w;const M=this.getLead();if(!this.projectionDelta||!this.layout||!M.target){const V={};return this.options.layoutId&&(V.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,V.pointerEvents=Ug(m.pointerEvents)||""),this.hasProjected&&!Gc(this.latestValues)&&(V.transform=k?k({},""):"none",this.hasProjected=!1),V}const E=M.animationValues||M.latestValues;this.applyTransformsToTarget(),w.transform=NE(this.projectionDeltaWithTransform,this.treeScale,E),k&&(w.transform=k(E,w.transform));const{x:L,y:N}=this.projectionDelta;w.transformOrigin=`${L.origin*100}% ${N.origin*100}% 0`,M.animationValues?w.opacity=M===this?(b=(l=E.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&b!==void 0?b:1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:w.opacity=M===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const V in My){if(E[V]===void 0)continue;const{correct:J,applyTo:$}=My[V],F=w.transform==="none"?E[V]:J(E[V],M);if($){const W=$.length;for(let te=0;te<W;te++)w[$[te]]=F}else w[V]=F}return this.options.layoutId&&(w.pointerEvents=M===this?Ug(m.pointerEvents)||"":"none"),w}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(m=>{var l;return(l=m.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(VE),this.root.sharedNodes.clear()}}}function wG(e){e.updateLayout()}function SG(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:c}=e.layout,{animationType:h}=e.options,m=n.source!==e.layout.source;h==="size"?Hs(M=>{const E=m?n.measuredBox[M]:n.layoutBox[M],L=Co(E);E.min=s[M].min,E.max=E.min+L}):cA(h,n.layoutBox,s)&&Hs(M=>{const E=m?n.measuredBox[M]:n.layoutBox[M],L=Co(s[M]);E.max=E.min+L});const l=Of();Rf(l,s,n.layoutBox);const b=Of();m?Rf(b,e.applyTransform(c,!0),n.measuredBox):Rf(b,s,n.layoutBox);const w=!aA(l);let k=!1;if(!e.resumeFrom){const M=e.getClosestProjectingParent();if(M&&!M.resumeFrom){const{snapshot:E,layout:L}=M;if(E&&L){const N=$r();Lf(N,n.layoutBox,E.layoutBox);const V=$r();Lf(V,s,L.layoutBox),C1(N,V)||(k=!0),M.options.layoutRoot&&(e.relativeTarget=V,e.relativeTargetOrigin=N,e.relativeParent=M)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:b,layoutDelta:l,hasLayoutChanged:w,hasRelativeTargetChanged:k})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function TG(e){Wc.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function kG(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function EG(e){e.clearSnapshot()}function VE(e){e.clearMeasurements()}function CG(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function UE(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function IG(e){e.resolveTargetDelta()}function MG(e){e.calcProjection()}function PG(e){e.resetRotation()}function zG(e){e.removeLeadSnapshot()}function GE(e,t,n){e.translate=fr(t.translate,0,n),e.scale=fr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function WE(e,t,n,s){e.min=fr(t.min,n.min,s),e.max=fr(t.max,n.max,s)}function AG(e,t,n,s){WE(e.x,t.x,n.x,s),WE(e.y,t.y,n.y,s)}function DG(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const RG={duration:.45,ease:[.4,0,.1,1]};function LG(e,t){let n=e.root;for(let h=e.path.length-1;h>=0;h--)if(Boolean(e.path[h].instance)){n=e.path[h];break}const c=(n&&n!==e.root?n.instance:document).querySelector(`[data-projection-id="${t}"]`);c&&e.mount(c,!0)}function ZE(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function OG(e){ZE(e.x),ZE(e.y)}function cA(e,t,n){return e==="position"||e==="preserve-aspect"&&!b1(FE(t),FE(n),.2)}const BG=lA({attachResizeListener:(e,t)=>Za(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$_={current:void 0},uA=lA({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!$_.current){const e=new BG(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),$_.current=e}return $_.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>Boolean(window.getComputedStyle(e).position==="fixed")}),FG={pan:{Feature:tG},drag:{Feature:eG,ProjectionNode:uA,MeasureLayout:iA}},NG=new Set(["width","height","top","left","right","bottom","x","y"]),dA=e=>NG.has(e),$G=e=>Object.keys(e).some(dA),qE=e=>e===xu||e===Wt,XE=(e,t)=>parseFloat(e.split(", ")[t]),HE=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const c=s.match(/^matrix3d\((.+)\)$/);if(c)return XE(c[1],t);{const h=s.match(/^matrix\((.+)\)$/);return h?XE(h[1],e):0}},jG=new Set(["x","y","z"]),VG=z0.filter(e=>!jG.has(e));function UG(e){const t=[];return VG.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const YE={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:HE(4,13),y:HE(5,14)},GG=(e,t,n)=>{const s=t.measureViewportBox(),c=t.current,h=getComputedStyle(c),{display:m}=h,l={};m==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(w=>{l[w]=YE[w](s,h)}),t.render();const b=t.measureViewportBox();return n.forEach(w=>{const k=t.getValue(w);k&&k.jump(l[w]),e[w]=YE[w](b,h)}),e},WG=(e,t,n={},s={})=>{t={...t},s={...s};const c=Object.keys(t).filter(dA);let h=[],m=!1;const l=[];if(c.forEach(b=>{const w=e.getValue(b);if(!e.hasValue(b))return;let k=n[b],M=Jh(k);const E=t[b];let L;if(zy(E)){const N=E.length,V=E[0]===null?1:0;k=E[V],M=Jh(k);for(let J=V;J<N;J++)L?Ry(Jh(E[J])===L):L=Jh(E[J])}else L=Jh(E);if(M!==L)if(qE(M)&&qE(L)){const N=w.get();typeof N=="string"&&w.set(parseFloat(N)),typeof E=="string"?t[b]=parseFloat(E):Array.isArray(E)&&L===Wt&&(t[b]=E.map(parseFloat))}else M!=null&&M.transform&&(L!=null&&L.transform)&&(k===0||E===0)?k===0?w.set(L.transform(k)):t[b]=M.transform(E):(m||(h=UG(e),m=!0),l.push(b),s[b]=s[b]!==void 0?s[b]:t[b],w.jump(E))}),l.length){const b=l.indexOf("height")>=0?window.pageYOffset:null,w=GG(t,e,l);return h.length&&h.forEach(([k,M])=>{e.getValue(k).set(M)}),e.render(),I0&&b!==null&&window.scrollTo({top:b}),{target:w,transitionEnd:s}}else return{target:t,transitionEnd:s}};function ZG(e,t,n,s){return $G(t)?WG(e,t,n,s):{target:t,transitionEnd:s}}const qG=(e,t,n,s)=>{const c=sG(e,t,s);return t=c.target,s=c.transitionEnd,ZG(e,t,n,s)},By={current:null},Uw={current:!1};function hA(){if(Uw.current=!0,!!I0)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>By.current=e.matches;e.addListener(t),t()}else By.current=!1}function XG(e,t,n){const{willChange:s}=t;for(const c in t){const h=t[c],m=n[c];if(lo(h))e.addValue(c,h),Dy(s)&&s.add(c);else if(lo(m))e.addValue(c,fu(h,{owner:e})),Dy(s)&&s.remove(c);else if(m!==h)if(e.hasValue(c)){const l=e.getValue(c);!l.hasAnimated&&l.set(h)}else{const l=e.getStaticValue(c);e.addValue(c,fu(l!==void 0?l:h,{owner:e}))}}for(const c in n)t[c]===void 0&&e.removeValue(c);return t}const fA=Object.keys(mp),HG=fA.length,KE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],YG=vw.length;class KG{constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:c,visualState:h},m={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>er.render(this.render,!1,!0);const{latestValues:l,renderState:b}=h;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=b,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=c,this.options=m,this.isControllingVariants=P0(n),this.isVariantNode=sz(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:w,...k}=this.scrapeMotionValuesFromProps(n,{});for(const M in k){const E=k[M];l[M]!==void 0&&lo(E)&&(E.set(l[M],!1),Dy(w)&&w.add(M))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,this.projection&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),Uw.current||hA(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:By.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),sl.update(this.notifyUpdate),sl.render(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const s=_u.has(t),c=n.on("change",m=>{this.latestValues[t]=m,this.props.onUpdate&&er.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),h=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{c(),h()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},s,c,h,m){let l,b;for(let w=0;w<HG;w++){const k=fA[w],{isEnabled:M,Feature:E,ProjectionNode:L,MeasureLayout:N}=mp[k];L&&(l=L),M(n)&&(!this.features[k]&&E&&(this.features[k]=new E(this)),N&&(b=N))}if(!this.projection&&l){this.projection=new l(h,this.latestValues,this.parent&&this.parent.projection);const{layoutId:w,layout:k,drag:M,dragConstraints:E,layoutScroll:L,layoutRoot:N}=n;this.projection.setOptions({layoutId:w,layout:k,alwaysMeasureLayout:Boolean(M)||E&&gd(E),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof k=="string"?k:"both",initialPromotionConfig:m,layoutScroll:L,layoutRoot:N})}return b}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update(this.props,this.prevProps):(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$r()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<KE.length;s++){const c=KE[s];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const h=t["on"+c];h&&(this.propEventSubscriptions[c]=this.on(c,h))}this.prevMotionValues=XG(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const n={};for(let s=0;s<YG;s++){const c=vw[s],h=this.props[c];(pp(h)||h===!1)&&(n[c]=h)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=fu(n,{owner:this}),this.addValue(t,s)),s}readValue(t){return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props,c=typeof s=="string"||typeof s=="object"?(n=Cw(this.props,s))===null||n===void 0?void 0:n[t]:void 0;if(s&&c!==void 0)return c;const h=this.getBaseTargetFromProps(this.props,t);return h!==void 0&&!lo(h)?h:this.initialValues[t]!==void 0&&c===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Pw),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class pA extends KG{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...s},{transformValues:c},h){let m=_9(s,t||{},this);if(c&&(n&&(n=c(n)),s&&(s=c(s)),m&&(m=c(m))),h){y9(this,s,m);const l=qG(this,s,m,n);n=l.transitionEnd,s=l.target}return{transition:t,transitionEnd:n,...s}}}function JG(e){return window.getComputedStyle(e)}class QG extends pA{readValueFromInstance(t,n){if(_u.has(n)){const s=Dw(n);return s&&s.default||0}else{const s=JG(t),c=(uz(n)?s.getPropertyValue(n):s[n])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(t,{transformPagePoint:n}){return nA(t,n)}build(t,n,s,c){bw(t,n,s,c.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Ew(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;lo(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,s,c){mz(t,n,s,c)}}class eW extends pA{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(_u.has(n)){const s=Dw(n);return s&&s.default||0}return n=gz.has(n)?n:kw(n),t.getAttribute(n)}measureInstanceViewportBox(){return $r()}scrapeMotionValuesFromProps(t,n){return vz(t,n)}build(t,n,s,c){Sw(t,n,s,this.isSVGTag,c.transformTemplate)}renderInstance(t,n,s,c){yz(t,n,s,c)}mount(t){this.isSVGTag=Tw(t.tagName),super.mount(t)}}const tW=(e,t)=>xw(e)?new eW(t,{enableHardwareAcceleration:!1}):new QG(t,{enableHardwareAcceleration:!0}),nW={layout:{ProjectionNode:uA,MeasureLayout:iA}},rW={...R7,...Y8,...FG,...nW},la=i8((e,t)=>A8(e,t,rW,tW));function mA(){const e=U.useRef(!1);return fp(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function iW(){const e=mA(),[t,n]=U.useState(0),s=U.useCallback(()=>{e.current&&n(t+1)},[t]);return[U.useCallback(()=>er.postRender(s),[s]),t]}class oW extends U.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function sW({children:e,isPresent:t}){const n=U.useId(),s=U.useRef(null),c=U.useRef({width:0,height:0,top:0,left:0});return U.useInsertionEffect(()=>{const{width:h,height:m,top:l,left:b}=c.current;if(t||!s.current||!h||!m)return;s.current.dataset.motionPopId=n;const w=document.createElement("style");return document.head.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${m}px !important;
            top: ${l}px !important;
            left: ${b}px !important;
          }
        `),()=>{document.head.removeChild(w)}},[t]),U.createElement(oW,{isPresent:t,childRef:s,sizeRef:c},U.cloneElement(e,{ref:s}))}const j_=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:c,presenceAffectsLayout:h,mode:m})=>{const l=Rp(aW),b=U.useId(),w=U.useMemo(()=>({id:b,initial:t,isPresent:n,custom:c,onExitComplete:k=>{l.set(k,!0);for(const M of l.values())if(!M)return;s&&s()},register:k=>(l.set(k,!1),()=>l.delete(k))}),h?void 0:[n]);return U.useMemo(()=>{l.forEach((k,M)=>l.set(M,!1))},[n]),U.useEffect(()=>{!n&&!l.size&&s&&s()},[n]),m==="popLayout"&&(e=U.createElement(sW,{isPresent:n},e)),U.createElement(Dp.Provider,{value:w},e)};function aW(){return new Map}function lW(e){return U.useEffect(()=>()=>e(),[])}const rd=e=>e.key||"";function cW(e,t){e.forEach(n=>{const s=rd(n);t.set(s,n)})}function uW(e){const t=[];return U.Children.forEach(e,n=>{U.isValidElement(n)&&t.push(n)}),t}const Gw=({children:e,custom:t,initial:n=!0,onExitComplete:s,exitBeforeEnter:c,presenceAffectsLayout:h=!0,mode:m="sync"})=>{let[l]=iW();const b=U.useContext(_w).forceRender;b&&(l=b);const w=mA(),k=uW(e);let M=k;const E=new Set,L=U.useRef(M),N=U.useRef(new Map).current,V=U.useRef(!0);if(fp(()=>{V.current=!1,cW(k,N),L.current=M}),lW(()=>{V.current=!0,N.clear(),E.clear()}),V.current)return U.createElement(U.Fragment,null,M.map(W=>U.createElement(j_,{key:rd(W),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:h,mode:m},W)));M=[...M];const J=L.current.map(rd),$=k.map(rd),F=J.length;for(let W=0;W<F;W++){const te=J[W];$.indexOf(te)===-1&&E.add(te)}return m==="wait"&&E.size&&(M=[]),E.forEach(W=>{if($.indexOf(W)!==-1)return;const te=N.get(W);if(!te)return;const de=J.indexOf(W),pe=()=>{N.delete(W),E.delete(W);const ce=L.current.findIndex(oe=>oe.key===W);if(L.current.splice(ce,1),!E.size){if(L.current=k,w.current===!1)return;l(),s&&s()}};M.splice(de,0,U.createElement(j_,{key:rd(te),isPresent:!1,onExitComplete:pe,custom:t,presenceAffectsLayout:h,mode:m},te))}),M=M.map(W=>{const te=W.key;return E.has(te)?W:U.createElement(j_,{key:rd(W),isPresent:!0,presenceAffectsLayout:h,mode:m},W)}),U.createElement(U.Fragment,null,E.size?M:M.map(W=>U.cloneElement(W)))};function I1(e){const t=Rp(()=>fu(e)),{isStatic:n}=U.useContext(gw);if(n){const[,s]=U.useState(e);U.useEffect(()=>t.on("change",s),[])}return t}const dW=e=>typeof e=="object"&&e.mix,hW=e=>dW(e)?e.mix:void 0;function fW(...e){const t=!Array.isArray(e[0]),n=t?0:-1,s=e[0+n],c=e[1+n],h=e[2+n],m=e[3+n],l=Nw(c,h,{mixer:hW(h[0]),...m});return t?l(s):l}function pW(e,t){const n=I1(t()),s=()=>n.set(t());return s(),fp(()=>{const c=()=>er.update(s,!1,!0),h=e.map(m=>m.on("change",c));return()=>{h.forEach(m=>m()),sl.update(s)}}),n}function JE(e,t,n,s){const c=typeof t=="function"?t:fW(t,n,s);return Array.isArray(e)?QE(e,c):QE([e],([h])=>c(h))}function QE(e,t){const n=Rp(()=>[]);return pW(e,()=>{n.length=0;const s=e.length;for(let c=0;c<s;c++)n[c]=e[c].get();return t(n)})}function mW(){!Uw.current&&hA();const[e]=U.useState(By.current);return e}var gW={initial:e=>{const{position:t}=e,n=["top","bottom"].includes(t)?"y":"x";let s=["top-right","bottom-right"].includes(t)?1:-1;return t==="bottom"&&(s=1),{opacity:0,[n]:s*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},gA=U.memo(e=>{const{id:t,message:n,onCloseComplete:s,onRequestRemove:c,requestClose:h=!1,position:m="bottom",duration:l=5e3,containerStyle:b,motionVariants:w=gW,toastSpacing:k="0.5rem"}=e,[M,E]=U.useState(l),L=rG();jd(()=>{L||s==null||s()},[L]),jd(()=>{E(l)},[l]);const N=()=>E(null),V=()=>E(l),J=()=>{L&&c()};U.useEffect(()=>{L&&h&&c()},[L,h,c]),qU(J,M);const $=U.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:k,...b}),[b,k]),F=U.useMemo(()=>WU(m),[m]);return Y.jsx(la.li,{layout:!0,className:"chakra-toast",variants:w,initial:"initial",animate:"animate",exit:"exit",onHoverStart:N,onHoverEnd:V,custom:{position:m},style:F,children:Y.jsx(bt.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:$,children:Ss(n,{id:t,onClose:J})})})});gA.displayName="ToastComponent";function yW(e,t){var n;const s=e??"bottom",h={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[s];return(n=h==null?void 0:h[t])!=null?n:s}var eC={path:Y.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[Y.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),Y.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),Y.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},bo=Ft((e,t)=>{const{as:n,viewBox:s,color:c="currentColor",focusable:h=!1,children:m,className:l,__css:b,...w}=e,k=Kt("chakra-icon",l),M=fa("Icon",e),E={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:c,...b,...M},L={ref:t,focusable:h,className:k,__css:E},N=s??eC.viewBox;if(n&&typeof n!="string")return Y.jsx(bt.svg,{as:n,...L,...w});const V=m??eC.path;return Y.jsx(bt.svg,{verticalAlign:"middle",viewBox:N,...L,...w,children:V})});bo.displayName="Icon";function vW(e){const{viewBox:t="0 0 24 24",d:n,displayName:s,defaultProps:c={}}=e,h=U.Children.toArray(e.path),m=Ft((l,b)=>Y.jsx(bo,{ref:b,viewBox:t,...c,...l,children:h.length?h:Y.jsx("path",{fill:"currentColor",d:n})}));return m.displayName=s,m}function _W(e){return Y.jsx(bo,{viewBox:"0 0 24 24",...e,children:Y.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function xW(e){return Y.jsx(bo,{viewBox:"0 0 24 24",...e,children:Y.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function tC(e){return Y.jsx(bo,{viewBox:"0 0 24 24",...e,children:Y.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var bW=w0({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),Qa=Ft((e,t)=>{const n=fa("Spinner",e),{label:s="Loading...",thickness:c="2px",speed:h="0.45s",emptyColor:m="transparent",className:l,...b}=ii(e),w=Kt("chakra-spinner",l),k={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:c,borderBottomColor:m,borderLeftColor:m,animation:`${bW} ${h} linear infinite`,...n};return Y.jsx(bt.div,{ref:t,__css:k,className:w,...b,children:s&&Y.jsx(bt.span,{srOnly:!0,children:s})})});Qa.displayName="Spinner";var[wW,SW]=_i({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[TW,Ww]=_i({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),yA={info:{icon:xW,colorScheme:"blue"},warning:{icon:tC,colorScheme:"orange"},success:{icon:_W,colorScheme:"green"},error:{icon:tC,colorScheme:"red"},loading:{icon:Qa,colorScheme:"blue"}};function kW(e){return yA[e].colorScheme}function EW(e){return yA[e].icon}var vA=Ft(function(t,n){const c={display:"inline",...Ww().description};return Y.jsx(bt.div,{ref:n,...t,className:Kt("chakra-alert__desc",t.className),__css:c})});vA.displayName="AlertDescription";function _A(e){const{status:t}=SW(),n=EW(t),s=Ww(),c=t==="loading"?s.spinner:s.icon;return Y.jsx(bt.span,{display:"inherit",...e,className:Kt("chakra-alert__icon",e.className),__css:c,children:e.children||Y.jsx(n,{h:"100%",w:"100%"})})}_A.displayName="AlertIcon";var xA=Ft(function(t,n){const s=Ww();return Y.jsx(bt.div,{ref:n,...t,className:Kt("chakra-alert__title",t.className),__css:s.title})});xA.displayName="AlertTitle";var bA=Ft(function(t,n){var s;const{status:c="info",addRole:h=!0,...m}=ii(t),l=(s=t.colorScheme)!=null?s:kW(c),b=cl("Alert",{...t,colorScheme:l}),w={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...b.container};return Y.jsx(wW,{value:{status:c},children:Y.jsx(TW,{value:b,children:Y.jsx(bt.div,{role:h?"alert":void 0,ref:n,...m,className:Kt("chakra-alert",t.className),__css:w})})})});bA.displayName="Alert";function CW(e){return Y.jsx(bo,{focusable:"false","aria-hidden":!0,...e,children:Y.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}var Zw=Ft(function(t,n){const s=fa("CloseButton",t),{children:c,isDisabled:h,__css:m,...l}=ii(t),b={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return Y.jsx(bt.button,{type:"button","aria-label":"Close",ref:n,disabled:h,__css:{...b,...s,...m},...l,children:c||Y.jsx(CW,{width:"1em",height:"1em"})})});Zw.displayName="CloseButton";var IW={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},ea=MW(IW);function MW(e){let t=e;const n=new Set,s=c=>{t=c(t),n.forEach(h=>h())};return{getState:()=>t,subscribe:c=>(n.add(c),()=>{s(()=>e),n.delete(c)}),removeToast:(c,h)=>{s(m=>({...m,[h]:m[h].filter(l=>l.id!=c)}))},notify:(c,h)=>{const m=PW(c,h),{position:l,id:b}=m;return s(w=>{var k,M;const L=l.includes("top")?[m,...(k=w[l])!=null?k:[]]:[...(M=w[l])!=null?M:[],m];return{...w,[l]:L}}),b},update:(c,h)=>{c&&s(m=>{const l={...m},{position:b,index:w}=Hk(l,c);return b&&w!==-1&&(l[b][w]={...l[b][w],...h,message:wA(h)}),l})},closeAll:({positions:c}={})=>{s(h=>(c??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((b,w)=>(b[w]=h[w].map(k=>({...k,requestClose:!0})),b),{...h}))},close:c=>{s(h=>{const m=iz(h,c);return m?{...h,[m]:h[m].map(l=>l.id==c?{...l,requestClose:!0}:l)}:h})},isActive:c=>Boolean(Hk(ea.getState(),c).position)}}var nC=0;function PW(e,t={}){var n,s;nC+=1;const c=(n=t.id)!=null?n:nC,h=(s=t.position)!=null?s:"bottom";return{id:c,message:e,position:h,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>ea.removeToast(String(c),h),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}var zW=e=>{const{status:t,variant:n="solid",id:s,title:c,isClosable:h,onClose:m,description:l,icon:b}=e,w=s?{root:`toast-${s}`,title:`toast-${s}-title`,description:`toast-${s}-description`}:void 0;return Y.jsxs(bA,{addRole:!1,status:t,variant:n,id:w==null?void 0:w.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",children:[Y.jsx(_A,{children:b}),Y.jsxs(bt.div,{flex:"1",maxWidth:"100%",children:[c&&Y.jsx(xA,{id:w==null?void 0:w.title,children:c}),l&&Y.jsx(vA,{id:w==null?void 0:w.description,display:"block",children:l})]}),h&&Y.jsx(Zw,{size:"sm",onClick:m,position:"absolute",insetEnd:1,top:1})]})};function wA(e={}){const{render:t,toastComponent:n=zW}=e;return c=>typeof t=="function"?t({...c,...e}):Y.jsx(n,{...c,...e})}function AW(e,t){const n=c=>{var h;return{...t,...c,position:yW((h=c==null?void 0:c.position)!=null?h:t==null?void 0:t.position,e)}},s=c=>{const h=n(c),m=wA(h);return ea.notify(m,h)};return s.update=(c,h)=>{ea.update(c,n(h))},s.promise=(c,h)=>{const m=s({...h.loading,status:"loading",duration:null});c.then(l=>s.update(m,{status:"success",duration:5e3,...Ss(h.success,l)})).catch(l=>s.update(m,{status:"error",duration:5e3,...Ss(h.error,l)}))},s.closeAll=ea.closeAll,s.close=ea.close,s.isActive=ea.isActive,s}var[DW,RW]=_i({name:"ToastOptionsContext",strict:!1}),LW=e=>{const t=U.useSyncExternalStore(ea.subscribe,ea.getState,ea.getState),{motionVariants:n,component:s=gA,portalProps:c}=e,m=Object.keys(t).map(l=>{const b=t[l];return Y.jsx("ul",{role:"region","aria-live":"polite",id:`chakra-toast-manager-${l}`,style:ZU(l),children:Y.jsx(Gw,{initial:!1,children:b.map(w=>Y.jsx(s,{motionVariants:n,...w},w.id))})},l)});return Y.jsx(eh,{...c,children:m})};function OW(e){const{theme:t}=kP(),n=RW();return U.useMemo(()=>AW(t.direction,{...n,...e}),[e,t.direction,n])}var BW=e=>function({children:n,theme:s=e,toastOptions:c,...h}){return Y.jsxs(UU,{theme:s,...h,children:[Y.jsx(DW,{value:c==null?void 0:c.defaultOptions,children:n}),Y.jsx(LW,{...c})]})},FW=BW(XP),NW=Object.defineProperty,$W=(e,t,n)=>t in e?NW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sr=(e,t,n)=>($W(e,typeof t!="symbol"?t+"":t,n),n);function rC(e){return e.sort((t,n)=>{const s=t.compareDocumentPosition(n);if(s&Node.DOCUMENT_POSITION_FOLLOWING||s&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(s&Node.DOCUMENT_POSITION_PRECEDING||s&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(s&Node.DOCUMENT_POSITION_DISCONNECTED||s&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var jW=e=>typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE;function iC(e,t,n){let s=e+1;return n&&s>=t&&(s=0),s}function oC(e,t,n){let s=e-1;return n&&s<0&&(s=t),s}var M1=typeof window<"u"?U.useLayoutEffect:U.useEffect,Fy=e=>e,VW=class{constructor(){Sr(this,"descendants",new Map),Sr(this,"register",e=>{if(e!=null)return jW(e)?this.registerNode(e):t=>{this.registerNode(t,e)}}),Sr(this,"unregister",e=>{this.descendants.delete(e);const t=rC(Array.from(this.descendants.keys()));this.assignIndex(t)}),Sr(this,"destroy",()=>{this.descendants.clear()}),Sr(this,"assignIndex",e=>{this.descendants.forEach(t=>{const n=e.indexOf(t.node);t.index=n,t.node.dataset.index=t.index.toString()})}),Sr(this,"count",()=>this.descendants.size),Sr(this,"enabledCount",()=>this.enabledValues().length),Sr(this,"values",()=>Array.from(this.descendants.values()).sort((t,n)=>t.index-n.index)),Sr(this,"enabledValues",()=>this.values().filter(e=>!e.disabled)),Sr(this,"item",e=>{if(this.count()!==0)return this.values()[e]}),Sr(this,"enabledItem",e=>{if(this.enabledCount()!==0)return this.enabledValues()[e]}),Sr(this,"first",()=>this.item(0)),Sr(this,"firstEnabled",()=>this.enabledItem(0)),Sr(this,"last",()=>this.item(this.descendants.size-1)),Sr(this,"lastEnabled",()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)}),Sr(this,"indexOf",e=>{var t,n;return e&&(n=(t=this.descendants.get(e))==null?void 0:t.index)!=null?n:-1}),Sr(this,"enabledIndexOf",e=>e==null?-1:this.enabledValues().findIndex(t=>t.node.isSameNode(e))),Sr(this,"next",(e,t=!0)=>{const n=iC(e,this.count(),t);return this.item(n)}),Sr(this,"nextEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const s=this.enabledIndexOf(n.node),c=iC(s,this.enabledCount(),t);return this.enabledItem(c)}),Sr(this,"prev",(e,t=!0)=>{const n=oC(e,this.count()-1,t);return this.item(n)}),Sr(this,"prevEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const s=this.enabledIndexOf(n.node),c=oC(s,this.enabledCount()-1,t);return this.enabledItem(c)}),Sr(this,"registerNode",(e,t)=>{if(!e||this.descendants.has(e))return;const n=Array.from(this.descendants.keys()).concat(e),s=rC(n);t!=null&&t.disabled&&(t.disabled=!!t.disabled);const c={node:e,index:-1,...t};this.descendants.set(e,c),this.assignIndex(s)})}};function UW(e,t){if(e!=null){if(typeof e=="function"){e(t);return}try{e.current=t}catch{throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}}function co(...e){return t=>{e.forEach(n=>{UW(n,t)})}}function GW(...e){return U.useMemo(()=>co(...e),e)}function WW(){const e=U.useRef(new VW);return M1(()=>()=>e.current.destroy()),e.current}var[ZW,SA]=_i({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function qW(e){const t=SA(),[n,s]=U.useState(-1),c=U.useRef(null);M1(()=>()=>{c.current&&t.unregister(c.current)},[]),M1(()=>{if(!c.current)return;const m=Number(c.current.dataset.index);n!=m&&!Number.isNaN(m)&&s(m)});const h=Fy(e?t.register(e):t.register);return{descendants:t,index:n,enabledIndex:t.enabledIndexOf(c.current),register:co(h,c)}}function TA(){return[Fy(ZW),()=>Fy(SA()),()=>WW(),c=>qW(c)]}function kA(e){const{value:t,defaultValue:n,onChange:s,shouldUpdate:c=(E,L)=>E!==L}=e,h=Es(s),m=Es(c),[l,b]=U.useState(n),w=t!==void 0,k=w?t:l,M=Es(E=>{const N=typeof E=="function"?E(k):E;m(k,N)&&(w||b(N),h(N))},[w,h,k,m]);return[k,M]}var P1=Ft(function(t,n){const{htmlWidth:s,htmlHeight:c,alt:h,...m}=t;return Y.jsx("img",{width:s,height:c,ref:n,alt:h,...m})});P1.displayName="NativeImage";function XW(e){const{loading:t,src:n,srcSet:s,onLoad:c,onError:h,crossOrigin:m,sizes:l,ignoreFallback:b}=e,[w,k]=U.useState("pending");U.useEffect(()=>{k(n?"loading":"pending")},[n]);const M=U.useRef(),E=U.useCallback(()=>{if(!n)return;L();const N=new Image;N.src=n,m&&(N.crossOrigin=m),s&&(N.srcset=s),l&&(N.sizes=l),t&&(N.loading=t),N.onload=V=>{L(),k("loaded"),c==null||c(V)},N.onerror=V=>{L(),k("failed"),h==null||h(V)},M.current=N},[n,m,s,l,c,h,t]),L=()=>{M.current&&(M.current.onload=null,M.current.onerror=null,M.current=null)};return Ha(()=>{if(!b)return w==="loading"&&E(),()=>{L()}},[w,E,b]),b?"loaded":w}var HW=(e,t)=>e!=="loaded"&&t==="beforeLoadOrError"||e==="failed"&&t==="onError";function YW(e,t=[]){const n=Object.assign({},e);for(const s of t)s in n&&delete n[s];return n}var L0=Ft(function(t,n){const{fallbackSrc:s,fallback:c,src:h,srcSet:m,align:l,fit:b,loading:w,ignoreFallback:k,crossOrigin:M,fallbackStrategy:E="beforeLoadOrError",referrerPolicy:L,...N}=t,V=s!==void 0||c!==void 0,J=w!=null||k||!V,$=XW({...t,ignoreFallback:J}),F=HW($,E),W={ref:n,objectFit:b,objectPosition:l,...J?N:YW(N,["onError","onLoad"])};return F?c||Y.jsx(bt.img,{as:P1,className:"chakra-image__placeholder",src:s,...W}):Y.jsx(bt.img,{as:P1,src:h,srcSet:m,crossOrigin:M,loading:w,referrerPolicy:L,className:"chakra-image",...W})});L0.displayName="Image";function nh(e){return U.Children.toArray(e).filter(t=>U.isValidElement(t))}var[KW,qw]=_i({name:"BreadcrumbStylesContext",errorMessage:`useBreadcrumbStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Breadcrumb />" `}),EA=Ft(function(t,n){const{isCurrentPage:s,as:c,className:h,href:m,...l}=t,b=qw(),w={ref:n,as:c,className:Kt("chakra-breadcrumb__link",h),...l};return s?Y.jsx(bt.span,{"aria-current":"page",__css:b.link,...w}):Y.jsx(bt.a,{__css:b.link,href:m,...w})});EA.displayName="BreadcrumbLink";var z1=Ft(function(t,n){const{spacing:s,...c}=t,h=qw(),m={mx:s,...h.separator};return Y.jsx(bt.span,{ref:n,role:"presentation",...c,__css:m})});z1.displayName="BreadcrumbSeparator";var Wg=Ft(function(t,n){const{isCurrentPage:s,separator:c,isLastChild:h,spacing:m,children:l,className:b,...w}=t,M=nh(l).map(V=>V.type===EA?U.cloneElement(V,{isCurrentPage:s}):V.type===z1?U.cloneElement(V,{spacing:m,children:V.props.children||c}):V),L={display:"inline-flex",alignItems:"center",...qw().item},N=Kt("chakra-breadcrumb__list-item",b);return Y.jsxs(bt.li,{ref:n,className:N,...w,__css:L,children:[M,!h&&Y.jsx(z1,{spacing:m,children:c})]})});Wg.displayName="BreadcrumbItem";var CA=Ft(function(t,n){const s=cl("Breadcrumb",t),c=ii(t),{children:h,spacing:m="0.5rem",separator:l="/",className:b,listProps:w,...k}=c,M=nh(h),E=M.length,L=M.map((V,J)=>U.cloneElement(V,{separator:l,spacing:m,isLastChild:E===J+1})),N=Kt("chakra-breadcrumb",b);return Y.jsx(bt.nav,{ref:n,"aria-label":"breadcrumb",className:N,__css:s.container,...k,children:Y.jsx(KW,{value:s,children:Y.jsx(bt.ol,{className:"chakra-breadcrumb__list",...w,__css:{display:"flex",alignItems:"center",...s.list},children:L})})})});CA.displayName="Breadcrumb";var[jK,JW]=_i({strict:!1,name:"ButtonGroupContext"});function QW(e){const[t,n]=U.useState(!e);return{ref:U.useCallback(h=>{h&&n(h.tagName==="BUTTON")},[]),type:t?"button":void 0}}function A1(e){const{children:t,className:n,...s}=e,c=U.isValidElement(t)?U.cloneElement(t,{"aria-hidden":!0,focusable:!1}):t,h=Kt("chakra-button__icon",n);return Y.jsx(bt.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...s,className:h,children:c})}A1.displayName="ButtonIcon";function D1(e){const{label:t,placement:n,spacing:s="0.5rem",children:c=Y.jsx(Qa,{color:"currentColor",width:"1em",height:"1em"}),className:h,__css:m,...l}=e,b=Kt("chakra-button__spinner",h),w=n==="start"?"marginEnd":"marginStart",k=U.useMemo(()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[w]:t?s:0,fontSize:"1em",lineHeight:"normal",...m}),[m,t,w,s]);return Y.jsx(bt.div,{className:b,...l,__css:k,children:c})}D1.displayName="ButtonSpinner";var Xw=Ft((e,t)=>{const n=JW(),s=fa("Button",{...n,...e}),{isDisabled:c=n==null?void 0:n.isDisabled,isLoading:h,isActive:m,children:l,leftIcon:b,rightIcon:w,loadingText:k,iconSpacing:M="0.5rem",type:E,spinner:L,spinnerPlacement:N="start",className:V,as:J,...$}=ii(e),F=U.useMemo(()=>{const pe={...s==null?void 0:s._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...s,...!!n&&{_focus:pe}}},[s,n]),{ref:W,type:te}=QW(J),de={rightIcon:w,leftIcon:b,iconSpacing:M,children:l};return Y.jsxs(bt.button,{ref:GW(t,W),as:J,type:E??te,"data-active":dr(m),"data-loading":dr(h),__css:F,className:Kt("chakra-button",V),...$,disabled:c||h,children:[h&&N==="start"&&Y.jsx(D1,{className:"chakra-button__spinner--start",label:k,placement:"start",spacing:M,children:L}),h?k||Y.jsx(bt.span,{opacity:0,children:Y.jsx(sC,{...de})}):Y.jsx(sC,{...de}),h&&N==="end"&&Y.jsx(D1,{className:"chakra-button__spinner--end",label:k,placement:"end",spacing:M,children:L})]})});Xw.displayName="Button";function sC(e){const{leftIcon:t,rightIcon:n,children:s,iconSpacing:c}=e;return Y.jsxs(Y.Fragment,{children:[t&&Y.jsx(A1,{marginEnd:c,children:t}),s,n&&Y.jsx(A1,{marginStart:c,children:n})]})}var Zc=Ft((e,t)=>{const{icon:n,children:s,isRound:c,"aria-label":h,...m}=e,l=n||s,b=U.isValidElement(l)?U.cloneElement(l,{"aria-hidden":!0,focusable:!1}):null;return Y.jsx(Xw,{padding:"0",borderRadius:c?"full":void 0,ref:t,"aria-label":h,...m,children:b})});Zc.displayName="IconButton";var[eZ,Hw]=$U("Card"),IA=Ft(function(t,n){const{className:s,...c}=t,h=Hw();return Y.jsx(bt.div,{ref:n,className:Kt("chakra-card__body",s),__css:h.body,...c})}),tZ=Ft(function(t,n){const{className:s,justify:c,...h}=t,m=Hw();return Y.jsx(bt.div,{ref:n,className:Kt("chakra-card__footer",s),__css:{display:"flex",justifyContent:c,...m.footer},...h})}),nZ=Ft(function(t,n){const{className:s,...c}=t,h=Hw();return Y.jsx(bt.div,{ref:n,className:Kt("chakra-card__header",s),__css:h.header,...c})}),MA=Ft(function(t,n){const{className:s,children:c,direction:h="column",justify:m,align:l,...b}=ii(t),w=cl("Card",t);return Y.jsx(bt.div,{ref:n,className:Kt("chakra-card",s),__css:{display:"flex",flexDirection:h,justifyContent:m,alignItems:l,position:"relative",minWidth:0,wordWrap:"break-word",...w.container},...b,children:Y.jsx(eZ,{value:w,children:c})})}),[VK,rZ]=_i({name:"CheckboxGroupContext",strict:!1});function iZ(e){return Y.jsx(bt.svg,{width:"1.2em",viewBox:"0 0 12 10",style:{fill:"none",strokeWidth:2,stroke:"currentColor",strokeDasharray:16},...e,children:Y.jsx("polyline",{points:"1.5 6 4.5 9 10.5 1"})})}function oZ(e){return Y.jsx(bt.svg,{width:"1.2em",viewBox:"0 0 24 24",style:{stroke:"currentColor",strokeWidth:4},...e,children:Y.jsx("line",{x1:"21",x2:"3",y1:"12",y2:"12"})})}function sZ(e){const{isIndeterminate:t,isChecked:n,...s}=e,c=t?oZ:iZ;return n||t?Y.jsx(bt.div,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:Y.jsx(c,{...s})}):null}var[aZ,lZ]=_i({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[cZ,PA]=_i({strict:!1,name:"FormControlContext"});function uZ(e){const{id:t,isRequired:n,isInvalid:s,isDisabled:c,isReadOnly:h,...m}=e,l=U.useId(),b=t||`field-${l}`,w=`${b}-label`,k=`${b}-feedback`,M=`${b}-helptext`,[E,L]=U.useState(!1),[N,V]=U.useState(!1),[J,$]=U.useState(!1),F=U.useCallback((ce={},oe=null)=>({id:M,...ce,ref:co(oe,be=>{be&&V(!0)})}),[M]),W=U.useCallback((ce={},oe=null)=>{var be,ye;return{...ce,ref:oe,"data-focus":dr(J),"data-disabled":dr(c),"data-invalid":dr(s),"data-readonly":dr(h),id:(be=ce.id)!=null?be:w,htmlFor:(ye=ce.htmlFor)!=null?ye:b}},[b,c,J,s,h,w]),te=U.useCallback((ce={},oe=null)=>({id:k,...ce,ref:co(oe,be=>{be&&L(!0)}),"aria-live":"polite"}),[k]),de=U.useCallback((ce={},oe=null)=>({...ce,...m,ref:oe,role:"group"}),[m]),pe=U.useCallback((ce={},oe=null)=>({...ce,ref:oe,role:"presentation","aria-hidden":!0,children:ce.children||"*"}),[]);return{isRequired:!!n,isInvalid:!!s,isReadOnly:!!h,isDisabled:!!c,isFocused:!!J,onFocus:()=>$(!0),onBlur:()=>$(!1),hasFeedbackText:E,setHasFeedbackText:L,hasHelpText:N,setHasHelpText:V,id:b,labelId:w,feedbackId:k,helpTextId:M,htmlProps:m,getHelpTextProps:F,getErrorMessageProps:te,getRootProps:de,getLabelProps:W,getRequiredIndicatorProps:pe}}var dZ=Ft(function(t,n){const s=cl("Form",t),c=ii(t),{getRootProps:h,htmlProps:m,...l}=uZ(c),b=Kt("chakra-form-control",t.className);return Y.jsx(cZ,{value:l,children:Y.jsx(aZ,{value:s,children:Y.jsx(bt.div,{...h({},n),className:b,__css:s.container})})})});dZ.displayName="FormControl";var hZ=Ft(function(t,n){const s=PA(),c=lZ(),h=Kt("chakra-form__helper-text",t.className);return Y.jsx(bt.div,{...s==null?void 0:s.getHelpTextProps(t,n),__css:c.helperText,className:h})});hZ.displayName="FormHelperText";function fZ(e){const{isDisabled:t,isInvalid:n,isReadOnly:s,isRequired:c,...h}=zA(e);return{...h,disabled:t,readOnly:s,required:c,"aria-invalid":f_(n),"aria-required":f_(c),"aria-readonly":f_(s)}}function zA(e){var t,n,s;const c=PA(),{id:h,disabled:m,readOnly:l,required:b,isRequired:w,isInvalid:k,isReadOnly:M,isDisabled:E,onFocus:L,onBlur:N,...V}=e,J=e["aria-describedby"]?[e["aria-describedby"]]:[];return c!=null&&c.hasFeedbackText&&(c!=null&&c.isInvalid)&&J.push(c.feedbackId),c!=null&&c.hasHelpText&&J.push(c.helpTextId),{...V,"aria-describedby":J.join(" ")||void 0,id:h??(c==null?void 0:c.id),isDisabled:(t=m??E)!=null?t:c==null?void 0:c.isDisabled,isReadOnly:(n=l??M)!=null?n:c==null?void 0:c.isReadOnly,isRequired:(s=b??w)!=null?s:c==null?void 0:c.isRequired,isInvalid:k??(c==null?void 0:c.isInvalid),onFocus:rr(c==null?void 0:c.onFocus,L),onBlur:rr(c==null?void 0:c.onBlur,N)}}var pZ={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},aC=!1,Fp=null,pu=!1,R1=!1,L1=new Set;function Yw(e,t){L1.forEach(n=>n(e,t))}var mZ=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function gZ(e){return!(e.metaKey||!mZ&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function lC(e){pu=!0,gZ(e)&&(Fp="keyboard",Yw("keyboard",e))}function ed(e){if(Fp="pointer",e.type==="mousedown"||e.type==="pointerdown"){pu=!0;const t=e.composedPath?e.composedPath()[0]:e.target;let n=!1;try{n=t.matches(":focus-visible")}catch{}if(n)return;Yw("pointer",e)}}function yZ(e){return e.mozInputSource===0&&e.isTrusted?!0:e.detail===0&&!e.pointerType}function vZ(e){yZ(e)&&(pu=!0,Fp="virtual")}function _Z(e){e.target===window||e.target===document||(!pu&&!R1&&(Fp="virtual",Yw("virtual",e)),pu=!1,R1=!1)}function xZ(){pu=!1,R1=!0}function cC(){return Fp!=="pointer"}function bZ(){if(typeof window>"u"||aC)return;const{focus:e}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...n){pu=!0,e.apply(this,n)},document.addEventListener("keydown",lC,!0),document.addEventListener("keyup",lC,!0),document.addEventListener("click",vZ,!0),window.addEventListener("focus",_Z,!0),window.addEventListener("blur",xZ,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",ed,!0),document.addEventListener("pointermove",ed,!0),document.addEventListener("pointerup",ed,!0)):(document.addEventListener("mousedown",ed,!0),document.addEventListener("mousemove",ed,!0),document.addEventListener("mouseup",ed,!0)),aC=!0}function wZ(e){bZ(),e(cC());const t=()=>e(cC());return L1.add(t),()=>{L1.delete(t)}}function SZ(e,t=[]){const n=Object.assign({},e);for(const s of t)s in n&&delete n[s];return n}function TZ(e={}){const t=zA(e),{isDisabled:n,isReadOnly:s,isRequired:c,isInvalid:h,id:m,onBlur:l,onFocus:b,"aria-describedby":w}=t,{defaultChecked:k,isChecked:M,isFocusable:E,onChange:L,isIndeterminate:N,name:V,value:J,tabIndex:$=void 0,"aria-label":F,"aria-labelledby":W,"aria-invalid":te,...de}=e,pe=SZ(de,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),ce=Es(L),oe=Es(l),be=Es(b),[ye,Ae]=U.useState(!1),[Ze,Xe]=U.useState(!1),[ot,ft]=U.useState(!1),[Ce,Ee]=U.useState(!1);U.useEffect(()=>wZ(Ae),[]);const Me=U.useRef(null),[We,Ye]=U.useState(!0),[st,Ke]=U.useState(!!k),Je=M!==void 0,pt=Je?M:st,St=U.useCallback(kt=>{if(s||n){kt.preventDefault();return}Je||Ke(pt?kt.target.checked:N?!0:kt.target.checked),ce==null||ce(kt)},[s,n,pt,Je,N,ce]);Ha(()=>{Me.current&&(Me.current.indeterminate=Boolean(N))},[N]),jd(()=>{n&&Xe(!1)},[n,Xe]),Ha(()=>{const kt=Me.current;kt!=null&&kt.form&&(kt.form.onreset=()=>{Ke(!!k)})},[]);const Ot=n&&!E,Vt=U.useCallback(kt=>{kt.key===" "&&Ee(!0)},[Ee]),Bt=U.useCallback(kt=>{kt.key===" "&&Ee(!1)},[Ee]);Ha(()=>{if(!Me.current)return;Me.current.checked!==pt&&Ke(Me.current.checked)},[Me.current]);const ln=U.useCallback((kt={},Jt=null)=>{const $n=Tn=>{Ze&&Tn.preventDefault(),Ee(!0)};return{...kt,ref:Jt,"data-active":dr(Ce),"data-hover":dr(ot),"data-checked":dr(pt),"data-focus":dr(Ze),"data-focus-visible":dr(Ze&&ye),"data-indeterminate":dr(N),"data-disabled":dr(n),"data-invalid":dr(h),"data-readonly":dr(s),"aria-hidden":!0,onMouseDown:rr(kt.onMouseDown,$n),onMouseUp:rr(kt.onMouseUp,()=>Ee(!1)),onMouseEnter:rr(kt.onMouseEnter,()=>ft(!0)),onMouseLeave:rr(kt.onMouseLeave,()=>ft(!1))}},[Ce,pt,n,Ze,ye,ot,N,h,s]),Kn=U.useCallback((kt={},Jt=null)=>({...pe,...kt,ref:co(Jt,$n=>{$n&&Ye($n.tagName==="LABEL")}),onClick:rr(kt.onClick,()=>{var $n;We||(($n=Me.current)==null||$n.click(),requestAnimationFrame(()=>{var Tn;(Tn=Me.current)==null||Tn.focus()}))}),"data-disabled":dr(n),"data-checked":dr(pt),"data-invalid":dr(h)}),[pe,n,pt,h,We]),qt=U.useCallback((kt={},Jt=null)=>({...kt,ref:co(Me,Jt),type:"checkbox",name:V,value:J,id:m,tabIndex:$,onChange:rr(kt.onChange,St),onBlur:rr(kt.onBlur,oe,()=>Xe(!1)),onFocus:rr(kt.onFocus,be,()=>Xe(!0)),onKeyDown:rr(kt.onKeyDown,Vt),onKeyUp:rr(kt.onKeyUp,Bt),required:c,checked:pt,disabled:Ot,readOnly:s,"aria-label":F,"aria-labelledby":W,"aria-invalid":te?Boolean(te):h,"aria-describedby":w,"aria-disabled":n,style:pZ}),[V,J,m,St,oe,be,Vt,Bt,c,pt,Ot,s,F,W,te,h,w,n,$]),zt=U.useCallback((kt={},Jt=null)=>({...kt,ref:Jt,onMouseDown:rr(kt.onMouseDown,uC),onTouchStart:rr(kt.onTouchStart,uC),"data-disabled":dr(n),"data-checked":dr(pt),"data-invalid":dr(h)}),[pt,n,h]);return{state:{isInvalid:h,isFocused:Ze,isChecked:pt,isActive:Ce,isHovered:ot,isIndeterminate:N,isDisabled:n,isReadOnly:s,isRequired:c},getRootProps:Kn,getCheckboxProps:ln,getInputProps:qt,getLabelProps:zt,htmlProps:pe}}function uC(e){e.preventDefault(),e.stopPropagation()}var kZ={display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",userSelect:"none",flexShrink:0},EZ={cursor:"pointer",display:"inline-flex",alignItems:"center",verticalAlign:"top",position:"relative"},CZ=w0({from:{opacity:0,strokeDashoffset:16,transform:"scale(0.95)"},to:{opacity:1,strokeDashoffset:0,transform:"scale(1)"}}),IZ=w0({from:{opacity:0},to:{opacity:1}}),MZ=w0({from:{transform:"scaleX(0.65)"},to:{transform:"scaleX(1)"}}),AA=Ft(function(t,n){const s=rZ(),c={...s,...t},h=cl("Checkbox",c),m=ii(t),{spacing:l="0.5rem",className:b,children:w,iconColor:k,iconSize:M,icon:E=Y.jsx(sZ,{}),isChecked:L,isDisabled:N=s==null?void 0:s.isDisabled,onChange:V,inputProps:J,...$}=m;let F=L;s!=null&&s.value&&m.value&&(F=s.value.includes(m.value));let W=V;s!=null&&s.onChange&&m.value&&(W=EP(s.onChange,V));const{state:te,getInputProps:de,getCheckboxProps:pe,getLabelProps:ce,getRootProps:oe}=TZ({...$,isDisabled:N,isChecked:F,onChange:W}),be=U.useMemo(()=>({animation:te.isIndeterminate?`${IZ} 20ms linear, ${MZ} 200ms linear`:`${CZ} 200ms linear`,fontSize:M,color:k,...h.icon}),[k,M,,te.isIndeterminate,h.icon]),ye=U.cloneElement(E,{__css:be,isIndeterminate:te.isIndeterminate,isChecked:te.isChecked});return Y.jsxs(bt.label,{__css:{...EZ,...h.container},className:Kt("chakra-checkbox",b),...oe(),children:[Y.jsx("input",{className:"chakra-checkbox__input",...de(J,n)}),Y.jsx(bt.span,{__css:{...kZ,...h.control},className:"chakra-checkbox__control",...pe(),children:ye}),w&&Y.jsx(bt.span,{className:"chakra-checkbox__label",...ce(),__css:{marginStart:l,...h.label},children:w})]})});AA.displayName="Checkbox";function Zg(e,t,n,s){const c=Es(n);return U.useEffect(()=>{const h=typeof e=="function"?e():e??document;if(!(!n||!h))return h.addEventListener(t,c,s),()=>{h.removeEventListener(t,c,s)}},[t,e,s,c,n]),()=>{const h=typeof e=="function"?e():e??document;h==null||h.removeEventListener(t,c,s)}}function DA(e){return e!=null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function RA(e){var t;if(!DA(e))return!1;const n=(t=e.ownerDocument.defaultView)!=null?t:window;return e instanceof n.HTMLElement}function PZ(e){var t,n;return(n=(t=LA(e))==null?void 0:t.defaultView)!=null?n:window}function LA(e){return DA(e)?e.ownerDocument:document}function zZ(e){return LA(e).activeElement}var OA=e=>e.hasAttribute("tabindex"),AZ=e=>OA(e)&&e.tabIndex===-1;function DZ(e){return Boolean(e.getAttribute("disabled"))===!0||Boolean(e.getAttribute("aria-disabled"))===!0}function BA(e){return e.parentElement&&BA(e.parentElement)?!0:e.hidden}function RZ(e){const t=e.getAttribute("contenteditable");return t!=="false"&&t!=null}function LZ(e){if(!RA(e)||BA(e)||DZ(e))return!1;const{localName:t}=e;if(["input","select","textarea","button"].indexOf(t)>=0)return!0;const s={a:()=>e.hasAttribute("href"),audio:()=>e.hasAttribute("controls"),video:()=>e.hasAttribute("controls")};return t in s?s[t]():RZ(e)?!0:OA(e)}function OZ(e){return e?RA(e)&&LZ(e)&&!AZ(e):!1}var[BZ,FZ]=_i({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),FA=Ft(function(t,n){const s=cl("Input",t),{children:c,className:h,...m}=ii(t),l=Kt("chakra-input__group",h),b={},w=nh(c),k=s.field;w.forEach(E=>{var L,N;s&&(k&&E.type.id==="InputLeftElement"&&(b.paddingStart=(L=k.height)!=null?L:k.h),k&&E.type.id==="InputRightElement"&&(b.paddingEnd=(N=k.height)!=null?N:k.h),E.type.id==="InputRightAddon"&&(b.borderEndRadius=0),E.type.id==="InputLeftAddon"&&(b.borderStartRadius=0))});const M=w.map(E=>{var L,N;const V=tz({size:((L=E.props)==null?void 0:L.size)||t.size,variant:((N=E.props)==null?void 0:N.variant)||t.variant});return E.type.id!=="Input"?U.cloneElement(E,V):U.cloneElement(E,Object.assign(V,b,E.props))});return Y.jsx(bt.div,{className:l,ref:n,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate"},"data-group":!0,...m,children:Y.jsx(BZ,{value:s,children:M})})});FA.displayName="InputGroup";var NZ=bt("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),O0=Ft(function(t,n){var s,c;const{placement:h="left",...m}=t,l=FZ(),b=l.field,k={[h==="left"?"insetStart":"insetEnd"]:"0",width:(s=b==null?void 0:b.height)!=null?s:b==null?void 0:b.h,height:(c=b==null?void 0:b.height)!=null?c:b==null?void 0:b.h,fontSize:b==null?void 0:b.fontSize,...l.element};return Y.jsx(NZ,{ref:n,__css:k,...m})});O0.id="InputElement";O0.displayName="InputElement";var Kw=Ft(function(t,n){const{className:s,...c}=t,h=Kt("chakra-input__left-element",s);return Y.jsx(O0,{ref:n,placement:"left",className:h,...c})});Kw.id="InputLeftElement";Kw.displayName="InputLeftElement";var Jw=Ft(function(t,n){const{className:s,...c}=t,h=Kt("chakra-input__right-element",s);return Y.jsx(O0,{ref:n,placement:"right",className:h,...c})});Jw.id="InputRightElement";Jw.displayName="InputRightElement";var Qw=Ft(function(t,n){const{htmlSize:s,...c}=t,h=cl("Input",c),m=ii(c),l=fZ(m),b=Kt("chakra-input",t.className);return Y.jsx(bt.input,{size:s,...l,__css:h.field,ref:n,className:b})});Qw.displayName="Input";Qw.id="Input";var NA=Ft(function(t,n){const{templateAreas:s,gap:c,rowGap:h,columnGap:m,column:l,row:b,autoFlow:w,autoRows:k,templateRows:M,autoColumns:E,templateColumns:L,...N}=t,V={display:"grid",gridTemplateAreas:s,gridGap:c,gridRowGap:h,gridColumnGap:m,gridAutoColumns:E,gridColumn:l,gridRow:b,gridAutoFlow:w,gridAutoRows:k,gridTemplateRows:M,gridTemplateColumns:L};return Y.jsx(bt.div,{ref:n,__css:V,...N})});NA.displayName="Grid";var $A=Object.freeze(["base","sm","md","lg","xl","2xl"]);function Np(e,t){return Array.isArray(e)?e.map(n=>n===null?null:t(n)):zi(e)?Object.keys(e).reduce((n,s)=>(n[s]=t(e[s]),n),{}):e!=null?t(e):null}function $Z(e,t=$A){const n={};return e.forEach((s,c)=>{const h=t[c];s!=null&&(n[h]=s)}),n}var jA=Ft(function(t,n){const{columns:s,spacingX:c,spacingY:h,spacing:m,minChildWidth:l,...b}=t,w=th(),k=l?VZ(l,w):UZ(s);return Y.jsx(NA,{ref:n,gap:m,columnGap:c,rowGap:h,templateColumns:k,...b})});jA.displayName="SimpleGrid";function jZ(e){return typeof e=="number"?`${e}px`:e}function VZ(e,t){return Np(e,n=>{const s=AO("sizes",n,jZ(n))(t);return n===null?null:`repeat(auto-fit, minmax(${s}, 1fr))`})}function UZ(e){return Np(e,t=>t===null?null:`repeat(${t}, minmax(0, 1fr))`)}var eS=bt("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});eS.displayName="Spacer";var Vo=Ft(function(t,n){const s=fa("Text",t),{className:c,align:h,decoration:m,casing:l,...b}=ii(t),w=tz({textAlign:t.align,textDecoration:t.decoration,textTransform:t.casing});return Y.jsx(bt.p,{ref:n,className:Kt("chakra-text",t.className),...w,...b,__css:s})});Vo.displayName="Text";var VA=e=>Y.jsx(bt.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});VA.displayName="StackItem";var O1="& > *:not(style) ~ *:not(style)";function GZ(e){const{spacing:t,direction:n}=e,s={column:{marginTop:t,marginEnd:0,marginBottom:0,marginStart:0},row:{marginTop:0,marginEnd:0,marginBottom:0,marginStart:t},"column-reverse":{marginTop:0,marginEnd:0,marginBottom:t,marginStart:0},"row-reverse":{marginTop:0,marginEnd:t,marginBottom:0,marginStart:0}};return{flexDirection:n,[O1]:Np(n,c=>s[c])}}function WZ(e){const{spacing:t,direction:n}=e,s={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":Np(n,c=>s[c])}}var Wo=Ft((e,t)=>{const{isInline:n,direction:s,align:c,justify:h,spacing:m="0.5rem",wrap:l,children:b,divider:w,className:k,shouldWrapChildren:M,...E}=e,L=n?"row":s??"column",N=U.useMemo(()=>GZ({direction:L,spacing:m}),[L,m]),V=U.useMemo(()=>WZ({spacing:m,direction:L}),[m,L]),J=!!w,$=!M&&!J,F=U.useMemo(()=>{const te=nh(b);return $?te:te.map((de,pe)=>{const ce=typeof de.key<"u"?de.key:pe,oe=pe+1===te.length,ye=M?Y.jsx(VA,{children:de},ce):de;if(!J)return ye;const Ae=U.cloneElement(w,{__css:V}),Ze=oe?null:Ae;return Y.jsxs(U.Fragment,{children:[ye,Ze]},ce)})},[w,V,J,$,M,b]),W=Kt("chakra-stack",k);return Y.jsx(bt.div,{ref:t,display:"flex",alignItems:c,justifyContent:h,flexDirection:N.flexDirection,flexWrap:l,className:W,__css:J?{}:{[O1]:N[O1]},...E,children:F})});Wo.displayName="Stack";var _p=Ft((e,t)=>Y.jsx(Wo,{align:"center",...e,direction:"row",ref:t}));_p.displayName="HStack";var xp=e=>Y.jsx(bt.div,{className:"chakra-stack__divider",...e,__css:{...e.__css,borderWidth:0,alignSelf:"stretch",borderColor:"inherit",width:"auto",height:"auto"}});xp.displayName="StackDivider";var Ud=Ft(function(t,n){const s=fa("Heading",t),{className:c,...h}=ii(t);return Y.jsx(bt.h2,{ref:n,className:Kt("chakra-heading",t.className),...h,__css:s})});Ud.displayName="Heading";var ta=bt("div");ta.displayName="Box";var UA=Ft(function(t,n){const{size:s,centerContent:c=!0,...h}=t,m=c?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return Y.jsx(ta,{ref:n,boxSize:s,__css:{...m,flexShrink:0,flexGrow:0},...h})});UA.displayName="Square";var ZZ=Ft(function(t,n){const{size:s,...c}=t;return Y.jsx(UA,{size:s,ref:n,borderRadius:"9999px",...c})});ZZ.displayName="Circle";var qg=Ft(function(t,n){const s=fa("Kbd",t),{className:c,...h}=ii(t);return Y.jsx(bt.kbd,{ref:n,className:Kt("chakra-kbd",c),...h,__css:{fontFamily:"mono",...s}})});qg.displayName="Kbd";var GA=Ft(function(e,t){const{ratio:n=4/3,children:s,className:c,...h}=e,m=U.Children.only(s),l=Kt("chakra-aspect-ratio",c);return Y.jsx(bt.div,{ref:t,position:"relative",className:l,_before:{height:0,content:'""',display:"block",paddingBottom:Np(n,b=>`${1/b*100}%`)},__css:{"& > *:not(style)":{overflow:"hidden",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},"& > img, & > video":{objectFit:"cover"}},...h,children:m})});GA.displayName="AspectRatio";var WA=Ft(function(t,n){const s=fa("Badge",t),{className:c,...h}=ii(t);return Y.jsx(bt.span,{ref:n,className:Kt("chakra-badge",t.className),...h,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...s}})});WA.displayName="Badge";var qa=bt("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});qa.displayName="Center";var qZ={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};Ft(function(t,n){const{axis:s="both",...c}=t;return Y.jsx(bt.div,{ref:n,__css:qZ[s],...c,position:"absolute"})});var ZA=Ft(function(t,n){const{borderLeftWidth:s,borderBottomWidth:c,borderTopWidth:h,borderRightWidth:m,borderWidth:l,borderStyle:b,borderColor:w,...k}=fa("Divider",t),{className:M,orientation:E="horizontal",__css:L,...N}=ii(t),V={vertical:{borderLeftWidth:s||m||l||"1px",height:"100%"},horizontal:{borderBottomWidth:c||h||l||"1px",width:"100%"}};return Y.jsx(bt.hr,{ref:n,"aria-orientation":E,...N,__css:{...k,border:"0",borderColor:w,borderStyle:b,...V[E],...L},className:Kt("chakra-divider",M)})});ZA.displayName="Divider";function XZ(e,t={}){const{ssr:n=!0,fallback:s}=t,{getWindow:c}=VU(),h=Array.isArray(e)?e:[e];let m=Array.isArray(s)?s:[s];m=m.filter(w=>w!=null);const[l,b]=U.useState(()=>h.map((w,k)=>({media:w,matches:n?!!m[k]:c().matchMedia(w).matches})));return U.useEffect(()=>{const w=c();b(h.map(E=>({media:E,matches:w.matchMedia(E).matches})));const k=h.map(E=>w.matchMedia(E)),M=E=>{b(L=>L.slice().map(N=>N.media===E.media?{...N,matches:E.matches}:N))};return k.forEach(E=>{typeof E.addListener=="function"?E.addListener(M):E.addEventListener("change",M)}),()=>{k.forEach(E=>{typeof E.removeListener=="function"?E.removeListener(M):E.removeEventListener("change",M)})}},[c]),l.map(w=>w.matches)}function HZ(e,t,n=$A){let s=Object.keys(e).indexOf(t);if(s!==-1)return e[t];let c=n.indexOf(t);for(;c>=0;){const h=n[c];if(e.hasOwnProperty(h)){s=c;break}c-=1}if(s!==-1){const h=n[s];return e[h]}}function YZ(e){var t,n;const s=zi(e)?e:{fallback:e??"base"},h=th().__breakpoints.details.map(({minMaxQuery:w,breakpoint:k})=>({breakpoint:k,query:w.replace("@media screen and ","")})),m=h.map(w=>w.breakpoint===s.fallback),b=XZ(h.map(w=>w.query),{fallback:m,ssr:s.ssr}).findIndex(w=>w==!0);return(n=(t=h[b])==null?void 0:t.breakpoint)!=null?n:s.fallback}function KZ(e,t){var n;const s=zi(t)?t:{fallback:t??"base"},c=YZ(s),h=th();if(!c)return;const m=Array.from(((n=h.__breakpoints)==null?void 0:n.keys)||[]),l=Array.isArray(e)?Object.fromEntries(Object.entries($Z(e,m)).map(([b,w])=>[b,w])):e;return HZ(l,c,m)}function JZ(e){const{key:t}=e;return t.length===1||t.length>1&&/[^a-zA-Z0-9]/.test(t)}function QZ(e={}){const{timeout:t=300,preventDefault:n=()=>!0}=e,[s,c]=U.useState([]),h=U.useRef(),m=()=>{h.current&&(clearTimeout(h.current),h.current=null)},l=()=>{m(),h.current=setTimeout(()=>{c([]),h.current=null},t)};U.useEffect(()=>m,[]);function b(w){return k=>{if(k.key==="Backspace"){const M=[...s];M.pop(),c(M);return}if(JZ(k)){const M=s.concat(k.key);n(k)&&(k.preventDefault(),k.stopPropagation()),c(M),w(M.join("")),l()}}}return b}function eq(e,t,n,s){if(t==null)return s;if(!s)return e.find(m=>n(m).toLowerCase().startsWith(t.toLowerCase()));const c=e.filter(h=>n(h).toLowerCase().startsWith(t.toLowerCase()));if(c.length>0){let h;return c.includes(s)?(h=c.indexOf(s)+1,h===c.length&&(h=0),c[h]):(h=e.indexOf(c[0]),e[h])}return s}function tq(){const e=U.useRef(new Map),t=e.current,n=U.useCallback((c,h,m,l)=>{e.current.set(m,{type:h,el:c,options:l}),c.addEventListener(h,m,l)},[]),s=U.useCallback((c,h,m,l)=>{c.removeEventListener(h,m,l),e.current.delete(m)},[]);return U.useEffect(()=>()=>{t.forEach((c,h)=>{s(c.el,c.type,h,c.options)})},[s,t]),{add:n,remove:s}}function V_(e){const t=e.target,{tagName:n,isContentEditable:s}=t;return n!=="INPUT"&&n!=="TEXTAREA"&&s!==!0}function qA(e={}){const{ref:t,isDisabled:n,isFocusable:s,clickOnEnter:c=!0,clickOnSpace:h=!0,onMouseDown:m,onMouseUp:l,onClick:b,onKeyDown:w,onKeyUp:k,tabIndex:M,onMouseOver:E,onMouseLeave:L,...N}=e,[V,J]=U.useState(!0),[$,F]=U.useState(!1),W=tq(),te=Ee=>{Ee&&Ee.tagName!=="BUTTON"&&J(!1)},de=V?M:M||0,pe=n&&!s,ce=U.useCallback(Ee=>{if(n){Ee.stopPropagation(),Ee.preventDefault();return}Ee.currentTarget.focus(),b==null||b(Ee)},[n,b]),oe=U.useCallback(Ee=>{$&&V_(Ee)&&(Ee.preventDefault(),Ee.stopPropagation(),F(!1),W.remove(document,"keyup",oe,!1))},[$,W]),be=U.useCallback(Ee=>{if(w==null||w(Ee),n||Ee.defaultPrevented||Ee.metaKey||!V_(Ee.nativeEvent)||V)return;const Me=c&&Ee.key==="Enter";h&&Ee.key===" "&&(Ee.preventDefault(),F(!0)),Me&&(Ee.preventDefault(),Ee.currentTarget.click()),W.add(document,"keyup",oe,!1)},[n,V,w,c,h,W,oe]),ye=U.useCallback(Ee=>{if(k==null||k(Ee),n||Ee.defaultPrevented||Ee.metaKey||!V_(Ee.nativeEvent)||V)return;h&&Ee.key===" "&&(Ee.preventDefault(),F(!1),Ee.currentTarget.click())},[h,V,n,k]),Ae=U.useCallback(Ee=>{Ee.button===0&&(F(!1),W.remove(document,"mouseup",Ae,!1))},[W]),Ze=U.useCallback(Ee=>{if(Ee.button!==0)return;if(n){Ee.stopPropagation(),Ee.preventDefault();return}V||F(!0),Ee.currentTarget.focus({preventScroll:!0}),W.add(document,"mouseup",Ae,!1),m==null||m(Ee)},[n,V,m,W,Ae]),Xe=U.useCallback(Ee=>{Ee.button===0&&(V||F(!1),l==null||l(Ee))},[l,V]),ot=U.useCallback(Ee=>{if(n){Ee.preventDefault();return}E==null||E(Ee)},[n,E]),ft=U.useCallback(Ee=>{$&&(Ee.preventDefault(),F(!1)),L==null||L(Ee)},[$,L]),Ce=co(t,te);return V?{...N,ref:Ce,type:"button","aria-disabled":pe?void 0:n,disabled:pe,onClick:ce,onMouseDown:m,onMouseUp:l,onKeyUp:k,onKeyDown:w,onMouseOver:E,onMouseLeave:L}:{...N,ref:Ce,role:"button","data-active":dr($),"aria-disabled":n?"true":void 0,tabIndex:pe?void 0:de,onClick:ce,onMouseDown:Ze,onMouseUp:Xe,onKeyUp:ye,onKeyDown:be,onMouseOver:ot,onMouseLeave:ft}}function nq(e){const t=e.current;if(!t)return!1;const n=zZ(t);return!n||t.contains(n)?!1:!!OZ(n)}function rq(e,t){const{shouldFocus:n,visible:s,focusRef:c}=t,h=n&&!s;jd(()=>{if(!h||nq(e))return;const m=(c==null?void 0:c.current)||e.current;m&&requestAnimationFrame(()=>{m.focus()})},[h,e,c])}var td=(e,t)=>({var:e,varRef:t?`var(${e}, ${t})`:`var(${e})`}),gi={arrowShadowColor:td("--popper-arrow-shadow-color"),arrowSize:td("--popper-arrow-size","8px"),arrowSizeHalf:td("--popper-arrow-size-half"),arrowBg:td("--popper-arrow-bg"),transformOrigin:td("--popper-transform-origin"),arrowOffset:td("--popper-arrow-offset")};function iq(e){if(e.includes("top"))return"1px 1px 1px 0 var(--popper-arrow-shadow-color)";if(e.includes("bottom"))return"-1px -1px 1px 0 var(--popper-arrow-shadow-color)";if(e.includes("right"))return"-1px 1px 1px 0 var(--popper-arrow-shadow-color)";if(e.includes("left"))return"1px -1px 1px 0 var(--popper-arrow-shadow-color)"}var oq={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},sq=e=>oq[e],dC={scroll:!0,resize:!0};function aq(e){let t;return typeof e=="object"?t={enabled:!0,options:{...dC,...e}}:t={enabled:e,options:dC},t}var lq={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`},effect:({state:e})=>()=>{const t=e.elements.reference;e.elements.popper.style.width=`${t.offsetWidth}px`}},cq={name:"transformOrigin",enabled:!0,phase:"write",fn:({state:e})=>{hC(e)},effect:({state:e})=>()=>{hC(e)}},hC=e=>{e.elements.popper.style.setProperty(gi.transformOrigin.var,sq(e.placement))},uq={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:({state:e})=>{dq(e)}},dq=e=>{var t;if(!e.placement)return;const n=hq(e.placement);if((t=e.elements)!=null&&t.arrow&&n){Object.assign(e.elements.arrow.style,{[n.property]:n.value,width:gi.arrowSize.varRef,height:gi.arrowSize.varRef,zIndex:-1});const s={[gi.arrowSizeHalf.var]:`calc(${gi.arrowSize.varRef} / 2)`,[gi.arrowOffset.var]:`calc(${gi.arrowSizeHalf.varRef} * -1)`};for(const c in s)e.elements.arrow.style.setProperty(c,s[c])}},hq=e=>{if(e.startsWith("top"))return{property:"bottom",value:gi.arrowOffset.varRef};if(e.startsWith("bottom"))return{property:"top",value:gi.arrowOffset.varRef};if(e.startsWith("left"))return{property:"right",value:gi.arrowOffset.varRef};if(e.startsWith("right"))return{property:"left",value:gi.arrowOffset.varRef}},fq={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:({state:e})=>{fC(e)},effect:({state:e})=>()=>{fC(e)}},fC=e=>{if(!e.elements.arrow)return;const t=e.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!t)return;const n=iq(e.placement);n&&t.style.setProperty("--popper-arrow-default-shadow",n),Object.assign(t.style,{transform:"rotate(45deg)",background:gi.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},pq={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},mq={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function gq(e,t="ltr"){var n,s;const c=((n=pq[e])==null?void 0:n[t])||e;return t==="ltr"?c:(s=mq[e])!=null?s:c}var oo="top",Ko="bottom",Jo="right",so="left",tS="auto",$p=[oo,Ko,Jo,so],Gd="start",bp="end",yq="clippingParents",XA="viewport",ef="popper",vq="reference",pC=$p.reduce(function(e,t){return e.concat([t+"-"+Gd,t+"-"+bp])},[]),HA=[].concat($p,[tS]).reduce(function(e,t){return e.concat([t,t+"-"+Gd,t+"-"+bp])},[]),_q="beforeRead",xq="read",bq="afterRead",wq="beforeMain",Sq="main",Tq="afterMain",kq="beforeWrite",Eq="write",Cq="afterWrite",Iq=[_q,xq,bq,wq,Sq,Tq,kq,Eq,Cq];function ha(e){return e?(e.nodeName||"").toLowerCase():null}function Qo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function mu(e){var t=Qo(e).Element;return e instanceof t||e instanceof Element}function Xo(e){var t=Qo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function nS(e){if(typeof ShadowRoot>"u")return!1;var t=Qo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Mq(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},c=t.attributes[n]||{},h=t.elements[n];!Xo(h)||!ha(h)||(Object.assign(h.style,s),Object.keys(c).forEach(function(m){var l=c[m];l===!1?h.removeAttribute(m):h.setAttribute(m,l===!0?"":l)}))})}function Pq(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var c=t.elements[s],h=t.attributes[s]||{},m=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),l=m.reduce(function(b,w){return b[w]="",b},{});!Xo(c)||!ha(c)||(Object.assign(c.style,l),Object.keys(h).forEach(function(b){c.removeAttribute(b)}))})}}const zq={name:"applyStyles",enabled:!0,phase:"write",fn:Mq,effect:Pq,requires:["computeStyles"]};function ca(e){return e.split("-")[0]}var au=Math.max,Ny=Math.min,Wd=Math.round;function B1(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function YA(){return!/^((?!chrome|android).)*safari/i.test(B1())}function Zd(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var s=e.getBoundingClientRect(),c=1,h=1;t&&Xo(e)&&(c=e.offsetWidth>0&&Wd(s.width)/e.offsetWidth||1,h=e.offsetHeight>0&&Wd(s.height)/e.offsetHeight||1);var m=mu(e)?Qo(e):window,l=m.visualViewport,b=!YA()&&n,w=(s.left+(b&&l?l.offsetLeft:0))/c,k=(s.top+(b&&l?l.offsetTop:0))/h,M=s.width/c,E=s.height/h;return{width:M,height:E,top:k,right:w+M,bottom:k+E,left:w,x:w,y:k}}function rS(e){var t=Zd(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function KA(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&nS(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function al(e){return Qo(e).getComputedStyle(e)}function Aq(e){return["table","td","th"].indexOf(ha(e))>=0}function ac(e){return((mu(e)?e.ownerDocument:e.document)||window.document).documentElement}function B0(e){return ha(e)==="html"?e:e.assignedSlot||e.parentNode||(nS(e)?e.host:null)||ac(e)}function mC(e){return!Xo(e)||al(e).position==="fixed"?null:e.offsetParent}function Dq(e){var t=/firefox/i.test(B1()),n=/Trident/i.test(B1());if(n&&Xo(e)){var s=al(e);if(s.position==="fixed")return null}var c=B0(e);for(nS(c)&&(c=c.host);Xo(c)&&["html","body"].indexOf(ha(c))<0;){var h=al(c);if(h.transform!=="none"||h.perspective!=="none"||h.contain==="paint"||["transform","perspective"].indexOf(h.willChange)!==-1||t&&h.willChange==="filter"||t&&h.filter&&h.filter!=="none")return c;c=c.parentNode}return null}function jp(e){for(var t=Qo(e),n=mC(e);n&&Aq(n)&&al(n).position==="static";)n=mC(n);return n&&(ha(n)==="html"||ha(n)==="body"&&al(n).position==="static")?t:n||Dq(e)||t}function iS(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Bf(e,t,n){return au(e,Ny(t,n))}function Rq(e,t,n){var s=Bf(e,t,n);return s>n?n:s}function JA(){return{top:0,right:0,bottom:0,left:0}}function QA(e){return Object.assign({},JA(),e)}function e5(e,t){return t.reduce(function(n,s){return n[s]=e,n},{})}var Lq=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,QA(typeof t!="number"?t:e5(t,$p))};function Oq(e){var t,n=e.state,s=e.name,c=e.options,h=n.elements.arrow,m=n.modifiersData.popperOffsets,l=ca(n.placement),b=iS(l),w=[so,Jo].indexOf(l)>=0,k=w?"height":"width";if(!(!h||!m)){var M=Lq(c.padding,n),E=rS(h),L=b==="y"?oo:so,N=b==="y"?Ko:Jo,V=n.rects.reference[k]+n.rects.reference[b]-m[b]-n.rects.popper[k],J=m[b]-n.rects.reference[b],$=jp(h),F=$?b==="y"?$.clientHeight||0:$.clientWidth||0:0,W=V/2-J/2,te=M[L],de=F-E[k]-M[N],pe=F/2-E[k]/2+W,ce=Bf(te,pe,de),oe=b;n.modifiersData[s]=(t={},t[oe]=ce,t.centerOffset=ce-pe,t)}}function Bq(e){var t=e.state,n=e.options,s=n.element,c=s===void 0?"[data-popper-arrow]":s;c!=null&&(typeof c=="string"&&(c=t.elements.popper.querySelector(c),!c)||KA(t.elements.popper,c)&&(t.elements.arrow=c))}const Fq={name:"arrow",enabled:!0,phase:"main",fn:Oq,effect:Bq,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qd(e){return e.split("-")[1]}var Nq={top:"auto",right:"auto",bottom:"auto",left:"auto"};function $q(e){var t=e.x,n=e.y,s=window,c=s.devicePixelRatio||1;return{x:Wd(t*c)/c||0,y:Wd(n*c)/c||0}}function gC(e){var t,n=e.popper,s=e.popperRect,c=e.placement,h=e.variation,m=e.offsets,l=e.position,b=e.gpuAcceleration,w=e.adaptive,k=e.roundOffsets,M=e.isFixed,E=m.x,L=E===void 0?0:E,N=m.y,V=N===void 0?0:N,J=typeof k=="function"?k({x:L,y:V}):{x:L,y:V};L=J.x,V=J.y;var $=m.hasOwnProperty("x"),F=m.hasOwnProperty("y"),W=so,te=oo,de=window;if(w){var pe=jp(n),ce="clientHeight",oe="clientWidth";if(pe===Qo(n)&&(pe=ac(n),al(pe).position!=="static"&&l==="absolute"&&(ce="scrollHeight",oe="scrollWidth")),pe=pe,c===oo||(c===so||c===Jo)&&h===bp){te=Ko;var be=M&&pe===de&&de.visualViewport?de.visualViewport.height:pe[ce];V-=be-s.height,V*=b?1:-1}if(c===so||(c===oo||c===Ko)&&h===bp){W=Jo;var ye=M&&pe===de&&de.visualViewport?de.visualViewport.width:pe[oe];L-=ye-s.width,L*=b?1:-1}}var Ae=Object.assign({position:l},w&&Nq),Ze=k===!0?$q({x:L,y:V}):{x:L,y:V};if(L=Ze.x,V=Ze.y,b){var Xe;return Object.assign({},Ae,(Xe={},Xe[te]=F?"0":"",Xe[W]=$?"0":"",Xe.transform=(de.devicePixelRatio||1)<=1?"translate("+L+"px, "+V+"px)":"translate3d("+L+"px, "+V+"px, 0)",Xe))}return Object.assign({},Ae,(t={},t[te]=F?V+"px":"",t[W]=$?L+"px":"",t.transform="",t))}function jq(e){var t=e.state,n=e.options,s=n.gpuAcceleration,c=s===void 0?!0:s,h=n.adaptive,m=h===void 0?!0:h,l=n.roundOffsets,b=l===void 0?!0:l,w={placement:ca(t.placement),variation:qd(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:c,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,gC(Object.assign({},w,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:m,roundOffsets:b})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,gC(Object.assign({},w,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:b})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Vq={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:jq,data:{}};var gg={passive:!0};function Uq(e){var t=e.state,n=e.instance,s=e.options,c=s.scroll,h=c===void 0?!0:c,m=s.resize,l=m===void 0?!0:m,b=Qo(t.elements.popper),w=[].concat(t.scrollParents.reference,t.scrollParents.popper);return h&&w.forEach(function(k){k.addEventListener("scroll",n.update,gg)}),l&&b.addEventListener("resize",n.update,gg),function(){h&&w.forEach(function(k){k.removeEventListener("scroll",n.update,gg)}),l&&b.removeEventListener("resize",n.update,gg)}}const Gq={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Uq,data:{}};var Wq={left:"right",right:"left",bottom:"top",top:"bottom"};function Xg(e){return e.replace(/left|right|bottom|top/g,function(t){return Wq[t]})}var Zq={start:"end",end:"start"};function yC(e){return e.replace(/start|end/g,function(t){return Zq[t]})}function oS(e){var t=Qo(e),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function sS(e){return Zd(ac(e)).left+oS(e).scrollLeft}function qq(e,t){var n=Qo(e),s=ac(e),c=n.visualViewport,h=s.clientWidth,m=s.clientHeight,l=0,b=0;if(c){h=c.width,m=c.height;var w=YA();(w||!w&&t==="fixed")&&(l=c.offsetLeft,b=c.offsetTop)}return{width:h,height:m,x:l+sS(e),y:b}}function Xq(e){var t,n=ac(e),s=oS(e),c=(t=e.ownerDocument)==null?void 0:t.body,h=au(n.scrollWidth,n.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),m=au(n.scrollHeight,n.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),l=-s.scrollLeft+sS(e),b=-s.scrollTop;return al(c||n).direction==="rtl"&&(l+=au(n.clientWidth,c?c.clientWidth:0)-h),{width:h,height:m,x:l,y:b}}function aS(e){var t=al(e),n=t.overflow,s=t.overflowX,c=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+c+s)}function t5(e){return["html","body","#document"].indexOf(ha(e))>=0?e.ownerDocument.body:Xo(e)&&aS(e)?e:t5(B0(e))}function Ff(e,t){var n;t===void 0&&(t=[]);var s=t5(e),c=s===((n=e.ownerDocument)==null?void 0:n.body),h=Qo(s),m=c?[h].concat(h.visualViewport||[],aS(s)?s:[]):s,l=t.concat(m);return c?l:l.concat(Ff(B0(m)))}function F1(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Hq(e,t){var n=Zd(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function vC(e,t,n){return t===XA?F1(qq(e,n)):mu(t)?Hq(t,n):F1(Xq(ac(e)))}function Yq(e){var t=Ff(B0(e)),n=["absolute","fixed"].indexOf(al(e).position)>=0,s=n&&Xo(e)?jp(e):e;return mu(s)?t.filter(function(c){return mu(c)&&KA(c,s)&&ha(c)!=="body"}):[]}function Kq(e,t,n,s){var c=t==="clippingParents"?Yq(e):[].concat(t),h=[].concat(c,[n]),m=h[0],l=h.reduce(function(b,w){var k=vC(e,w,s);return b.top=au(k.top,b.top),b.right=Ny(k.right,b.right),b.bottom=Ny(k.bottom,b.bottom),b.left=au(k.left,b.left),b},vC(e,m,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function n5(e){var t=e.reference,n=e.element,s=e.placement,c=s?ca(s):null,h=s?qd(s):null,m=t.x+t.width/2-n.width/2,l=t.y+t.height/2-n.height/2,b;switch(c){case oo:b={x:m,y:t.y-n.height};break;case Ko:b={x:m,y:t.y+t.height};break;case Jo:b={x:t.x+t.width,y:l};break;case so:b={x:t.x-n.width,y:l};break;default:b={x:t.x,y:t.y}}var w=c?iS(c):null;if(w!=null){var k=w==="y"?"height":"width";switch(h){case Gd:b[w]=b[w]-(t[k]/2-n[k]/2);break;case bp:b[w]=b[w]+(t[k]/2-n[k]/2);break}}return b}function wp(e,t){t===void 0&&(t={});var n=t,s=n.placement,c=s===void 0?e.placement:s,h=n.strategy,m=h===void 0?e.strategy:h,l=n.boundary,b=l===void 0?yq:l,w=n.rootBoundary,k=w===void 0?XA:w,M=n.elementContext,E=M===void 0?ef:M,L=n.altBoundary,N=L===void 0?!1:L,V=n.padding,J=V===void 0?0:V,$=QA(typeof J!="number"?J:e5(J,$p)),F=E===ef?vq:ef,W=e.rects.popper,te=e.elements[N?F:E],de=Kq(mu(te)?te:te.contextElement||ac(e.elements.popper),b,k,m),pe=Zd(e.elements.reference),ce=n5({reference:pe,element:W,strategy:"absolute",placement:c}),oe=F1(Object.assign({},W,ce)),be=E===ef?oe:pe,ye={top:de.top-be.top+$.top,bottom:be.bottom-de.bottom+$.bottom,left:de.left-be.left+$.left,right:be.right-de.right+$.right},Ae=e.modifiersData.offset;if(E===ef&&Ae){var Ze=Ae[c];Object.keys(ye).forEach(function(Xe){var ot=[Jo,Ko].indexOf(Xe)>=0?1:-1,ft=[oo,Ko].indexOf(Xe)>=0?"y":"x";ye[Xe]+=Ze[ft]*ot})}return ye}function Jq(e,t){t===void 0&&(t={});var n=t,s=n.placement,c=n.boundary,h=n.rootBoundary,m=n.padding,l=n.flipVariations,b=n.allowedAutoPlacements,w=b===void 0?HA:b,k=qd(s),M=k?l?pC:pC.filter(function(N){return qd(N)===k}):$p,E=M.filter(function(N){return w.indexOf(N)>=0});E.length===0&&(E=M);var L=E.reduce(function(N,V){return N[V]=wp(e,{placement:V,boundary:c,rootBoundary:h,padding:m})[ca(V)],N},{});return Object.keys(L).sort(function(N,V){return L[N]-L[V]})}function Qq(e){if(ca(e)===tS)return[];var t=Xg(e);return[yC(e),t,yC(t)]}function eX(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var c=n.mainAxis,h=c===void 0?!0:c,m=n.altAxis,l=m===void 0?!0:m,b=n.fallbackPlacements,w=n.padding,k=n.boundary,M=n.rootBoundary,E=n.altBoundary,L=n.flipVariations,N=L===void 0?!0:L,V=n.allowedAutoPlacements,J=t.options.placement,$=ca(J),F=$===J,W=b||(F||!N?[Xg(J)]:Qq(J)),te=[J].concat(W).reduce(function(pt,St){return pt.concat(ca(St)===tS?Jq(t,{placement:St,boundary:k,rootBoundary:M,padding:w,flipVariations:N,allowedAutoPlacements:V}):St)},[]),de=t.rects.reference,pe=t.rects.popper,ce=new Map,oe=!0,be=te[0],ye=0;ye<te.length;ye++){var Ae=te[ye],Ze=ca(Ae),Xe=qd(Ae)===Gd,ot=[oo,Ko].indexOf(Ze)>=0,ft=ot?"width":"height",Ce=wp(t,{placement:Ae,boundary:k,rootBoundary:M,altBoundary:E,padding:w}),Ee=ot?Xe?Jo:so:Xe?Ko:oo;de[ft]>pe[ft]&&(Ee=Xg(Ee));var Me=Xg(Ee),We=[];if(h&&We.push(Ce[Ze]<=0),l&&We.push(Ce[Ee]<=0,Ce[Me]<=0),We.every(function(pt){return pt})){be=Ae,oe=!1;break}ce.set(Ae,We)}if(oe)for(var Ye=N?3:1,st=function(St){var Ot=te.find(function(Vt){var Bt=ce.get(Vt);if(Bt)return Bt.slice(0,St).every(function(ln){return ln})});if(Ot)return be=Ot,"break"},Ke=Ye;Ke>0;Ke--){var Je=st(Ke);if(Je==="break")break}t.placement!==be&&(t.modifiersData[s]._skip=!0,t.placement=be,t.reset=!0)}}const tX={name:"flip",enabled:!0,phase:"main",fn:eX,requiresIfExists:["offset"],data:{_skip:!1}};function _C(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function xC(e){return[oo,Jo,Ko,so].some(function(t){return e[t]>=0})}function nX(e){var t=e.state,n=e.name,s=t.rects.reference,c=t.rects.popper,h=t.modifiersData.preventOverflow,m=wp(t,{elementContext:"reference"}),l=wp(t,{altBoundary:!0}),b=_C(m,s),w=_C(l,c,h),k=xC(b),M=xC(w);t.modifiersData[n]={referenceClippingOffsets:b,popperEscapeOffsets:w,isReferenceHidden:k,hasPopperEscaped:M},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":k,"data-popper-escaped":M})}const rX={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:nX};function iX(e,t,n){var s=ca(e),c=[so,oo].indexOf(s)>=0?-1:1,h=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,m=h[0],l=h[1];return m=m||0,l=(l||0)*c,[so,Jo].indexOf(s)>=0?{x:l,y:m}:{x:m,y:l}}function oX(e){var t=e.state,n=e.options,s=e.name,c=n.offset,h=c===void 0?[0,0]:c,m=HA.reduce(function(k,M){return k[M]=iX(M,t.rects,h),k},{}),l=m[t.placement],b=l.x,w=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=b,t.modifiersData.popperOffsets.y+=w),t.modifiersData[s]=m}const sX={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:oX};function aX(e){var t=e.state,n=e.name;t.modifiersData[n]=n5({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const lX={name:"popperOffsets",enabled:!0,phase:"read",fn:aX,data:{}};function cX(e){return e==="x"?"y":"x"}function uX(e){var t=e.state,n=e.options,s=e.name,c=n.mainAxis,h=c===void 0?!0:c,m=n.altAxis,l=m===void 0?!1:m,b=n.boundary,w=n.rootBoundary,k=n.altBoundary,M=n.padding,E=n.tether,L=E===void 0?!0:E,N=n.tetherOffset,V=N===void 0?0:N,J=wp(t,{boundary:b,rootBoundary:w,padding:M,altBoundary:k}),$=ca(t.placement),F=qd(t.placement),W=!F,te=iS($),de=cX(te),pe=t.modifiersData.popperOffsets,ce=t.rects.reference,oe=t.rects.popper,be=typeof V=="function"?V(Object.assign({},t.rects,{placement:t.placement})):V,ye=typeof be=="number"?{mainAxis:be,altAxis:be}:Object.assign({mainAxis:0,altAxis:0},be),Ae=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Ze={x:0,y:0};if(pe){if(h){var Xe,ot=te==="y"?oo:so,ft=te==="y"?Ko:Jo,Ce=te==="y"?"height":"width",Ee=pe[te],Me=Ee+J[ot],We=Ee-J[ft],Ye=L?-oe[Ce]/2:0,st=F===Gd?ce[Ce]:oe[Ce],Ke=F===Gd?-oe[Ce]:-ce[Ce],Je=t.elements.arrow,pt=L&&Je?rS(Je):{width:0,height:0},St=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:JA(),Ot=St[ot],Vt=St[ft],Bt=Bf(0,ce[Ce],pt[Ce]),ln=W?ce[Ce]/2-Ye-Bt-Ot-ye.mainAxis:st-Bt-Ot-ye.mainAxis,Kn=W?-ce[Ce]/2+Ye+Bt+Vt+ye.mainAxis:Ke+Bt+Vt+ye.mainAxis,qt=t.elements.arrow&&jp(t.elements.arrow),zt=qt?te==="y"?qt.clientTop||0:qt.clientLeft||0:0,Ut=(Xe=Ae==null?void 0:Ae[te])!=null?Xe:0,kt=Ee+ln-Ut-zt,Jt=Ee+Kn-Ut,$n=Bf(L?Ny(Me,kt):Me,Ee,L?au(We,Jt):We);pe[te]=$n,Ze[te]=$n-Ee}if(l){var Tn,gr=te==="x"?oo:so,jt=te==="x"?Ko:Jo,jn=pe[de],yr=de==="y"?"height":"width",Er=jn+J[gr],yn=jn-J[jt],Vn=[oo,so].indexOf($)!==-1,Cr=(Tn=Ae==null?void 0:Ae[de])!=null?Tn:0,Di=Vn?Er:jn-ce[yr]-oe[yr]-Cr+ye.altAxis,Dr=Vn?jn+ce[yr]+oe[yr]-Cr-ye.altAxis:yn,Ne=L&&Vn?Rq(Di,jn,Dr):Bf(L?Di:Er,jn,L?Dr:yn);pe[de]=Ne,Ze[de]=Ne-jn}t.modifiersData[s]=Ze}}const dX={name:"preventOverflow",enabled:!0,phase:"main",fn:uX,requiresIfExists:["offset"]};function hX(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function fX(e){return e===Qo(e)||!Xo(e)?oS(e):hX(e)}function pX(e){var t=e.getBoundingClientRect(),n=Wd(t.width)/e.offsetWidth||1,s=Wd(t.height)/e.offsetHeight||1;return n!==1||s!==1}function mX(e,t,n){n===void 0&&(n=!1);var s=Xo(t),c=Xo(t)&&pX(t),h=ac(t),m=Zd(e,c,n),l={scrollLeft:0,scrollTop:0},b={x:0,y:0};return(s||!s&&!n)&&((ha(t)!=="body"||aS(h))&&(l=fX(t)),Xo(t)?(b=Zd(t,!0),b.x+=t.clientLeft,b.y+=t.clientTop):h&&(b.x=sS(h))),{x:m.left+l.scrollLeft-b.x,y:m.top+l.scrollTop-b.y,width:m.width,height:m.height}}function gX(e){var t=new Map,n=new Set,s=[];e.forEach(function(h){t.set(h.name,h)});function c(h){n.add(h.name);var m=[].concat(h.requires||[],h.requiresIfExists||[]);m.forEach(function(l){if(!n.has(l)){var b=t.get(l);b&&c(b)}}),s.push(h)}return e.forEach(function(h){n.has(h.name)||c(h)}),s}function yX(e){var t=gX(e);return Iq.reduce(function(n,s){return n.concat(t.filter(function(c){return c.phase===s}))},[])}function vX(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function _X(e){var t=e.reduce(function(n,s){var c=n[s.name];return n[s.name]=c?Object.assign({},c,s,{options:Object.assign({},c.options,s.options),data:Object.assign({},c.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var bC={placement:"bottom",modifiers:[],strategy:"absolute"};function wC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function xX(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,s=n===void 0?[]:n,c=t.defaultOptions,h=c===void 0?bC:c;return function(l,b,w){w===void 0&&(w=h);var k={placement:"bottom",orderedModifiers:[],options:Object.assign({},bC,h),modifiersData:{},elements:{reference:l,popper:b},attributes:{},styles:{}},M=[],E=!1,L={state:k,setOptions:function($){var F=typeof $=="function"?$(k.options):$;V(),k.options=Object.assign({},h,k.options,F),k.scrollParents={reference:mu(l)?Ff(l):l.contextElement?Ff(l.contextElement):[],popper:Ff(b)};var W=yX(_X([].concat(s,k.options.modifiers)));return k.orderedModifiers=W.filter(function(te){return te.enabled}),N(),L.update()},forceUpdate:function(){if(!E){var $=k.elements,F=$.reference,W=$.popper;if(wC(F,W)){k.rects={reference:mX(F,jp(W),k.options.strategy==="fixed"),popper:rS(W)},k.reset=!1,k.placement=k.options.placement,k.orderedModifiers.forEach(function(ye){return k.modifiersData[ye.name]=Object.assign({},ye.data)});for(var te=0;te<k.orderedModifiers.length;te++){if(k.reset===!0){k.reset=!1,te=-1;continue}var de=k.orderedModifiers[te],pe=de.fn,ce=de.options,oe=ce===void 0?{}:ce,be=de.name;typeof pe=="function"&&(k=pe({state:k,options:oe,name:be,instance:L})||k)}}}},update:vX(function(){return new Promise(function(J){L.forceUpdate(),J(k)})}),destroy:function(){V(),E=!0}};if(!wC(l,b))return L;L.setOptions(w).then(function(J){!E&&w.onFirstUpdate&&w.onFirstUpdate(J)});function N(){k.orderedModifiers.forEach(function(J){var $=J.name,F=J.options,W=F===void 0?{}:F,te=J.effect;if(typeof te=="function"){var de=te({state:k,name:$,instance:L,options:W}),pe=function(){};M.push(de||pe)}})}function V(){M.forEach(function(J){return J()}),M=[]}return L}}var bX=[Gq,lX,Vq,zq,sX,tX,dX,Fq,rX],wX=xX({defaultModifiers:bX});function r5(e={}){const{enabled:t=!0,modifiers:n,placement:s="bottom",strategy:c="absolute",arrowPadding:h=8,eventListeners:m=!0,offset:l,gutter:b=8,flip:w=!0,boundary:k="clippingParents",preventOverflow:M=!0,matchWidth:E,direction:L="ltr"}=e,N=U.useRef(null),V=U.useRef(null),J=U.useRef(null),$=gq(s,L),F=U.useRef(()=>{}),W=U.useCallback(()=>{var ye;!t||!N.current||!V.current||((ye=F.current)==null||ye.call(F),J.current=wX(N.current,V.current,{placement:$,modifiers:[fq,uq,cq,{...lq,enabled:!!E},{name:"eventListeners",...aq(m)},{name:"arrow",options:{padding:h}},{name:"offset",options:{offset:l??[0,b]}},{name:"flip",enabled:!!w,options:{padding:8}},{name:"preventOverflow",enabled:!!M,options:{boundary:k}},...n??[]],strategy:c}),J.current.forceUpdate(),F.current=J.current.destroy)},[$,t,n,E,m,h,l,b,w,M,k,c]);U.useEffect(()=>()=>{var ye;!N.current&&!V.current&&((ye=J.current)==null||ye.destroy(),J.current=null)},[]);const te=U.useCallback(ye=>{N.current=ye,W()},[W]),de=U.useCallback((ye={},Ae=null)=>({...ye,ref:co(te,Ae)}),[te]),pe=U.useCallback(ye=>{V.current=ye,W()},[W]),ce=U.useCallback((ye={},Ae=null)=>({...ye,ref:co(pe,Ae),style:{...ye.style,position:c,minWidth:E?void 0:"max-content",inset:"0 auto auto 0"}}),[c,pe,E]),oe=U.useCallback((ye={},Ae=null)=>{const{size:Ze,shadowColor:Xe,bg:ot,style:ft,...Ce}=ye;return{...Ce,ref:Ae,"data-popper-arrow":"",style:SX(ye)}},[]),be=U.useCallback((ye={},Ae=null)=>({...ye,ref:Ae,"data-popper-arrow-inner":""}),[]);return{update(){var ye;(ye=J.current)==null||ye.update()},forceUpdate(){var ye;(ye=J.current)==null||ye.forceUpdate()},transformOrigin:gi.transformOrigin.varRef,referenceRef:te,popperRef:pe,getPopperProps:ce,getArrowProps:oe,getArrowInnerProps:be,getReferenceProps:de}}function SX(e){const{size:t,shadowColor:n,bg:s,style:c}=e,h={...c,position:"absolute"};return t&&(h["--popper-arrow-size"]=t),n&&(h["--popper-arrow-shadow-color"]=n),s&&(h["--popper-arrow-bg"]=s),h}function i5(e={}){const{onClose:t,onOpen:n,isOpen:s,id:c}=e,h=Es(n),m=Es(t),[l,b]=U.useState(e.defaultIsOpen||!1),w=s!==void 0?s:l,k=s!==void 0,M=U.useId(),E=c??`disclosure-${M}`,L=U.useCallback(()=>{k||b(!1),m==null||m()},[k,m]),N=U.useCallback(()=>{k||b(!0),h==null||h()},[k,h]),V=U.useCallback(()=>{w?L():N()},[w,N,L]);function J(F={}){return{...F,"aria-expanded":w,"aria-controls":E,onClick(W){var te;(te=F.onClick)==null||te.call(F,W),V()}}}function $(F={}){return{...F,hidden:!w,id:E}}return{isOpen:w,onOpen:N,onClose:L,onToggle:V,isControlled:k,getButtonProps:J,getDisclosureProps:$}}function TX(e){const{ref:t,handler:n,enabled:s=!0}=e,c=Es(n),m=U.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;U.useEffect(()=>{if(!s)return;const l=M=>{U_(M,t)&&(m.isPointerDown=!0)},b=M=>{if(m.ignoreEmulatedMouseEvents){m.ignoreEmulatedMouseEvents=!1;return}m.isPointerDown&&n&&U_(M,t)&&(m.isPointerDown=!1,c(M))},w=M=>{m.ignoreEmulatedMouseEvents=!0,n&&m.isPointerDown&&U_(M,t)&&(m.isPointerDown=!1,c(M))},k=o5(t.current);return k.addEventListener("mousedown",l,!0),k.addEventListener("mouseup",b,!0),k.addEventListener("touchstart",l,!0),k.addEventListener("touchend",w,!0),()=>{k.removeEventListener("mousedown",l,!0),k.removeEventListener("mouseup",b,!0),k.removeEventListener("touchstart",l,!0),k.removeEventListener("touchend",w,!0)}},[n,t,c,m,s])}function U_(e,t){var n;const s=e.target;return e.button>0||s&&!o5(s).contains(s)?!1:!((n=t.current)!=null&&n.contains(s))}function o5(e){var t;return(t=e==null?void 0:e.ownerDocument)!=null?t:document}function kX(e){const{isOpen:t,ref:n}=e,[s,c]=U.useState(t),[h,m]=U.useState(!1);return U.useEffect(()=>{h||(c(t),m(!0))},[t,h,s]),Zg(()=>n.current,"animationend",()=>{c(t)}),{present:!(t?!1:!s),onComplete(){var b;const w=PZ(n.current),k=new w.CustomEvent("animationend",{bubbles:!0});(b=n.current)==null||b.dispatchEvent(k)}}}function s5(e){const{wasSelected:t,enabled:n,isSelected:s,mode:c="unmount"}=e;return!!(!n||s||c==="keepMounted"&&t)}var[EX,CX,IX,MX]=TA(),[PX,Vp]=_i({strict:!1,name:"MenuContext"});function zX(e,...t){const n=U.useId(),s=e||n;return U.useMemo(()=>t.map(c=>`${c}-${s}`),[s,t])}function a5(e){var t;return(t=e==null?void 0:e.ownerDocument)!=null?t:document}function SC(e){return a5(e).activeElement===e}function AX(e={}){const{id:t,closeOnSelect:n=!0,closeOnBlur:s=!0,initialFocusRef:c,autoSelect:h=!0,isLazy:m,isOpen:l,defaultIsOpen:b,onClose:w,onOpen:k,placement:M="bottom-start",lazyBehavior:E="unmount",direction:L,computePositionOnMount:N=!1,...V}=e,J=U.useRef(null),$=U.useRef(null),F=IX(),W=U.useCallback(()=>{requestAnimationFrame(()=>{var Je;(Je=J.current)==null||Je.focus({preventScroll:!1})})},[]),te=U.useCallback(()=>{const Je=setTimeout(()=>{var pt;if(c)(pt=c.current)==null||pt.focus();else{const St=F.firstEnabled();St&&Xe(St.index)}});Me.current.add(Je)},[F,c]),de=U.useCallback(()=>{const Je=setTimeout(()=>{const pt=F.lastEnabled();pt&&Xe(pt.index)});Me.current.add(Je)},[F]),pe=U.useCallback(()=>{k==null||k(),h?te():W()},[h,te,W,k]),{isOpen:ce,onOpen:oe,onClose:be,onToggle:ye}=i5({isOpen:l,defaultIsOpen:b,onClose:w,onOpen:pe});TX({enabled:ce&&s,ref:J,handler:Je=>{var pt;(pt=$.current)!=null&&pt.contains(Je.target)||be()}});const Ae=r5({...V,enabled:ce||N,placement:M,direction:L}),[Ze,Xe]=U.useState(-1);jd(()=>{ce||Xe(-1)},[ce]),rq(J,{focusRef:$,visible:ce,shouldFocus:!0});const ot=kX({isOpen:ce,ref:J}),[ft,Ce]=zX(t,"menu-button","menu-list"),Ee=U.useCallback(()=>{oe(),W()},[oe,W]),Me=U.useRef(new Set([]));$X(()=>{Me.current.forEach(Je=>clearTimeout(Je)),Me.current.clear()});const We=U.useCallback(()=>{oe(),te()},[te,oe]),Ye=U.useCallback(()=>{oe(),de()},[oe,de]),st=U.useCallback(()=>{var Je,pt;const St=a5(J.current),Ot=(Je=J.current)==null?void 0:Je.contains(St.activeElement);if(!(ce&&!Ot))return;const Bt=(pt=F.item(Ze))==null?void 0:pt.node;Bt==null||Bt.focus()},[ce,Ze,F]),Ke=U.useRef(null);return{openAndFocusMenu:Ee,openAndFocusFirstItem:We,openAndFocusLastItem:Ye,onTransitionEnd:st,unstable__animationState:ot,descendants:F,popper:Ae,buttonId:ft,menuId:Ce,forceUpdate:Ae.forceUpdate,orientation:"vertical",isOpen:ce,onToggle:ye,onOpen:oe,onClose:be,menuRef:J,buttonRef:$,focusedIndex:Ze,closeOnSelect:n,closeOnBlur:s,autoSelect:h,setFocusedIndex:Xe,isLazy:m,lazyBehavior:E,initialFocusRef:c,rafId:Ke}}function DX(e={},t=null){const n=Vp(),{onToggle:s,popper:c,openAndFocusFirstItem:h,openAndFocusLastItem:m}=n,l=U.useCallback(b=>{const w=b.key,M={Enter:h,ArrowDown:h,ArrowUp:m}[w];M&&(b.preventDefault(),b.stopPropagation(),M(b))},[h,m]);return{...e,ref:co(n.buttonRef,t,c.referenceRef),id:n.buttonId,"data-active":dr(n.isOpen),"aria-expanded":n.isOpen,"aria-haspopup":"menu","aria-controls":n.menuId,onClick:rr(e.onClick,s),onKeyDown:rr(e.onKeyDown,l)}}function N1(e){var t;return FX(e)&&!!((t=e==null?void 0:e.getAttribute("role"))!=null&&t.startsWith("menuitem"))}function RX(e={},t=null){const n=Vp();if(!n)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:s,setFocusedIndex:c,menuRef:h,isOpen:m,onClose:l,menuId:b,isLazy:w,lazyBehavior:k,unstable__animationState:M}=n,E=CX(),L=QZ({preventDefault:$=>$.key!==" "&&N1($.target)}),N=U.useCallback($=>{const F=$.key,te={Tab:pe=>pe.preventDefault(),Escape:l,ArrowDown:()=>{const pe=E.nextEnabled(s);pe&&c(pe.index)},ArrowUp:()=>{const pe=E.prevEnabled(s);pe&&c(pe.index)}}[F];if(te){$.preventDefault(),te($);return}const de=L(pe=>{const ce=eq(E.values(),pe,oe=>{var be,ye;return(ye=(be=oe==null?void 0:oe.node)==null?void 0:be.textContent)!=null?ye:""},E.item(s));if(ce){const oe=E.indexOf(ce.node);c(oe)}});N1($.target)&&de($)},[E,s,L,l,c]),V=U.useRef(!1);m&&(V.current=!0);const J=s5({wasSelected:V.current,enabled:w,mode:k,isSelected:M.present});return{...e,ref:co(h,t),children:J?e.children:null,tabIndex:-1,role:"menu",id:b,style:{...e.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:rr(e.onKeyDown,N)}}function LX(e={}){const{popper:t,isOpen:n}=Vp();return t.getPopperProps({...e,style:{visibility:n?"visible":"hidden",...e.style}})}function l5(e={},t=null){const{onMouseEnter:n,onMouseMove:s,onMouseLeave:c,onClick:h,onFocus:m,isDisabled:l,isFocusable:b,closeOnSelect:w,type:k,...M}=e,E=Vp(),{setFocusedIndex:L,focusedIndex:N,closeOnSelect:V,onClose:J,menuRef:$,isOpen:F,menuId:W,rafId:te}=E,de=U.useRef(null),pe=`${W}-menuitem-${U.useId()}`,{index:ce,register:oe}=MX({disabled:l&&!b}),be=U.useCallback(Ee=>{n==null||n(Ee),!l&&L(ce)},[L,ce,l,n]),ye=U.useCallback(Ee=>{s==null||s(Ee),de.current&&!SC(de.current)&&be(Ee)},[be,s]),Ae=U.useCallback(Ee=>{c==null||c(Ee),!l&&L(-1)},[L,l,c]),Ze=U.useCallback(Ee=>{h==null||h(Ee),N1(Ee.currentTarget)&&(w??V)&&J()},[J,h,V,w]),Xe=U.useCallback(Ee=>{m==null||m(Ee),L(ce)},[L,m,ce]),ot=ce===N,ft=l&&!b;jd(()=>{F&&(ot&&!ft&&de.current?(te.current&&cancelAnimationFrame(te.current),te.current=requestAnimationFrame(()=>{var Ee;(Ee=de.current)==null||Ee.focus(),te.current=null})):$.current&&!SC($.current)&&$.current.focus())},[ot,ft,$,F]);const Ce=qA({onClick:Ze,onFocus:Xe,onMouseEnter:be,onMouseMove:ye,onMouseLeave:Ae,ref:co(oe,de,t),isDisabled:l,isFocusable:b});return{...M,...Ce,type:k??Ce.type,id:pe,role:"menuitem",tabIndex:ot?0:-1}}function OX(e={},t=null){const{type:n="radio",isChecked:s,...c}=e;return{...l5(c,t),role:`menuitem${n}`,"aria-checked":s}}function BX(e={}){const{children:t,type:n="radio",value:s,defaultValue:c,onChange:h,...m}=e,b=n==="radio"?"":[],[w,k]=kA({defaultValue:c??b,value:s,onChange:h}),M=U.useCallback(N=>{if(n==="radio"&&typeof w=="string"&&k(N),n==="checkbox"&&Array.isArray(w)){const V=w.includes(N)?w.filter(J=>J!==N):w.concat(N);k(V)}},[w,k,n]),L=nh(t).map(N=>{if(N.type.id!=="MenuItemOption")return N;const V=$=>{var F,W;M(N.props.value),(W=(F=N.props).onClick)==null||W.call(F,$)},J=n==="radio"?N.props.value===w:w.includes(N.props.value);return U.cloneElement(N,{type:n,onClick:V,isChecked:J})});return{...m,children:L}}function FX(e){var t;if(!NX(e))return!1;const n=(t=e.ownerDocument.defaultView)!=null?t:window;return e instanceof n.HTMLElement}function NX(e){return e!=null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function $X(e,t=[]){return U.useEffect(()=>()=>e(),t)}var[jX,rh]=_i({name:"MenuStylesContext",errorMessage:`useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />" `}),c5=e=>{const{children:t}=e,n=cl("Menu",e),s=ii(e),{direction:c}=th(),{descendants:h,...m}=AX({...s,direction:c}),l=U.useMemo(()=>m,[m]),{isOpen:b,onClose:w,forceUpdate:k}=l;return Y.jsx(EX,{value:h,children:Y.jsx(PX,{value:l,children:Y.jsx(jX,{value:n,children:Ss(t,{isOpen:b,onClose:w,forceUpdate:k})})})})};c5.displayName="Menu";var u5=Ft((e,t)=>{const n=rh();return Y.jsx(bt.span,{ref:t,...e,__css:n.command,className:"chakra-menu__command"})});u5.displayName="MenuCommand";var d5=Ft((e,t)=>{const{type:n,...s}=e,c=rh(),h=s.as||n?n??void 0:"button",m=U.useMemo(()=>({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,...c.item}),[c.item]);return Y.jsx(bt.button,{ref:t,type:h,...s,__css:m})}),lS=e=>{const{className:t,children:n,...s}=e,c=U.Children.only(n),h=U.isValidElement(c)?U.cloneElement(c,{focusable:"false","aria-hidden":!0,className:Kt("chakra-menu__icon",c.props.className)}):null,m=Kt("chakra-menu__icon-wrapper",t);return Y.jsx(bt.span,{className:m,...s,__css:{flexShrink:0},children:h})};lS.displayName="MenuIcon";var h5=Ft((e,t)=>{const{icon:n,iconSpacing:s="0.75rem",command:c,commandSpacing:h="0.75rem",children:m,...l}=e,b=l5(l,t),k=n||c?Y.jsx("span",{style:{pointerEvents:"none",flex:1},children:m}):m;return Y.jsxs(d5,{...b,className:Kt("chakra-menu__menuitem",b.className),children:[n&&Y.jsx(lS,{fontSize:"0.8em",marginEnd:s,children:n}),k,c&&Y.jsx(u5,{marginStart:h,children:c})]})});h5.displayName="MenuItem";var VX={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},UX=bt(la.div),f5=Ft(function(t,n){var s,c;const{rootProps:h,motionProps:m,...l}=t,{isOpen:b,onTransitionEnd:w,unstable__animationState:k}=Vp(),M=RX(l,n),E=LX(h),L=rh();return Y.jsx(bt.div,{...E,__css:{zIndex:(c=t.zIndex)!=null?c:(s=L.list)==null?void 0:s.zIndex},children:Y.jsx(UX,{variants:VX,initial:!1,animate:b?"enter":"exit",__css:{outline:0,...L.list},...m,className:Kt("chakra-menu__menu-list",M.className),...M,onUpdate:w,onAnimationComplete:EP(k.onComplete,M.onAnimationComplete)})})});f5.displayName="MenuList";var cS=Ft((e,t)=>{const{title:n,children:s,className:c,...h}=e,m=Kt("chakra-menu__group__title",c),l=rh();return Y.jsxs("div",{ref:t,className:"chakra-menu__group",role:"group",children:[n&&Y.jsx(bt.p,{className:m,...h,__css:l.groupTitle,children:n}),s]})});cS.displayName="MenuGroup";var p5=e=>{const{className:t,title:n,...s}=e,c=BX(s);return Y.jsx(cS,{title:n,className:Kt("chakra-menu__option-group",t),...c})};p5.displayName="MenuOptionGroup";var GX=Ft((e,t)=>{const n=rh();return Y.jsx(bt.button,{ref:t,...e,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...n.button}})}),m5=Ft((e,t)=>{const{children:n,as:s,...c}=e,h=DX(c,t),m=s||GX;return Y.jsx(m,{...h,className:Kt("chakra-menu__menu-button",e.className),children:Y.jsx(bt.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:e.children})})});m5.displayName="MenuButton";var g5=e=>{const{className:t,...n}=e,s=rh();return Y.jsx(bt.hr,{"aria-orientation":"horizontal",className:Kt("chakra-menu__divider",t),...n,__css:s.divider})};g5.displayName="MenuDivider";var WX=e=>Y.jsx("svg",{viewBox:"0 0 14 14",width:"1em",height:"1em",...e,children:Y.jsx("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})}),$y=Ft((e,t)=>{const{icon:n,iconSpacing:s="0.75rem",...c}=e,h=OX(c,t);return Y.jsxs(d5,{...h,className:Kt("chakra-menu__menuitem-option",c.className),children:[n!==null&&Y.jsx(lS,{fontSize:"0.8em",marginEnd:s,opacity:e.isChecked?1:0,children:n||Y.jsx(WX,{})}),Y.jsx("span",{style:{flex:1},children:h.children})]})});$y.id="MenuItemOption";$y.displayName="MenuItemOption";var[ZX,qX,XX,HX]=TA();function YX(e){var t;const{defaultIndex:n,onChange:s,index:c,isManual:h,isLazy:m,lazyBehavior:l="unmount",orientation:b="horizontal",direction:w="ltr",...k}=e,[M,E]=U.useState(n??0),[L,N]=kA({defaultValue:n??0,value:c,onChange:s});U.useEffect(()=>{c!=null&&E(c)},[c]);const V=XX(),J=U.useId();return{id:`tabs-${(t=e.id)!=null?t:J}`,selectedIndex:L,focusedIndex:M,setSelectedIndex:N,setFocusedIndex:E,isManual:h,isLazy:m,lazyBehavior:l,orientation:b,descendants:V,direction:w,htmlProps:k}}var[KX,F0]=_i({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function JX(e){const{focusedIndex:t,orientation:n,direction:s}=F0(),c=qX(),h=U.useCallback(m=>{const l=()=>{var F;const W=c.nextEnabled(t);W&&((F=W.node)==null||F.focus())},b=()=>{var F;const W=c.prevEnabled(t);W&&((F=W.node)==null||F.focus())},w=()=>{var F;const W=c.firstEnabled();W&&((F=W.node)==null||F.focus())},k=()=>{var F;const W=c.lastEnabled();W&&((F=W.node)==null||F.focus())},M=n==="horizontal",E=n==="vertical",L=m.key,N=s==="ltr"?"ArrowLeft":"ArrowRight",V=s==="ltr"?"ArrowRight":"ArrowLeft",$={[N]:()=>M&&b(),[V]:()=>M&&l(),ArrowDown:()=>E&&l(),ArrowUp:()=>E&&b(),Home:w,End:k}[L];$&&(m.preventDefault(),$(m))},[c,t,n,s]);return{...e,role:"tablist","aria-orientation":n,onKeyDown:rr(e.onKeyDown,h)}}function QX(e){const{isDisabled:t,isFocusable:n,...s}=e,{setSelectedIndex:c,isManual:h,id:m,setFocusedIndex:l,selectedIndex:b}=F0(),{index:w,register:k}=HX({disabled:t&&!n}),M=w===b,E=()=>{c(w)},L=()=>{l(w),!h&&!(t&&n)&&c(w)},N=qA({...s,ref:co(k,e.ref),isDisabled:t,isFocusable:n,onClick:rr(e.onClick,E)}),V="button";return{...N,id:y5(m,w),role:"tab",tabIndex:M?0:-1,type:V,"aria-selected":M,"aria-controls":v5(m,w),onFocus:t?void 0:rr(e.onFocus,L)}}var[eH,tH]=_i({});function nH(e){const t=F0(),{id:n,selectedIndex:s}=t,h=nh(e.children).map((m,l)=>U.createElement(eH,{key:l,value:{isSelected:l===s,id:v5(n,l),tabId:y5(n,l),selectedIndex:s}},m));return{...e,children:h}}function rH(e){const{children:t,...n}=e,{isLazy:s,lazyBehavior:c}=F0(),{isSelected:h,id:m,tabId:l}=tH(),b=U.useRef(!1);h&&(b.current=!0);const w=s5({wasSelected:b.current,isSelected:h,enabled:s,mode:c});return{tabIndex:0,...n,children:w?t:null,role:"tabpanel","aria-labelledby":l,hidden:!h,id:m}}function y5(e,t){return`${e}--tab-${t}`}function v5(e,t){return`${e}--tabpanel-${t}`}var[iH,N0]=_i({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),_5=Ft(function(t,n){const s=cl("Tabs",t),{children:c,className:h,...m}=ii(t),{htmlProps:l,descendants:b,...w}=YX(m),k=U.useMemo(()=>w,[w]),{isFitted:M,...E}=l;return Y.jsx(ZX,{value:b,children:Y.jsx(KX,{value:k,children:Y.jsx(iH,{value:s,children:Y.jsx(bt.div,{className:Kt("chakra-tabs",h),ref:n,...E,__css:s.root,children:c})})})})});_5.displayName="Tabs";var x5=Ft(function(t,n){const s=JX({...t,ref:n}),h={display:"flex",...N0().tablist};return Y.jsx(bt.div,{...s,className:Kt("chakra-tabs__tablist",t.className),__css:h})});x5.displayName="TabList";var b5=Ft(function(t,n){const s=rH({...t,ref:n}),c=N0();return Y.jsx(bt.div,{outline:"0",...s,className:Kt("chakra-tabs__tab-panel",t.className),__css:c.tabpanel})});b5.displayName="TabPanel";var w5=Ft(function(t,n){const s=nH(t),c=N0();return Y.jsx(bt.div,{...s,width:"100%",ref:n,className:Kt("chakra-tabs__tab-panels",t.className),__css:c.tabpanels})});w5.displayName="TabPanels";var S5=Ft(function(t,n){const s=N0(),c=QX({...t,ref:n}),h={outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...s.tab};return Y.jsx(bt.button,{...c,className:Kt("chakra-tabs__tab",t.className),__css:h})});S5.displayName="Tab";var oH={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}},jy=e=>{var t;return((t=e.current)==null?void 0:t.ownerDocument)||document},$1=e=>{var t,n;return((n=(t=e.current)==null?void 0:t.ownerDocument)==null?void 0:n.defaultView)||window};function sH(e={}){const{openDelay:t=0,closeDelay:n=0,closeOnClick:s=!0,closeOnMouseDown:c,closeOnScroll:h,closeOnPointerDown:m=c,closeOnEsc:l=!0,onOpen:b,onClose:w,placement:k,id:M,isOpen:E,defaultIsOpen:L,arrowSize:N=10,arrowShadowColor:V,arrowPadding:J,modifiers:$,isDisabled:F,gutter:W,offset:te,direction:de,...pe}=e,{isOpen:ce,onOpen:oe,onClose:be}=i5({isOpen:E,defaultIsOpen:L,onOpen:b,onClose:w}),{referenceRef:ye,getPopperProps:Ae,getArrowInnerProps:Ze,getArrowProps:Xe}=r5({enabled:ce,placement:k,arrowPadding:J,modifiers:$,gutter:W,offset:te,direction:de}),ot=U.useId(),Ce=`tooltip-${M??ot}`,Ee=U.useRef(null),Me=U.useRef(),We=U.useCallback(()=>{Me.current&&(clearTimeout(Me.current),Me.current=void 0)},[]),Ye=U.useRef(),st=U.useCallback(()=>{Ye.current&&(clearTimeout(Ye.current),Ye.current=void 0)},[]),Ke=U.useCallback(()=>{st(),be()},[be,st]),Je=aH(Ee,Ke),pt=U.useCallback(()=>{if(!F&&!Me.current){Je();const zt=$1(Ee);Me.current=zt.setTimeout(oe,t)}},[Je,F,oe,t]),St=U.useCallback(()=>{We();const zt=$1(Ee);Ye.current=zt.setTimeout(Ke,n)},[n,Ke,We]),Ot=U.useCallback(()=>{ce&&s&&St()},[s,St,ce]),Vt=U.useCallback(()=>{ce&&m&&St()},[m,St,ce]),Bt=U.useCallback(zt=>{ce&&zt.key==="Escape"&&St()},[ce,St]);Zg(()=>jy(Ee),"keydown",l?Bt:void 0),Zg(()=>jy(Ee),"scroll",()=>{ce&&h&&Ke()}),U.useEffect(()=>{F&&(We(),ce&&be())},[F,ce,be,We]),U.useEffect(()=>()=>{We(),st()},[We,st]),Zg(()=>Ee.current,"pointerleave",St);const ln=U.useCallback((zt={},Ut=null)=>({...zt,ref:co(Ee,Ut,ye),onPointerEnter:rr(zt.onPointerEnter,Jt=>{Jt.pointerType!=="touch"&&pt()}),onClick:rr(zt.onClick,Ot),onPointerDown:rr(zt.onPointerDown,Vt),onFocus:rr(zt.onFocus,pt),onBlur:rr(zt.onBlur,St),"aria-describedby":ce?Ce:void 0}),[pt,St,Vt,ce,Ce,Ot,ye]),Kn=U.useCallback((zt={},Ut=null)=>Ae({...zt,style:{...zt.style,[gi.arrowSize.var]:N?`${N}px`:void 0,[gi.arrowShadowColor.var]:V}},Ut),[Ae,N,V]),qt=U.useCallback((zt={},Ut=null)=>{const kt={...zt.style,position:"relative",transformOrigin:gi.transformOrigin.varRef};return{ref:Ut,...pe,...zt,id:Ce,role:"tooltip",style:kt}},[pe,Ce]);return{isOpen:ce,show:pt,hide:St,getTriggerProps:ln,getTooltipProps:qt,getTooltipPositionerProps:Kn,getArrowProps:Xe,getArrowInnerProps:Ze}}var G_="chakra-ui:close-tooltip";function aH(e,t){return U.useEffect(()=>{const n=jy(e);return n.addEventListener(G_,t),()=>n.removeEventListener(G_,t)},[t,e]),()=>{const n=jy(e),s=$1(e);n.dispatchEvent(new s.CustomEvent(G_))}}function lH(e,t=[]){const n=Object.assign({},e);for(const s of t)s in n&&delete n[s];return n}function cH(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}var uH=bt(la.div),qc=Ft((e,t)=>{var n,s;const c=fa("Tooltip",e),h=ii(e),m=th(),{children:l,label:b,shouldWrapChildren:w,"aria-label":k,hasArrow:M,bg:E,portalProps:L,background:N,backgroundColor:V,bgColor:J,motionProps:$,...F}=h,W=(s=(n=N??V)!=null?n:E)!=null?s:J;if(W){c.bg=W;const Ae=qB(m,"colors",W);c[gi.arrowBg.var]=Ae}const te=sH({...F,direction:m.direction}),de=typeof l=="string"||w;let pe;if(de)pe=Y.jsx(bt.span,{display:"inline-block",tabIndex:0,...te.getTriggerProps(),children:l});else{const Ae=U.Children.only(l);pe=U.cloneElement(Ae,te.getTriggerProps(Ae.props,Ae.ref))}const ce=!!k,oe=te.getTooltipProps({},t),be=ce?lH(oe,["role","id"]):oe,ye=cH(oe,["role","id"]);return b?Y.jsxs(Y.Fragment,{children:[pe,Y.jsx(Gw,{children:te.isOpen&&Y.jsx(eh,{...L,children:Y.jsx(bt.div,{...te.getTooltipPositionerProps(),__css:{zIndex:c.zIndex,pointerEvents:"none"},children:Y.jsxs(uH,{variants:oH,initial:"exit",animate:"enter",exit:"exit",...$,...be,__css:c,children:[b,ce&&Y.jsx(bt.span,{srOnly:!0,...ye,children:k}),M&&Y.jsx(bt.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper",children:Y.jsx(bt.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:c.bg}})})]})})})})]}):Y.jsx(Y.Fragment,{children:l})});qc.displayName="Tooltip";let dH=0;function Is(e,t){const n=`atom${++dH}`,s={toString:()=>n};return typeof e=="function"?s.read=e:(s.init=e,s.read=c=>c(s),s.write=(c,h,m)=>h(s,typeof m=="function"?m(c(s)):m)),t&&(s.write=t),s}const W_=e=>"init"in e,Z_=e=>!!e.write,Vy=new WeakMap,hH=(e,t)=>{Vy.set(e,t),e.catch(()=>{}).finally(()=>Vy.delete(e))},TC=(e,t)=>{const n=Vy.get(e);n&&(Vy.delete(e),n(t))},kC=(e,t)=>{e.status="fulfilled",e.value=t},EC=(e,t)=>{e.status="rejected",e.reason=t},yg=(e,t)=>"v"in e&&"v"in t&&Object.is(e.v,t.v),CC=(e,t)=>"e"in e&&"e"in t&&Object.is(e.e,t.e),q_=e=>"v"in e&&e.v instanceof Promise,vg=e=>{if("e"in e)throw e.e;return e.v},fH=()=>{const e=new WeakMap,t=new WeakMap,n=new Map;let s,c,h;({PUBLIC_API_KEY:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjBkZTBjZTQ5Njg2MTMwOTc0YWU2NDhkOGMwZjU5NWRhYzFlMTVhZTMzZDg1ODk1NTk2NDQwMjA4MmU3MjMzNTM5MTAyNGM5OGJmY2M3ZDU1In0.eyJhdWQiOiI5NTgxIiwianRpIjoiMGRlMGNlNDk2ODYxMzA5NzRhZTY0OGQ4YzBmNTk1ZGFjMWUxNWFlMzNkODU4OTU1OTY0NDAyMDgyZTcyMzM1MzkxMDI0Yzk4YmZjYzdkNTUiLCJpYXQiOjE1OTIyMDEyNTcsIm5iZiI6MTU5MjIwMTI1NywiZXhwIjoxNTk0NDQ3NjU3LCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.eG2UAq4zVsdnYkW7IMrJWWdXuxtT_EAVY-XiPPzgWJtMtG8vDnnsLQsajdgej1_u0bWzrZvdk2AzpQoABct9etvHTUbK8wBZn6CM7mzu3Uy5KzsR-0zbyDc0vqpfMcZekwXqgze6w8p8INlL4-ImpINrRstRDqsJWFsA2REnwUG-UUPRh6Sjz_lVbow4q975pI6ogt6P8nkcXXaJjmI3KCGXj-xtvvbnZiViUIw4Y12UDCNWb3ykzVfjVUnOcZ-Zbxi8591OZu_VKGfgt5VuNnNbUz654BQzpiiNdTcFhJdUTKsEvMJut0kU0YSX7EUwS50h_5EF32kR3abyJh7nIg",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&(s=new Set,c=new Set,h=new Set);const m=oe=>e.get(oe),l=(oe,be)=>{({PUBLIC_API_KEY:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjBkZTBjZTQ5Njg2MTMwOTc0YWU2NDhkOGMwZjU5NWRhYzFlMTVhZTMzZDg1ODk1NTk2NDQwMjA4MmU3MjMzNTM5MTAyNGM5OGJmY2M3ZDU1In0.eyJhdWQiOiI5NTgxIiwianRpIjoiMGRlMGNlNDk2ODYxMzA5NzRhZTY0OGQ4YzBmNTk1ZGFjMWUxNWFlMzNkODU4OTU1OTY0NDAyMDgyZTcyMzM1MzkxMDI0Yzk4YmZjYzdkNTUiLCJpYXQiOjE1OTIyMDEyNTcsIm5iZiI6MTU5MjIwMTI1NywiZXhwIjoxNTk0NDQ3NjU3LCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.eG2UAq4zVsdnYkW7IMrJWWdXuxtT_EAVY-XiPPzgWJtMtG8vDnnsLQsajdgej1_u0bWzrZvdk2AzpQoABct9etvHTUbK8wBZn6CM7mzu3Uy5KzsR-0zbyDc0vqpfMcZekwXqgze6w8p8INlL4-ImpINrRstRDqsJWFsA2REnwUG-UUPRh6Sjz_lVbow4q975pI6ogt6P8nkcXXaJjmI3KCGXj-xtvvbnZiViUIw4Y12UDCNWb3ykzVfjVUnOcZ-Zbxi8591OZu_VKGfgt5VuNnNbUz654BQzpiiNdTcFhJdUTKsEvMJut0kU0YSX7EUwS50h_5EF32kR3abyJh7nIg",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&Object.freeze(be);const ye=e.get(oe);if(e.set(oe,be),n.has(oe)||n.set(oe,ye),ye&&q_(ye)){const Ae="v"in be?be.v instanceof Promise?be.v:Promise.resolve(be.v):Promise.reject(be.e);TC(ye.v,Ae)}},b=(oe,be,ye)=>{const Ae=new Map;let Ze=!1;ye.forEach(Xe=>{const ot=Xe===oe?be:m(Xe);ot?(Ae.set(Xe,ot),be.d.get(Xe)!==ot&&(Ze=!0)):({PUBLIC_API_KEY:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjBkZTBjZTQ5Njg2MTMwOTc0YWU2NDhkOGMwZjU5NWRhYzFlMTVhZTMzZDg1ODk1NTk2NDQwMjA4MmU3MjMzNTM5MTAyNGM5OGJmY2M3ZDU1In0.eyJhdWQiOiI5NTgxIiwianRpIjoiMGRlMGNlNDk2ODYxMzA5NzRhZTY0OGQ4YzBmNTk1ZGFjMWUxNWFlMzNkODU4OTU1OTY0NDAyMDgyZTcyMzM1MzkxMDI0Yzk4YmZjYzdkNTUiLCJpYXQiOjE1OTIyMDEyNTcsIm5iZiI6MTU5MjIwMTI1NywiZXhwIjoxNTk0NDQ3NjU3LCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.eG2UAq4zVsdnYkW7IMrJWWdXuxtT_EAVY-XiPPzgWJtMtG8vDnnsLQsajdgej1_u0bWzrZvdk2AzpQoABct9etvHTUbK8wBZn6CM7mzu3Uy5KzsR-0zbyDc0vqpfMcZekwXqgze6w8p8INlL4-ImpINrRstRDqsJWFsA2REnwUG-UUPRh6Sjz_lVbow4q975pI6ogt6P8nkcXXaJjmI3KCGXj-xtvvbnZiViUIw4Y12UDCNWb3ykzVfjVUnOcZ-Zbxi8591OZu_VKGfgt5VuNnNbUz654BQzpiiNdTcFhJdUTKsEvMJut0kU0YSX7EUwS50h_5EF32kR3abyJh7nIg",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[Bug] atom state not found")}),(Ze||be.d.size!==Ae.size)&&(be.d=Ae)},w=(oe,be,ye)=>{const Ae=m(oe),Ze={d:(Ae==null?void 0:Ae.d)||new Map,v:be};return ye&&b(oe,Ze,ye),Ae&&yg(Ae,Ze)&&Ae.d===Ze.d?Ae:(l(oe,Ze),Ze)},k=(oe,be,ye)=>{const Ae=m(oe),Ze={d:(Ae==null?void 0:Ae.d)||new Map,e:be};return ye&&b(oe,Ze,ye),Ae&&CC(Ae,Ze)&&Ae.d===Ze.d?Ae:(l(oe,Ze),Ze)},M=oe=>{const be=m(oe);if(be&&(be.d.forEach((Ce,Ee)=>{Ee!==oe&&!t.has(Ee)&&M(Ee)}),Array.from(be.d).every(([Ce,Ee])=>Ce===oe||m(Ce)===Ee)))return be;const ye=new Set;let Ae=!0;const Ze=Ce=>{if(ye.add(Ce),Ce===oe){const Me=m(Ce);if(Me)return vg(Me);if(W_(Ce))return Ce.init;throw new Error("no atom init")}const Ee=M(Ce);return vg(Ee)};let Xe,ot;const ft={get signal(){return Xe||(Xe=new AbortController),Xe.signal},get setSelf(){return({PUBLIC_API_KEY:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjBkZTBjZTQ5Njg2MTMwOTc0YWU2NDhkOGMwZjU5NWRhYzFlMTVhZTMzZDg1ODk1NTk2NDQwMjA4MmU3MjMzNTM5MTAyNGM5OGJmY2M3ZDU1In0.eyJhdWQiOiI5NTgxIiwianRpIjoiMGRlMGNlNDk2ODYxMzA5NzRhZTY0OGQ4YzBmNTk1ZGFjMWUxNWFlMzNkODU4OTU1OTY0NDAyMDgyZTcyMzM1MzkxMDI0Yzk4YmZjYzdkNTUiLCJpYXQiOjE1OTIyMDEyNTcsIm5iZiI6MTU5MjIwMTI1NywiZXhwIjoxNTk0NDQ3NjU3LCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.eG2UAq4zVsdnYkW7IMrJWWdXuxtT_EAVY-XiPPzgWJtMtG8vDnnsLQsajdgej1_u0bWzrZvdk2AzpQoABct9etvHTUbK8wBZn6CM7mzu3Uy5KzsR-0zbyDc0vqpfMcZekwXqgze6w8p8INlL4-ImpINrRstRDqsJWFsA2REnwUG-UUPRh6Sjz_lVbow4q975pI6ogt6P8nkcXXaJjmI3KCGXj-xtvvbnZiViUIw4Y12UDCNWb3ykzVfjVUnOcZ-Zbxi8591OZu_VKGfgt5VuNnNbUz654BQzpiiNdTcFhJdUTKsEvMJut0kU0YSX7EUwS50h_5EF32kR3abyJh7nIg",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&!Z_(oe)&&console.warn("setSelf function cannot be used with read-only atom"),!ot&&Z_(oe)&&(ot=(...Ce)=>{if(({PUBLIC_API_KEY:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjBkZTBjZTQ5Njg2MTMwOTc0YWU2NDhkOGMwZjU5NWRhYzFlMTVhZTMzZDg1ODk1NTk2NDQwMjA4MmU3MjMzNTM5MTAyNGM5OGJmY2M3ZDU1In0.eyJhdWQiOiI5NTgxIiwianRpIjoiMGRlMGNlNDk2ODYxMzA5NzRhZTY0OGQ4YzBmNTk1ZGFjMWUxNWFlMzNkODU4OTU1OTY0NDAyMDgyZTcyMzM1MzkxMDI0Yzk4YmZjYzdkNTUiLCJpYXQiOjE1OTIyMDEyNTcsIm5iZiI6MTU5MjIwMTI1NywiZXhwIjoxNTk0NDQ3NjU3LCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.eG2UAq4zVsdnYkW7IMrJWWdXuxtT_EAVY-XiPPzgWJtMtG8vDnnsLQsajdgej1_u0bWzrZvdk2AzpQoABct9etvHTUbK8wBZn6CM7mzu3Uy5KzsR-0zbyDc0vqpfMcZekwXqgze6w8p8INlL4-ImpINrRstRDqsJWFsA2REnwUG-UUPRh6Sjz_lVbow4q975pI6ogt6P8nkcXXaJjmI3KCGXj-xtvvbnZiViUIw4Y12UDCNWb3ykzVfjVUnOcZ-Zbxi8591OZu_VKGfgt5VuNnNbUz654BQzpiiNdTcFhJdUTKsEvMJut0kU0YSX7EUwS50h_5EF32kR3abyJh7nIg",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&Ae&&console.warn("setSelf function cannot be called in sync"),!Ae)return F(oe,...Ce)}),ot}};try{const Ce=oe.read(Ze,ft);if(Ce instanceof Promise){let Ee;const Me=new Promise((We,Ye)=>{let st=!1;Ce.then(Ke=>{st||(st=!0,w(oe,Me,ye),kC(Me,Ke),We(Ke))},Ke=>{st||(st=!0,w(oe,Me,ye),EC(Me,Ke),Ye(Ke))}),Ee=Ke=>{st||(st=!0,Ke.then(Je=>kC(Me,Je),Je=>EC(Me,Je)),We(Ke))}});return Me.status="pending",hH(Me,We=>{We&&Ee(We),Xe==null||Xe.abort()}),w(oe,Me,ye)}return w(oe,Ce,ye)}catch(Ce){return k(oe,Ce,ye)}finally{Ae=!1}},E=oe=>vg(M(oe)),L=oe=>{let be=t.get(oe);return be||(be=W(oe)),be},N=(oe,be)=>!be.l.size&&(!be.t.size||be.t.size===1&&be.t.has(oe)),V=oe=>{const be=t.get(oe);be&&N(oe,be)&&te(oe)},J=oe=>{const be=t.get(oe);be==null||be.t.forEach(ye=>{if(ye!==oe){const Ae=m(ye),Ze=M(ye);(!Ae||!yg(Ae,Ze))&&J(ye)}})},$=(oe,...be)=>{let ye=!0;const Ae=ot=>vg(M(ot)),Ze=(ot,...ft)=>{let Ce;if(ot===oe){if(!W_(ot))throw new Error("atom not writable");const Ee=m(ot),Me=w(ot,ft[0]);(!Ee||!yg(Ee,Me))&&J(ot)}else Ce=$(ot,...ft);return ye||pe(),Ce},Xe=oe.write(Ae,Ze,...be);return ye=!1,Xe},F=(oe,...be)=>{const ye=$(oe,...be);return pe(),ye},W=(oe,be)=>{const ye={t:new Set(be&&[be]),l:new Set};if(t.set(oe,ye),({PUBLIC_API_KEY:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjBkZTBjZTQ5Njg2MTMwOTc0YWU2NDhkOGMwZjU5NWRhYzFlMTVhZTMzZDg1ODk1NTk2NDQwMjA4MmU3MjMzNTM5MTAyNGM5OGJmY2M3ZDU1In0.eyJhdWQiOiI5NTgxIiwianRpIjoiMGRlMGNlNDk2ODYxMzA5NzRhZTY0OGQ4YzBmNTk1ZGFjMWUxNWFlMzNkODU4OTU1OTY0NDAyMDgyZTcyMzM1MzkxMDI0Yzk4YmZjYzdkNTUiLCJpYXQiOjE1OTIyMDEyNTcsIm5iZiI6MTU5MjIwMTI1NywiZXhwIjoxNTk0NDQ3NjU3LCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.eG2UAq4zVsdnYkW7IMrJWWdXuxtT_EAVY-XiPPzgWJtMtG8vDnnsLQsajdgej1_u0bWzrZvdk2AzpQoABct9etvHTUbK8wBZn6CM7mzu3Uy5KzsR-0zbyDc0vqpfMcZekwXqgze6w8p8INlL4-ImpINrRstRDqsJWFsA2REnwUG-UUPRh6Sjz_lVbow4q975pI6ogt6P8nkcXXaJjmI3KCGXj-xtvvbnZiViUIw4Y12UDCNWb3ykzVfjVUnOcZ-Zbxi8591OZu_VKGfgt5VuNnNbUz654BQzpiiNdTcFhJdUTKsEvMJut0kU0YSX7EUwS50h_5EF32kR3abyJh7nIg",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&h.add(oe),M(oe).d.forEach((Ae,Ze)=>{const Xe=t.get(Ze);Xe?Xe.t.add(oe):Ze!==oe&&W(Ze,oe)}),M(oe),Z_(oe)&&oe.onMount){const Ae=oe.onMount((...Ze)=>F(oe,...Ze));Ae&&(ye.u=Ae)}return ye},te=oe=>{var be;const ye=(be=t.get(oe))==null?void 0:be.u;ye&&ye(),t.delete(oe),({PUBLIC_API_KEY:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjBkZTBjZTQ5Njg2MTMwOTc0YWU2NDhkOGMwZjU5NWRhYzFlMTVhZTMzZDg1ODk1NTk2NDQwMjA4MmU3MjMzNTM5MTAyNGM5OGJmY2M3ZDU1In0.eyJhdWQiOiI5NTgxIiwianRpIjoiMGRlMGNlNDk2ODYxMzA5NzRhZTY0OGQ4YzBmNTk1ZGFjMWUxNWFlMzNkODU4OTU1OTY0NDAyMDgyZTcyMzM1MzkxMDI0Yzk4YmZjYzdkNTUiLCJpYXQiOjE1OTIyMDEyNTcsIm5iZiI6MTU5MjIwMTI1NywiZXhwIjoxNTk0NDQ3NjU3LCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.eG2UAq4zVsdnYkW7IMrJWWdXuxtT_EAVY-XiPPzgWJtMtG8vDnnsLQsajdgej1_u0bWzrZvdk2AzpQoABct9etvHTUbK8wBZn6CM7mzu3Uy5KzsR-0zbyDc0vqpfMcZekwXqgze6w8p8INlL4-ImpINrRstRDqsJWFsA2REnwUG-UUPRh6Sjz_lVbow4q975pI6ogt6P8nkcXXaJjmI3KCGXj-xtvvbnZiViUIw4Y12UDCNWb3ykzVfjVUnOcZ-Zbxi8591OZu_VKGfgt5VuNnNbUz654BQzpiiNdTcFhJdUTKsEvMJut0kU0YSX7EUwS50h_5EF32kR3abyJh7nIg",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&h.delete(oe);const Ae=m(oe);Ae?(q_(Ae)&&TC(Ae.v),Ae.d.forEach((Ze,Xe)=>{if(Xe!==oe){const ot=t.get(Xe);ot&&(ot.t.delete(oe),N(Xe,ot)&&te(Xe))}})):({PUBLIC_API_KEY:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjBkZTBjZTQ5Njg2MTMwOTc0YWU2NDhkOGMwZjU5NWRhYzFlMTVhZTMzZDg1ODk1NTk2NDQwMjA4MmU3MjMzNTM5MTAyNGM5OGJmY2M3ZDU1In0.eyJhdWQiOiI5NTgxIiwianRpIjoiMGRlMGNlNDk2ODYxMzA5NzRhZTY0OGQ4YzBmNTk1ZGFjMWUxNWFlMzNkODU4OTU1OTY0NDAyMDgyZTcyMzM1MzkxMDI0Yzk4YmZjYzdkNTUiLCJpYXQiOjE1OTIyMDEyNTcsIm5iZiI6MTU5MjIwMTI1NywiZXhwIjoxNTk0NDQ3NjU3LCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.eG2UAq4zVsdnYkW7IMrJWWdXuxtT_EAVY-XiPPzgWJtMtG8vDnnsLQsajdgej1_u0bWzrZvdk2AzpQoABct9etvHTUbK8wBZn6CM7mzu3Uy5KzsR-0zbyDc0vqpfMcZekwXqgze6w8p8INlL4-ImpINrRstRDqsJWFsA2REnwUG-UUPRh6Sjz_lVbow4q975pI6ogt6P8nkcXXaJjmI3KCGXj-xtvvbnZiViUIw4Y12UDCNWb3ykzVfjVUnOcZ-Zbxi8591OZu_VKGfgt5VuNnNbUz654BQzpiiNdTcFhJdUTKsEvMJut0kU0YSX7EUwS50h_5EF32kR3abyJh7nIg",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[Bug] could not find atom state to unmount",oe)},de=(oe,be,ye)=>{const Ae=new Set(be.d.keys());ye==null||ye.forEach((Ze,Xe)=>{if(Ae.has(Xe)){Ae.delete(Xe);return}const ot=t.get(Xe);ot&&(ot.t.delete(oe),N(Xe,ot)&&te(Xe))}),Ae.forEach(Ze=>{const Xe=t.get(Ze);Xe?Xe.t.add(oe):t.has(oe)&&W(Ze,oe)})},pe=()=>{for(;n.size;){const oe=Array.from(n);n.clear(),oe.forEach(([be,ye])=>{const Ae=m(be);if(Ae){Ae.d!==(ye==null?void 0:ye.d)&&de(be,Ae,ye==null?void 0:ye.d);const Ze=t.get(be);Ze&&!(ye&&!q_(ye)&&(yg(ye,Ae)||CC(ye,Ae)))&&Ze.l.forEach(Xe=>Xe())}else({PUBLIC_API_KEY:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjBkZTBjZTQ5Njg2MTMwOTc0YWU2NDhkOGMwZjU5NWRhYzFlMTVhZTMzZDg1ODk1NTk2NDQwMjA4MmU3MjMzNTM5MTAyNGM5OGJmY2M3ZDU1In0.eyJhdWQiOiI5NTgxIiwianRpIjoiMGRlMGNlNDk2ODYxMzA5NzRhZTY0OGQ4YzBmNTk1ZGFjMWUxNWFlMzNkODU4OTU1OTY0NDAyMDgyZTcyMzM1MzkxMDI0Yzk4YmZjYzdkNTUiLCJpYXQiOjE1OTIyMDEyNTcsIm5iZiI6MTU5MjIwMTI1NywiZXhwIjoxNTk0NDQ3NjU3LCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.eG2UAq4zVsdnYkW7IMrJWWdXuxtT_EAVY-XiPPzgWJtMtG8vDnnsLQsajdgej1_u0bWzrZvdk2AzpQoABct9etvHTUbK8wBZn6CM7mzu3Uy5KzsR-0zbyDc0vqpfMcZekwXqgze6w8p8INlL4-ImpINrRstRDqsJWFsA2REnwUG-UUPRh6Sjz_lVbow4q975pI6ogt6P8nkcXXaJjmI3KCGXj-xtvvbnZiViUIw4Y12UDCNWb3ykzVfjVUnOcZ-Zbxi8591OZu_VKGfgt5VuNnNbUz654BQzpiiNdTcFhJdUTKsEvMJut0kU0YSX7EUwS50h_5EF32kR3abyJh7nIg",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[Bug] no atom state to flush")})}({PUBLIC_API_KEY:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjBkZTBjZTQ5Njg2MTMwOTc0YWU2NDhkOGMwZjU5NWRhYzFlMTVhZTMzZDg1ODk1NTk2NDQwMjA4MmU3MjMzNTM5MTAyNGM5OGJmY2M3ZDU1In0.eyJhdWQiOiI5NTgxIiwianRpIjoiMGRlMGNlNDk2ODYxMzA5NzRhZTY0OGQ4YzBmNTk1ZGFjMWUxNWFlMzNkODU4OTU1OTY0NDAyMDgyZTcyMzM1MzkxMDI0Yzk4YmZjYzdkNTUiLCJpYXQiOjE1OTIyMDEyNTcsIm5iZiI6MTU5MjIwMTI1NywiZXhwIjoxNTk0NDQ3NjU3LCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.eG2UAq4zVsdnYkW7IMrJWWdXuxtT_EAVY-XiPPzgWJtMtG8vDnnsLQsajdgej1_u0bWzrZvdk2AzpQoABct9etvHTUbK8wBZn6CM7mzu3Uy5KzsR-0zbyDc0vqpfMcZekwXqgze6w8p8INlL4-ImpINrRstRDqsJWFsA2REnwUG-UUPRh6Sjz_lVbow4q975pI6ogt6P8nkcXXaJjmI3KCGXj-xtvvbnZiViUIw4Y12UDCNWb3ykzVfjVUnOcZ-Zbxi8591OZu_VKGfgt5VuNnNbUz654BQzpiiNdTcFhJdUTKsEvMJut0kU0YSX7EUwS50h_5EF32kR3abyJh7nIg",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&(s.forEach(oe=>oe()),c.forEach(oe=>oe("state")))},ce=(oe,be)=>{const ye=L(oe);pe();const Ae=ye.l;return Ae.add(be),({PUBLIC_API_KEY:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjBkZTBjZTQ5Njg2MTMwOTc0YWU2NDhkOGMwZjU5NWRhYzFlMTVhZTMzZDg1ODk1NTk2NDQwMjA4MmU3MjMzNTM5MTAyNGM5OGJmY2M3ZDU1In0.eyJhdWQiOiI5NTgxIiwianRpIjoiMGRlMGNlNDk2ODYxMzA5NzRhZTY0OGQ4YzBmNTk1ZGFjMWUxNWFlMzNkODU4OTU1OTY0NDAyMDgyZTcyMzM1MzkxMDI0Yzk4YmZjYzdkNTUiLCJpYXQiOjE1OTIyMDEyNTcsIm5iZiI6MTU5MjIwMTI1NywiZXhwIjoxNTk0NDQ3NjU3LCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.eG2UAq4zVsdnYkW7IMrJWWdXuxtT_EAVY-XiPPzgWJtMtG8vDnnsLQsajdgej1_u0bWzrZvdk2AzpQoABct9etvHTUbK8wBZn6CM7mzu3Uy5KzsR-0zbyDc0vqpfMcZekwXqgze6w8p8INlL4-ImpINrRstRDqsJWFsA2REnwUG-UUPRh6Sjz_lVbow4q975pI6ogt6P8nkcXXaJjmI3KCGXj-xtvvbnZiViUIw4Y12UDCNWb3ykzVfjVUnOcZ-Zbxi8591OZu_VKGfgt5VuNnNbUz654BQzpiiNdTcFhJdUTKsEvMJut0kU0YSX7EUwS50h_5EF32kR3abyJh7nIg",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&c.forEach(Ze=>Ze("sub")),()=>{Ae.delete(be),V(oe),({PUBLIC_API_KEY:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjBkZTBjZTQ5Njg2MTMwOTc0YWU2NDhkOGMwZjU5NWRhYzFlMTVhZTMzZDg1ODk1NTk2NDQwMjA4MmU3MjMzNTM5MTAyNGM5OGJmY2M3ZDU1In0.eyJhdWQiOiI5NTgxIiwianRpIjoiMGRlMGNlNDk2ODYxMzA5NzRhZTY0OGQ4YzBmNTk1ZGFjMWUxNWFlMzNkODU4OTU1OTY0NDAyMDgyZTcyMzM1MzkxMDI0Yzk4YmZjYzdkNTUiLCJpYXQiOjE1OTIyMDEyNTcsIm5iZiI6MTU5MjIwMTI1NywiZXhwIjoxNTk0NDQ3NjU3LCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.eG2UAq4zVsdnYkW7IMrJWWdXuxtT_EAVY-XiPPzgWJtMtG8vDnnsLQsajdgej1_u0bWzrZvdk2AzpQoABct9etvHTUbK8wBZn6CM7mzu3Uy5KzsR-0zbyDc0vqpfMcZekwXqgze6w8p8INlL4-ImpINrRstRDqsJWFsA2REnwUG-UUPRh6Sjz_lVbow4q975pI6ogt6P8nkcXXaJjmI3KCGXj-xtvvbnZiViUIw4Y12UDCNWb3ykzVfjVUnOcZ-Zbxi8591OZu_VKGfgt5VuNnNbUz654BQzpiiNdTcFhJdUTKsEvMJut0kU0YSX7EUwS50h_5EF32kR3abyJh7nIg",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&c.forEach(Ze=>Ze("unsub"))}};return({PUBLIC_API_KEY:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjBkZTBjZTQ5Njg2MTMwOTc0YWU2NDhkOGMwZjU5NWRhYzFlMTVhZTMzZDg1ODk1NTk2NDQwMjA4MmU3MjMzNTM5MTAyNGM5OGJmY2M3ZDU1In0.eyJhdWQiOiI5NTgxIiwianRpIjoiMGRlMGNlNDk2ODYxMzA5NzRhZTY0OGQ4YzBmNTk1ZGFjMWUxNWFlMzNkODU4OTU1OTY0NDAyMDgyZTcyMzM1MzkxMDI0Yzk4YmZjYzdkNTUiLCJpYXQiOjE1OTIyMDEyNTcsIm5iZiI6MTU5MjIwMTI1NywiZXhwIjoxNTk0NDQ3NjU3LCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.eG2UAq4zVsdnYkW7IMrJWWdXuxtT_EAVY-XiPPzgWJtMtG8vDnnsLQsajdgej1_u0bWzrZvdk2AzpQoABct9etvHTUbK8wBZn6CM7mzu3Uy5KzsR-0zbyDc0vqpfMcZekwXqgze6w8p8INlL4-ImpINrRstRDqsJWFsA2REnwUG-UUPRh6Sjz_lVbow4q975pI6ogt6P8nkcXXaJjmI3KCGXj-xtvvbnZiViUIw4Y12UDCNWb3ykzVfjVUnOcZ-Zbxi8591OZu_VKGfgt5VuNnNbUz654BQzpiiNdTcFhJdUTKsEvMJut0kU0YSX7EUwS50h_5EF32kR3abyJh7nIg",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"?{get:E,set:F,sub:ce,dev_subscribe_state:oe=>(console.warn("[DEPRECATED] dev_subscribe_state is deprecated and will be removed in the next minor version. use dev_subscribe_store instead."),s.add(oe),()=>{s.delete(oe)}),dev_subscribe_store:oe=>(c.add(oe),()=>{c.delete(oe)}),dev_get_mounted_atoms:()=>h.values(),dev_get_atom_state:oe=>e.get(oe),dev_get_mounted:oe=>t.get(oe),dev_restore_atoms:oe=>{for(const[be,ye]of oe)W_(be)&&(w(be,ye),J(be));pe()}}:{get:E,set:F,sub:ce}};let X_;const pH=()=>(X_||(X_=fH()),X_),mH=U.createContext(void 0),T5=e=>{const t=U.useContext(mH);return(e==null?void 0:e.store)||t||pH()},gH=e=>e instanceof Promise,yH=da.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)});function vH(e,t){const n=T5(t),[[s,c,h],m]=U.useReducer(w=>{const k=n.get(e);return Object.is(w[0],k)&&w[1]===n&&w[2]===e?w:[k,n,e]},void 0,()=>[n.get(e),n,e]);let l=s;(c!==n||h!==e)&&(m(),l=n.get(e));const b=t==null?void 0:t.delay;return U.useEffect(()=>{const w=n.sub(e,()=>{if(typeof b=="number"){setTimeout(m,b);return}m()});return m(),w},[n,e,b]),U.useDebugValue(l),gH(l)?yH(l):l}function _H(e,t){const n=T5(t);return U.useCallback((...c)=>{if(({PUBLIC_API_KEY:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjBkZTBjZTQ5Njg2MTMwOTc0YWU2NDhkOGMwZjU5NWRhYzFlMTVhZTMzZDg1ODk1NTk2NDQwMjA4MmU3MjMzNTM5MTAyNGM5OGJmY2M3ZDU1In0.eyJhdWQiOiI5NTgxIiwianRpIjoiMGRlMGNlNDk2ODYxMzA5NzRhZTY0OGQ4YzBmNTk1ZGFjMWUxNWFlMzNkODU4OTU1OTY0NDAyMDgyZTcyMzM1MzkxMDI0Yzk4YmZjYzdkNTUiLCJpYXQiOjE1OTIyMDEyNTcsIm5iZiI6MTU5MjIwMTI1NywiZXhwIjoxNTk0NDQ3NjU3LCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.eG2UAq4zVsdnYkW7IMrJWWdXuxtT_EAVY-XiPPzgWJtMtG8vDnnsLQsajdgej1_u0bWzrZvdk2AzpQoABct9etvHTUbK8wBZn6CM7mzu3Uy5KzsR-0zbyDc0vqpfMcZekwXqgze6w8p8INlL4-ImpINrRstRDqsJWFsA2REnwUG-UUPRh6Sjz_lVbow4q975pI6ogt6P8nkcXXaJjmI3KCGXj-xtvvbnZiViUIw4Y12UDCNWb3ykzVfjVUnOcZ-Zbxi8591OZu_VKGfgt5VuNnNbUz654BQzpiiNdTcFhJdUTKsEvMJut0kU0YSX7EUwS50h_5EF32kR3abyJh7nIg",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...c)},[n,e])}function kr(e,t){return[vH(e,t),_H(e,t)]}const{createElement:Sp,createContext:xH,forwardRef:bH,useCallback:Al,useContext:k5,useEffect:el,useImperativeHandle:wH,useLayoutEffect:SH,useMemo:TH,useRef:xs,useState:Nf}=Hg,IC=Hg["useId".toString()],kH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EH=kH?SH:()=>{};var $f=EH;const CH=typeof IC=="function"?IC:()=>null;let IH=0;function uS(e=null){const t=CH(),n=xs(e||t||null);return n.current===null&&(n.current=""+IH++),n.current}const $0=xH(null);$0.displayName="PanelGroupContext";function E5({children:e=null,className:t="",collapsible:n=!1,defaultSize:s=null,forwardedRef:c,id:h=null,maxSize:m=100,minSize:l=10,onCollapse:b=null,onResize:w=null,order:k=null,style:M={},tagName:E="div"}){const L=k5($0);if(L===null)throw Error("Panel components must be rendered within a PanelGroup container");const N=uS(h),{collapsePanel:V,expandPanel:J,getPanelStyle:$,registerPanel:F,resizePanel:W,unregisterPanel:te}=L,de=xs({onCollapse:b,onResize:w});if(el(()=>{de.current.onCollapse=b,de.current.onResize=w}),l<0||l>100)throw Error(`Panel minSize must be between 0 and 100, but was ${l}`);if(m<0||m>100)throw Error(`Panel maxSize must be between 0 and 100, but was ${m}`);if(s!==null){if(s<0||s>100)throw Error(`Panel defaultSize must be between 0 and 100, but was ${s}`);l>s&&!n&&(console.error(`Panel minSize ${l} cannot be greater than defaultSize ${s}`),s=l)}$f(()=>(F(N,{callbacksRef:de,collapsible:n,defaultSize:s,id:N,maxSize:m,minSize:l,order:k}),()=>{te(N)}),[n,s,N,m,l,k,F,te]);const pe=$(N),ce=xs({size:MC(pe)});return $f(()=>{ce.current.size=MC(pe)}),wH(c,()=>({collapse:()=>V(N),expand:()=>J(N),getCollapsed(){return ce.current.size===0},getSize(){return ce.current.size},resize:oe=>W(N,oe)}),[V,J,N,W]),Sp(E,{children:e,className:t,"data-panel":"","data-panel-collapsible":n||void 0,"data-panel-id":N,"data-panel-size":parseFloat(""+pe.flexGrow).toFixed(1),id:`data-panel-id-${N}`,style:{...pe,...M}})}const j1=bH((e,t)=>Sp(E5,{...e,forwardedRef:t}));E5.displayName="Panel";j1.displayName="forwardRef(Panel)";function MC(e){const{flexGrow:t}=e;return typeof t=="string"?parseFloat(t):t}function C5(e){return e.map(t=>{const{minSize:n,order:s}=t;return s?`${s}:${n}`:`${n}`}).sort((t,n)=>t.localeCompare(n)).join(",")}function I5(e,t){try{const n=t.getItem(`PanelGroup:sizes:${e}`);if(n){const s=JSON.parse(n);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function MH(e,t,n){const s=I5(e,n);if(s){const h=C5(t);var c;return(c=s[h])!==null&&c!==void 0?c:null}return null}function PH(e,t,n,s){const c=C5(t),h=I5(e,s)||{};h[c]=n;try{s.setItem(`PanelGroup:sizes:${e}`,JSON.stringify(h))}catch(m){console.error(m)}}const gu=10;function gf(e,t,n,s,c,h,m,l){const{sizes:b}=l||{},w=b||h;if(c===0)return w;const k=ys(t),M=w.concat();let E=0;{const V=c<0?s:n,J=k.findIndex(te=>te.id===V),$=k[J],F=w[J],W=PC($,Math.abs(c),F,e);if(F===W)return w;W===0&&F>0&&m.set(V,F),c=c<0?F-W:W-F}let L=c<0?n:s,N=k.findIndex(V=>V.id===L);for(;;){const V=k[N],J=w[N],$=Math.abs(c)-Math.abs(E),F=PC(V,0-$,J,e);if(J!==F&&(F===0&&J>0&&m.set(V.id,J),E+=J-F,M[N]=F,E.toPrecision(gu).localeCompare(Math.abs(c).toPrecision(gu),void 0,{numeric:!0})>=0))break;if(c<0){if(--N<0)break}else if(++N>=k.length)break}return E===0?w:(L=c<0?s:n,N=k.findIndex(V=>V.id===L),M[N]=w[N]+E,M)}function tf(e,t,n){n.forEach((s,c)=>{const h=t[c];if(h!==s){const{callbacksRef:m,collapsible:l}=e[c],{onCollapse:b,onResize:w}=m.current;w&&w(s),l&&b&&(!h&&s!==0?b(!1):h!==0&&s===0&&b(!0))}})}function H_(e,t){if(t.length<2)return[null,null];const n=t.findIndex(m=>m.id===e);if(n<0)return[null,null];const s=n===t.length-1,c=s?t[n-1].id:e,h=s?e:t[n+1].id;return[c,h]}function M5(e,t,n){if(e.size===1)return"100";const c=ys(e).findIndex(m=>m.id===t),h=n[c];return h==null?"0":h.toPrecision(gu)}function zH(e){const t=document.querySelector(`[data-panel-id="${e}"]`);return t||null}function dS(e){const t=document.querySelector(`[data-panel-group-id="${e}"]`);return t||null}function j0(e){const t=document.querySelector(`[data-panel-resize-handle-id="${e}"]`);return t||null}function AH(e){const n=P5().findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return n??null}function P5(){return Array.from(document.querySelectorAll("[data-panel-resize-handle-id]"))}function z5(e){return Array.from(document.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function hS(e,t,n){var s,c;const h=j0(t),l=z5(e).indexOf(h);var b;const w=(b=(s=n[l])===null||s===void 0?void 0:s.id)!==null&&b!==void 0?b:null;var k;const M=(k=(c=n[l+1])===null||c===void 0?void 0:c.id)!==null&&k!==void 0?k:null;return[w,M]}function ys(e){return Array.from(e.values()).sort((t,n)=>t.order-n.order)}function PC(e,t,n,s){const c=n+t;if(e.collapsible)if(n>0){if(c<=0)return 0}else{var h;if(!(s==null||(h=s.type)===null||h===void 0?void 0:h.startsWith("key"))&&c<e.minSize)return 0}return Math.min(e.maxSize,Math.max(e.minSize,c))}function A5(e,t,n,s=0,c=null){const h=n==="horizontal";let m=0;if(V1(e))m=h?e.clientX:e.clientY;else if(U1(e)){const k=e.touches[0];m=h?k.screenX:k.screenY}else return 0;const l=j0(t),b=c||l.getBoundingClientRect(),w=h?b.left:b.top;return m-w-s}function DH(e,t,n,s,c,h,m){const{dragOffset:l=0,dragHandleRect:b,sizes:w}=m||{},k=w||h;if(RH(e)){const M=c==="horizontal",L=dS(t).getBoundingClientRect(),N=M?L.width:L.height,V=e.shiftKey?10:100,J=N/V;let $=0;switch(e.key){case"ArrowDown":$=M?0:J;break;case"ArrowLeft":$=M?-J:0;break;case"ArrowRight":$=M?J:0;break;case"ArrowUp":$=M?0:-J;break;case"End":$=N;break;case"Home":$=-N;break}const[F,W]=hS(t,n,s),te=$<0?F:W,de=s.findIndex(ce=>ce.id===te),pe=s[de];if(pe.collapsible){const ce=k[de];(ce===0||ce.toPrecision(gu)===pe.minSize.toPrecision(gu))&&($=$<0?-pe.minSize*N:pe.minSize*N)}return $}else return A5(e,n,c,l,b)}function RH(e){return e.type==="keydown"}function V1(e){return e.type.startsWith("mouse")}function U1(e){return e.type.startsWith("touch")}function LH({committedValuesRef:e,groupId:t,panels:n,setSizes:s,sizes:c,panelSizeBeforeCollapse:h}){el(()=>{const{direction:m,panels:l}=e.current,b=dS(t),{height:w,width:k}=b.getBoundingClientRect(),E=z5(t).map(L=>{const N=L.getAttribute("data-panel-resize-handle-id"),V=ys(l),[J,$]=hS(t,N,V);if(J==null||$==null)return()=>{};let F=0,W=100,te=0,de=0;V.forEach(Ae=>{Ae.id===J?(W=Ae.maxSize,F=Ae.minSize):(te+=Ae.minSize,de+=Ae.maxSize)});const pe=Math.min(W,100-te),ce=Math.max(F,(V.length-1)*100-de),oe=M5(l,J,c);L.setAttribute("aria-valuemax",""+Math.round(pe)),L.setAttribute("aria-valuemin",""+Math.round(ce)),L.setAttribute("aria-valuenow",""+Math.round(parseInt(oe)));const be=Ae=>{if(!Ae.defaultPrevented)switch(Ae.key){case"Enter":{Ae.preventDefault();const Ze=V.findIndex(Xe=>Xe.id===J);if(Ze>=0){const Xe=V[Ze],ot=c[Ze];if(ot!=null){let ft=0;ot.toPrecision(gu)<=Xe.minSize.toPrecision(gu)?ft=m==="horizontal"?k:w:ft=-(m==="horizontal"?k:w);const Ce=gf(Ae,l,J,$,ft,c,h.current,null);c!==Ce&&s(Ce)}}break}}};L.addEventListener("keydown",be);const ye=zH(J);return ye!=null&&L.setAttribute("aria-controls",ye.id),()=>{L.removeAttribute("aria-valuemax"),L.removeAttribute("aria-valuemin"),L.removeAttribute("aria-valuenow"),L.removeEventListener("keydown",be),ye!=null&&L.removeAttribute("aria-controls")}});return()=>{E.forEach(L=>L())}},[e,t,n,h,s,c])}function OH({disabled:e,handleId:t,resizeHandler:n}){el(()=>{if(e||n==null)return;const s=j0(t);if(s==null)return;const c=h=>{if(!h.defaultPrevented)switch(h.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":h.preventDefault(),n(h);break;case"F6":{h.preventDefault();const m=P5(),l=AH(t),b=h.shiftKey?l>0?l-1:m.length-1:l+1<m.length?l+1:0;m[b].focus();break}}};return s.addEventListener("keydown",c),()=>{s.removeEventListener("keydown",c)}},[e,t,n])}let G1=null,tu=null;function D5(e){switch(e){case"horizontal":return"col-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"row-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function BH(){tu!==null&&(document.head.removeChild(tu),G1=null,tu=null)}function Y_(e){if(G1===e)return;G1=e;const t=D5(e);tu===null&&(tu=document.createElement("style"),document.head.appendChild(tu)),tu.innerHTML=`*{cursor: ${t}!important;}`}function FH(e,t=10){let n=null;return(...c)=>{clearTimeout(n),n=setTimeout(()=>{e(...c)},t)}}function NH(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}const $H=FH(PH,100);function zC(){throw new Error('PanelGroup "storage" prop required for server rendering.')}const jH={getItem:typeof localStorage<"u"?e=>localStorage.getItem(e):zC,setItem:typeof localStorage<"u"?(e,t)=>localStorage.setItem(e,t):zC};function R5({autoSaveId:e,children:t=null,className:n="",direction:s,disablePointerEventsDuringResize:c=!1,id:h=null,onLayout:m=null,storage:l=jH,style:b={},tagName:w="div"}){const k=uS(h),[M,E]=Nf(null),[L,N]=Nf(new Map),V=xs(null),J=xs({onLayout:m});el(()=>{J.current.onLayout=m});const[$,F]=Nf([]),W=xs(new Map),te=xs(0),de=xs({direction:s,panels:L,sizes:$});$f(()=>{de.current.direction=s,de.current.panels=L,de.current.sizes=$}),LH({committedValuesRef:de,groupId:k,panels:L,setSizes:F,sizes:$,panelSizeBeforeCollapse:W}),el(()=>{const{onLayout:Ce}=J.current;if(Ce){const{sizes:Ee}=de.current;Ee.length>0&&Ce(Ee)}},[$]);const pe=xs(!1);$f(()=>{if(pe.current)return;const{panels:Ce,sizes:Ee}=de.current;if(Ee.length>0){pe.current=!0;const Me=ys(Ce);tf(Me,[],Ee)}},[$]),$f(()=>{if(de.current.sizes.length===L.size)return;let Ee;if(e){const Me=ys(L);Ee=MH(e,Me,l)}if(Ee!=null)F(Ee);else{const Me=ys(L);let We=0,Ye=0,st=0;if(Me.forEach(Ke=>{st+=Ke.minSize,Ke.defaultSize===null?We++:Ye+=Ke.defaultSize}),Ye>100)throw new Error("The sum of the defaultSize of all panels in a group cannot exceed 100.");if(st>100)throw new Error("The sum of the minSize of all panels in a group cannot exceed 100.");F(Me.map(Ke=>Ke.defaultSize===null?(100-Ye)/We:Ke.defaultSize))}},[e,L,l]),el(()=>{if(e){if($.length===0||$.length!==L.size)return;const Ce=ys(L);$H(e,Ce,$,l)}},[e,L,$,l]);const ce=Al(Ce=>{const{panels:Ee}=de.current;return Ee.size===0?{flexBasis:"auto",flexGrow:1,flexShrink:1,overflow:"hidden"}:{flexBasis:0,flexGrow:M5(Ee,Ce,$),flexShrink:1,overflow:"hidden",pointerEvents:c&&M!==null?"none":void 0}},[M,c,$]),oe=Al((Ce,Ee)=>{N(Me=>{if(Me.has(Ce))return Me;const We=new Map(Me);return We.set(Ce,Ee),We})},[]),be=Al(Ce=>Me=>{Me.preventDefault();const{direction:We,panels:Ye,sizes:st}=de.current,Ke=ys(Ye),[Je,pt]=hS(k,Ce,Ke);if(Je==null||pt==null)return;const St=DH(Me,k,Ce,Ke,We,st,V.current);if(St===0)return;const Vt=dS(k).getBoundingClientRect(),Bt=We==="horizontal",ln=Bt?Vt.width:Vt.height,Kn=St/ln*100,qt=gf(Me,Ye,Je,pt,Kn,st,W.current,V.current),zt=!NH(st,qt);(V1(Me)||U1(Me))&&te.current!=Kn&&Y_(zt?Bt?"horizontal":"vertical":Bt?St<0?"horizontal-min":"horizontal-max":St<0?"vertical-min":"vertical-max"),zt&&(tf(Ke,st,qt),F(qt)),te.current=Kn},[k]),ye=Al(Ce=>{N(Ee=>{if(!Ee.has(Ce))return Ee;const Me=new Map(Ee);return Me.delete(Ce),Me})},[]),Ae=Al(Ce=>{const{panels:Ee,sizes:Me}=de.current,We=Ee.get(Ce);if(We==null||!We.collapsible)return;const Ye=ys(Ee),st=Ye.indexOf(We);if(st<0)return;const Ke=Me[st];if(Ke===0)return;W.current.set(Ce,Ke);const[Je,pt]=H_(Ce,Ye);if(Je==null||pt==null)return;const Ot=st===Ye.length-1?Ke:0-Ke,Vt=gf(null,Ee,Je,pt,Ot,Me,W.current,null);Me!==Vt&&(tf(Ye,Me,Vt),F(Vt))},[]),Ze=Al(Ce=>{const{panels:Ee,sizes:Me}=de.current,We=Ee.get(Ce);if(We==null)return;const Ye=W.current.get(Ce)||We.minSize;if(!Ye)return;const st=ys(Ee),Ke=st.indexOf(We);if(Ke<0||Me[Ke]!==0)return;const[pt,St]=H_(Ce,st);if(pt==null||St==null)return;const Vt=Ke===st.length-1?0-Ye:Ye,Bt=gf(null,Ee,pt,St,Vt,Me,W.current,null);Me!==Bt&&(tf(st,Me,Bt),F(Bt))},[]),Xe=Al((Ce,Ee)=>{const{panels:Me,sizes:We}=de.current,Ye=Me.get(Ce);if(Ye==null)return;const st=ys(Me),Ke=st.indexOf(Ye);if(Ke<0)return;const Je=We[Ke];if(Je===Ee)return;Ye.collapsible&&Ee===0||(Ee=Math.min(Ye.maxSize,Math.max(Ye.minSize,Ee)));const[pt,St]=H_(Ce,st);if(pt==null||St==null)return;const Vt=Ke===st.length-1?Je-Ee:Ee-Je,Bt=gf(null,Me,pt,St,Vt,We,W.current,null);We!==Bt&&(tf(st,We,Bt),F(Bt))},[]),ot=TH(()=>({activeHandleId:M,collapsePanel:Ae,direction:s,expandPanel:Ze,getPanelStyle:ce,groupId:k,registerPanel:oe,registerResizeHandle:be,resizePanel:Xe,startDragging:(Ce,Ee)=>{if(E(Ce),V1(Ee)||U1(Ee)){const Me=j0(Ce);V.current={dragHandleRect:Me.getBoundingClientRect(),dragOffset:A5(Ee,Ce,s),sizes:de.current.sizes}}},stopDragging:()=>{BH(),E(null),V.current=null},unregisterPanel:ye}),[M,Ae,s,Ze,ce,k,oe,be,Xe,ye]),ft={display:"flex",flexDirection:s==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Sp($0.Provider,{children:Sp(w,{children:t,className:n,"data-panel-group":"","data-panel-group-direction":s,"data-panel-group-id":k,style:{...ft,...b}}),value:ot})}R5.displayName="PanelGroup";function L5({children:e=null,className:t="",disabled:n=!1,id:s=null,onDragging:c=null,style:h={},tagName:m="div"}){const l=xs(null),b=xs({onDragging:c});el(()=>{b.current.onDragging=c});const w=k5($0);if(w===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{activeHandleId:k,direction:M,groupId:E,registerResizeHandle:L,startDragging:N,stopDragging:V}=w,J=uS(s),$=k===J,[F,W]=Nf(!1),[te,de]=Nf(null),pe=Al(()=>{l.current.blur(),V();const{onDragging:be}=b.current;be&&be(!1)},[V]);el(()=>{if(n)de(null);else{const oe=L(J);de(()=>oe)}},[n,J,L]),el(()=>{if(n||te==null||!$)return;const oe=Ze=>{te(Ze)},be=Ze=>{te(Ze)},Ae=l.current.ownerDocument;return Ae.body.addEventListener("contextmenu",pe),Ae.body.addEventListener("mousemove",oe),Ae.body.addEventListener("touchmove",oe),Ae.body.addEventListener("mouseleave",be),window.addEventListener("mouseup",pe),window.addEventListener("touchend",pe),()=>{Ae.body.removeEventListener("contextmenu",pe),Ae.body.removeEventListener("mousemove",oe),Ae.body.removeEventListener("touchmove",oe),Ae.body.removeEventListener("mouseleave",be),window.removeEventListener("mouseup",pe),window.removeEventListener("touchend",pe)}},[M,n,$,te,pe]),OH({disabled:n,handleId:J,resizeHandler:te});const ce={cursor:D5(M),touchAction:"none",userSelect:"none"};return Sp(m,{children:e,className:t,"data-resize-handle-active":$?"pointer":F?"keyboard":void 0,"data-panel-group-direction":M,"data-panel-group-id":E,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":J,onBlur:()=>W(!1),onFocus:()=>W(!0),onMouseDown:oe=>{N(J,oe.nativeEvent);const{onDragging:be}=b.current;be&&be(!0)},onMouseUp:pe,onTouchCancel:pe,onTouchEnd:pe,onTouchStart:oe=>{N(J,oe.nativeEvent);const{onDragging:be}=b.current;be&&be(!0)},ref:l,role:"separator",style:{...ce,...h},tabIndex:0})}L5.displayName="PanelResizeHandle";const VH=typeof window<"u"?da.useLayoutEffect:()=>{};function W1(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}let nf=new Map,AC=new Set;function DC(){if(typeof window>"u")return;let e=n=>{let s=nf.get(n.target);s||(s=new Set,nf.set(n.target,s),n.target.addEventListener("transitioncancel",t)),s.add(n.propertyName)},t=n=>{let s=nf.get(n.target);if(s&&(s.delete(n.propertyName),s.size===0&&(n.target.removeEventListener("transitioncancel",t),nf.delete(n.target)),nf.size===0)){for(let c of AC)c();AC.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?DC():document.addEventListener("DOMContentLoaded",DC));function O5(e){for(;e&&!UH(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}function UH(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function fS(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function GH(){return fS(/^Mac/i)}function WH(){return fS(/^iPhone/i)}function ZH(){return fS(/^iPad/i)||GH()&&navigator.maxTouchPoints>1}function qH(){return WH()||ZH()}function ua(){return ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ua.apply(this,arguments)}function Up(e,t){if(e==null)return{};var n={},s=Object.keys(e),c,h;for(h=0;h<s.length;h++)c=s[h],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}var RC="calc(100% - env(safe-area-inset-top) - 34px)",B5=typeof window>"u",XH={stiffness:300,damping:30,mass:.2},HH=.6,YH=500;function LC(e,t){return e.reduce(function(n,s){return Math.abs(s-t)<Math.abs(n-t)?s:n})}var F5="react-modal-sheet-highlight";function KH(e){var t=document.querySelector("body"),n=document.querySelector("#"+e);if(n){var s=24,c=window.innerHeight,h=(c-s)/c;t.style.backgroundColor="#000",n.style.overflow="hidden",n.style.willChange="transform",n.style.transition="transform 200ms linear",n.style.transform="translateY(calc(env(safe-area-inset-top) + "+s/2+"px)) scale("+h+")",n.style.borderTopRightRadius="10px",n.style.borderTopLeftRadius="10px";var m=document.createElement("div");m.setAttribute("aria-hidden","true"),m.id=F5,m.style.position="absolute",m.style.top="0px",m.style.left="0px",m.style.bottom="0px",m.style.right="0px",m.style.opacity="0",m.style.transition="opacity 200ms linear",m.style.backgroundColor="rgba(150, 150, 150, 0.1)",n.appendChild(m),requestAnimationFrame(function(){return m.style.opacity="1"})}}function OC(e){var t=document.querySelector("body"),n=document.getElementById(e),s=document.getElementById(F5);function c(){var h;n.style.removeProperty("overflow"),n.style.removeProperty("will-change"),n.style.removeProperty("transition"),t.style.removeProperty("background-color"),n.removeEventListener("transitionend",c),(h=s.parentNode)==null||h.removeChild(s)}n&&s&&(n.style.removeProperty("border-top-right-radius"),n.style.removeProperty("border-top-left-radius"),n.style.removeProperty("transform"),s.style.opacity="0",n.addEventListener("transitionend",c))}function JH(e){for(var t=0;t<e.length;t++)if(e[t+1]>e[t])return!1;return!0}function BC(e){var t=e.snapTo,n=e.sheetHeight;return t<0&&console.warn("Snap point is out of bounds. Sheet height is "+n+" but snap point is "+(n+Math.abs(t))+"."),Math.max(Math.round(t),0)}function QH(e){return function(t){e.forEach(function(n){typeof n=="function"?n(t):n&&(n.current=t)})}}var pS=B5?U.useEffect:U.useLayoutEffect,eY=function(t,n){var s=N5(t);U.useEffect(function(){n&&!s&&t?KH(n):n&&!t&&s&&OC(n)},[t,s]),U.useEffect(function(){return function(){n&&t&&OC(n)}},[t])},tY=function(t,n){var s=N5(t),c=U.useRef(!1),h=U.useCallback(function(){c.current?(n.current.onCloseEnd==null||n.current.onCloseEnd(),c.current=!1):(n.current.onOpenEnd==null||n.current.onOpenEnd(),c.current=!0)},[t,s]);return U.useEffect(function(){!s&&t?n.current.onOpenStart==null||n.current.onOpenStart():!t&&s&&(n.current.onCloseStart==null||n.current.onCloseStart())},[t,s]),{handleAnimationComplete:h}};function nY(){var e=U.useState(0),t=e[0],n=e[1];return pS(function(){var s=function(){return n(window.innerHeight)};return window.addEventListener("resize",s),s(),function(){return window.removeEventListener("resize",s)}},[]),t}function N5(e){var t=U.useRef();return U.useEffect(function(){t.current=e}),t.current}function FC(e){var t=U.useRef();return pS(function(){t.current=e}),U.useCallback(function(){for(var n=t.current,s=arguments.length,c=new Array(s),h=0;h<s;h++)c[h]=arguments[h];return n==null?void 0:n.apply(void 0,c)},[])}var $5=U.createContext(void 0),mS=function(){var t=U.useContext($5);if(!t)throw Error("Sheet context error");return t},K_=typeof window<"u"&&window.visualViewport,rY=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]),_g=0,J_;function iY(e){e===void 0&&(e={});var t=e,n=t.isDisabled;VH(function(){if(!n)return _g++,_g===1&&(qH()?J_=sY():J_=oY()),function(){_g--,_g===0&&J_()}},[n])}function oY(){return W1(jf(document.documentElement,"paddingRight",window.innerWidth-document.documentElement.clientWidth+"px"),jf(document.documentElement,"overflow","hidden"))}function sY(){var e,t=0,n=function(E){e=O5(E.target),!(e===document.documentElement&&e===document.body)&&(t=E.changedTouches[0].pageY)},s=function(E){if(e===document.documentElement||e===document.body){E.preventDefault();return}var L=E.changedTouches[0].pageY,N=e.scrollTop,V=e.scrollHeight-e.clientHeight;V!==0&&((N<=0&&L>t||N>=V&&L<t)&&E.preventDefault(),t=L)},c=function(E){var L=E.target;$C(L)&&L!==document.activeElement&&(E.preventDefault(),L.style.transform="translateY(-2000px)",L.focus(),requestAnimationFrame(function(){L.style.transform=""}))},h=function(E){var L=E.target;$C(L)&&(L.style.transform="translateY(-2000px)",requestAnimationFrame(function(){L.style.transform="",K_&&(K_.height<window.innerHeight?requestAnimationFrame(function(){NC(L)}):K_.addEventListener("resize",function(){return NC(L)},{once:!0}))}))},m=function(){window.scrollTo(0,0)},l=window.pageXOffset,b=window.pageYOffset,w=W1(jf(document.documentElement,"paddingRight",window.innerWidth-document.documentElement.clientWidth+"px"),jf(document.documentElement,"overflow","hidden"),jf(document.body,"marginTop","-"+b+"px"));window.scrollTo(0,0);var k=W1(rf(document,"touchstart",n,{passive:!1,capture:!0}),rf(document,"touchmove",s,{passive:!1,capture:!0}),rf(document,"touchend",c,{passive:!1,capture:!0}),rf(document,"focus",h,!0),rf(window,"scroll",m));return function(){w(),k(),window.scrollTo(l,b)}}function jf(e,t,n){var s=e.style[t];return e.style[t]=n,function(){e.style[t]=s}}function rf(e,t,n,s){return e.addEventListener(t,n,s),function(){e.removeEventListener(t,n,s)}}function NC(e){for(var t=document.scrollingElement||document.documentElement;e&&e!==t;){var n=O5(e);if(n!==document.documentElement&&n!==document.body&&n!==e){var s=n.getBoundingClientRect().top,c=e.getBoundingClientRect().top;c>s+e.clientHeight&&(n.scrollTop+=c-s)}e=n.parentElement}}function $C(e){return e instanceof HTMLInputElement&&!rY.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}var jl={wrapper:{position:"fixed",top:0,bottom:0,left:0,right:0,zIndex:9999999,overflow:"hidden",pointerEvents:"none"},backdrop:{zIndex:1,position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(51, 51, 51, 0.5)",touchAction:"none",border:"none"},container:{zIndex:2,position:"absolute",left:0,bottom:0,width:"100%",backgroundColor:"#fff",borderTopRightRadius:"8px",borderTopLeftRadius:"8px",boxShadow:"0px -2px 16px rgba(0, 0, 0, 0.3)",display:"flex",flexDirection:"column",pointerEvents:"auto"},headerWrapper:{width:"100%"},header:{height:"40px",width:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},indicator:{width:"18px",height:"4px",borderRadius:"99px",backgroundColor:"#ddd"},content:{flex:1,overflow:"auto",position:"relative"}},aY=U.forwardRef(function(e,t){var n=e.onOpenStart,s=e.onOpenEnd,c=e.onClose,h=e.onCloseStart,m=e.onCloseEnd,l=e.onSnap,b=e.children,w=e.isOpen,k=e.snapPoints,M=e.rootId,E=e.mountPoint,L=e.style,N=e.detent,V=N===void 0?"full-height":N,J=e.initialSnap,$=J===void 0?0:J,F=e.springConfig,W=F===void 0?XH:F,te=e.disableDrag,de=te===void 0?!1:te,pe=e.prefersReducedMotion,ce=pe===void 0?!1:pe,oe=Up(e,["onOpenStart","onOpenEnd","onClose","onCloseStart","onCloseEnd","onSnap","children","isOpen","snapPoints","rootId","mountPoint","style","detent","initialSnap","springConfig","disableDrag","prefersReducedMotion"]),be=U.useRef(null),ye=I1(0),Ae=nY(),Ze=mW(),Xe=Boolean(ce||Ze),ot=Xe?{type:"tween",duration:.01}:ua({type:"spring"},W),ft=I1(0),Ce=U.useRef({onOpenStart:n,onOpenEnd:s,onCloseStart:h,onCloseEnd:m});pS(function(){Ce.current={onOpenStart:n,onOpenEnd:s,onCloseStart:h,onCloseEnd:m}}),k&&(k=k.map(function(Ke){return Ke>0&&Ke<=1?Math.round(Ke*Ae):Ke<0?Ae+Ke:Ke}),console.assert(JH(k)||Ae===0,"Snap points need to be in descending order got: ["+k+"]"));var Ee=FC(function(Ke,Je){var pt=Je.delta,St=ft.getVelocity();St>0&&ye.set(10),St<0&&ye.set(-10),ft.set(Math.max(ft.get()+pt.y,0))}),Me=FC(function(Ke,Je){var pt=Je.velocity;if(pt.y>YH)c();else{var St=be.current,Ot=St.getBoundingClientRect().height,Vt=ft.get(),Bt=0;if(k){var ln=k.map(function(kt){return Ot-kt}).filter(function(kt){return kt>=0});V==="content-height"&&!ln.includes(0)&&ln.unshift(0),Bt=LC(ln,Vt)}else Vt/Ot>HH&&(Bt=Ot);if(Bt=BC({snapTo:Bt,sheetHeight:Ot}),E1(ft,Bt,ot),k&&l){var Kn=Math.abs(Math.round(k[0]-Bt)),qt=k.indexOf(LC(k,Kn));l(qt)}var zt=Math.round(Ot),Ut=Bt>=zt;Ut&&c()}ye.set(0)});U.useEffect(function(){if(!(!k||!l)){var Ke=w?$:k.length-1;l(Ke)}},[w]),U.useImperativeHandle(t,function(){return{y:ft,snapTo:function(Je){var pt=be.current;if(k&&k[Je]!==void 0&&pt!==null){var St=pt.getBoundingClientRect().height,Ot=k[Je],Vt=BC({snapTo:St-Ot,sheetHeight:St});E1(ft,Vt,ot),l&&l(Je),Vt>=St&&c()}}}}),eY(w,M),iY({isDisabled:!w});var We=U.useMemo(function(){var Ke={drag:"y",dragElastic:0,dragConstraints:{top:0,bottom:0},dragMomentum:!1,dragPropagation:!1,onDrag:Ee,onDragEnd:Me};return de?void 0:Ke},[de]),Ye={y:ft,sheetRef:be,isOpen:w,initialSnap:$,snapPoints:k,detent:V,indicatorRotation:ye,callbacks:Ce,dragProps:We,windowHeight:Ae,animationOptions:ot,reduceMotion:Xe},st=U.createElement($5.Provider,{value:Ye},U.createElement("div",Object.assign({},oe,{ref:t,style:ua({},jl.wrapper,L)}),U.createElement(Gw,null,w?U.Children.map(b,function(Ke,Je){return U.cloneElement(Ke,{key:"sheet-child-"+Je})}):null)));return B5?st:zd.createPortal(st,E??document.body)}),lY=U.forwardRef(function(e,t){var n=e.children,s=e.style,c=s===void 0?{}:s,h=e.className,m=h===void 0?"":h,l=Up(e,["children","style","className"]),b=mS(),w=b.y,k=b.isOpen,M=b.callbacks,E=b.snapPoints,L=b.initialSnap,N=L===void 0?0:L,V=b.sheetRef,J=b.windowHeight,$=b.detent,F=b.animationOptions,W=b.reduceMotion,te=tY(k,M),de=te.handleAnimationComplete,pe=E?E[0]-E[N]:0,ce=E?E[0]:null,oe=ce!==null?"min("+ce+"px, "+RC+")":RC;return U.createElement(la.div,Object.assign({},l,{ref:QH([V,t]),className:"react-modal-sheet-container "+m,style:ua({},jl.container,c,$==="full-height"&&{height:oe},$==="content-height"&&{maxHeight:oe},{y:w}),initial:W?!1:{y:J},animate:{y:pe,transition:F},exit:{y:J,transition:F},onAnimationComplete:de}),n)}),cY=U.forwardRef(function(e,t){var n=e.children,s=e.style,c=e.disableDrag,h=e.className,m=h===void 0?"":h,l=Up(e,["children","style","disableDrag","className"]),b=mS(),w=b.dragProps,k=c?void 0:w;return U.createElement(la.div,Object.assign({},l,{ref:t,className:"react-modal-sheet-content "+m,style:ua({},jl.content,s)},k),n)}),uY=U.forwardRef(function(e,t){var n=e.children,s=e.style,c=e.disableDrag,h=Up(e,["children","style","disableDrag"]),m=mS(),l=m.indicatorRotation,b=m.dragProps,w=c?void 0:b,k=JE(l,function(E){return"translateX(2px) rotate("+E+"deg)"}),M=JE(l,function(E){return"translateX(-2px) rotate("+-1*E+"deg)"});return U.createElement(la.div,Object.assign({},h,{ref:t,style:ua({},jl.headerWrapper,s)},w),n||U.createElement("div",{className:"react-modal-sheet-header",style:jl.header},U.createElement(la.span,{className:"react-modal-sheet-drag-indicator",style:ua({},jl.indicator,{transform:k})}),U.createElement(la.span,{className:"react-modal-sheet-drag-indicator",style:ua({},jl.indicator,{transform:M})})))}),jC=function(t){return!!t.onClick||!!t.onTap},dY=U.forwardRef(function(e,t){var n=e.style,s=n===void 0?{}:n,c=e.className,h=c===void 0?"":c,m=Up(e,["style","className"]),l=jC(m)?la.button:la.div,b=jC(m)?"auto":"none";return U.createElement(l,Object.assign({},m,{ref:t,className:"react-modal-sheet-backdrop "+h,style:ua({},jl.backdrop,s,{pointerEvents:b}),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}))}),Vl=aY;Vl.Container=lY;Vl.Header=uY;Vl.Content=cY;Vl.Backdrop=dY;var Xd={},hY={get exports(){return Xd},set exports(e){Xd=e}};(function(e,t){(function(n,s){e.exports=s()})(sf,function(){var n,s,c;function h(l,b){if(!n)n=b;else if(!s)s=b;else{var w="var sharedChunk = {}; ("+n+")(sharedChunk); ("+s+")(sharedChunk);",k={};n(k),c=b(k),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}h(["exports"],function(l){var b=w;function w(o,r,a,d){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(d-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=a,this.p2y=d}function k(o,r,a,d){const g=new b(o,r,a,d);return function(v){return g.solve(v)}}w.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,d=0;d<8;d++){var g=this.sampleCurveX(a)-o;if(Math.abs(g)<r)return a;var v=this.sampleCurveDerivativeX(a);if(Math.abs(v)<1e-6)break;a-=g/v}var x=0,T=1;for(a=o,d=0;d<20&&(g=this.sampleCurveX(a),!(Math.abs(g-o)<r));d++)o>g?x=a:T=a,a=.5*(T-x)+x;return a},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};const M=k(.25,.1,.25,1);function E(o,r,a){return Math.min(a,Math.max(r,o))}function L(o,r,a){const d=a-r,g=((o-r)%d+d)%d+r;return g===r?a:g}function N(o,...r){for(const a of r)for(const d in a)o[d]=a[d];return o}let V=1;function J(o,r){o.forEach(a=>{r[a]&&(r[a]=r[a].bind(r))})}function $(o,r,a){const d={};for(const g in o)d[g]=r.call(a||this,o[g],g,o);return d}function F(o,r,a){const d={};for(const g in o)r.call(a||this,o[g],g,o)&&(d[g]=o[g]);return d}function W(o){return Array.isArray(o)?o.map(W):typeof o=="object"&&o?$(o,W):o}const te={};function de(o){te[o]||(typeof console<"u"&&console.warn(o),te[o]=!0)}function pe(o,r,a){return(a.y-o.y)*(r.x-o.x)>(r.y-o.y)*(a.x-o.x)}function ce(o){let r=0;for(let a,d,g=0,v=o.length,x=v-1;g<v;x=g++)a=o[g],d=o[x],r+=(d.x-a.x)*(a.y+d.y);return r}function oe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function be(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,d,g,v)=>{const x=g||v;return r[d]=!x||x.toLowerCase(),""}),r["max-age"]){const a=parseInt(r["max-age"],10);isNaN(a)?delete r["max-age"]:r["max-age"]=a}return r}let ye,Ae,Ze=null;function Xe(o){if(Ze==null){const r=o.navigator?o.navigator.userAgent:null;Ze=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Ze}function ot(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const ft={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const r=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(o,r=0){const a=window.document.createElement("canvas"),d=a.getContext("2d");if(!d)throw new Error("failed to create canvas 2d context");return a.width=o.width,a.height=o.height,d.drawImage(o,0,0,o.width,o.height),d.getImageData(-r,-r,o.width+2*r,o.height+2*r)},resolveURL:o=>(ye||(ye=document.createElement("a")),ye.href=o,ye.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Ae==null&&(Ae=matchMedia("(prefers-reduced-motion: reduce)")),Ae.matches)}};var Ce=Ee;function Ee(o,r){this.x=o,this.y=r}Ee.prototype={clone:function(){return new Ee(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,a=o.y-this.y;return r*r+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),a=Math.sin(o),d=a*this.x+r*this.y;return this.x=r*this.x-a*this.y,this.y=d,this},_rotateAround:function(o,r){var a=Math.cos(o),d=Math.sin(o),g=r.y+d*(this.x-r.x)+a*(this.y-r.y);return this.x=r.x+a*(this.x-r.x)-d*(this.y-r.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ee.convert=function(o){return o instanceof Ee?o:Array.isArray(o)?new Ee(o[0],o[1]):o};const Me={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},We="mapbox-tiles";let Ye,st,Ke=500,Je=50;function pt(){typeof caches>"u"||Ye||(Ye=caches.open(We))}let St=1/0;const Ot={supported:!1,testSupport:function(o){!ln&&Bt&&(Kn?qt(o):Vt=o)}};let Vt,Bt,ln=!1,Kn=!1;function qt(o){const r=o.createTexture();o.bindTexture(o.TEXTURE_2D,r);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,Bt),o.isContextLost())return;Ot.supported=!0}catch{}o.deleteTexture(r),ln=!0}typeof document<"u"&&(Bt=document.createElement("img"),Bt.onload=function(){Vt&&qt(Vt),Vt=null,Kn=!0},Bt.onerror=function(){ln=!0,Vt=null},Bt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const zt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(zt);class Ut extends Error{constructor(r,a,d,g){super(`AJAXError: ${a} (${r}): ${d}`),this.status=r,this.statusText=a,this.url=d,this.body=g}}const kt=oe()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function Jt(o,r){const a=new AbortController,d=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:kt(),signal:a.signal});let g=!1,v=!1;return o.type==="json"&&d.headers.set("Accept","application/json"),((x,T,C)=>{if(v)return;const z=Date.now();fetch(d).then(R=>R.ok?((B,Z,X)=>{(o.type==="arrayBuffer"?B.arrayBuffer():o.type==="json"?B.json():B.text()).then(H=>{v||(Z&&X&&function(ue,le,ke){if(pt(),!Ye)return;const Re={status:le.status,statusText:le.statusText,headers:new Headers};le.headers.forEach((ze,Ue)=>Re.headers.set(Ue,ze));const Se=be(le.headers.get("Cache-Control")||"");Se["no-store"]||(Se["max-age"]&&Re.headers.set("Expires",new Date(ke+1e3*Se["max-age"]).toUTCString()),new Date(Re.headers.get("Expires")).getTime()-ke<42e4||function(ze,Ue){if(st===void 0)try{new Response(new ReadableStream),st=!0}catch{st=!1}st?Ue(ze.body):ze.blob().then(Ue)}(le,ze=>{const Ue=new Response(ze,Re);pt(),Ye&&Ye.then(Ve=>Ve.put(function(gt){const wt=gt.indexOf("?");return wt<0?gt:gt.slice(0,wt)}(ue.url),Ue)).catch(Ve=>de(Ve.message))}))}(d,Z,X),g=!0,r(null,H,B.headers.get("Cache-Control"),B.headers.get("Expires")))}).catch(H=>{v||r(new Error(H.message))})})(R,null,z):R.blob().then(B=>r(new Ut(R.status,R.statusText,o.url,B)))).catch(R=>{R.code!==20&&r(new Error(R.message))})})(),{cancel:()=>{v=!0,g||a.abort()}}}const $n=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(oe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r);if(!oe()){const d=o.url.substring(0,o.url.indexOf("://"));return(Me.REGISTERED_PROTOCOLS[d]||Jt)(o,r)}}if(!(/^file:/.test(a=o.url)||/^file:/.test(kt())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Jt(o,r);if(oe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r,void 0,!0)}var a;return function(d,g){const v=new XMLHttpRequest;v.open(d.method||"GET",d.url,!0),d.type==="arrayBuffer"&&(v.responseType="arraybuffer");for(const x in d.headers)v.setRequestHeader(x,d.headers[x]);return d.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=d.credentials==="include",v.onerror=()=>{g(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(d.type==="json")try{x=JSON.parse(v.response)}catch(T){return g(T)}g(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});g(new Ut(v.status,v.statusText,d.url,x))}},v.send(d.body),{cancel:()=>v.abort()}}(o,r)},Tn=function(o,r){return $n(N(o,{type:"arrayBuffer"}),r)};function gr(o){const r=window.document.createElement("a");return r.href=o,r.protocol===window.document.location.protocol&&r.host===window.document.location.host}const jt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let jn,yr;jn=[],yr=0;const Er=function(o,r){if(Ot.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),yr>=Me.MAX_PARALLEL_IMAGE_REQUESTS){const v={requestParameters:o,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return jn.push(v),v}yr++;let a=!1;const d=()=>{if(!a)for(a=!0,yr--;jn.length&&yr<Me.MAX_PARALLEL_IMAGE_REQUESTS;){const v=jn.shift(),{requestParameters:x,callback:T,cancelled:C}=v;C||(v.cancel=Er(x,T).cancel)}},g=Tn(o,(v,x,T,C)=>{d(),v?r(v):x&&function(z,R){typeof createImageBitmap=="function"?function(B,Z){const X=new Blob([new Uint8Array(B)],{type:"image/png"});createImageBitmap(X).then(H=>{Z(null,H)}).catch(H=>{Z(new Error(`Could not load image because of ${H.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(z,R):function(B,Z){const X=new Image;X.onload=()=>{Z(null,X),URL.revokeObjectURL(X.src),X.onload=null,window.requestAnimationFrame(()=>{X.src=jt})},X.onerror=()=>Z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const H=new Blob([new Uint8Array(B)],{type:"image/png"});X.src=B.byteLength?URL.createObjectURL(H):jt}(z,R)}(x,(z,R)=>{z!=null?r(z):R!=null&&r(null,R,{cacheControl:T,expires:C})})});return{cancel:()=>{g.cancel(),d()}}};function yn(o,r,a){a[o]&&a[o].indexOf(r)!==-1||(a[o]=a[o]||[],a[o].push(r))}function Vn(o,r,a){if(a&&a[o]){const d=a[o].indexOf(r);d!==-1&&a[o].splice(d,1)}}class Cr{constructor(r,a={}){N(this,a),this.type=r}}class Di extends Cr{constructor(r,a={}){super("error",N({error:r},a))}}class Dr{on(r,a){return this._listeners=this._listeners||{},yn(r,a,this._listeners),this}off(r,a){return Vn(r,a,this._listeners),Vn(r,a,this._oneTimeListeners),this}once(r,a){return this._oneTimeListeners=this._oneTimeListeners||{},yn(r,a,this._oneTimeListeners),this}fire(r,a){typeof r=="string"&&(r=new Cr(r,a||{}));const d=r.type;if(this.listens(d)){r.target=this;const g=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const T of g)T.call(this,r);const v=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const T of v)Vn(d,T,this._oneTimeListeners),T.call(this,r);const x=this._eventedParent;x&&(N(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(r))}else r instanceof Di&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,a){return this._eventedParent=r,this._eventedParentData=a,this}}var Ne={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class nt{constructor(r,a,d,g){this.message=(r?`${r}: `:"")+d,g&&(this.identifier=g),a!=null&&a.__line__&&(this.line=a.__line__)}}function zo(o){const r=o.value;return r?[new nt(o.key,r,"constants have been deprecated as of v8")]:[]}function xi(o,...r){for(const a of r)for(const d in a)o[d]=a[d];return o}function tn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function oi(o){if(Array.isArray(o))return o.map(oi);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const a in o)r[a]=oi(o[a]);return r}return tn(o)}class si extends Error{constructor(r,a){super(a),this.message=a,this.key=r}}class ai{constructor(r,a=[]){this.parent=r,this.bindings={};for(const[d,g]of a)this.bindings[d]=g}concat(r){return new ai(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Hr={kind:"null"},Qe={kind:"number"},Xt={kind:"string"},$t={kind:"boolean"},Ir={kind:"color"},uo={kind:"object"},Rt={kind:"value"},ho={kind:"collator"},Un={kind:"formatted"},Ms={kind:"padding"},sr={kind:"resolvedImage"};function Ur(o,r){return{kind:"array",itemType:o,N:r}}function pn(o){if(o.kind==="array"){const r=pn(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const Ps=[Hr,Qe,Xt,$t,Ir,Un,uo,Ur(Rt),Ms,sr];function vr(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!vr(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const a of Ps)if(!vr(a,r))return null}}return`Expected ${pn(o)} but found ${pn(r)} instead.`}function es(o,r){return r.some(a=>a.kind===o.kind)}function ts(o,r){return r.some(a=>a==="null"?o===null:a==="array"?Array.isArray(o):a==="object"?o&&!Array.isArray(o)&&typeof o=="object":a===typeof o)}var zs,ns={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ee(o){return(o=Math.round(o))<0?0:o>255?255:o}function D(o){return ee(o[o.length-1]==="%"?parseFloat(o)/100*255:parseInt(o))}function j(o){return(r=o[o.length-1]==="%"?parseFloat(o)/100:parseFloat(o))<0?0:r>1?1:r;var r}function K(o,r,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?o+(r-o)*a*6:2*a<1?r:3*a<2?o+(r-o)*(2/3-a)*6:o}try{zs={}.parseCSSColor=function(o){var r,a=o.replace(/ /g,"").toLowerCase();if(a in ns)return ns[a].slice();if(a[0]==="#")return a.length===4?(r=parseInt(a.substr(1),16))>=0&&r<=4095?[(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,1]:null:a.length===7&&(r=parseInt(a.substr(1),16))>=0&&r<=16777215?[(16711680&r)>>16,(65280&r)>>8,255&r,1]:null;var d=a.indexOf("("),g=a.indexOf(")");if(d!==-1&&g+1===a.length){var v=a.substr(0,d),x=a.substr(d+1,g-(d+1)).split(","),T=1;switch(v){case"rgba":if(x.length!==4)return null;T=j(x.pop());case"rgb":return x.length!==3?null:[D(x[0]),D(x[1]),D(x[2]),T];case"hsla":if(x.length!==4)return null;T=j(x.pop());case"hsl":if(x.length!==3)return null;var C=(parseFloat(x[0])%360+360)%360/360,z=j(x[1]),R=j(x[2]),B=R<=.5?R*(z+1):R+z-R*z,Z=2*R-B;return[ee(255*K(Z,B,C+1/3)),ee(255*K(Z,B,C)),ee(255*K(Z,B,C-1/3)),T];default:return null}}return null}}catch{}class Q{constructor(r,a,d,g=1){this.r=r,this.g=a,this.b=d,this.a=g}static parse(r){if(!r)return;if(r instanceof Q)return r;if(typeof r!="string")return;const a=zs(r);return a?new Q(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[r,a,d,g]=this.toArray();return`rgba(${Math.round(r)},${Math.round(a)},${Math.round(d)},${g})`}toArray(){const{r,g:a,b:d,a:g}=this;return g===0?[0,0,0,0]:[255*r/g,255*a/g,255*d/g,g]}}Q.black=new Q(0,0,0,1),Q.white=new Q(1,1,1,1),Q.transparent=new Q(0,0,0,0),Q.red=new Q(1,0,0,1);class he{constructor(r,a,d){this.sensitivity=r?a?"variant":"case":a?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,a){return this.collator.compare(r,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ve{constructor(r,a,d,g,v){this.text=r,this.image=a,this.scale=d,this.fontStack=g,this.textColor=v}}class me{constructor(r){this.sections=r}static fromString(r){return new me([new ve(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof me?r:me.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class fe{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof fe)return r;if(typeof r=="number")return new fe([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const a of r)if(typeof a!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new fe(r)}}toString(){return JSON.stringify(this.values)}}class _e{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new _e({name:r,available:!1}):null}}function Be(o,r,a,d){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof a=="number"&&a>=0&&a<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[o,r,a,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[o,r,a,d]:[o,r,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ge(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Q||o instanceof he||o instanceof me||o instanceof fe||o instanceof _e)return!0;if(Array.isArray(o)){for(const r of o)if(!Ge(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!Ge(o[r]))return!1;return!0}return!1}function Oe(o){if(o===null)return Hr;if(typeof o=="string")return Xt;if(typeof o=="boolean")return $t;if(typeof o=="number")return Qe;if(o instanceof Q)return Ir;if(o instanceof he)return ho;if(o instanceof me)return Un;if(o instanceof fe)return Ms;if(o instanceof _e)return sr;if(Array.isArray(o)){const r=o.length;let a;for(const d of o){const g=Oe(d);if(a){if(a===g)continue;a=Rt;break}a=g}return Ur(a||Rt,r)}return uo}function vt(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof Q||o instanceof me||o instanceof fe||o instanceof _e?o.toString():JSON.stringify(o)}class _t{constructor(r,a){this.type=r,this.value=a}static parse(r,a){if(r.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Ge(r[1]))return a.error("invalid value");const d=r[1];let g=Oe(d);const v=a.expectedType;return g.kind!=="array"||g.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(g=v),new _t(g,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class lt{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const It={string:Xt,number:Qe,boolean:$t,object:uo};class At{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");let d,g=1;const v=r[0];if(v==="array"){let T,C;if(r.length>2){const z=r[1];if(typeof z!="string"||!(z in It)||z==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);T=It[z],g++}else T=Rt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return a.error('The length argument to "array" must be a positive integer literal',2);C=r[2],g++}d=Ur(T,C)}else{if(!It[v])throw new Error(`Types doesn't contain name = ${v}`);d=It[v]}const x=[];for(;g<r.length;g++){const T=a.parse(r[g],g,Rt);if(!T)return null;x.push(T)}return new At(d,x)}evaluate(r){for(let a=0;a<this.args.length;a++){const d=this.args[a].evaluate(r);if(!vr(this.type,Oe(d)))return d;if(a===this.args.length-1)throw new lt(`Expected value to be of type ${pn(this.type)}, but found ${pn(Oe(d))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const on={"to-boolean":$t,"to-color":Ir,"to-number":Qe,"to-string":Xt};class Lt{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");const d=r[0];if(!on[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&r.length!==2)return a.error("Expected one argument.");const g=on[d],v=[];for(let x=1;x<r.length;x++){const T=a.parse(r[x],x,Rt);if(!T)return null;v.push(T)}return new Lt(g,v)}evaluate(r){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(r));if(this.type.kind==="color"){let a,d;for(const g of this.args){if(a=g.evaluate(r),d=null,a instanceof Q)return a;if(typeof a=="string"){const v=r.parseColor(a);if(v)return v}else if(Array.isArray(a)&&(d=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Be(a[0],a[1],a[2],a[3]),!d))return new Q(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new lt(d||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}if(this.type.kind==="padding"){let a;for(const d of this.args){a=d.evaluate(r);const g=fe.parse(a);if(g)return g}throw new lt(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}if(this.type.kind==="number"){let a=null;for(const d of this.args){if(a=d.evaluate(r),a===null)return 0;const g=Number(a);if(!isNaN(g))return g}throw new lt(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?me.fromString(vt(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?_e.fromString(vt(this.args[0].evaluate(r))):vt(this.args[0].evaluate(r))}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Zt=["Unknown","Point","LineString","Polygon"];class sn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Zt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let a=this._parseColorCache[r];return a||(a=this._parseColorCache[r]=Q.parse(r)),a}}class vn{constructor(r,a,d,g){this.name=r,this.type=a,this._evaluate=d,this.args=g}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,a){const d=r[0],g=vn.definitions[d];if(!g)return a.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,T=x.filter(([z])=>!Array.isArray(z)||z.length===r.length-1);let C=null;for(const[z,R]of T){C=new Rs(a.registry,a.path,null,a.scope);const B=[];let Z=!1;for(let X=1;X<r.length;X++){const H=r[X],ue=Array.isArray(z)?z[X-1]:z.type,le=C.parse(H,1+B.length,ue);if(!le){Z=!0;break}B.push(le)}if(!Z)if(Array.isArray(z)&&z.length!==B.length)C.error(`Expected ${z.length} arguments, but found ${B.length} instead.`);else{for(let X=0;X<B.length;X++){const H=Array.isArray(z)?z[X]:z.type,ue=B[X];C.concat(X+1).checkSubtype(H,ue.type)}if(C.errors.length===0)return new vn(d,v,R,B)}}if(T.length===1)a.errors.push(...C.errors);else{const z=(T.length?T:x).map(([B])=>{return Z=B,Array.isArray(Z)?`(${Z.map(pn).join(", ")})`:`(${pn(Z.type)}...)`;var Z}).join(" | "),R=[];for(let B=1;B<r.length;B++){const Z=a.parse(r[B],1+R.length);if(!Z)return null;R.push(pn(Z.type))}a.error(`Expected arguments of type ${z}, but found (${R.join(", ")}) instead.`)}return null}static register(r,a){vn.definitions=a;for(const d in a)r[d]=vn}}class _r{constructor(r,a,d){this.type=ho,this.locale=d,this.caseSensitive=r,this.diacriticSensitive=a}static parse(r,a){if(r.length!==2)return a.error("Expected one argument.");const d=r[1];if(typeof d!="object"||Array.isArray(d))return a.error("Collator options argument must be an object.");const g=a.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,$t);if(!g)return null;const v=a.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,$t);if(!v)return null;let x=null;return d.locale&&(x=a.parse(d.locale,1,Xt),!x)?null:new _r(g,v,x)}evaluate(r){return new he(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const An=8192;function Rr(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function As(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function pa(o,r){const a=(180+o[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,g=Math.pow(2,r.z);return[Math.round(a*g*An),Math.round(d*g*An)]}function _n(o,r,a){const d=o[0]-r[0],g=o[1]-r[1],v=o[0]-a[0],x=o[1]-a[1];return d*x-v*g==0&&d*v<=0&&g*x<=0}function lc(o,r){let a=!1;for(let x=0,T=r.length;x<T;x++){const C=r[x];for(let z=0,R=C.length;z<R-1;z++){if(_n(o,C[z],C[z+1]))return!1;(g=C[z])[1]>(d=o)[1]!=(v=C[z+1])[1]>d[1]&&d[0]<(v[0]-g[0])*(d[1]-g[1])/(v[1]-g[1])+g[0]&&(a=!a)}}var d,g,v;return a}function cc(o,r){for(let a=0;a<r.length;a++)if(lc(o,r[a]))return!0;return!1}function wu(o,r,a,d){const g=d[0]-a[0],v=d[1]-a[1],x=(o[0]-a[0])*v-g*(o[1]-a[1]),T=(r[0]-a[0])*v-g*(r[1]-a[1]);return x>0&&T<0||x<0&&T>0}function Su(o,r,a){for(const z of a)for(let R=0;R<z.length-1;++R)if((T=[(x=z[R+1])[0]-(v=z[R])[0],x[1]-v[1]])[0]*(C=[(g=r)[0]-(d=o)[0],g[1]-d[1]])[1]-T[1]*C[0]!=0&&wu(d,g,v,x)&&wu(v,x,d,g))return!0;var d,g,v,x,T,C;return!1}function uc(o,r){for(let a=0;a<o.length;++a)if(!lc(o[a],r))return!1;for(let a=0;a<o.length-1;++a)if(Su(o[a],o[a+1],r))return!1;return!0}function ih(o,r){for(let a=0;a<r.length;a++)if(uc(o,r[a]))return!0;return!1}function rs(o,r,a){const d=[];for(let g=0;g<o.length;g++){const v=[];for(let x=0;x<o[g].length;x++){const T=pa(o[g][x],a);Rr(r,T),v.push(T)}d.push(v)}return d}function ma(o,r,a){const d=[];for(let g=0;g<o.length;g++){const v=rs(o[g],r,a);d.push(v)}return d}function Tu(o,r,a,d){if(o[0]<a[0]||o[0]>a[2]){const g=.5*d;let v=o[0]-a[0]>g?-d:a[0]-o[0]>g?d:0;v===0&&(v=o[0]-a[2]>g?-d:a[2]-o[0]>g?d:0),o[0]+=v}Rr(r,o)}function ku(o,r,a,d){const g=Math.pow(2,d.z)*An,v=[d.x*An,d.y*An],x=[];for(const T of o)for(const C of T){const z=[C.x+v[0],C.y+v[1]];Tu(z,r,a,g),x.push(z)}return x}function dc(o,r,a,d){const g=Math.pow(2,d.z)*An,v=[d.x*An,d.y*An],x=[];for(const C of o){const z=[];for(const R of C){const B=[R.x+v[0],R.y+v[1]];Rr(r,B),z.push(B)}x.push(z)}if(r[2]-r[0]<=g/2){(T=r)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const C of x)for(const z of C)Tu(z,r,a,g)}var T;return x}class is{constructor(r,a){this.type=$t,this.geojson=r,this.geometries=a}static parse(r,a){if(r.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Ge(r[1])){const d=r[1];if(d.type==="FeatureCollection")for(let g=0;g<d.features.length;++g){const v=d.features[g].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new is(d,d.features[g].geometry)}else if(d.type==="Feature"){const g=d.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new is(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new is(d,d)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(a,d){const g=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(d.type==="Polygon"){const T=rs(d.coordinates,v,x),C=ku(a.geometry(),g,v,x);if(!As(g,v))return!1;for(const z of C)if(!lc(z,T))return!1}if(d.type==="MultiPolygon"){const T=ma(d.coordinates,v,x),C=ku(a.geometry(),g,v,x);if(!As(g,v))return!1;for(const z of C)if(!cc(z,T))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(a,d){const g=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(d.type==="Polygon"){const T=rs(d.coordinates,v,x),C=dc(a.geometry(),g,v,x);if(!As(g,v))return!1;for(const z of C)if(!uc(z,T))return!1}if(d.type==="MultiPolygon"){const T=ma(d.coordinates,v,x),C=dc(a.geometry(),g,v,x);if(!As(g,v))return!1;for(const z of C)if(!ih(z,T))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function ga(o){if(o instanceof vn&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof is)return!1;let r=!0;return o.eachChild(a=>{r&&!ga(a)&&(r=!1)}),r}function Ds(o){if(o instanceof vn&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(a=>{r&&!Ds(a)&&(r=!1)}),r}function ya(o,r){if(o instanceof vn&&r.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild(d=>{a&&!ya(d,r)&&(a=!1)}),a}class ul{constructor(r,a){this.type=a.type,this.name=r,this.boundExpression=a}static parse(r,a){if(r.length!==2||typeof r[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const d=r[1];return a.scope.has(d)?new ul(d,a.scope.get(d)):a.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class Rs{constructor(r,a=[],d,g=new ai,v=[]){this.registry=r,this.path=a,this.key=a.map(x=>`[${x}]`).join(""),this.scope=g,this.errors=v,this.expectedType=d}parse(r,a,d,g,v={}){return a?this.concat(a,d,g)._parse(r,v):this._parse(r,v)}_parse(r,a){function d(g,v,x){return x==="assert"?new At(v,[g]):x==="coerce"?new Lt(v,[g]):g}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=r[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[g];if(v){let x=v.parse(r,this);if(!x)return null;if(this.expectedType){const T=this.expectedType,C=x.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||C.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||C.kind!=="value"&&C.kind!=="string")if(T.kind!=="padding"||C.kind!=="value"&&C.kind!=="number"&&C.kind!=="array"){if(this.checkSubtype(T,C))return null}else x=d(x,T,a.typeAnnotation||"coerce");else x=d(x,T,a.typeAnnotation||"coerce");else x=d(x,T,a.typeAnnotation||"assert")}if(!(x instanceof _t)&&x.type.kind!=="resolvedImage"&&hc(x)){const T=new sn;try{x=new _t(x.type,x.evaluate(T))}catch(C){return this.error(C.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,a,d){const g=typeof r=="number"?this.path.concat(r):this.path,v=d?this.scope.concat(d):this.scope;return new Rs(this.registry,g,a||null,v,this.errors)}error(r,...a){const d=`${this.key}${a.map(g=>`[${g}]`).join("")}`;this.errors.push(new si(d,r))}checkSubtype(r,a){const d=vr(r,a);return d&&this.error(d),d}}function hc(o){if(o instanceof ul)return hc(o.boundExpression);if(o instanceof vn&&o.name==="error"||o instanceof _r||o instanceof is)return!1;const r=o instanceof Lt||o instanceof At;let a=!0;return o.eachChild(d=>{a=r?a&&hc(d):a&&d instanceof _t}),!!a&&ga(o)&&ya(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ls(o,r){const a=o.length-1;let d,g,v=0,x=a,T=0;for(;v<=x;)if(T=Math.floor((v+x)/2),d=o[T],g=o[T+1],d<=r){if(T===a||r<g)return T;v=T+1}else{if(!(d>r))throw new lt("Input is not a number.");x=T-1}return 0}class va{constructor(r,a,d){this.type=r,this.input=a,this.labels=[],this.outputs=[];for(const[g,v]of d)this.labels.push(g),this.outputs.push(v)}static parse(r,a){if(r.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return a.error("Expected an even number of arguments.");const d=a.parse(r[1],1,Qe);if(!d)return null;const g=[];let v=null;a.expectedType&&a.expectedType.kind!=="value"&&(v=a.expectedType);for(let x=1;x<r.length;x+=2){const T=x===1?-1/0:r[x],C=r[x+1],z=x,R=x+1;if(typeof T!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(g.length&&g[g.length-1][0]>=T)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const B=a.parse(C,R,v);if(!B)return null;v=v||B.type,g.push([T,B])}return new va(v,d,g)}evaluate(r){const a=this.labels,d=this.outputs;if(a.length===1)return d[0].evaluate(r);const g=this.input.evaluate(r);if(g<=a[0])return d[0].evaluate(r);const v=a.length;return g>=a[v-1]?d[v-1].evaluate(r):d[Ls(a,g)].evaluate(r)}eachChild(r){r(this.input);for(const a of this.outputs)r(a)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function On(o,r,a){return o*(1-a)+r*a}var _a=Object.freeze({__proto__:null,number:On,color:function(o,r,a){return new Q(On(o.r,r.r,a),On(o.g,r.g,a),On(o.b,r.b,a),On(o.a,r.a,a))},array:function(o,r,a){return o.map((d,g)=>On(d,r[g],a))},padding:function(o,r,a){const d=o.values,g=r.values;return new fe([On(d[0],g[0],a),On(d[1],g[1],a),On(d[2],g[2],a),On(d[3],g[3],a)])}});const xa=.95047,dl=1.08883,ba=4/29,Os=6/29,Eu=3*Os*Os,Cu=Math.PI/180,fc=180/Math.PI;function hl(o){return o>.008856451679035631?Math.pow(o,1/3):o/Eu+ba}function fo(o){return o>Os?o*o*o:Eu*(o-ba)}function os(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function pc(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function un(o){const r=pc(o.r),a=pc(o.g),d=pc(o.b),g=hl((.4124564*r+.3575761*a+.1804375*d)/xa),v=hl((.2126729*r+.7151522*a+.072175*d)/1);return{l:116*v-16,a:500*(g-v),b:200*(v-hl((.0193339*r+.119192*a+.9503041*d)/dl)),alpha:o.a}}function Iu(o){let r=(o.l+16)/116,a=isNaN(o.a)?r:r+o.a/500,d=isNaN(o.b)?r:r-o.b/200;return r=1*fo(r),a=xa*fo(a),d=dl*fo(d),new Q(os(3.2404542*a-1.5371385*r-.4985314*d),os(-.969266*a+1.8760108*r+.041556*d),os(.0556434*a-.2040259*r+1.0572252*d),o.alpha)}function Mu(o,r,a){const d=r-o;return o+a*(d>180||d<-180?d-360*Math.round(d/360):d)}const wa={forward:un,reverse:Iu,interpolate:function(o,r,a){return{l:On(o.l,r.l,a),a:On(o.a,r.a,a),b:On(o.b,r.b,a),alpha:On(o.alpha,r.alpha,a)}}},Sa={forward:function(o){const{l:r,a,b:d}=un(o),g=Math.atan2(d,a)*fc;return{h:g<0?g+360:g,c:Math.sqrt(a*a+d*d),l:r,alpha:o.a}},reverse:function(o){const r=o.h*Cu,a=o.c;return Iu({l:o.l,a:Math.cos(r)*a,b:Math.sin(r)*a,alpha:o.alpha})},interpolate:function(o,r,a){return{h:Mu(o.h,r.h,a),c:On(o.c,r.c,a),l:On(o.l,r.l,a),alpha:On(o.alpha,r.alpha,a)}}};var mc=Object.freeze({__proto__:null,lab:wa,hcl:Sa});class li{constructor(r,a,d,g,v){this.type=r,this.operator=a,this.interpolation=d,this.input=g,this.labels=[],this.outputs=[];for(const[x,T]of v)this.labels.push(x),this.outputs.push(T)}static interpolationFactor(r,a,d,g){let v=0;if(r.name==="exponential")v=ie(a,r.base,d,g);else if(r.name==="linear")v=ie(a,1,d,g);else if(r.name==="cubic-bezier"){const x=r.controlPoints;v=new b(x[0],x[1],x[2],x[3]).solve(ie(a,1,d,g))}return v}static parse(r,a){let[d,g,v,...x]=r;if(!Array.isArray(g)||g.length===0)return a.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const z=g[1];if(typeof z!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:z}}else{if(g[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const z=g.slice(1);if(z.length!==4||z.some(R=>typeof R!="number"||R<0||R>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:z}}}if(r.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(v=a.parse(v,2,Qe),!v)return null;const T=[];let C=null;d==="interpolate-hcl"||d==="interpolate-lab"?C=Ir:a.expectedType&&a.expectedType.kind!=="value"&&(C=a.expectedType);for(let z=0;z<x.length;z+=2){const R=x[z],B=x[z+1],Z=z+3,X=z+4;if(typeof R!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(T.length&&T[T.length-1][0]>=R)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Z);const H=a.parse(B,X,C);if(!H)return null;C=C||H.type,T.push([R,H])}return C.kind==="number"||C.kind==="color"||C.kind==="padding"||C.kind==="array"&&C.itemType.kind==="number"&&typeof C.N=="number"?new li(C,d,g,v,T):a.error(`Type ${pn(C)} is not interpolatable.`)}evaluate(r){const a=this.labels,d=this.outputs;if(a.length===1)return d[0].evaluate(r);const g=this.input.evaluate(r);if(g<=a[0])return d[0].evaluate(r);const v=a.length;if(g>=a[v-1])return d[v-1].evaluate(r);const x=Ls(a,g),T=li.interpolationFactor(this.interpolation,g,a[x],a[x+1]),C=d[x].evaluate(r),z=d[x+1].evaluate(r);return this.operator==="interpolate"?_a[this.type.kind.toLowerCase()](C,z,T):this.operator==="interpolate-hcl"?Sa.reverse(Sa.interpolate(Sa.forward(C),Sa.forward(z),T)):wa.reverse(wa.interpolate(wa.forward(C),wa.forward(z),T))}eachChild(r){r(this.input);for(const a of this.outputs)r(a)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function ie(o,r,a,d){const g=d-a,v=o-a;return g===0?0:r===1?v/g:(Math.pow(r,v)-1)/(Math.pow(r,g)-1)}class xe{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expectected at least one argument.");let d=null;const g=a.expectedType;g&&g.kind!=="value"&&(d=g);const v=[];for(const T of r.slice(1)){const C=a.parse(T,1+v.length,d,void 0,{typeAnnotation:"omit"});if(!C)return null;d=d||C.type,v.push(C)}if(!d)throw new Error("No output type");const x=g&&v.some(T=>vr(g,T.type));return new xe(x?Rt:d,v)}evaluate(r){let a,d=null,g=0;for(const v of this.args)if(g++,d=v.evaluate(r),d&&d instanceof _e&&!d.available&&(a||(a=d.name),d=null,g===this.args.length&&(d=a)),d!==null)break;return d}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class Le{constructor(r,a){this.type=a.type,this.bindings=[].concat(r),this.result=a}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const a of this.bindings)r(a[1]);r(this.result)}static parse(r,a){if(r.length<4)return a.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const d=[];for(let v=1;v<r.length-1;v+=2){const x=r[v];if(typeof x!="string")return a.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return a.error("Variable names must contain only alphanumeric characters or '_'.",v);const T=a.parse(r[v+1],v+1);if(!T)return null;d.push([x,T])}const g=a.parse(r[r.length-1],r.length-1,a.expectedType,d);return g?new Le(d,g):null}outputDefined(){return this.result.outputDefined()}}class xt{constructor(r,a,d){this.type=r,this.index=a,this.input=d}static parse(r,a){if(r.length!==3)return a.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=a.parse(r[1],1,Qe),g=a.parse(r[2],2,Ur(a.expectedType||Rt));return d&&g?new xt(g.type.itemType,d,g):null}evaluate(r){const a=this.index.evaluate(r),d=this.input.evaluate(r);if(a<0)throw new lt(`Array index out of bounds: ${a} < 0.`);if(a>=d.length)throw new lt(`Array index out of bounds: ${a} > ${d.length-1}.`);if(a!==Math.floor(a))throw new lt(`Array index must be an integer, but found ${a} instead.`);return d[a]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class an{constructor(r,a){this.type=$t,this.needle=r,this.haystack=a}static parse(r,a){if(r.length!==3)return a.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=a.parse(r[1],1,Rt),g=a.parse(r[2],2,Rt);return d&&g?es(d.type,[$t,Xt,Qe,Hr,Rt])?new an(d,g):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${pn(d.type)} instead`):null}evaluate(r){const a=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!d)return!1;if(!ts(a,["boolean","string","number","null"]))throw new lt(`Expected first argument to be of type boolean, string, number or null, but found ${pn(Oe(a))} instead.`);if(!ts(d,["string","array"]))throw new lt(`Expected second argument to be of type array or string, but found ${pn(Oe(d))} instead.`);return d.indexOf(a)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class mn{constructor(r,a,d){this.type=Qe,this.needle=r,this.haystack=a,this.fromIndex=d}static parse(r,a){if(r.length<=2||r.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=a.parse(r[1],1,Rt),g=a.parse(r[2],2,Rt);if(!d||!g)return null;if(!es(d.type,[$t,Xt,Qe,Hr,Rt]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${pn(d.type)} instead`);if(r.length===4){const v=a.parse(r[3],3,Qe);return v?new mn(d,g,v):null}return new mn(d,g)}evaluate(r){const a=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!ts(a,["boolean","string","number","null"]))throw new lt(`Expected first argument to be of type boolean, string, number or null, but found ${pn(Oe(a))} instead.`);if(!ts(d,["string","array"]))throw new lt(`Expected second argument to be of type array or string, but found ${pn(Oe(d))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(r);return d.indexOf(a,g)}return d.indexOf(a)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Dn{constructor(r,a,d,g,v,x){this.inputType=r,this.type=a,this.input=d,this.cases=g,this.outputs=v,this.otherwise=x}static parse(r,a){if(r.length<5)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return a.error("Expected an even number of arguments.");let d,g;a.expectedType&&a.expectedType.kind!=="value"&&(g=a.expectedType);const v={},x=[];for(let z=2;z<r.length-1;z+=2){let R=r[z];const B=r[z+1];Array.isArray(R)||(R=[R]);const Z=a.concat(z);if(R.length===0)return Z.error("Expected at least one branch label.");for(const H of R){if(typeof H!="number"&&typeof H!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof H=="number"&&Math.abs(H)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof H=="number"&&Math.floor(H)!==H)return Z.error("Numeric branch labels must be integer values.");if(d){if(Z.checkSubtype(d,Oe(H)))return null}else d=Oe(H);if(v[String(H)]!==void 0)return Z.error("Branch labels must be unique.");v[String(H)]=x.length}const X=a.parse(B,z,g);if(!X)return null;g=g||X.type,x.push(X)}const T=a.parse(r[1],1,Rt);if(!T)return null;const C=a.parse(r[r.length-1],r.length-1,g);return C?T.type.kind!=="value"&&a.concat(1).checkSubtype(d,T.type)?null:new Dn(d,g,T,v,x,C):null}evaluate(r){const a=this.input.evaluate(r);return(Oe(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class nn{constructor(r,a,d){this.type=r,this.branches=a,this.otherwise=d}static parse(r,a){if(r.length<4)return a.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return a.error("Expected an odd number of arguments.");let d;a.expectedType&&a.expectedType.kind!=="value"&&(d=a.expectedType);const g=[];for(let x=1;x<r.length-1;x+=2){const T=a.parse(r[x],x,$t);if(!T)return null;const C=a.parse(r[x+1],x+1,d);if(!C)return null;g.push([T,C]),d=d||C.type}const v=a.parse(r[r.length-1],r.length-1,d);if(!v)return null;if(!d)throw new Error("Can't infer output type");return new nn(d,g,v)}evaluate(r){for(const[a,d]of this.branches)if(a.evaluate(r))return d.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[a,d]of this.branches)r(a),r(d);r(this.otherwise)}outputDefined(){return this.branches.every(([r,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class Cn{constructor(r,a,d,g){this.type=r,this.input=a,this.beginIndex=d,this.endIndex=g}static parse(r,a){if(r.length<=2||r.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=a.parse(r[1],1,Rt),g=a.parse(r[2],2,Qe);if(!d||!g)return null;if(!es(d.type,[Ur(Rt),Xt,Rt]))return a.error(`Expected first argument to be of type array or string, but found ${pn(d.type)} instead`);if(r.length===4){const v=a.parse(r[3],3,Qe);return v?new Cn(d.type,d,g,v):null}return new Cn(d.type,d,g)}evaluate(r){const a=this.input.evaluate(r),d=this.beginIndex.evaluate(r);if(!ts(a,["string","array"]))throw new lt(`Expected first argument to be of type array or string, but found ${pn(Oe(a))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(r);return a.slice(d,g)}return a.slice(d)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function ci(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Yr(o,r,a,d){return d.compare(r,a)===0}function Xi(o,r,a){const d=o!=="=="&&o!=="!=";return class j5{constructor(v,x,T){this.type=$t,this.lhs=v,this.rhs=x,this.collator=T,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const T=v[0];let C=x.parse(v[1],1,Rt);if(!C)return null;if(!ci(T,C.type))return x.concat(1).error(`"${T}" comparisons are not supported for type '${pn(C.type)}'.`);let z=x.parse(v[2],2,Rt);if(!z)return null;if(!ci(T,z.type))return x.concat(2).error(`"${T}" comparisons are not supported for type '${pn(z.type)}'.`);if(C.type.kind!==z.type.kind&&C.type.kind!=="value"&&z.type.kind!=="value")return x.error(`Cannot compare types '${pn(C.type)}' and '${pn(z.type)}'.`);d&&(C.type.kind==="value"&&z.type.kind!=="value"?C=new At(z.type,[C]):C.type.kind!=="value"&&z.type.kind==="value"&&(z=new At(C.type,[z])));let R=null;if(v.length===4){if(C.type.kind!=="string"&&z.type.kind!=="string"&&C.type.kind!=="value"&&z.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(R=x.parse(v[3],3,ho),!R)return null}return new j5(C,z,R)}evaluate(v){const x=this.lhs.evaluate(v),T=this.rhs.evaluate(v);if(d&&this.hasUntypedArgument){const C=Oe(x),z=Oe(T);if(C.kind!==z.kind||C.kind!=="string"&&C.kind!=="number")throw new lt(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${C.kind}, ${z.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const C=Oe(x),z=Oe(T);if(C.kind!=="string"||z.kind!=="string")return r(v,x,T)}return this.collator?a(v,x,T,this.collator.evaluate(v)):r(v,x,T)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const gc=Xi("==",function(o,r,a){return r===a},Yr),yc=Xi("!=",function(o,r,a){return r!==a},function(o,r,a,d){return!Yr(0,r,a,d)}),Pu=Xi("<",function(o,r,a){return r<a},function(o,r,a,d){return d.compare(r,a)<0}),U0=Xi(">",function(o,r,a){return r>a},function(o,r,a,d){return d.compare(r,a)>0}),G0=Xi("<=",function(o,r,a){return r<=a},function(o,r,a,d){return d.compare(r,a)<=0}),W0=Xi(">=",function(o,r,a){return r>=a},function(o,r,a,d){return d.compare(r,a)>=0});class oh{constructor(r,a,d,g,v){this.type=Xt,this.number=r,this.locale=a,this.currency=d,this.minFractionDigits=g,this.maxFractionDigits=v}static parse(r,a){if(r.length!==3)return a.error("Expected two arguments.");const d=a.parse(r[1],1,Qe);if(!d)return null;const g=r[2];if(typeof g!="object"||Array.isArray(g))return a.error("NumberFormat options argument must be an object.");let v=null;if(g.locale&&(v=a.parse(g.locale,1,Xt),!v))return null;let x=null;if(g.currency&&(x=a.parse(g.currency,1,Xt),!x))return null;let T=null;if(g["min-fraction-digits"]&&(T=a.parse(g["min-fraction-digits"],1,Qe),!T))return null;let C=null;return g["max-fraction-digits"]&&(C=a.parse(g["max-fraction-digits"],1,Qe),!C)?null:new oh(d,v,x,T,C)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class zu{constructor(r){this.type=Un,this.sections=r}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");const d=r[1];if(!Array.isArray(d)&&typeof d=="object")return a.error("First argument must be an image or text section.");const g=[];let v=!1;for(let x=1;x<=r.length-1;++x){const T=r[x];if(v&&typeof T=="object"&&!Array.isArray(T)){v=!1;let C=null;if(T["font-scale"]&&(C=a.parse(T["font-scale"],1,Qe),!C))return null;let z=null;if(T["text-font"]&&(z=a.parse(T["text-font"],1,Ur(Xt)),!z))return null;let R=null;if(T["text-color"]&&(R=a.parse(T["text-color"],1,Ir),!R))return null;const B=g[g.length-1];B.scale=C,B.font=z,B.textColor=R}else{const C=a.parse(r[x],1,Rt);if(!C)return null;const z=C.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,g.push({content:C,scale:null,font:null,textColor:null})}}return new zu(g)}evaluate(r){return new me(this.sections.map(a=>{const d=a.content.evaluate(r);return Oe(d)===sr?new ve("",d,null,null,null):new ve(vt(d),null,a.scale?a.scale.evaluate(r):null,a.font?a.font.evaluate(r).join(","):null,a.textColor?a.textColor.evaluate(r):null)}))}eachChild(r){for(const a of this.sections)r(a.content),a.scale&&r(a.scale),a.font&&r(a.font),a.textColor&&r(a.textColor)}outputDefined(){return!1}}class sh{constructor(r){this.type=sr,this.input=r}static parse(r,a){if(r.length!==2)return a.error("Expected two arguments.");const d=a.parse(r[1],1,Xt);return d?new sh(d):a.error("No image name provided.")}evaluate(r){const a=this.input.evaluate(r),d=_e.fromString(a);return d&&r.availableImages&&(d.available=r.availableImages.indexOf(a)>-1),d}eachChild(r){r(this.input)}outputDefined(){return!1}}class ah{constructor(r){this.type=Qe,this.input=r}static parse(r,a){if(r.length!==2)return a.error(`Expected 1 argument, but found ${r.length-1} instead.`);const d=a.parse(r[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${pn(d.type)} instead.`):new ah(d):null}evaluate(r){const a=this.input.evaluate(r);if(typeof a=="string"||Array.isArray(a))return a.length;throw new lt(`Expected value to be of type string or array, but found ${pn(Oe(a))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const fl={"==":gc,"!=":yc,">":U0,"<":Pu,">=":W0,"<=":G0,array:At,at:xt,boolean:At,case:nn,coalesce:xe,collator:_r,format:zu,image:sh,in:an,"index-of":mn,interpolate:li,"interpolate-hcl":li,"interpolate-lab":li,length:ah,let:Le,literal:_t,match:Dn,number:At,"number-format":oh,object:At,slice:Cn,step:va,string:At,"to-boolean":Lt,"to-color":Lt,"to-number":Lt,"to-string":Lt,var:ul,within:is};function Wp(o,[r,a,d,g]){r=r.evaluate(o),a=a.evaluate(o),d=d.evaluate(o);const v=g?g.evaluate(o):1,x=Be(r,a,d,v);if(x)throw new lt(x);return new Q(r/255*v,a/255*v,d/255*v,v)}function Zp(o,r){return o in r}function Au(o,r){const a=r[o];return a===void 0?null:a}function Ta(o){return{type:o}}function qp(o){return{result:"success",value:o}}function pl(o){return{result:"error",value:o}}function Gn(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Xp(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function rn(o){return!!o.expression&&o.expression.interpolated}function fn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Bn(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Zn(o){return o}function vc(o,r){const a=r.type==="color",d=o.stops&&typeof o.stops[0][0]=="object",g=d||!(d||o.property!==void 0),v=o.type||(rn(r)?"exponential":"interval");if(a||r.type==="padding"){const z=a?Q.parse:fe.parse;(o=xi({},o)).stops&&(o.stops=o.stops.map(R=>[R[0],z(R[1])])),o.default=z(o.default?o.default:r.default)}if(o.colorSpace&&o.colorSpace!=="rgb"&&!mc[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let x,T,C;if(v==="exponential")x=Hp;else if(v==="interval")x=q0;else if(v==="categorical"){x=Z0,T=Object.create(null);for(const z of o.stops)T[z[0]]=z[1];C=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);x=X0}if(d){const z={},R=[];for(let X=0;X<o.stops.length;X++){const H=o.stops[X],ue=H[0].zoom;z[ue]===void 0&&(z[ue]={zoom:ue,type:o.type,property:o.property,default:o.default,stops:[]},R.push(ue)),z[ue].stops.push([H[0].value,H[1]])}const B=[];for(const X of R)B.push([z[X].zoom,vc(z[X],r)]);const Z={name:"linear"};return{kind:"composite",interpolationType:Z,interpolationFactor:li.interpolationFactor.bind(void 0,Z),zoomStops:B.map(X=>X[0]),evaluate:({zoom:X},H)=>Hp({stops:B,base:o.base},r,X).evaluate(X,H)}}if(g){const z=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:li.interpolationFactor.bind(void 0,z),zoomStops:o.stops.map(R=>R[0]),evaluate:({zoom:R})=>x(o,r,R,T,C)}}return{kind:"source",evaluate(z,R){const B=R&&R.properties?R.properties[o.property]:void 0;return B===void 0?ml(o.default,r.default):x(o,r,B,T,C)}}}function ml(o,r,a){return o!==void 0?o:r!==void 0?r:a!==void 0?a:void 0}function Z0(o,r,a,d,g){return ml(typeof a===g?d[a]:void 0,o.default,r.default)}function q0(o,r,a){if(fn(a)!=="number")return ml(o.default,r.default);const d=o.stops.length;if(d===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[d-1][0])return o.stops[d-1][1];const g=Ls(o.stops.map(v=>v[0]),a);return o.stops[g][1]}function Hp(o,r,a){const d=o.base!==void 0?o.base:1;if(fn(a)!=="number")return ml(o.default,r.default);const g=o.stops.length;if(g===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[g-1][0])return o.stops[g-1][1];const v=Ls(o.stops.map(R=>R[0]),a),x=function(R,B,Z,X){const H=X-Z,ue=R-Z;return H===0?0:B===1?ue/H:(Math.pow(B,ue)-1)/(Math.pow(B,H)-1)}(a,d,o.stops[v][0],o.stops[v+1][0]),T=o.stops[v][1],C=o.stops[v+1][1];let z=_a[r.type]||Zn;if(o.colorSpace&&o.colorSpace!=="rgb"){const R=mc[o.colorSpace];z=(B,Z)=>R.reverse(R.interpolate(R.forward(B),R.forward(Z),x))}return typeof T.evaluate=="function"?{evaluate(...R){const B=T.evaluate.apply(void 0,R),Z=C.evaluate.apply(void 0,R);if(B!==void 0&&Z!==void 0)return z(B,Z,x)}}:z(T,C,x)}function X0(o,r,a){switch(r.type){case"color":a=Q.parse(a);break;case"formatted":a=me.fromString(a.toString());break;case"resolvedImage":a=_e.fromString(a.toString());break;case"padding":a=fe.parse(a);break;default:fn(a)===r.type||r.type==="enum"&&r.values[a]||(a=void 0)}return ml(a,o.default,r.default)}vn.register(fl,{error:[{kind:"error"},[Xt],(o,[r])=>{throw new lt(r.evaluate(o))}],typeof:[Xt,[Rt],(o,[r])=>pn(Oe(r.evaluate(o)))],"to-rgba":[Ur(Qe,4),[Ir],(o,[r])=>r.evaluate(o).toArray()],rgb:[Ir,[Qe,Qe,Qe],Wp],rgba:[Ir,[Qe,Qe,Qe,Qe],Wp],has:{type:$t,overloads:[[[Xt],(o,[r])=>Zp(r.evaluate(o),o.properties())],[[Xt,uo],(o,[r,a])=>Zp(r.evaluate(o),a.evaluate(o))]]},get:{type:Rt,overloads:[[[Xt],(o,[r])=>Au(r.evaluate(o),o.properties())],[[Xt,uo],(o,[r,a])=>Au(r.evaluate(o),a.evaluate(o))]]},"feature-state":[Rt,[Xt],(o,[r])=>Au(r.evaluate(o),o.featureState||{})],properties:[uo,[],o=>o.properties()],"geometry-type":[Xt,[],o=>o.geometryType()],id:[Rt,[],o=>o.id()],zoom:[Qe,[],o=>o.globals.zoom],"heatmap-density":[Qe,[],o=>o.globals.heatmapDensity||0],"line-progress":[Qe,[],o=>o.globals.lineProgress||0],accumulated:[Rt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Qe,Ta(Qe),(o,r)=>{let a=0;for(const d of r)a+=d.evaluate(o);return a}],"*":[Qe,Ta(Qe),(o,r)=>{let a=1;for(const d of r)a*=d.evaluate(o);return a}],"-":{type:Qe,overloads:[[[Qe,Qe],(o,[r,a])=>r.evaluate(o)-a.evaluate(o)],[[Qe],(o,[r])=>-r.evaluate(o)]]},"/":[Qe,[Qe,Qe],(o,[r,a])=>r.evaluate(o)/a.evaluate(o)],"%":[Qe,[Qe,Qe],(o,[r,a])=>r.evaluate(o)%a.evaluate(o)],ln2:[Qe,[],()=>Math.LN2],pi:[Qe,[],()=>Math.PI],e:[Qe,[],()=>Math.E],"^":[Qe,[Qe,Qe],(o,[r,a])=>Math.pow(r.evaluate(o),a.evaluate(o))],sqrt:[Qe,[Qe],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Qe,[Qe],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Qe,[Qe],(o,[r])=>Math.log(r.evaluate(o))],log2:[Qe,[Qe],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Qe,[Qe],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Qe,[Qe],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Qe,[Qe],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Qe,[Qe],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Qe,[Qe],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Qe,[Qe],(o,[r])=>Math.atan(r.evaluate(o))],min:[Qe,Ta(Qe),(o,r)=>Math.min(...r.map(a=>a.evaluate(o)))],max:[Qe,Ta(Qe),(o,r)=>Math.max(...r.map(a=>a.evaluate(o)))],abs:[Qe,[Qe],(o,[r])=>Math.abs(r.evaluate(o))],round:[Qe,[Qe],(o,[r])=>{const a=r.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[Qe,[Qe],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Qe,[Qe],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[$t,[Xt,Rt],(o,[r,a])=>o.properties()[r.value]===a.value],"filter-id-==":[$t,[Rt],(o,[r])=>o.id()===r.value],"filter-type-==":[$t,[Xt],(o,[r])=>o.geometryType()===r.value],"filter-<":[$t,[Xt,Rt],(o,[r,a])=>{const d=o.properties()[r.value],g=a.value;return typeof d==typeof g&&d<g}],"filter-id-<":[$t,[Rt],(o,[r])=>{const a=o.id(),d=r.value;return typeof a==typeof d&&a<d}],"filter->":[$t,[Xt,Rt],(o,[r,a])=>{const d=o.properties()[r.value],g=a.value;return typeof d==typeof g&&d>g}],"filter-id->":[$t,[Rt],(o,[r])=>{const a=o.id(),d=r.value;return typeof a==typeof d&&a>d}],"filter-<=":[$t,[Xt,Rt],(o,[r,a])=>{const d=o.properties()[r.value],g=a.value;return typeof d==typeof g&&d<=g}],"filter-id-<=":[$t,[Rt],(o,[r])=>{const a=o.id(),d=r.value;return typeof a==typeof d&&a<=d}],"filter->=":[$t,[Xt,Rt],(o,[r,a])=>{const d=o.properties()[r.value],g=a.value;return typeof d==typeof g&&d>=g}],"filter-id->=":[$t,[Rt],(o,[r])=>{const a=o.id(),d=r.value;return typeof a==typeof d&&a>=d}],"filter-has":[$t,[Rt],(o,[r])=>r.value in o.properties()],"filter-has-id":[$t,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[$t,[Ur(Xt)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[$t,[Ur(Rt)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[$t,[Xt,Ur(Rt)],(o,[r,a])=>a.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[$t,[Xt,Ur(Rt)],(o,[r,a])=>function(d,g,v,x){for(;v<=x;){const T=v+x>>1;if(g[T]===d)return!0;g[T]>d?x=T-1:v=T+1}return!1}(o.properties()[r.value],a.value,0,a.value.length-1)],all:{type:$t,overloads:[[[$t,$t],(o,[r,a])=>r.evaluate(o)&&a.evaluate(o)],[Ta($t),(o,r)=>{for(const a of r)if(!a.evaluate(o))return!1;return!0}]]},any:{type:$t,overloads:[[[$t,$t],(o,[r,a])=>r.evaluate(o)||a.evaluate(o)],[Ta($t),(o,r)=>{for(const a of r)if(a.evaluate(o))return!0;return!1}]]},"!":[$t,[$t],(o,[r])=>!r.evaluate(o)],"is-supported-script":[$t,[Xt],(o,[r])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(r.evaluate(o))}],upcase:[Xt,[Xt],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[Xt,[Xt],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[Xt,Ta(Rt),(o,r)=>r.map(a=>vt(a.evaluate(o))).join("")],"resolved-locale":[Xt,[ho],(o,[r])=>r.evaluate(o).resolvedLocale()]});class Du{constructor(r,a){this.expression=r,this._warningHistory={},this._evaluator=new sn,this._defaultValue=a?function(d){return d.type==="color"&&Bn(d.default)?new Q(0,0,0,0):d.type==="color"?Q.parse(d.default)||null:d.type==="padding"?fe.parse(d.default)||null:d.default===void 0?null:d.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(r,a,d,g,v,x){return this._evaluator.globals=r,this._evaluator.feature=a,this._evaluator.featureState=d,this._evaluator.canonical=g,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(r,a,d,g,v,x){this._evaluator.globals=r,this._evaluator.feature=a||null,this._evaluator.featureState=d||null,this._evaluator.canonical=g,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new lt(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function _c(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in fl}function xc(o,r){const a=new Rs(fl,[],r?function(g){const v={color:Ir,string:Xt,number:Qe,enum:Xt,boolean:$t,formatted:Un,padding:Ms,resolvedImage:sr};return g.type==="array"?Ur(v[g.value]||Rt,g.length):v[g.type]}(r):void 0),d=a.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?qp(new Du(d,r)):pl(a.errors)}class bc{constructor(r,a){this.kind=r,this._styleExpression=a,this.isStateDependent=r!=="constant"&&!Ds(a.expression)}evaluateWithoutErrorHandling(r,a,d,g,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,a,d,g,v,x)}evaluate(r,a,d,g,v,x){return this._styleExpression.evaluate(r,a,d,g,v,x)}}class lh{constructor(r,a,d,g){this.kind=r,this.zoomStops=d,this._styleExpression=a,this.isStateDependent=r!=="camera"&&!Ds(a.expression),this.interpolationType=g}evaluateWithoutErrorHandling(r,a,d,g,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,a,d,g,v,x)}evaluate(r,a,d,g,v,x){return this._styleExpression.evaluate(r,a,d,g,v,x)}interpolationFactor(r,a,d){return this.interpolationType?li.interpolationFactor(this.interpolationType,r,a,d):0}}function Yp(o,r){const a=xc(o,r);if(a.result==="error")return a;const d=a.value.expression,g=ga(d);if(!g&&!Gn(r))return pl([new si("","data expressions not supported")]);const v=ya(d,["zoom"]);if(!v&&!Xp(r))return pl([new si("","zoom expressions not supported")]);const x=Lu(d);return x||v?x instanceof si?pl([x]):x instanceof li&&!rn(r)?pl([new si("",'"interpolate" expressions cannot be used with this property')]):qp(x?new lh(g?"camera":"composite",a.value,x.labels,x instanceof li?x.interpolation:void 0):new bc(g?"constant":"source",a.value)):pl([new si("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ru{constructor(r,a){this._parameters=r,this._specification=a,xi(this,vc(this._parameters,this._specification))}static deserialize(r){return new Ru(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Lu(o){let r=null;if(o instanceof Le)r=Lu(o.result);else if(o instanceof xe){for(const a of o.args)if(r=Lu(a),r)break}else(o instanceof va||o instanceof li)&&o.input instanceof vn&&o.input.name==="zoom"&&(r=o);return r instanceof si||o.eachChild(a=>{const d=Lu(a);d instanceof si?r=d:!r&&d?r=new si("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&d&&r!==d&&(r=new si("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function po(o){const r=o.key,a=o.value,d=o.valueSpec||{},g=o.objectElementValidators||{},v=o.style,x=o.styleSpec;let T=[];const C=fn(a);if(C!=="object")return[new nt(r,a,`object expected, ${C} found`)];for(const z in a){const R=z.split(".")[0],B=d[R]||d["*"];let Z;if(g[R])Z=g[R];else if(d[R])Z=Li;else if(g["*"])Z=g["*"];else{if(!d["*"]){T.push(new nt(r,a[z],`unknown property "${z}"`));continue}Z=Li}T=T.concat(Z({key:(r&&`${r}.`)+z,value:a[z],valueSpec:B,style:v,styleSpec:x,object:a,objectKey:z},a))}for(const z in d)g[z]||d[z].required&&d[z].default===void 0&&a[z]===void 0&&T.push(new nt(r,a,`missing required property "${z}"`));return T}function Kp(o){const r=o.value,a=o.valueSpec,d=o.style,g=o.styleSpec,v=o.key,x=o.arrayElementValidator||Li;if(fn(r)!=="array")return[new nt(v,r,`array expected, ${fn(r)} found`)];if(a.length&&r.length!==a.length)return[new nt(v,r,`array length ${a.length} expected, length ${r.length} found`)];if(a["min-length"]&&r.length<a["min-length"])return[new nt(v,r,`array length at least ${a["min-length"]} expected, length ${r.length} found`)];let T={type:a.value,values:a.values};g.$version<7&&(T.function=a.function),fn(a.value)==="object"&&(T=a.value);let C=[];for(let z=0;z<r.length;z++)C=C.concat(x({array:r,arrayIndex:z,value:r[z],valueSpec:T,style:d,styleSpec:g,key:`${v}[${z}]`}));return C}function ch(o){const r=o.key,a=o.value,d=o.valueSpec;let g=fn(a);return g==="number"&&a!=a&&(g="NaN"),g!=="number"?[new nt(r,a,`number expected, ${g} found`)]:"minimum"in d&&a<d.minimum?[new nt(r,a,`${a} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&a>d.maximum?[new nt(r,a,`${a} is greater than the maximum value ${d.maximum}`)]:[]}function Jp(o){const r=o.valueSpec,a=tn(o.value.type);let d,g,v,x={};const T=a!=="categorical"&&o.value.property===void 0,C=!T,z=fn(o.value.stops)==="array"&&fn(o.value.stops[0])==="array"&&fn(o.value.stops[0][0])==="object",R=po({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(X){if(a==="identity")return[new nt(X.key,X.value,'identity function may not have a "stops" property')];let H=[];const ue=X.value;return H=H.concat(Kp({key:X.key,value:ue,valueSpec:X.valueSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:B})),fn(ue)==="array"&&ue.length===0&&H.push(new nt(X.key,ue,"array must have at least one stop")),H},default:function(X){return Li({key:X.key,value:X.value,valueSpec:r,style:X.style,styleSpec:X.styleSpec})}}});return a==="identity"&&T&&R.push(new nt(o.key,o.value,'missing required property "property"')),a==="identity"||o.value.stops||R.push(new nt(o.key,o.value,'missing required property "stops"')),a==="exponential"&&o.valueSpec.expression&&!rn(o.valueSpec)&&R.push(new nt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(C&&!Gn(o.valueSpec)?R.push(new nt(o.key,o.value,"property functions not supported")):T&&!Xp(o.valueSpec)&&R.push(new nt(o.key,o.value,"zoom functions not supported"))),a!=="categorical"&&!z||o.value.property!==void 0||R.push(new nt(o.key,o.value,'"property" property is required')),R;function B(X){let H=[];const ue=X.value,le=X.key;if(fn(ue)!=="array")return[new nt(le,ue,`array expected, ${fn(ue)} found`)];if(ue.length!==2)return[new nt(le,ue,`array length 2 expected, length ${ue.length} found`)];if(z){if(fn(ue[0])!=="object")return[new nt(le,ue,`object expected, ${fn(ue[0])} found`)];if(ue[0].zoom===void 0)return[new nt(le,ue,"object stop key must have zoom")];if(ue[0].value===void 0)return[new nt(le,ue,"object stop key must have value")];if(v&&v>tn(ue[0].zoom))return[new nt(le,ue[0].zoom,"stop zoom values must appear in ascending order")];tn(ue[0].zoom)!==v&&(v=tn(ue[0].zoom),g=void 0,x={}),H=H.concat(po({key:`${le}[0]`,value:ue[0],valueSpec:{zoom:{}},style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:ch,value:Z}}))}else H=H.concat(Z({key:`${le}[0]`,value:ue[0],valueSpec:{},style:X.style,styleSpec:X.styleSpec},ue));return _c(oi(ue[1]))?H.concat([new nt(`${le}[1]`,ue[1],"expressions are not allowed in function stops.")]):H.concat(Li({key:`${le}[1]`,value:ue[1],valueSpec:r,style:X.style,styleSpec:X.styleSpec}))}function Z(X,H){const ue=fn(X.value),le=tn(X.value),ke=X.value!==null?X.value:H;if(d){if(ue!==d)return[new nt(X.key,ke,`${ue} stop domain type must match previous stop domain type ${d}`)]}else d=ue;if(ue!=="number"&&ue!=="string"&&ue!=="boolean")return[new nt(X.key,ke,"stop domain value must be a number, string, or boolean")];if(ue!=="number"&&a!=="categorical"){let Re=`number expected, ${ue} found`;return Gn(r)&&a===void 0&&(Re+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new nt(X.key,ke,Re)]}return a!=="categorical"||ue!=="number"||isFinite(le)&&Math.floor(le)===le?a!=="categorical"&&ue==="number"&&g!==void 0&&le<g?[new nt(X.key,ke,"stop domain values must appear in ascending order")]:(g=le,a==="categorical"&&le in x?[new nt(X.key,ke,"stop domain values must be unique")]:(x[le]=!0,[])):[new nt(X.key,ke,`integer expected, found ${le}`)]}}function ka(o){const r=(o.expressionContext==="property"?Yp:xc)(oi(o.value),o.valueSpec);if(r.result==="error")return r.value.map(d=>new nt(`${o.key}${d.key}`,o.value,d.message));const a=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!a.outputDefined())return[new nt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Ds(a))return[new nt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Ds(a))return[new nt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!ya(a,["zoom","feature-state"]))return[new nt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!ga(a))return[new nt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function wc(o){const r=o.key,a=o.value,d=o.valueSpec,g=[];return Array.isArray(d.values)?d.values.indexOf(tn(a))===-1&&g.push(new nt(r,a,`expected one of [${d.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(d.values).indexOf(tn(a))===-1&&g.push(new nt(r,a,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(a)} found`)),g}function gl(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!gl(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const H0={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ou(o){if(o==null)return{filter:()=>!0,needGeometry:!1};gl(o)||(o=Sc(o));const r=xc(o,H0);if(r.result==="error")throw new Error(r.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,d,g)=>r.value.evaluate(a,d,{},g),needGeometry:em(o)}}function Qp(o,r){return o<r?-1:o>r?1:0}function em(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let r=1;r<o.length;r++)if(em(o[r]))return!0;return!1}function Sc(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?uh(o[1],o[2],"=="):r==="!="?yl(uh(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?uh(o[1],o[2],r):r==="any"?(a=o.slice(1),["any"].concat(a.map(Sc))):r==="all"?["all"].concat(o.slice(1).map(Sc)):r==="none"?["all"].concat(o.slice(1).map(Sc).map(yl)):r==="in"?Bu(o[1],o.slice(2)):r==="!in"?yl(Bu(o[1],o.slice(2))):r==="has"?Tc(o[1]):r==="!has"?yl(Tc(o[1])):r!=="within"||o;var a}function uh(o,r,a){switch(o){case"$type":return[`filter-type-${a}`,r];case"$id":return[`filter-id-${a}`,r];default:return[`filter-${a}`,o,r]}}function Bu(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(a=>typeof a!=typeof r[0])?["filter-in-large",o,["literal",r.sort(Qp)]]:["filter-in-small",o,["literal",r]]}}function Tc(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function yl(o){return["!",o]}function kc(o){return gl(oi(o.value))?ka(xi({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):tm(o)}function tm(o){const r=o.value,a=o.key;if(fn(r)!=="array")return[new nt(a,r,`array expected, ${fn(r)} found`)];const d=o.styleSpec;let g,v=[];if(r.length<1)return[new nt(a,r,"filter array must have at least 1 element")];switch(v=v.concat(wc({key:`${a}[0]`,value:r[0],valueSpec:d.filter_operator,style:o.style,styleSpec:o.styleSpec})),tn(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&tn(r[1])==="$type"&&v.push(new nt(a,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&v.push(new nt(a,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(g=fn(r[1]),g!=="string"&&v.push(new nt(`${a}[1]`,r[1],`string expected, ${g} found`)));for(let x=2;x<r.length;x++)g=fn(r[x]),tn(r[1])==="$type"?v=v.concat(wc({key:`${a}[${x}]`,value:r[x],valueSpec:d.geometry_type,style:o.style,styleSpec:o.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&v.push(new nt(`${a}[${x}]`,r[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<r.length;x++)v=v.concat(tm({key:`${a}[${x}]`,value:r[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":g=fn(r[1]),r.length!==2?v.push(new nt(a,r,`filter array for "${r[0]}" operator must have 2 elements`)):g!=="string"&&v.push(new nt(`${a}[1]`,r[1],`string expected, ${g} found`));break;case"within":g=fn(r[1]),r.length!==2?v.push(new nt(a,r,`filter array for "${r[0]}" operator must have 2 elements`)):g!=="object"&&v.push(new nt(`${a}[1]`,r[1],`object expected, ${g} found`))}return v}function Ec(o,r){const a=o.key,d=o.style,g=o.styleSpec,v=o.value,x=o.objectKey,T=g[`${r}_${o.layerType}`];if(!T)return[];const C=x.match(/^(.*)-transition$/);if(r==="paint"&&C&&T[C[1]]&&T[C[1]].transition)return Li({key:a,value:v,valueSpec:g.transition,style:d,styleSpec:g});const z=o.valueSpec||T[x];if(!z)return[new nt(a,v,`unknown property "${x}"`)];let R;if(fn(v)==="string"&&Gn(z)&&!z.tokens&&(R=/^{([^}]+)}$/.exec(v)))return[new nt(a,v,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(R[1])} }\`.`)];const B=[];return o.layerType==="symbol"&&(x==="text-field"&&d&&!d.glyphs&&B.push(new nt(a,v,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&Bn(oi(v))&&tn(v.type)==="identity"&&B.push(new nt(a,v,'"text-font" does not support identity functions'))),B.concat(Li({key:o.key,value:v,valueSpec:z,style:d,styleSpec:g,expressionContext:"property",propertyType:r,propertyKey:x}))}function nm(o){return Ec(o,"paint")}function rm(o){return Ec(o,"layout")}function im(o){let r=[];const a=o.value,d=o.key,g=o.style,v=o.styleSpec;a.type||a.ref||r.push(new nt(d,a,'either "type" or "ref" is required'));let x=tn(a.type);const T=tn(a.ref);if(a.id){const C=tn(a.id);for(let z=0;z<o.arrayIndex;z++){const R=g.layers[z];tn(R.id)===C&&r.push(new nt(d,a.id,`duplicate layer id "${a.id}", previously used at line ${R.id.__line__}`))}}if("ref"in a){let C;["type","source","source-layer","filter","layout"].forEach(z=>{z in a&&r.push(new nt(d,a[z],`"${z}" is prohibited for ref layers`))}),g.layers.forEach(z=>{tn(z.id)===T&&(C=z)}),C?C.ref?r.push(new nt(d,a.ref,"ref cannot reference another ref layer")):x=tn(C.type):r.push(new nt(d,a.ref,`ref layer "${T}" not found`))}else if(x!=="background")if(a.source){const C=g.sources&&g.sources[a.source],z=C&&tn(C.type);C?z==="vector"&&x==="raster"?r.push(new nt(d,a.source,`layer "${a.id}" requires a raster source`)):z==="raster"&&x!=="raster"?r.push(new nt(d,a.source,`layer "${a.id}" requires a vector source`)):z!=="vector"||a["source-layer"]?z==="raster-dem"&&x!=="hillshade"?r.push(new nt(d,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!a.paint||!a.paint["line-gradient"]||z==="geojson"&&C.lineMetrics||r.push(new nt(d,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new nt(d,a,`layer "${a.id}" must specify a "source-layer"`)):r.push(new nt(d,a.source,`source "${a.source}" not found`))}else r.push(new nt(d,a,'missing required property "source"'));return r=r.concat(po({key:d,value:a,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Li({key:`${d}.type`,value:a.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,object:a,objectKey:"type"}),filter:kc,layout:C=>po({layer:a,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,objectElementValidators:{"*":z=>rm(xi({layerType:x},z))}}),paint:C=>po({layer:a,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,objectElementValidators:{"*":z=>nm(xi({layerType:x},z))}})}})),r}function vl(o){const r=o.value,a=o.key,d=fn(r);return d!=="string"?[new nt(a,r,`string expected, ${d} found`)]:[]}const om={promoteId:function({key:o,value:r}){if(fn(r)==="string")return vl({key:o,value:r});{const a=[];for(const d in r)a.push(...vl({key:`${o}.${d}`,value:r[d]}));return a}}};function Cc(o){const r=o.value,a=o.key,d=o.styleSpec,g=o.style;if(!r.type)return[new nt(a,r,'"type" is required')];const v=tn(r.type);let x;switch(v){case"vector":case"raster":case"raster-dem":return x=po({key:a,value:r,valueSpec:d[`source_${v.replace("-","_")}`],style:o.style,styleSpec:d,objectElementValidators:om}),x;case"geojson":if(x=po({key:a,value:r,valueSpec:d.source_geojson,style:g,styleSpec:d,objectElementValidators:om}),r.cluster)for(const T in r.clusterProperties){const[C,z]=r.clusterProperties[T],R=typeof C=="string"?[C,["accumulated"],["get",T]]:C;x.push(...ka({key:`${a}.${T}.map`,value:z,expressionContext:"cluster-map"})),x.push(...ka({key:`${a}.${T}.reduce`,value:R,expressionContext:"cluster-reduce"}))}return x;case"video":return po({key:a,value:r,valueSpec:d.source_video,style:g,styleSpec:d});case"image":return po({key:a,value:r,valueSpec:d.source_image,style:g,styleSpec:d});case"canvas":return[new nt(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return wc({key:`${a}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,styleSpec:d})}}function Ic(o){const r=o.value,a=o.styleSpec,d=a.light,g=o.style;let v=[];const x=fn(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new nt("light",r,`object expected, ${x} found`)]),v;for(const T in r){const C=T.match(/^(.*)-transition$/);v=v.concat(C&&d[C[1]]&&d[C[1]].transition?Li({key:T,value:r[T],valueSpec:a.transition,style:g,styleSpec:a}):d[T]?Li({key:T,value:r[T],valueSpec:d[T],style:g,styleSpec:a}):[new nt(T,r[T],`unknown property "${T}"`)])}return v}function Ri(o){const r=o.value,a=o.styleSpec,d=a.terrain,g=o.style;let v=[];const x=fn(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new nt("terrain",r,`object expected, ${x} found`)]),v;for(const T in r)v=v.concat(d[T]?Li({key:T,value:r[T],valueSpec:d[T],style:g,styleSpec:a}):[new nt(T,r[T],`unknown property "${T}"`)]);return v}const Mc={"*":()=>[],array:Kp,boolean:function(o){const r=o.value,a=o.key,d=fn(r);return d!=="boolean"?[new nt(a,r,`boolean expected, ${d} found`)]:[]},number:ch,color:function(o){const r=o.key,a=o.value,d=fn(a);return d!=="string"?[new nt(r,a,`color expected, ${d} found`)]:zs(a)===null?[new nt(r,a,`color expected, "${a}" found`)]:[]},constants:zo,enum:wc,filter:kc,function:Jp,layer:im,object:po,source:Cc,light:Ic,terrain:Ri,string:vl,formatted:function(o){return vl(o).length===0?[]:ka(o)},resolvedImage:function(o){return vl(o).length===0?[]:ka(o)},padding:function(o){const r=o.key,a=o.value;if(fn(a)==="array"){if(a.length<1||a.length>4)return[new nt(r,a,`padding requires 1 to 4 values; ${a.length} values found`)];const d={type:"number"};let g=[];for(let v=0;v<a.length;v++)g=g.concat(Li({key:`${r}[${v}]`,value:a[v],valueSpec:d}));return g}return ch({key:r,value:a,valueSpec:{}})}};function Li(o){const r=o.value,a=o.valueSpec,d=o.styleSpec;return a.expression&&Bn(tn(r))?Jp(o):a.expression&&_c(oi(r))?ka(o):a.type&&Mc[a.type]?Mc[a.type](o):po(xi({},o,{valueSpec:a.type?d[a.type]:a}))}function Y0(o){const r=o.value,a=o.key,d=vl(o);return d.length||(r.indexOf("{fontstack}")===-1&&d.push(new nt(a,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&d.push(new nt(a,r,'"glyphs" url must include a "{range}" token'))),d}function Bs(o,r=Ne){let a=[];return a=a.concat(Li({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,objectElementValidators:{glyphs:Y0,"*":()=>[]}})),o.constants&&(a=a.concat(zo({key:"constants",value:o.constants,style:o,styleSpec:r}))),sm(a)}function sm(o){return[].concat(o).sort((r,a)=>r.line-a.line)}function ss(o){return function(...r){return sm(o.apply(this,r))}}Bs.source=ss(Cc),Bs.light=ss(Ic),Bs.terrain=ss(Ri),Bs.layer=ss(im),Bs.filter=ss(kc),Bs.paintProperty=ss(nm),Bs.layoutProperty=ss(rm);const Pc=Bs,dh=Pc.light,K0=Pc.paintProperty,J0=Pc.layoutProperty;function Fu(o,r){let a=!1;if(r&&r.length)for(const d of r)o.fire(new Di(new Error(d.message))),a=!0;return a}class zc{constructor(r,a,d){const g=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const x=new Int32Array(this.arrayBuffer);r=x[0],this.d=(a=x[1])+2*(d=x[2]);for(let C=0;C<this.d*this.d;C++){const z=x[3+C],R=x[3+C+1];g.push(z===R?null:x.subarray(z,R))}const T=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],T),this.bboxes=x.subarray(T),this.insert=this._insertReadonly}else{this.d=a+2*d;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=r,this.padding=d,this.scale=a/r,this.uid=0;const v=d/a*r;this.min=-v,this.max=r+v}insert(r,a,d,g,v){this._forEachCell(a,d,g,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(a),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,a,d,g,v,x){this.cells[v].push(x)}query(r,a,d,g,v){const x=this.min,T=this.max;if(r<=x&&a<=x&&T<=d&&T<=g&&!v)return Array.prototype.slice.call(this.keys);{const C=[];return this._forEachCell(r,a,d,g,this._queryCell,C,{},v),C}}_queryCell(r,a,d,g,v,x,T,C){const z=this.cells[v];if(z!==null){const R=this.keys,B=this.bboxes;for(let Z=0;Z<z.length;Z++){const X=z[Z];if(T[X]===void 0){const H=4*X;(C?C(B[H+0],B[H+1],B[H+2],B[H+3]):r<=B[H+2]&&a<=B[H+3]&&d>=B[H+0]&&g>=B[H+1])?(T[X]=!0,x.push(R[X])):T[X]=!1}}}}_forEachCell(r,a,d,g,v,x,T,C){const z=this._convertToCellCoord(r),R=this._convertToCellCoord(a),B=this._convertToCellCoord(d),Z=this._convertToCellCoord(g);for(let X=z;X<=B;X++)for(let H=R;H<=Z;H++){const ue=this.d*H+X;if((!C||C(this._convertFromCellCoord(X),this._convertFromCellCoord(H),this._convertFromCellCoord(X+1),this._convertFromCellCoord(H+1)))&&v.call(this,r,a,d,g,ue,x,T,C))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,a=3+this.cells.length+1+1;let d=0;for(let x=0;x<this.cells.length;x++)d+=this.cells[x].length;const g=new Int32Array(a+d+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let v=a;for(let x=0;x<r.length;x++){const T=r[x];g[3+x]=v,g.set(T,v),v+=T.length}return g[3+r.length]=v,g.set(this.keys,v),v+=this.keys.length,g[3+r.length+1]=v,g.set(this.bboxes,v),v+=this.bboxes.length,g.buffer}static serialize(r,a){const d=r.toArrayBuffer();return a&&a.push(d),{buffer:d}}static deserialize(r){return new zc(r.buffer)}}const as={};function yt(o,r,a={}){if(as[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),as[o]={klass:r,omit:a.omit||[],shallow:a.shallow||[]}}yt("Object",Object),yt("TransferableGridIndex",zc),yt("Color",Q),yt("Error",Error),yt("AJAXError",Ut),yt("ResolvedImage",_e),yt("StylePropertyFunction",Ru),yt("StyleExpression",Du,{omit:["_evaluator"]}),yt("ZoomDependentExpression",lh),yt("ZoomConstantExpression",bc),yt("CompoundExpression",vn,{omit:["_evaluate"]});for(const o in fl)fl[o]._classRegistryKey||yt(`Expression_${o}`,fl[o]);function am(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Ea(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(am(o)||ot(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const a=o;return r&&r.push(a.buffer),a}if(o instanceof ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const a=[];for(const d of o)a.push(Ea(d,r));return a}if(typeof o=="object"){const a=o.constructor,d=a._classRegistryKey;if(!d)throw new Error("can't serialize object of unregistered class");if(!as[d])throw new Error(`${d} is not registered.`);const g=a.serialize?a.serialize(o,r):{};if(a.serialize){if(r&&g===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||as[d].omit.indexOf(v)>=0)continue;const x=o[v];g[v]=as[d].shallow.indexOf(v)>=0?x:Ea(x,r)}o instanceof Error&&(g.message=o.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(g.$name=d),g}throw new Error("can't serialize object of type "+typeof o)}function Fs(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||am(o)||ot(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Fs);if(typeof o=="object"){const r=o.$name||"Object";if(!as[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:a}=as[r];if(!a)throw new Error(`can't deserialize unregistered class ${r}`);if(a.deserialize)return a.deserialize(o);const d=Object.create(a.prototype);for(const g of Object.keys(o)){if(g==="$name")continue;const v=o[g];d[g]=as[r].shallow.indexOf(g)>=0?v:Fs(v)}return d}throw new Error("can't deserialize object of type "+typeof o)}class hh{constructor(){this.first=!0}update(r,a){const d=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=a),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=d,!0))}}const ct={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Nu(o){for(const r of o)if(ph(r.charCodeAt(0)))return!0;return!1}function Q0(o){for(const r of o)if(!fh(r.charCodeAt(0)))return!1;return!0}function fh(o){return!(ct.Arabic(o)||ct["Arabic Supplement"](o)||ct["Arabic Extended-A"](o)||ct["Arabic Presentation Forms-A"](o)||ct["Arabic Presentation Forms-B"](o))}function ph(o){return!(o!==746&&o!==747&&(o<4352||!(ct["Bopomofo Extended"](o)||ct.Bopomofo(o)||ct["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||ct["CJK Compatibility Ideographs"](o)||ct["CJK Compatibility"](o)||ct["CJK Radicals Supplement"](o)||ct["CJK Strokes"](o)||!(!ct["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||ct["CJK Unified Ideographs Extension A"](o)||ct["CJK Unified Ideographs"](o)||ct["Enclosed CJK Letters and Months"](o)||ct["Hangul Compatibility Jamo"](o)||ct["Hangul Jamo Extended-A"](o)||ct["Hangul Jamo Extended-B"](o)||ct["Hangul Jamo"](o)||ct["Hangul Syllables"](o)||ct.Hiragana(o)||ct["Ideographic Description Characters"](o)||ct.Kanbun(o)||ct["Kangxi Radicals"](o)||ct["Katakana Phonetic Extensions"](o)||ct.Katakana(o)&&o!==12540||!(!ct["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!ct["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||ct["Unified Canadian Aboriginal Syllabics"](o)||ct["Unified Canadian Aboriginal Syllabics Extended"](o)||ct["Vertical Forms"](o)||ct["Yijing Hexagram Symbols"](o)||ct["Yi Syllables"](o)||ct["Yi Radicals"](o))))}function lm(o){return!(ph(o)||function(r){return!!(ct["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||ct["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||ct["Letterlike Symbols"](r)||ct["Number Forms"](r)||ct["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||ct["Control Pictures"](r)&&r!==9251||ct["Optical Character Recognition"](r)||ct["Enclosed Alphanumerics"](r)||ct["Geometric Shapes"](r)||ct["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||ct["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||ct["CJK Symbols and Punctuation"](r)||ct.Katakana(r)||ct["Private Use Area"](r)||ct["CJK Compatibility Forms"](r)||ct["Small Form Variants"](r)||ct["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function cm(o){return o>=1424&&o<=2303||ct["Arabic Presentation Forms-A"](o)||ct["Arabic Presentation Forms-B"](o)}function ev(o,r){return!(!r&&cm(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||ct.Khmer(o))}function um(o){for(const r of o)if(cm(r.charCodeAt(0)))return!0;return!1}const mh="deferred",gh="loading",yh="loaded";let vh=null,bi="unavailable",Ns=null;const dm=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(bi="error"),vh&&vh(o)};function _l(){_h.fire(new Cr("pluginStateChange",{pluginStatus:bi,pluginURL:Ns}))}const _h=new Dr,Ac=function(){return bi},hm=function(){if(bi!==mh||!Ns)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");bi=gh,_l(),Ns&&Tn({url:Ns},o=>{o?dm(o):(bi=yh,_l())})},Hi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>bi===yh||Hi.applyArabicShaping!=null,isLoading:()=>bi===gh,setState(o){if(!oe())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");bi=o.pluginStatus,Ns=o.pluginURL},isParsed(){if(!oe())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Hi.applyArabicShaping!=null&&Hi.processBidirectionalText!=null&&Hi.processStyledBidirectionalText!=null},getPluginURL(){if(!oe())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Ns}};class qn{constructor(r,a){this.zoom=r,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new hh,this.transition={})}isSupportedScript(r){return function(a,d){for(const g of a)if(!ev(g.charCodeAt(0),d))return!1;return!0}(r,Hi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,a=r-Math.floor(r),d=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*a}}}class Dc{constructor(r,a){this.property=r,this.value=a,this.expression=function(d,g){if(Bn(d))return new Ru(d,g);if(_c(d)){const v=Yp(d,g);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=d;return g.type==="color"&&typeof d=="string"?v=Q.parse(d):g.type!=="padding"||typeof d!="number"&&!Array.isArray(d)||(v=fe.parse(d)),{kind:"constant",evaluate:()=>v}}}(a===void 0?r.specification.default:a,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,a,d){return this.property.possiblyEvaluate(this,r,a,d)}}class $u{constructor(r){this.property=r,this.value=new Dc(r,void 0)}transitioned(r,a){return new pm(this.property,this.value,a,N({},r.transition,this.transition),r.now)}untransitioned(){return new pm(this.property,this.value,null,{},0)}}class fm{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return W(this._values[r].value.value)}setValue(r,a){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new $u(this._values[r].property)),this._values[r].value=new Dc(this._values[r].property,a===null?void 0:W(a))}getTransition(r){return W(this._values[r].transition)}setTransition(r,a){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new $u(this._values[r].property)),this._values[r].transition=W(a)||void 0}serialize(){const r={};for(const a of Object.keys(this._values)){const d=this.getValue(a);d!==void 0&&(r[a]=d);const g=this.getTransition(a);g!==void 0&&(r[`${a}-transition`]=g)}return r}transitioned(r,a){const d=new mm(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].transitioned(r,a._values[g]);return d}untransitioned(){const r=new mm(this._properties);for(const a of Object.keys(this._values))r._values[a]=this._values[a].untransitioned();return r}}class pm{constructor(r,a,d,g,v){this.property=r,this.value=a,this.begin=v+g.delay||0,this.end=this.begin+g.duration||0,r.specification.transition&&(g.delay||g.duration)&&(this.prior=d)}possiblyEvaluate(r,a,d){const g=r.now||0,v=this.value.possiblyEvaluate(r,a,d),x=this.prior;if(x){if(g>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(g<this.begin)return x.possiblyEvaluate(r,a,d);{const T=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,a,d),v,function(C){if(C<=0)return 0;if(C>=1)return 1;const z=C*C,R=z*C;return 4*(C<.5?R:3*(C-z)+R-.75)}(T))}}return v}}class mm{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,a,d){const g=new Rc(this._properties);for(const v of Object.keys(this._values))g._values[v]=this._values[v].possiblyEvaluate(r,a,d);return g}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class tv{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}getValue(r){return W(this._values[r].value)}setValue(r,a){this._values[r]=new Dc(this._values[r].property,a===null?void 0:W(a))}serialize(){const r={};for(const a of Object.keys(this._values)){const d=this.getValue(a);d!==void 0&&(r[a]=d)}return r}possiblyEvaluate(r,a,d){const g=new Rc(this._properties);for(const v of Object.keys(this._values))g._values[v]=this._values[v].possiblyEvaluate(r,a,d);return g}}class Ao{constructor(r,a,d){this.property=r,this.value=a,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,a,d,g){return this.property.evaluate(this.value,this.parameters,r,a,d,g)}}class Rc{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Tt{constructor(r){this.specification=r}possiblyEvaluate(r,a){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(a)}interpolate(r,a,d){const g=_a[this.specification.type];return g?g(r,a,d):r}}class Dt{constructor(r,a){this.specification=r,this.overrides=a}possiblyEvaluate(r,a,d,g){return new Ao(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(a,null,{},d,g)}:r.expression,a)}interpolate(r,a,d){if(r.value.kind!=="constant"||a.value.kind!=="constant")return r;if(r.value.value===void 0||a.value.value===void 0)return new Ao(this,{kind:"constant",value:void 0},r.parameters);const g=_a[this.specification.type];return g?new Ao(this,{kind:"constant",value:g(r.value.value,a.value.value,d)},r.parameters):r}evaluate(r,a,d,g,v,x){return r.kind==="constant"?r.value:r.evaluate(a,d,g,v,x)}}class xl extends Dt{possiblyEvaluate(r,a,d,g){if(r.value===void 0)return new Ao(this,{kind:"constant",value:void 0},a);if(r.expression.kind==="constant"){const v=r.expression.evaluate(a,null,{},d,g),x=r.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,T=this._calculate(x,x,x,a);return new Ao(this,{kind:"constant",value:T},a)}if(r.expression.kind==="camera"){const v=this._calculate(r.expression.evaluate({zoom:a.zoom-1}),r.expression.evaluate({zoom:a.zoom}),r.expression.evaluate({zoom:a.zoom+1}),a);return new Ao(this,{kind:"constant",value:v},a)}return new Ao(this,r.expression,a)}evaluate(r,a,d,g,v,x){if(r.kind==="source"){const T=r.evaluate(a,d,g,v,x);return this._calculate(T,T,T,a)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(a.zoom)-1},d,g),r.evaluate({zoom:Math.floor(a.zoom)},d,g),r.evaluate({zoom:Math.floor(a.zoom)+1},d,g),a):r.value}_calculate(r,a,d,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:r,to:a}:{from:d,to:a}}interpolate(r){return r}}class xh{constructor(r){this.specification=r}possiblyEvaluate(r,a,d,g){if(r.value!==void 0){if(r.expression.kind==="constant"){const v=r.expression.evaluate(a,null,{},d,g);return this._calculate(v,v,v,a)}return this._calculate(r.expression.evaluate(new qn(Math.floor(a.zoom-1),a)),r.expression.evaluate(new qn(Math.floor(a.zoom),a)),r.expression.evaluate(new qn(Math.floor(a.zoom+1),a)),a)}}_calculate(r,a,d,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:r,to:a}:{from:d,to:a}}interpolate(r){return r}}class $s{constructor(r){this.specification=r}possiblyEvaluate(r,a,d,g){return!!r.expression.evaluate(a,null,{},d,g)}interpolate(){return!1}}class Gr{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in r){const d=r[a];d.specification.overridable&&this.overridableProperties.push(a);const g=this.defaultPropertyValues[a]=new Dc(d,void 0),v=this.defaultTransitionablePropertyValues[a]=new $u(d);this.defaultTransitioningPropertyValues[a]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=g.possiblyEvaluate({})}}}yt("DataDrivenProperty",Dt),yt("DataConstantProperty",Tt),yt("CrossFadedDataDrivenProperty",xl),yt("CrossFadedProperty",xh),yt("ColorRampProperty",$s);const js="-transition";class Do extends Dr{constructor(r,a){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),a.layout&&(this._unevaluatedLayout=new tv(a.layout)),a.paint)){this._transitionablePaint=new fm(a.paint);for(const d in r.paint)this.setPaintProperty(d,r.paint[d],{validate:!1});for(const d in r.layout)this.setLayoutProperty(d,r.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Rc(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,a,d={}){a!=null&&this._validate(J0,`layers.${this.id}.layout.${r}`,r,a,d)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,a):this.visibility=a)}getPaintProperty(r){return r.endsWith(js)?this._transitionablePaint.getTransition(r.slice(0,-js.length)):this._transitionablePaint.getValue(r)}setPaintProperty(r,a,d={}){if(a!=null&&this._validate(K0,`layers.${this.id}.paint.${r}`,r,a,d))return!1;if(r.endsWith(js))return this._transitionablePaint.setTransition(r.slice(0,-js.length),a||void 0),!1;{const g=this._transitionablePaint._values[r],v=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),T=g.value;this._transitionablePaint.setValue(r,a),this._handleSpecialPaintPropertyUpdate(r);const C=this._transitionablePaint._values[r].value;return C.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(r,T,C)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,a,d){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,a){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,a)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),F(r,(a,d)=>!(a===void 0||d==="layout"&&!Object.keys(a).length||d==="paint"&&!Object.keys(a).length))}_validate(r,a,d,g,v={}){return(!v||v.validate!==!1)&&Fu(this,r.call(Pc,{key:a,layerType:this.type,objectKey:d,value:g,styleSpec:Ne,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const a=this.paint.get(r);if(a instanceof Ao&&Gn(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const gm={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Vs{constructor(r,a){this._structArray=r,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ar{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,a){return r._trim(),a&&(r.isTransferred=!0,a.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const a=Object.create(this.prototype);return a.arrayBuffer=r.arrayBuffer,a.length=r.length,a.capacity=r.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function xr(o,r=1){let a=0,d=0;return{members:o.map(g=>{const v=gm[g.type].BYTES_PER_ELEMENT,x=a=bh(a,Math.max(r,v)),T=g.components||1;return d=Math.max(d,v),a+=v*T,{name:g.name,type:g.type,components:T,offset:x}}),size:bh(a,Math.max(d,r)),alignment:r}}function bh(o,r){return Math.ceil(o/r)*r}class Ca extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a){const d=this.length;return this.resize(d+1),this.emplace(d,r,a)}emplace(r,a,d){const g=2*r;return this.int16[g+0]=a,this.int16[g+1]=d,r}}Ca.prototype.bytesPerElement=4,yt("StructArrayLayout2i4",Ca);class p extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,d,g){const v=this.length;return this.resize(v+1),this.emplace(v,r,a,d,g)}emplace(r,a,d,g,v){const x=4*r;return this.int16[x+0]=a,this.int16[x+1]=d,this.int16[x+2]=g,this.int16[x+3]=v,r}}p.prototype.bytesPerElement=8,yt("StructArrayLayout4i8",p);class i extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,d,g,v,x){const T=this.length;return this.resize(T+1),this.emplace(T,r,a,d,g,v,x)}emplace(r,a,d,g,v,x,T){const C=6*r;return this.int16[C+0]=a,this.int16[C+1]=d,this.int16[C+2]=g,this.int16[C+3]=v,this.int16[C+4]=x,this.int16[C+5]=T,r}}i.prototype.bytesPerElement=12,yt("StructArrayLayout2i4i12",i);class u extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,d,g,v,x){const T=this.length;return this.resize(T+1),this.emplace(T,r,a,d,g,v,x)}emplace(r,a,d,g,v,x,T){const C=4*r,z=8*r;return this.int16[C+0]=a,this.int16[C+1]=d,this.uint8[z+4]=g,this.uint8[z+5]=v,this.uint8[z+6]=x,this.uint8[z+7]=T,r}}u.prototype.bytesPerElement=8,yt("StructArrayLayout2i4ub8",u);class f extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a){const d=this.length;return this.resize(d+1),this.emplace(d,r,a)}emplace(r,a,d){const g=2*r;return this.float32[g+0]=a,this.float32[g+1]=d,r}}f.prototype.bytesPerElement=8,yt("StructArrayLayout2f8",f);class y extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,d,g,v,x,T,C,z,R){const B=this.length;return this.resize(B+1),this.emplace(B,r,a,d,g,v,x,T,C,z,R)}emplace(r,a,d,g,v,x,T,C,z,R,B){const Z=10*r;return this.uint16[Z+0]=a,this.uint16[Z+1]=d,this.uint16[Z+2]=g,this.uint16[Z+3]=v,this.uint16[Z+4]=x,this.uint16[Z+5]=T,this.uint16[Z+6]=C,this.uint16[Z+7]=z,this.uint16[Z+8]=R,this.uint16[Z+9]=B,r}}y.prototype.bytesPerElement=20,yt("StructArrayLayout10ui20",y);class _ extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,d,g,v,x,T,C,z,R,B,Z){const X=this.length;return this.resize(X+1),this.emplace(X,r,a,d,g,v,x,T,C,z,R,B,Z)}emplace(r,a,d,g,v,x,T,C,z,R,B,Z,X){const H=12*r;return this.int16[H+0]=a,this.int16[H+1]=d,this.int16[H+2]=g,this.int16[H+3]=v,this.uint16[H+4]=x,this.uint16[H+5]=T,this.uint16[H+6]=C,this.uint16[H+7]=z,this.int16[H+8]=R,this.int16[H+9]=B,this.int16[H+10]=Z,this.int16[H+11]=X,r}}_.prototype.bytesPerElement=24,yt("StructArrayLayout4i4ui4i24",_);class S extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,d){const g=this.length;return this.resize(g+1),this.emplace(g,r,a,d)}emplace(r,a,d,g){const v=3*r;return this.float32[v+0]=a,this.float32[v+1]=d,this.float32[v+2]=g,r}}S.prototype.bytesPerElement=12,yt("StructArrayLayout3f12",S);class I extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.uint32[1*r+0]=a,r}}I.prototype.bytesPerElement=4,yt("StructArrayLayout1ul4",I);class P extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,d,g,v,x,T,C,z){const R=this.length;return this.resize(R+1),this.emplace(R,r,a,d,g,v,x,T,C,z)}emplace(r,a,d,g,v,x,T,C,z,R){const B=10*r,Z=5*r;return this.int16[B+0]=a,this.int16[B+1]=d,this.int16[B+2]=g,this.int16[B+3]=v,this.int16[B+4]=x,this.int16[B+5]=T,this.uint32[Z+3]=C,this.uint16[B+8]=z,this.uint16[B+9]=R,r}}P.prototype.bytesPerElement=20,yt("StructArrayLayout6i1ul2ui20",P);class A extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,d,g,v,x){const T=this.length;return this.resize(T+1),this.emplace(T,r,a,d,g,v,x)}emplace(r,a,d,g,v,x,T){const C=6*r;return this.int16[C+0]=a,this.int16[C+1]=d,this.int16[C+2]=g,this.int16[C+3]=v,this.int16[C+4]=x,this.int16[C+5]=T,r}}A.prototype.bytesPerElement=12,yt("StructArrayLayout2i2i2i12",A);class O extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,d,g,v){const x=this.length;return this.resize(x+1),this.emplace(x,r,a,d,g,v)}emplace(r,a,d,g,v,x){const T=4*r,C=8*r;return this.float32[T+0]=a,this.float32[T+1]=d,this.float32[T+2]=g,this.int16[C+6]=v,this.int16[C+7]=x,r}}O.prototype.bytesPerElement=16,yt("StructArrayLayout2f1f2i16",O);class G extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,d,g){const v=this.length;return this.resize(v+1),this.emplace(v,r,a,d,g)}emplace(r,a,d,g,v){const x=12*r,T=3*r;return this.uint8[x+0]=a,this.uint8[x+1]=d,this.float32[T+1]=g,this.float32[T+2]=v,r}}G.prototype.bytesPerElement=12,yt("StructArrayLayout2ub2f12",G);class q extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,d){const g=this.length;return this.resize(g+1),this.emplace(g,r,a,d)}emplace(r,a,d,g){const v=3*r;return this.uint16[v+0]=a,this.uint16[v+1]=d,this.uint16[v+2]=g,r}}q.prototype.bytesPerElement=6,yt("StructArrayLayout3ui6",q);class se extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,d,g,v,x,T,C,z,R,B,Z,X,H,ue,le,ke){const Re=this.length;return this.resize(Re+1),this.emplace(Re,r,a,d,g,v,x,T,C,z,R,B,Z,X,H,ue,le,ke)}emplace(r,a,d,g,v,x,T,C,z,R,B,Z,X,H,ue,le,ke,Re){const Se=24*r,ze=12*r,Ue=48*r;return this.int16[Se+0]=a,this.int16[Se+1]=d,this.uint16[Se+2]=g,this.uint16[Se+3]=v,this.uint32[ze+2]=x,this.uint32[ze+3]=T,this.uint32[ze+4]=C,this.uint16[Se+10]=z,this.uint16[Se+11]=R,this.uint16[Se+12]=B,this.float32[ze+7]=Z,this.float32[ze+8]=X,this.uint8[Ue+36]=H,this.uint8[Ue+37]=ue,this.uint8[Ue+38]=le,this.uint32[ze+10]=ke,this.int16[Se+22]=Re,r}}se.prototype.bytesPerElement=48,yt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",se);class ne extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,d,g,v,x,T,C,z,R,B,Z,X,H,ue,le,ke,Re,Se,ze,Ue,Ve,gt,wt,ut,it,tt,dt){const at=this.length;return this.resize(at+1),this.emplace(at,r,a,d,g,v,x,T,C,z,R,B,Z,X,H,ue,le,ke,Re,Se,ze,Ue,Ve,gt,wt,ut,it,tt,dt)}emplace(r,a,d,g,v,x,T,C,z,R,B,Z,X,H,ue,le,ke,Re,Se,ze,Ue,Ve,gt,wt,ut,it,tt,dt,at){const He=34*r,Pt=17*r;return this.int16[He+0]=a,this.int16[He+1]=d,this.int16[He+2]=g,this.int16[He+3]=v,this.int16[He+4]=x,this.int16[He+5]=T,this.int16[He+6]=C,this.int16[He+7]=z,this.uint16[He+8]=R,this.uint16[He+9]=B,this.uint16[He+10]=Z,this.uint16[He+11]=X,this.uint16[He+12]=H,this.uint16[He+13]=ue,this.uint16[He+14]=le,this.uint16[He+15]=ke,this.uint16[He+16]=Re,this.uint16[He+17]=Se,this.uint16[He+18]=ze,this.uint16[He+19]=Ue,this.uint16[He+20]=Ve,this.uint16[He+21]=gt,this.uint16[He+22]=wt,this.uint32[Pt+12]=ut,this.float32[Pt+13]=it,this.float32[Pt+14]=tt,this.float32[Pt+15]=dt,this.float32[Pt+16]=at,r}}ne.prototype.bytesPerElement=68,yt("StructArrayLayout8i15ui1ul4f68",ne);class re extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.float32[1*r+0]=a,r}}re.prototype.bytesPerElement=4,yt("StructArrayLayout1f4",re);class ge extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,d){const g=this.length;return this.resize(g+1),this.emplace(g,r,a,d)}emplace(r,a,d,g){const v=3*r;return this.int16[v+0]=a,this.int16[v+1]=d,this.int16[v+2]=g,r}}ge.prototype.bytesPerElement=6,yt("StructArrayLayout3i6",ge);class we extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,d){const g=this.length;return this.resize(g+1),this.emplace(g,r,a,d)}emplace(r,a,d,g){const v=4*r;return this.uint32[2*r+0]=a,this.uint16[v+2]=d,this.uint16[v+3]=g,r}}we.prototype.bytesPerElement=8,yt("StructArrayLayout1ul2ui8",we);class Ie extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a){const d=this.length;return this.resize(d+1),this.emplace(d,r,a)}emplace(r,a,d){const g=2*r;return this.uint16[g+0]=a,this.uint16[g+1]=d,r}}Ie.prototype.bytesPerElement=4,yt("StructArrayLayout2ui4",Ie);class ae extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.uint16[1*r+0]=a,r}}ae.prototype.bytesPerElement=2,yt("StructArrayLayout1ui2",ae);class De extends ar{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,d,g){const v=this.length;return this.resize(v+1),this.emplace(v,r,a,d,g)}emplace(r,a,d,g,v){const x=4*r;return this.float32[x+0]=a,this.float32[x+1]=d,this.float32[x+2]=g,this.float32[x+3]=v,r}}De.prototype.bytesPerElement=16,yt("StructArrayLayout4f16",De);class Pe extends Vs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Ce(this.anchorPointX,this.anchorPointY)}}Pe.prototype.size=20;class $e extends P{get(r){return new Pe(this,r)}}yt("CollisionBoxArray",$e);class je extends Vs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}je.prototype.size=48;class qe extends se{get(r){return new je(this,r)}}yt("PlacedSymbolArray",qe);class Fe extends Vs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Fe.prototype.size=68;class ht extends ne{get(r){return new Fe(this,r)}}yt("SymbolInstanceArray",ht);class rt extends re{getoffsetX(r){return this.float32[1*r+0]}}yt("GlyphOffsetArray",rt);class mt extends ge{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}yt("SymbolLineVertexArray",mt);class Gt extends Vs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Gt.prototype.size=8;class Ht extends we{get(r){return new Gt(this,r)}}yt("FeatureIndexArray",Ht);class Mt extends Ca{}class xn extends Ca{}class bn extends Ca{}class cn extends i{}class dn extends u{}class kn extends f{}class Lr extends y{}class Ro extends _{}class mo extends S{}class Lo extends I{}class Us extends A{}class Yi extends G{}class wi extends q{}class ls extends Ie{}const ju=xr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Mr}=ju;class Qt{constructor(r=[]){this.segments=r}prepareSegment(r,a,d,g){let v=this.segments[this.segments.length-1];return r>Qt.MAX_VERTEX_ARRAY_LENGTH&&de(`Max vertices per segment is ${Qt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!v||v.vertexLength+r>Qt.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==g)&&(v={vertexOffset:a.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},g!==void 0&&(v.sortKey=g),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const r of this.segments)for(const a in r.vaos)r.vaos[a].destroy()}static simpleSegment(r,a,d,g){return new Qt([{vertexOffset:r,primitiveOffset:a,vertexLength:d,primitiveLength:g,vaos:{},sortKey:0}])}}function gn(o,r){return 256*(o=E(Math.floor(o),0,255))+E(Math.floor(r),0,255)}Qt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,yt("SegmentVector",Qt);const Or=xr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Br={exports:{}},Xn={exports:{}};Xn.exports=function(o,r){var a,d,g,v,x,T,C,z;for(d=o.length-(a=3&o.length),g=r,x=3432918353,T=461845907,z=0;z<d;)C=255&o.charCodeAt(z)|(255&o.charCodeAt(++z))<<8|(255&o.charCodeAt(++z))<<16|(255&o.charCodeAt(++z))<<24,++z,g=27492+(65535&(v=5*(65535&(g=(g^=C=(65535&(C=(C=(65535&C)*x+(((C>>>16)*x&65535)<<16)&4294967295)<<15|C>>>17))*T+(((C>>>16)*T&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(C=0,a){case 3:C^=(255&o.charCodeAt(z+2))<<16;case 2:C^=(255&o.charCodeAt(z+1))<<8;case 1:g^=C=(65535&(C=(C=(65535&(C^=255&o.charCodeAt(z)))*x+(((C>>>16)*x&65535)<<16)&4294967295)<<15|C>>>17))*T+(((C>>>16)*T&65535)<<16)&4294967295}return g^=o.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var Ki={exports:{}};Ki.exports=function(o,r){for(var a,d=o.length,g=r^d,v=0;d>=4;)a=1540483477*(65535&(a=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(a>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),d-=4,++v;switch(d){case 3:g^=(255&o.charCodeAt(v+2))<<16;case 2:g^=(255&o.charCodeAt(v+1))<<8;case 1:g=1540483477*(65535&(g^=255&o.charCodeAt(v)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var Ia=Xn.exports,wh=Ki.exports;Br.exports=Ia,Br.exports.murmur3=Ia,Br.exports.murmur2=wh;class bl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,a,d,g){this.ids.push(ym(r)),this.positions.push(a,d,g)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=ym(r);let d=0,g=this.ids.length-1;for(;d<g;){const x=d+g>>1;this.ids[x]>=a?g=x:d=x+1}const v=[];for(;this.ids[d]===a;)v.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return v}static serialize(r,a){const d=new Float64Array(r.ids),g=new Uint32Array(r.positions);return Sh(d,g,0,d.length-1),a&&a.push(d.buffer,g.buffer),{ids:d,positions:g}}static deserialize(r){const a=new bl;return a.ids=r.ids,a.positions=r.positions,a.indexed=!0,a}}function ym(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:Br.exports(String(o))}function Sh(o,r,a,d){for(;a<d;){const g=o[a+d>>1];let v=a-1,x=d+1;for(;;){do v++;while(o[v]<g);do x--;while(o[x]>g);if(v>=x)break;Gs(o,v,x),Gs(r,3*v,3*x),Gs(r,3*v+1,3*x+1),Gs(r,3*v+2,3*x+2)}x-a<d-x?(Sh(o,r,a,x),a=x+1):(Sh(o,r,x+1,d),d=x)}}function Gs(o,r,a){const d=o[r];o[r]=o[a],o[a]=d}yt("FeaturePositionMap",bl);class Ma{constructor(r,a){this.gl=r.gl,this.location=a}}class Pa extends Ma{constructor(r,a){super(r,a),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Vu extends Ma{constructor(r,a){super(r,a),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class _S extends Ma{constructor(r,a){super(r,a),this.current=Q.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const nD=new Float32Array(16);function nv(o){return[gn(255*o.r,255*o.g),gn(255*o.b,255*o.a)]}class Th{constructor(r,a,d){this.value=r,this.uniformNames=a.map(g=>`u_${g}`),this.type=d}setUniform(r,a,d){r.set(d.constantOr(this.value))}getBinding(r,a,d){return this.type==="color"?new _S(r,a):new Pa(r,a)}}class Uu{constructor(r,a){this.uniformNames=a.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=r.tlbr}setUniform(r,a,d,g){const v=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&r.set(v)}getBinding(r,a,d){return d.substr(0,9)==="u_pattern"?new Vu(r,a):new Pa(r,a)}}class za{constructor(r,a,d,g){this.expression=r,this.type=d,this.maxValue=0,this.paintVertexAttributes=a.map(v=>({name:`a_${v}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(r,a,d,g,v){const x=this.paintVertexArray.length,T=this.expression.evaluate(new qn(0),a,{},g,[],v);this.paintVertexArray.resize(r),this._setPaintValue(x,r,T)}updatePaintArray(r,a,d,g){const v=this.expression.evaluate({zoom:0},d,g);this._setPaintValue(r,a,v)}_setPaintValue(r,a,d){if(this.type==="color"){const g=nv(d);for(let v=r;v<a;v++)this.paintVertexArray.emplace(v,g[0],g[1])}else{for(let g=r;g<a;g++)this.paintVertexArray.emplace(g,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class cs{constructor(r,a,d,g,v,x){this.expression=r,this.uniformNames=a.map(T=>`u_${T}_t`),this.type=d,this.useIntegerZoom=g,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=a.map(T=>({name:`a_${T}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,a,d,g,v){const x=this.expression.evaluate(new qn(this.zoom),a,{},g,[],v),T=this.expression.evaluate(new qn(this.zoom+1),a,{},g,[],v),C=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(C,r,x,T)}updatePaintArray(r,a,d,g){const v=this.expression.evaluate({zoom:this.zoom},d,g),x=this.expression.evaluate({zoom:this.zoom+1},d,g);this._setPaintValue(r,a,v,x)}_setPaintValue(r,a,d,g){if(this.type==="color"){const v=nv(d),x=nv(g);for(let T=r;T<a;T++)this.paintVertexArray.emplace(T,v[0],v[1],x[0],x[1])}else{for(let v=r;v<a;v++)this.paintVertexArray.emplace(v,d,g);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(g))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,a){const d=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,g=E(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);r.set(g)}getBinding(r,a,d){return new Pa(r,a)}}class wl{constructor(r,a,d,g,v,x){this.expression=r,this.type=a,this.useIntegerZoom=d,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(r,a,d){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(g,r,a.patterns&&a.patterns[this.layerId],d)}updatePaintArray(r,a,d,g,v){this._setPaintValues(r,a,d.patterns&&d.patterns[this.layerId],v)}_setPaintValues(r,a,d,g){if(!g||!d)return;const{min:v,mid:x,max:T}=d,C=g[v],z=g[x],R=g[T];if(C&&z&&R)for(let B=r;B<a;B++)this.zoomInPaintVertexArray.emplace(B,z.tl[0],z.tl[1],z.br[0],z.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],z.pixelRatio,C.pixelRatio),this.zoomOutPaintVertexArray.emplace(B,z.tl[0],z.tl[1],z.br[0],z.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],z.pixelRatio,R.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Or.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Or.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class xS{constructor(r,a,d){this.binders={},this._buffers=[];const g=[];for(const v in r.paint._values){if(!d(v))continue;const x=r.paint.get(v);if(!(x instanceof Ao&&Gn(x.property.specification)))continue;const T=rD(v,r.type),C=x.value,z=x.property.specification.type,R=x.property.useIntegerZoom,B=x.property.specification["property-type"],Z=B==="cross-faded"||B==="cross-faded-data-driven";if(C.kind==="constant")this.binders[v]=Z?new Uu(C.value,T):new Th(C.value,T,z),g.push(`/u_${v}`);else if(C.kind==="source"||Z){const X=bS(v,z,"source");this.binders[v]=Z?new wl(C,z,R,a,X,r.id):new za(C,T,z,X),g.push(`/a_${v}`)}else{const X=bS(v,z,"composite");this.binders[v]=new cs(C,T,z,R,a,X),g.push(`/z_${v}`)}}this.cacheKey=g.sort().join("")}getMaxValue(r){const a=this.binders[r];return a instanceof za||a instanceof cs?a.maxValue:0}populatePaintArrays(r,a,d,g,v){for(const x in this.binders){const T=this.binders[x];(T instanceof za||T instanceof cs||T instanceof wl)&&T.populatePaintArray(r,a,d,g,v)}}setConstantPatternPositions(r,a){for(const d in this.binders){const g=this.binders[d];g instanceof Uu&&g.setConstantPatternPositions(r,a)}}updatePaintArrays(r,a,d,g,v){let x=!1;for(const T in r){const C=a.getPositions(T);for(const z of C){const R=d.feature(z.index);for(const B in this.binders){const Z=this.binders[B];if((Z instanceof za||Z instanceof cs||Z instanceof wl)&&Z.expression.isStateDependent===!0){const X=g.paint.get(B);Z.expression=X.value,Z.updatePaintArray(z.start,z.end,R,r[T],v),x=!0}}}}return x}defines(){const r=[];for(const a in this.binders){const d=this.binders[a];(d instanceof Th||d instanceof Uu)&&r.push(...d.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return r}getBinderAttributes(){const r=[];for(const a in this.binders){const d=this.binders[a];if(d instanceof za||d instanceof cs)for(let g=0;g<d.paintVertexAttributes.length;g++)r.push(d.paintVertexAttributes[g].name);else if(d instanceof wl)for(let g=0;g<Or.members.length;g++)r.push(Or.members[g].name)}return r}getBinderUniforms(){const r=[];for(const a in this.binders){const d=this.binders[a];if(d instanceof Th||d instanceof Uu||d instanceof cs)for(const g of d.uniformNames)r.push(g)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,a){const d=[];for(const g in this.binders){const v=this.binders[g];if(v instanceof Th||v instanceof Uu||v instanceof cs){for(const x of v.uniformNames)if(a[x]){const T=v.getBinding(r,a[x],x);d.push({name:x,property:g,binding:T})}}}return d}setUniforms(r,a,d,g){for(const{name:v,property:x,binding:T}of a)this.binders[x].setUniform(T,g,d.get(x),v)}updatePaintBuffers(r){this._buffers=[];for(const a in this.binders){const d=this.binders[a];if(r&&d instanceof wl){const g=r.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(d instanceof za||d instanceof cs)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(r){for(const a in this.binders){const d=this.binders[a];(d instanceof za||d instanceof cs||d instanceof wl)&&d.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const a=this.binders[r];(a instanceof za||a instanceof cs||a instanceof wl)&&a.destroy()}}}class Lc{constructor(r,a,d=()=>!0){this.programConfigurations={};for(const g of r)this.programConfigurations[g.id]=new xS(g,a,d);this.needsUpload=!1,this._featureMap=new bl,this._bufferOffset=0}populatePaintArrays(r,a,d,g,v,x){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(r,a,g,v,x);a.id!==void 0&&this._featureMap.add(a.id,d,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,a,d,g){for(const v of d)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(r,this._featureMap,a,v,g)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function rD(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function bS(o,r,a){const d={color:{source:f,composite:De},number:{source:re,composite:f}},g=function(v){return{"line-pattern":{source:Lr,composite:Lr},"fill-pattern":{source:Lr,composite:Lr},"fill-extrusion-pattern":{source:Lr,composite:Lr}}[v]}(o);return g&&g[a]||d[r][a]}yt("ConstantBinder",Th),yt("CrossFadedConstantBinder",Uu),yt("SourceExpressionBinder",za),yt("CrossFadedCompositeBinder",wl),yt("CompositeExpressionBinder",cs),yt("ProgramConfiguration",xS,{omit:["_buffers"]}),yt("ProgramConfigurationSet",Lc);var Pr=8192;const rv=Math.pow(2,14)-1,wS=-rv-1;function Oc(o){const r=Pr/o.extent,a=o.loadGeometry();for(let d=0;d<a.length;d++){const g=a[d];for(let v=0;v<g.length;v++){const x=g[v],T=Math.round(x.x*r),C=Math.round(x.y*r);x.x=E(T,wS,rv),x.y=E(C,wS,rv),(T<x.x||T>x.x+1||C<x.y||C>x.y+1)&&de("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function Bc(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?Oc(o):[]}}function vm(o,r,a,d,g){o.emplaceBack(2*r+(d+1)/2,2*a+(g+1)/2)}class iv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new xn,this.indexArray=new wi,this.segments=new Qt,this.programConfigurations=new Lc(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,d){const g=this.layers[0],v=[];let x=null,T=!1;g.type==="circle"&&(x=g.layout.get("circle-sort-key"),T=!x.isConstant());for(const{feature:C,id:z,index:R,sourceLayerIndex:B}of r){const Z=this.layers[0]._featureFilter.needGeometry,X=Bc(C,Z);if(!this.layers[0]._featureFilter.filter(new qn(this.zoom),X,d))continue;const H=T?x.evaluate(X,{},d):void 0,ue={id:z,properties:C.properties,type:C.type,sourceLayerIndex:B,index:R,geometry:Z?X.geometry:Oc(C),patterns:{},sortKey:H};v.push(ue)}T&&v.sort((C,z)=>C.sortKey-z.sortKey);for(const C of v){const{geometry:z,index:R,sourceLayerIndex:B}=C,Z=r[R].feature;this.addFeature(C,z,R,d),a.featureIndex.insert(Z,z,R,B,this.index)}}update(r,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Mr),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,a,d,g){for(const v of a)for(const x of v){const T=x.x,C=x.y;if(T<0||T>=Pr||C<0||C>=Pr)continue;const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),R=z.vertexLength;vm(this.layoutVertexArray,T,C,-1,-1),vm(this.layoutVertexArray,T,C,1,-1),vm(this.layoutVertexArray,T,C,1,1),vm(this.layoutVertexArray,T,C,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,{},g)}}function SS(o,r){for(let a=0;a<o.length;a++)if(Gu(r,o[a]))return!0;for(let a=0;a<r.length;a++)if(Gu(o,r[a]))return!0;return!!ov(o,r)}function iD(o,r,a){return!!Gu(o,r)||!!sv(r,o,a)}function TS(o,r){if(o.length===1)return ES(r,o[0]);for(let a=0;a<r.length;a++){const d=r[a];for(let g=0;g<d.length;g++)if(Gu(o,d[g]))return!0}for(let a=0;a<o.length;a++)if(ES(r,o[a]))return!0;for(let a=0;a<r.length;a++)if(ov(o,r[a]))return!0;return!1}function oD(o,r,a){if(o.length>1){if(ov(o,r))return!0;for(let d=0;d<r.length;d++)if(sv(r[d],o,a))return!0}for(let d=0;d<o.length;d++)if(sv(o[d],r,a))return!0;return!1}function ov(o,r){if(o.length===0||r.length===0)return!1;for(let a=0;a<o.length-1;a++){const d=o[a],g=o[a+1];for(let v=0;v<r.length-1;v++)if(sD(d,g,r[v],r[v+1]))return!0}return!1}function sD(o,r,a,d){return pe(o,a,d)!==pe(r,a,d)&&pe(o,r,a)!==pe(o,r,d)}function sv(o,r,a){const d=a*a;if(r.length===1)return o.distSqr(r[0])<d;for(let g=1;g<r.length;g++)if(kS(o,r[g-1],r[g])<d)return!0;return!1}function kS(o,r,a){const d=r.distSqr(a);if(d===0)return o.distSqr(r);const g=((o.x-r.x)*(a.x-r.x)+(o.y-r.y)*(a.y-r.y))/d;return o.distSqr(g<0?r:g>1?a:a.sub(r)._mult(g)._add(r))}function ES(o,r){let a,d,g,v=!1;for(let x=0;x<o.length;x++){a=o[x];for(let T=0,C=a.length-1;T<a.length;C=T++)d=a[T],g=a[C],d.y>r.y!=g.y>r.y&&r.x<(g.x-d.x)*(r.y-d.y)/(g.y-d.y)+d.x&&(v=!v)}return v}function Gu(o,r){let a=!1;for(let d=0,g=o.length-1;d<o.length;g=d++){const v=o[d],x=o[g];v.y>r.y!=x.y>r.y&&r.x<(x.x-v.x)*(r.y-v.y)/(x.y-v.y)+v.x&&(a=!a)}return a}function aD(o,r,a){const d=a[0],g=a[2];if(o.x<d.x&&r.x<d.x||o.x>g.x&&r.x>g.x||o.y<d.y&&r.y<d.y||o.y>g.y&&r.y>g.y)return!1;const v=pe(o,r,a[0]);return v!==pe(o,r,a[1])||v!==pe(o,r,a[2])||v!==pe(o,r,a[3])}function kh(o,r,a){const d=r.paint.get(o).value;return d.kind==="constant"?d.value:a.programConfigurations.get(r.id).getMaxValue(o)}function _m(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function xm(o,r,a,d,g){if(!r[0]&&!r[1])return o;const v=Ce.convert(r)._mult(g);a==="viewport"&&v._rotate(-d);const x=[];for(let T=0;T<o.length;T++)x.push(o[T].sub(v));return x}yt("CircleBucket",iv,{omit:["layers"]});const lD=new Gr({"circle-sort-key":new Dt(Ne.layout_circle["circle-sort-key"])});var cD={paint:new Gr({"circle-radius":new Dt(Ne.paint_circle["circle-radius"]),"circle-color":new Dt(Ne.paint_circle["circle-color"]),"circle-blur":new Dt(Ne.paint_circle["circle-blur"]),"circle-opacity":new Dt(Ne.paint_circle["circle-opacity"]),"circle-translate":new Tt(Ne.paint_circle["circle-translate"]),"circle-translate-anchor":new Tt(Ne.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Tt(Ne.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Tt(Ne.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Dt(Ne.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Dt(Ne.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Dt(Ne.paint_circle["circle-stroke-opacity"])}),layout:lD},Si=1e-6,Ti=typeof Float32Array<"u"?Float32Array:Array;function CS(){var o=new Ti(9);return Ti!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function av(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function IS(o,r,a){var d=r[0],g=r[1],v=r[2],x=r[3],T=r[4],C=r[5],z=r[6],R=r[7],B=r[8],Z=r[9],X=r[10],H=r[11],ue=r[12],le=r[13],ke=r[14],Re=r[15],Se=a[0],ze=a[1],Ue=a[2],Ve=a[3];return o[0]=Se*d+ze*T+Ue*B+Ve*ue,o[1]=Se*g+ze*C+Ue*Z+Ve*le,o[2]=Se*v+ze*z+Ue*X+Ve*ke,o[3]=Se*x+ze*R+Ue*H+Ve*Re,o[4]=(Se=a[4])*d+(ze=a[5])*T+(Ue=a[6])*B+(Ve=a[7])*ue,o[5]=Se*g+ze*C+Ue*Z+Ve*le,o[6]=Se*v+ze*z+Ue*X+Ve*ke,o[7]=Se*x+ze*R+Ue*H+Ve*Re,o[8]=(Se=a[8])*d+(ze=a[9])*T+(Ue=a[10])*B+(Ve=a[11])*ue,o[9]=Se*g+ze*C+Ue*Z+Ve*le,o[10]=Se*v+ze*z+Ue*X+Ve*ke,o[11]=Se*x+ze*R+Ue*H+Ve*Re,o[12]=(Se=a[12])*d+(ze=a[13])*T+(Ue=a[14])*B+(Ve=a[15])*ue,o[13]=Se*g+ze*C+Ue*Z+Ve*le,o[14]=Se*v+ze*z+Ue*X+Ve*ke,o[15]=Se*x+ze*R+Ue*H+Ve*Re,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var Eh,uD=IS;function MS(){var o=new Ti(3);return Ti!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function PS(o,r,a){var d=new Ti(3);return d[0]=o,d[1]=r,d[2]=a,d}function bm(o,r,a){var d=r[0],g=r[1],v=r[2],x=r[3];return o[0]=a[0]*d+a[4]*g+a[8]*v+a[12]*x,o[1]=a[1]*d+a[5]*g+a[9]*v+a[13]*x,o[2]=a[2]*d+a[6]*g+a[10]*v+a[14]*x,o[3]=a[3]*d+a[7]*g+a[11]*v+a[15]*x,o}function zS(){var o=new Ti(4);return Ti!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function AS(o,r){const a=bm([],[o.x,o.y,0,1],r);return new Ce(a[0]/a[3],a[1]/a[3])}MS(),Eh=new Ti(4),Ti!=Float32Array&&(Eh[0]=0,Eh[1]=0,Eh[2]=0,Eh[3]=0),MS(),PS(1,0,0),PS(0,1,0),zS(),zS(),CS(),function(){var o;o=new Ti(2),Ti!=Float32Array&&(o[0]=0,o[1]=0)}();class DS extends iv{}yt("HeatmapBucket",DS,{omit:["layers"]});var dD={paint:new Gr({"heatmap-radius":new Dt(Ne.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Dt(Ne.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Tt(Ne.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $s(Ne.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Tt(Ne.paint_heatmap["heatmap-opacity"])})};function lv(o,{width:r,height:a},d,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==r*a*d)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${r*a*d}`)}else g=new Uint8Array(r*a*d);return o.width=r,o.height=a,o.data=g,o}function RS(o,{width:r,height:a},d){if(r===o.width&&a===o.height)return;const g=lv({},{width:r,height:a},d);cv(o,g,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,a)},d),o.width=r,o.height=a,o.data=g.data}function cv(o,r,a,d,g,v){if(g.width===0||g.height===0)return r;if(g.width>o.width||g.height>o.height||a.x>o.width-g.width||a.y>o.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>r.width||g.height>r.height||d.x>r.width-g.width||d.y>r.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,T=r.data;if(x===T)throw new Error("srcData equals dstData, so image is already copied");for(let C=0;C<g.height;C++){const z=((a.y+C)*o.width+a.x)*v,R=((d.y+C)*r.width+d.x)*v;for(let B=0;B<g.width*v;B++)T[R+B]=x[z+B]}return r}class Ch{constructor(r,a){lv(this,r,1,a)}resize(r){RS(this,r,1)}clone(){return new Ch({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,a,d,g,v){cv(r,a,d,g,v,1)}}class go{constructor(r,a){lv(this,r,4,a)}resize(r){RS(this,r,4)}replace(r,a){a?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new go({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,a,d,g,v){cv(r,a,d,g,v,4)}}function LS(o){const r={},a=o.resolution||256,d=o.clips?o.clips.length:1,g=o.image||new go({width:a,height:d});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const v=(x,T,C)=>{r[o.evaluationKey]=C;const z=o.expression.evaluate(r);g.data[x+T+0]=Math.floor(255*z.r/z.a),g.data[x+T+1]=Math.floor(255*z.g/z.a),g.data[x+T+2]=Math.floor(255*z.b/z.a),g.data[x+T+3]=Math.floor(255*z.a)};if(o.clips)for(let x=0,T=0;x<d;++x,T+=4*a)for(let C=0,z=0;C<a;C++,z+=4){const R=C/(a-1),{start:B,end:Z}=o.clips[x];v(T,z,B*(1-R)+Z*R)}else for(let x=0,T=0;x<a;x++,T+=4)v(0,T,x/(a-1));return g}yt("AlphaImage",Ch),yt("RGBAImage",go);var hD={paint:new Gr({"hillshade-illumination-direction":new Tt(Ne.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Tt(Ne.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Tt(Ne.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Tt(Ne.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Tt(Ne.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Tt(Ne.paint_hillshade["hillshade-accent-color"])})};const fD=xr([{name:"a_pos",components:2,type:"Int16"}],4),{members:pD}=fD;var wm={exports:{}};function Sm(o,r,a){a=a||2;var d,g,v,x,T,C,z,R=r&&r.length,B=R?r[0]*a:o.length,Z=OS(o,0,B,a,!0),X=[];if(!Z||Z.next===Z.prev)return X;if(R&&(Z=function(ue,le,ke,Re){var Se,ze,Ue,Ve=[];for(Se=0,ze=le.length;Se<ze;Se++)(Ue=OS(ue,le[Se]*Re,Se<ze-1?le[Se+1]*Re:ue.length,Re,!1))===Ue.next&&(Ue.steiner=!0),Ve.push(wD(Ue));for(Ve.sort(_D),Se=0;Se<Ve.length;Se++)ke=xD(Ve[Se],ke);return ke}(o,r,Z,a)),o.length>80*a){d=v=o[0],g=x=o[1];for(var H=a;H<B;H+=a)(T=o[H])<d&&(d=T),(C=o[H+1])<g&&(g=C),T>v&&(v=T),C>x&&(x=C);z=(z=Math.max(v-d,x-g))!==0?32767/z:0}return Ih(Z,X,a,d,g,z,0),X}function OS(o,r,a,d,g){var v,x;if(g===hv(o,r,a,d)>0)for(v=r;v<a;v+=d)x=NS(v,o[v],o[v+1],x);else for(v=a-d;v>=r;v-=d)x=NS(v,o[v],o[v+1],x);return x&&Tm(x,x.next)&&(Ph(x),x=x.next),x}function Fc(o,r){if(!o)return o;r||(r=o);var a,d=o;do if(a=!1,d.steiner||!Tm(d,d.next)&&ur(d.prev,d,d.next)!==0)d=d.next;else{if(Ph(d),(d=r=d.prev)===d.next)break;a=!0}while(a||d!==r);return r}function Ih(o,r,a,d,g,v,x){if(o){!x&&v&&function(R,B,Z,X){var H=R;do H.z===0&&(H.z=uv(H.x,H.y,B,Z,X)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==R);H.prevZ.nextZ=null,H.prevZ=null,function(ue){var le,ke,Re,Se,ze,Ue,Ve,gt,wt=1;do{for(ke=ue,ue=null,ze=null,Ue=0;ke;){for(Ue++,Re=ke,Ve=0,le=0;le<wt&&(Ve++,Re=Re.nextZ);le++);for(gt=wt;Ve>0||gt>0&&Re;)Ve!==0&&(gt===0||!Re||ke.z<=Re.z)?(Se=ke,ke=ke.nextZ,Ve--):(Se=Re,Re=Re.nextZ,gt--),ze?ze.nextZ=Se:ue=Se,Se.prevZ=ze,ze=Se;ke=Re}ze.nextZ=null,wt*=2}while(Ue>1)}(H)}(o,d,g,v);for(var T,C,z=o;o.prev!==o.next;)if(T=o.prev,C=o.next,v?gD(o,d,g,v):mD(o))r.push(T.i/a|0),r.push(o.i/a|0),r.push(C.i/a|0),Ph(o),o=C.next,z=C.next;else if((o=C)===z){x?x===1?Ih(o=yD(Fc(o),r,a),r,a,d,g,v,2):x===2&&vD(o,r,a,d,g,v):Ih(Fc(o),r,a,d,g,v,1);break}}}function mD(o){var r=o.prev,a=o,d=o.next;if(ur(r,a,d)>=0)return!1;for(var g=r.x,v=a.x,x=d.x,T=r.y,C=a.y,z=d.y,R=g<v?g<x?g:x:v<x?v:x,B=T<C?T<z?T:z:C<z?C:z,Z=g>v?g>x?g:x:v>x?v:x,X=T>C?T>z?T:z:C>z?C:z,H=d.next;H!==r;){if(H.x>=R&&H.x<=Z&&H.y>=B&&H.y<=X&&Wu(g,T,v,C,x,z,H.x,H.y)&&ur(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function gD(o,r,a,d){var g=o.prev,v=o,x=o.next;if(ur(g,v,x)>=0)return!1;for(var T=g.x,C=v.x,z=x.x,R=g.y,B=v.y,Z=x.y,X=T<C?T<z?T:z:C<z?C:z,H=R<B?R<Z?R:Z:B<Z?B:Z,ue=T>C?T>z?T:z:C>z?C:z,le=R>B?R>Z?R:Z:B>Z?B:Z,ke=uv(X,H,r,a,d),Re=uv(ue,le,r,a,d),Se=o.prevZ,ze=o.nextZ;Se&&Se.z>=ke&&ze&&ze.z<=Re;){if(Se.x>=X&&Se.x<=ue&&Se.y>=H&&Se.y<=le&&Se!==g&&Se!==x&&Wu(T,R,C,B,z,Z,Se.x,Se.y)&&ur(Se.prev,Se,Se.next)>=0||(Se=Se.prevZ,ze.x>=X&&ze.x<=ue&&ze.y>=H&&ze.y<=le&&ze!==g&&ze!==x&&Wu(T,R,C,B,z,Z,ze.x,ze.y)&&ur(ze.prev,ze,ze.next)>=0))return!1;ze=ze.nextZ}for(;Se&&Se.z>=ke;){if(Se.x>=X&&Se.x<=ue&&Se.y>=H&&Se.y<=le&&Se!==g&&Se!==x&&Wu(T,R,C,B,z,Z,Se.x,Se.y)&&ur(Se.prev,Se,Se.next)>=0)return!1;Se=Se.prevZ}for(;ze&&ze.z<=Re;){if(ze.x>=X&&ze.x<=ue&&ze.y>=H&&ze.y<=le&&ze!==g&&ze!==x&&Wu(T,R,C,B,z,Z,ze.x,ze.y)&&ur(ze.prev,ze,ze.next)>=0)return!1;ze=ze.nextZ}return!0}function yD(o,r,a){var d=o;do{var g=d.prev,v=d.next.next;!Tm(g,v)&&BS(g,d,d.next,v)&&Mh(g,v)&&Mh(v,g)&&(r.push(g.i/a|0),r.push(d.i/a|0),r.push(v.i/a|0),Ph(d),Ph(d.next),d=o=v),d=d.next}while(d!==o);return Fc(d)}function vD(o,r,a,d,g,v){var x=o;do{for(var T=x.next.next;T!==x.prev;){if(x.i!==T.i&&SD(x,T)){var C=FS(x,T);return x=Fc(x,x.next),C=Fc(C,C.next),Ih(x,r,a,d,g,v,0),void Ih(C,r,a,d,g,v,0)}T=T.next}x=x.next}while(x!==o)}function _D(o,r){return o.x-r.x}function xD(o,r){var a=function(g,v){var x,T=v,C=g.x,z=g.y,R=-1/0;do{if(z<=T.y&&z>=T.next.y&&T.next.y!==T.y){var B=T.x+(z-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(B<=C&&B>R&&(R=B,x=T.x<T.next.x?T:T.next,B===C))return x}T=T.next}while(T!==v);if(!x)return null;var Z,X=x,H=x.x,ue=x.y,le=1/0;T=x;do C>=T.x&&T.x>=H&&C!==T.x&&Wu(z<ue?C:R,z,H,ue,z<ue?R:C,z,T.x,T.y)&&(Z=Math.abs(z-T.y)/(C-T.x),Mh(T,g)&&(Z<le||Z===le&&(T.x>x.x||T.x===x.x&&bD(x,T)))&&(x=T,le=Z)),T=T.next;while(T!==X);return x}(o,r);if(!a)return r;var d=FS(a,o);return Fc(d,d.next),Fc(a,a.next)}function bD(o,r){return ur(o.prev,o,r.prev)<0&&ur(r.next,o,o.next)<0}function uv(o,r,a,d,g){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-a)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-d)*g|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function wD(o){var r=o,a=o;do(r.x<a.x||r.x===a.x&&r.y<a.y)&&(a=r),r=r.next;while(r!==o);return a}function Wu(o,r,a,d,g,v,x,T){return(g-x)*(r-T)>=(o-x)*(v-T)&&(o-x)*(d-T)>=(a-x)*(r-T)&&(a-x)*(v-T)>=(g-x)*(d-T)}function SD(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(a,d){var g=a;do{if(g.i!==a.i&&g.next.i!==a.i&&g.i!==d.i&&g.next.i!==d.i&&BS(g,g.next,a,d))return!0;g=g.next}while(g!==a);return!1}(o,r)&&(Mh(o,r)&&Mh(r,o)&&function(a,d){var g=a,v=!1,x=(a.x+d.x)/2,T=(a.y+d.y)/2;do g.y>T!=g.next.y>T&&g.next.y!==g.y&&x<(g.next.x-g.x)*(T-g.y)/(g.next.y-g.y)+g.x&&(v=!v),g=g.next;while(g!==a);return v}(o,r)&&(ur(o.prev,o,r.prev)||ur(o,r.prev,r))||Tm(o,r)&&ur(o.prev,o,o.next)>0&&ur(r.prev,r,r.next)>0)}function ur(o,r,a){return(r.y-o.y)*(a.x-r.x)-(r.x-o.x)*(a.y-r.y)}function Tm(o,r){return o.x===r.x&&o.y===r.y}function BS(o,r,a,d){var g=Em(ur(o,r,a)),v=Em(ur(o,r,d)),x=Em(ur(a,d,o)),T=Em(ur(a,d,r));return g!==v&&x!==T||!(g!==0||!km(o,a,r))||!(v!==0||!km(o,d,r))||!(x!==0||!km(a,o,d))||!(T!==0||!km(a,r,d))}function km(o,r,a){return r.x<=Math.max(o.x,a.x)&&r.x>=Math.min(o.x,a.x)&&r.y<=Math.max(o.y,a.y)&&r.y>=Math.min(o.y,a.y)}function Em(o){return o>0?1:o<0?-1:0}function Mh(o,r){return ur(o.prev,o,o.next)<0?ur(o,r,o.next)>=0&&ur(o,o.prev,r)>=0:ur(o,r,o.prev)<0||ur(o,o.next,r)<0}function FS(o,r){var a=new dv(o.i,o.x,o.y),d=new dv(r.i,r.x,r.y),g=o.next,v=r.prev;return o.next=r,r.prev=o,a.next=g,g.prev=a,d.next=a,a.prev=d,v.next=d,d.prev=v,d}function NS(o,r,a,d){var g=new dv(o,r,a);return d?(g.next=d.next,g.prev=d,d.next.prev=g,d.next=g):(g.prev=g,g.next=g),g}function Ph(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function dv(o,r,a){this.i=o,this.x=r,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function hv(o,r,a,d){for(var g=0,v=r,x=a-d;v<a;v+=d)g+=(o[x]-o[v])*(o[v+1]+o[x+1]),x=v;return g}function TD(o,r,a,d,g){$S(o,r,a||0,d||o.length-1,g||kD)}function $S(o,r,a,d,g){for(;d>a;){if(d-a>600){var v=d-a+1,x=r-a+1,T=Math.log(v),C=.5*Math.exp(2*T/3),z=.5*Math.sqrt(T*C*(v-C)/v)*(x-v/2<0?-1:1);$S(o,r,Math.max(a,Math.floor(r-x*C/v+z)),Math.min(d,Math.floor(r+(v-x)*C/v+z)),g)}var R=o[r],B=a,Z=d;for(zh(o,a,r),g(o[d],R)>0&&zh(o,a,d);B<Z;){for(zh(o,B,Z),B++,Z--;g(o[B],R)<0;)B++;for(;g(o[Z],R)>0;)Z--}g(o[a],R)===0?zh(o,a,Z):zh(o,++Z,d),Z<=r&&(a=Z+1),r<=Z&&(d=Z-1)}}function zh(o,r,a){var d=o[r];o[r]=o[a],o[a]=d}function kD(o,r){return o<r?-1:o>r?1:0}function fv(o,r){const a=o.length;if(a<=1)return[o];const d=[];let g,v;for(let x=0;x<a;x++){const T=ce(o[x]);T!==0&&(o[x].area=Math.abs(T),v===void 0&&(v=T<0),v===T<0?(g&&d.push(g),g=[o[x]]):g.push(o[x]))}if(g&&d.push(g),r>1)for(let x=0;x<d.length;x++)d[x].length<=r||(TD(d[x],r,1,d[x].length-1,ED),d[x]=d[x].slice(0,r));return d}function ED(o,r){return r.area-o.area}function pv(o,r,a){const d=a.patternDependencies;let g=!1;for(const v of r){const x=v.paint.get(`${o}-pattern`);x.isConstant()||(g=!0);const T=x.constantOr(null);T&&(g=!0,d[T.to]=!0,d[T.from]=!0)}return g}function mv(o,r,a,d,g){const v=g.patternDependencies;for(const x of r){const T=x.paint.get(`${o}-pattern`).value;if(T.kind!=="constant"){let C=T.evaluate({zoom:d-1},a,{},g.availableImages),z=T.evaluate({zoom:d},a,{},g.availableImages),R=T.evaluate({zoom:d+1},a,{},g.availableImages);C=C&&C.name?C.name:C,z=z&&z.name?z.name:z,R=R&&R.name?R.name:R,v[C]=!0,v[z]=!0,v[R]=!0,a.patterns[x.id]={min:C,mid:z,max:R}}}return a}wm.exports=Sm,wm.exports.default=Sm,Sm.deviation=function(o,r,a,d){var g=r&&r.length,v=Math.abs(hv(o,0,g?r[0]*a:o.length,a));if(g)for(var x=0,T=r.length;x<T;x++)v-=Math.abs(hv(o,r[x]*a,x<T-1?r[x+1]*a:o.length,a));var C=0;for(x=0;x<d.length;x+=3){var z=d[x]*a,R=d[x+1]*a,B=d[x+2]*a;C+=Math.abs((o[z]-o[B])*(o[R+1]-o[z+1])-(o[z]-o[R])*(o[B+1]-o[z+1]))}return v===0&&C===0?0:Math.abs((C-v)/v)},Sm.flatten=function(o){for(var r=o[0][0].length,a={vertices:[],holes:[],dimensions:r},d=0,g=0;g<o.length;g++){for(var v=0;v<o[g].length;v++)for(var x=0;x<r;x++)a.vertices.push(o[g][v][x]);g>0&&a.holes.push(d+=o[g-1].length)}return a};class gv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new bn,this.indexArray=new wi,this.indexArray2=new ls,this.programConfigurations=new Lc(r.layers,r.zoom),this.segments=new Qt,this.segments2=new Qt,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,d){this.hasPattern=pv("fill",this.layers,a);const g=this.layers[0].layout.get("fill-sort-key"),v=!g.isConstant(),x=[];for(const{feature:T,id:C,index:z,sourceLayerIndex:R}of r){const B=this.layers[0]._featureFilter.needGeometry,Z=Bc(T,B);if(!this.layers[0]._featureFilter.filter(new qn(this.zoom),Z,d))continue;const X=v?g.evaluate(Z,{},d,a.availableImages):void 0,H={id:C,properties:T.properties,type:T.type,sourceLayerIndex:R,index:z,geometry:B?Z.geometry:Oc(T),patterns:{},sortKey:X};x.push(H)}v&&x.sort((T,C)=>T.sortKey-C.sortKey);for(const T of x){const{geometry:C,index:z,sourceLayerIndex:R}=T;if(this.hasPattern){const B=mv("fill",this.layers,T,this.zoom,a);this.patternFeatures.push(B)}else this.addFeature(T,C,z,d,{});a.featureIndex.insert(r[z].feature,C,z,R,this.index)}}update(r,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,d)}addFeatures(r,a,d){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,a,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,pD),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,a,d,g,v){for(const x of fv(a,500)){let T=0;for(const X of x)T+=X.length;const C=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),z=C.vertexLength,R=[],B=[];for(const X of x){if(X.length===0)continue;X!==x[0]&&B.push(R.length/2);const H=this.segments2.prepareSegment(X.length,this.layoutVertexArray,this.indexArray2),ue=H.vertexLength;this.layoutVertexArray.emplaceBack(X[0].x,X[0].y),this.indexArray2.emplaceBack(ue+X.length-1,ue),R.push(X[0].x),R.push(X[0].y);for(let le=1;le<X.length;le++)this.layoutVertexArray.emplaceBack(X[le].x,X[le].y),this.indexArray2.emplaceBack(ue+le-1,ue+le),R.push(X[le].x),R.push(X[le].y);H.vertexLength+=X.length,H.primitiveLength+=X.length}const Z=wm.exports(R,B);for(let X=0;X<Z.length;X+=3)this.indexArray.emplaceBack(z+Z[X],z+Z[X+1],z+Z[X+2]);C.vertexLength+=T,C.primitiveLength+=Z.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,v,g)}}yt("FillBucket",gv,{omit:["layers","patternFeatures"]});const CD=new Gr({"fill-sort-key":new Dt(Ne.layout_fill["fill-sort-key"])});var ID={paint:new Gr({"fill-antialias":new Tt(Ne.paint_fill["fill-antialias"]),"fill-opacity":new Dt(Ne.paint_fill["fill-opacity"]),"fill-color":new Dt(Ne.paint_fill["fill-color"]),"fill-outline-color":new Dt(Ne.paint_fill["fill-outline-color"]),"fill-translate":new Tt(Ne.paint_fill["fill-translate"]),"fill-translate-anchor":new Tt(Ne.paint_fill["fill-translate-anchor"]),"fill-pattern":new xl(Ne.paint_fill["fill-pattern"])}),layout:CD};const MD=xr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),PD=xr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:zD}=MD;var Sl={},AD=Ce,jS=Zu;function Zu(o,r,a,d,g){this.properties={},this.extent=a,this.type=0,this._pbf=o,this._geometry=-1,this._keys=d,this._values=g,o.readFields(DD,this,r)}function DD(o,r,a){o==1?r.id=a.readVarint():o==2?function(d,g){for(var v=d.readVarint()+d.pos;d.pos<v;){var x=g._keys[d.readVarint()],T=g._values[d.readVarint()];g.properties[x]=T}}(a,r):o==3?r.type=a.readVarint():o==4&&(r._geometry=a.pos)}function RD(o){for(var r,a,d=0,g=0,v=o.length,x=v-1;g<v;x=g++)d+=((a=o[x]).x-(r=o[g]).x)*(r.y+a.y);return d}Zu.types=["Unknown","Point","LineString","Polygon"],Zu.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,a=o.readVarint()+o.pos,d=1,g=0,v=0,x=0,T=[];o.pos<a;){if(g<=0){var C=o.readVarint();d=7&C,g=C>>3}if(g--,d===1||d===2)v+=o.readSVarint(),x+=o.readSVarint(),d===1&&(r&&T.push(r),r=[]),r.push(new AD(v,x));else{if(d!==7)throw new Error("unknown command "+d);r&&r.push(r[0].clone())}}return r&&T.push(r),T},Zu.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,a=1,d=0,g=0,v=0,x=1/0,T=-1/0,C=1/0,z=-1/0;o.pos<r;){if(d<=0){var R=o.readVarint();a=7&R,d=R>>3}if(d--,a===1||a===2)(g+=o.readSVarint())<x&&(x=g),g>T&&(T=g),(v+=o.readSVarint())<C&&(C=v),v>z&&(z=v);else if(a!==7)throw new Error("unknown command "+a)}return[x,C,T,z]},Zu.prototype.toGeoJSON=function(o,r,a){var d,g,v=this.extent*Math.pow(2,a),x=this.extent*o,T=this.extent*r,C=this.loadGeometry(),z=Zu.types[this.type];function R(X){for(var H=0;H<X.length;H++){var ue=X[H];X[H]=[360*(ue.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(ue.y+T)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(d=0;d<C.length;d++)B[d]=C[d][0];R(C=B);break;case 2:for(d=0;d<C.length;d++)R(C[d]);break;case 3:for(C=function(X){var H=X.length;if(H<=1)return[X];for(var ue,le,ke=[],Re=0;Re<H;Re++){var Se=RD(X[Re]);Se!==0&&(le===void 0&&(le=Se<0),le===Se<0?(ue&&ke.push(ue),ue=[X[Re]]):ue.push(X[Re]))}return ue&&ke.push(ue),ke}(C),d=0;d<C.length;d++)for(g=0;g<C[d].length;g++)R(C[d][g])}C.length===1?C=C[0]:z="Multi"+z;var Z={type:"Feature",geometry:{type:z,coordinates:C},properties:this.properties};return"id"in this&&(Z.id=this.id),Z};var LD=jS,VS=US;function US(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(OD,this,r),this.length=this._features.length}function OD(o,r,a){o===15?r.version=a.readVarint():o===1?r.name=a.readString():o===5?r.extent=a.readVarint():o===2?r._features.push(a.pos):o===3?r._keys.push(a.readString()):o===4&&r._values.push(function(d){for(var g=null,v=d.readVarint()+d.pos;d.pos<v;){var x=d.readVarint()>>3;g=x===1?d.readString():x===2?d.readFloat():x===3?d.readDouble():x===4?d.readVarint64():x===5?d.readVarint():x===6?d.readSVarint():x===7?d.readBoolean():null}return g}(a))}US.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new LD(this._pbf,r,this.extent,this._keys,this._values)};var BD=VS;function FD(o,r,a){if(o===3){var d=new BD(a,a.readVarint()+a.pos);d.length&&(r[d.name]=d)}}Sl.VectorTile=function(o,r){this.layers=o.readFields(FD,{},r)},Sl.VectorTileFeature=jS,Sl.VectorTileLayer=VS;const ND=Sl.VectorTileFeature.types,yv=Math.pow(2,13);function Ah(o,r,a,d,g,v,x,T){o.emplaceBack(r,a,2*Math.floor(d*yv)+x,g*yv*2,v*yv*2,Math.round(T))}class vv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new cn,this.centroidVertexArray=new Mt,this.indexArray=new wi,this.programConfigurations=new Lc(r.layers,r.zoom),this.segments=new Qt,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,d){this.features=[],this.hasPattern=pv("fill-extrusion",this.layers,a);for(const{feature:g,id:v,index:x,sourceLayerIndex:T}of r){const C=this.layers[0]._featureFilter.needGeometry,z=Bc(g,C);if(!this.layers[0]._featureFilter.filter(new qn(this.zoom),z,d))continue;const R={id:v,sourceLayerIndex:T,index:x,geometry:C?z.geometry:Oc(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(mv("fill-extrusion",this.layers,R,this.zoom,a)):this.addFeature(R,R.geometry,x,d,{}),a.featureIndex.insert(g,R.geometry,x,T,this.index,!0)}}addFeatures(r,a,d){for(const g of this.features){const{geometry:v}=g;this.addFeature(g,v,g.index,a,d)}}update(r,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,zD),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,PD.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,a,d,g,v){const x={x:0,y:0,vertexCount:0};for(const T of fv(a,500)){let C=0;for(const H of T)C+=H.length;let z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const H of T){if(H.length===0||jD(H))continue;let ue=0;for(let le=0;le<H.length;le++){const ke=H[le];if(le>=1){const Re=H[le-1];if(!$D(ke,Re)){z.vertexLength+4>Qt.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Se=ke.sub(Re)._perp()._unit(),ze=Re.dist(ke);ue+ze>32768&&(ue=0),Ah(this.layoutVertexArray,ke.x,ke.y,Se.x,Se.y,0,0,ue),Ah(this.layoutVertexArray,ke.x,ke.y,Se.x,Se.y,0,1,ue),x.x+=2*ke.x,x.y+=2*ke.y,x.vertexCount+=2,ue+=ze,Ah(this.layoutVertexArray,Re.x,Re.y,Se.x,Se.y,0,0,ue),Ah(this.layoutVertexArray,Re.x,Re.y,Se.x,Se.y,0,1,ue),x.x+=2*Re.x,x.y+=2*Re.y,x.vertexCount+=2;const Ue=z.vertexLength;this.indexArray.emplaceBack(Ue,Ue+2,Ue+1),this.indexArray.emplaceBack(Ue+1,Ue+2,Ue+3),z.vertexLength+=4,z.primitiveLength+=2}}}}if(z.vertexLength+C>Qt.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),ND[r.type]!=="Polygon")continue;const R=[],B=[],Z=z.vertexLength;for(const H of T)if(H.length!==0){H!==T[0]&&B.push(R.length/2);for(let ue=0;ue<H.length;ue++){const le=H[ue];Ah(this.layoutVertexArray,le.x,le.y,0,0,1,1,0),x.x+=le.x,x.y+=le.y,x.vertexCount+=1,R.push(le.x),R.push(le.y)}}const X=wm.exports(R,B);for(let H=0;H<X.length;H+=3)this.indexArray.emplaceBack(Z+X[H],Z+X[H+2],Z+X[H+1]);z.primitiveLength+=X.length/3,z.vertexLength+=C}for(let T=0;T<x.vertexCount;T++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,v,g)}}function $D(o,r){return o.x===r.x&&(o.x<0||o.x>Pr)||o.y===r.y&&(o.y<0||o.y>Pr)}function jD(o){return o.every(r=>r.x<0)||o.every(r=>r.x>Pr)||o.every(r=>r.y<0)||o.every(r=>r.y>Pr)}yt("FillExtrusionBucket",vv,{omit:["layers","features"]});var VD={paint:new Gr({"fill-extrusion-opacity":new Tt(Ne["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Dt(Ne["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Tt(Ne["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Tt(Ne["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xl(Ne["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Dt(Ne["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Dt(Ne["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Tt(Ne["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Dh(o,r){return o.x*r.x+o.y*r.y}function GS(o,r){if(o.length===1){let a=0;const d=r[a++];let g;for(;!g||d.equals(g);)if(g=r[a++],!g)return 1/0;for(;a<r.length;a++){const v=r[a],x=o[0],T=g.sub(d),C=v.sub(d),z=x.sub(d),R=Dh(T,T),B=Dh(T,C),Z=Dh(C,C),X=Dh(z,T),H=Dh(z,C),ue=R*Z-B*B,le=(Z*X-B*H)/ue,ke=(R*H-B*X)/ue,Re=d.z*(1-le-ke)+g.z*le+v.z*ke;if(isFinite(Re))return Re}return 1/0}{let a=1/0;for(const d of r)a=Math.min(a,d.z);return a}}const UD=xr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:GD}=UD,WD=xr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:ZD}=WD,qD=Sl.VectorTileFeature.types,XD=Math.cos(Math.PI/180*37.5),WS=Math.pow(2,14)/.5;class _v{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new dn,this.layoutVertexArray2=new kn,this.indexArray=new wi,this.programConfigurations=new Lc(r.layers,r.zoom),this.segments=new Qt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,d){this.hasPattern=pv("line",this.layers,a);const g=this.layers[0].layout.get("line-sort-key"),v=!g.isConstant(),x=[];for(const{feature:T,id:C,index:z,sourceLayerIndex:R}of r){const B=this.layers[0]._featureFilter.needGeometry,Z=Bc(T,B);if(!this.layers[0]._featureFilter.filter(new qn(this.zoom),Z,d))continue;const X=v?g.evaluate(Z,{},d):void 0,H={id:C,properties:T.properties,type:T.type,sourceLayerIndex:R,index:z,geometry:B?Z.geometry:Oc(T),patterns:{},sortKey:X};x.push(H)}v&&x.sort((T,C)=>T.sortKey-C.sortKey);for(const T of x){const{geometry:C,index:z,sourceLayerIndex:R}=T;if(this.hasPattern){const B=mv("line",this.layers,T,this.zoom,a);this.patternFeatures.push(B)}else this.addFeature(T,C,z,d,{});a.featureIndex.insert(r[z].feature,C,z,R,this.index)}}update(r,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,d)}addFeatures(r,a,d){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,a,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,ZD)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,GD),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,a,d,g,v){const x=this.layers[0].layout,T=x.get("line-join").evaluate(r,{}),C=x.get("line-cap"),z=x.get("line-miter-limit"),R=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const B of a)this.addLine(B,r,T,C,z,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,v,g)}addLine(r,a,d,g,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ke=0;ke<r.length-1;ke++)this.totalDistance+=r[ke].dist(r[ke+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=qD[a.type]==="Polygon";let C=r.length;for(;C>=2&&r[C-1].equals(r[C-2]);)C--;let z=0;for(;z<C-1&&r[z].equals(r[z+1]);)z++;if(C<(T?3:2))return;d==="bevel"&&(v=1.05);const R=this.overscaling<=16?122880/(512*this.overscaling):0,B=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray);let Z,X,H,ue,le;this.e1=this.e2=-1,T&&(Z=r[C-2],le=r[z].sub(Z)._unit()._perp());for(let ke=z;ke<C;ke++){if(H=ke===C-1?T?r[z+1]:void 0:r[ke+1],H&&r[ke].equals(H))continue;le&&(ue=le),Z&&(X=Z),Z=r[ke],le=H?H.sub(Z)._unit()._perp():ue,ue=ue||le;let Re=ue.add(le);Re.x===0&&Re.y===0||Re._unit();const Se=ue.x*le.x+ue.y*le.y,ze=Re.x*le.x+Re.y*le.y,Ue=ze!==0?1/ze:1/0,Ve=2*Math.sqrt(2-2*ze),gt=ze<XD&&X&&H,wt=ue.x*le.y-ue.y*le.x>0;if(gt&&ke>z){const tt=Z.dist(X);if(tt>2*R){const dt=Z.sub(Z.sub(X)._mult(R/tt)._round());this.updateDistance(X,dt),this.addCurrentVertex(dt,ue,0,0,B),X=dt}}const ut=X&&H;let it=ut?d:T?"butt":g;if(ut&&it==="round"&&(Ue<x?it="miter":Ue<=2&&(it="fakeround")),it==="miter"&&Ue>v&&(it="bevel"),it==="bevel"&&(Ue>2&&(it="flipbevel"),Ue<v&&(it="miter")),X&&this.updateDistance(X,Z),it==="miter")Re._mult(Ue),this.addCurrentVertex(Z,Re,0,0,B);else if(it==="flipbevel"){if(Ue>100)Re=le.mult(-1);else{const tt=Ue*ue.add(le).mag()/ue.sub(le).mag();Re._perp()._mult(tt*(wt?-1:1))}this.addCurrentVertex(Z,Re,0,0,B),this.addCurrentVertex(Z,Re.mult(-1),0,0,B)}else if(it==="bevel"||it==="fakeround"){const tt=-Math.sqrt(Ue*Ue-1),dt=wt?tt:0,at=wt?0:tt;if(X&&this.addCurrentVertex(Z,ue,dt,at,B),it==="fakeround"){const He=Math.round(180*Ve/Math.PI/20);for(let Pt=1;Pt<He;Pt++){let Et=Pt/He;if(Et!==.5){const Wn=Et-.5;Et+=Et*Wn*(Et-1)*((1.0904+Se*(Se*(3.55645-1.43519*Se)-3.2452))*Wn*Wn+(.848013+Se*(.215638*Se-1.06021)))}const Yt=le.sub(ue)._mult(Et)._add(ue)._unit()._mult(wt?-1:1);this.addHalfVertex(Z,Yt.x,Yt.y,!1,wt,0,B)}}H&&this.addCurrentVertex(Z,le,-dt,-at,B)}else if(it==="butt")this.addCurrentVertex(Z,Re,0,0,B);else if(it==="square"){const tt=X?1:-1;this.addCurrentVertex(Z,Re,tt,tt,B)}else it==="round"&&(X&&(this.addCurrentVertex(Z,ue,0,0,B),this.addCurrentVertex(Z,ue,1,1,B,!0)),H&&(this.addCurrentVertex(Z,le,-1,-1,B,!0),this.addCurrentVertex(Z,le,0,0,B)));if(gt&&ke<C-1){const tt=Z.dist(H);if(tt>2*R){const dt=Z.add(H.sub(Z)._mult(R/tt)._round());this.updateDistance(Z,dt),this.addCurrentVertex(dt,le,0,0,B),Z=dt}}}}addCurrentVertex(r,a,d,g,v,x=!1){const T=a.y*g-a.x,C=-a.y-a.x*g;this.addHalfVertex(r,a.x+a.y*d,a.y-a.x*d,x,!1,d,v),this.addHalfVertex(r,T,C,x,!0,-g,v),this.distance>WS/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(r,a,d,g,v,x))}addHalfVertex({x:r,y:a},d,g,v,x,T,C){const z=.5*(this.lineClips?this.scaledDistance*(WS-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(v?1:0),(a<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*g)+128,1+(T===0?0:T<0?-1:1)|(63&z)<<2,z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const R=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,R),C.primitiveLength++),x?this.e2=R:this.e1=R}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,a){this.distance+=r.dist(a),this.updateScaledDistance()}}yt("LineBucket",_v,{omit:["layers","patternFeatures"]});const HD=new Gr({"line-cap":new Tt(Ne.layout_line["line-cap"]),"line-join":new Dt(Ne.layout_line["line-join"]),"line-miter-limit":new Tt(Ne.layout_line["line-miter-limit"]),"line-round-limit":new Tt(Ne.layout_line["line-round-limit"]),"line-sort-key":new Dt(Ne.layout_line["line-sort-key"])});var ZS={paint:new Gr({"line-opacity":new Dt(Ne.paint_line["line-opacity"]),"line-color":new Dt(Ne.paint_line["line-color"]),"line-translate":new Tt(Ne.paint_line["line-translate"]),"line-translate-anchor":new Tt(Ne.paint_line["line-translate-anchor"]),"line-width":new Dt(Ne.paint_line["line-width"]),"line-gap-width":new Dt(Ne.paint_line["line-gap-width"]),"line-offset":new Dt(Ne.paint_line["line-offset"]),"line-blur":new Dt(Ne.paint_line["line-blur"]),"line-dasharray":new xh(Ne.paint_line["line-dasharray"]),"line-pattern":new xl(Ne.paint_line["line-pattern"]),"line-gradient":new $s(Ne.paint_line["line-gradient"])}),layout:HD};const qS=new class extends Dt{possiblyEvaluate(o,r){return r=new qn(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),super.possiblyEvaluate(o,r)}evaluate(o,r,a,d){return r=N({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(o,r,a,d)}}(ZS.paint.properties["line-width"].specification);function XS(o,r){return r>0?r+2*o:o}qS.useIntegerZoom=!0;const YD=xr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),KD=xr([{name:"a_projected_pos",components:3,type:"Float32"}],4);xr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const JD=xr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);xr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const HS=xr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),QD=xr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function eR(o,r,a){return o.sections.forEach(d=>{d.text=function(g,v,x){const T=v.layout.get("text-transform").evaluate(x,{});return T==="uppercase"?g=g.toLocaleUpperCase():T==="lowercase"&&(g=g.toLocaleLowerCase()),Hi.applyArabicShaping&&(g=Hi.applyArabicShaping(g)),g}(d.text,r,a)}),o}xr([{name:"triangle",components:3,type:"Uint16"}]),xr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),xr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),xr([{type:"Float32",name:"offsetX"}]),xr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Rh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Wr=24,xv=In,YS=function(o,r,a,d,g){var v,x,T=8*g-d-1,C=(1<<T)-1,z=C>>1,R=-7,B=a?g-1:0,Z=a?-1:1,X=o[r+B];for(B+=Z,v=X&(1<<-R)-1,X>>=-R,R+=T;R>0;v=256*v+o[r+B],B+=Z,R-=8);for(x=v&(1<<-R)-1,v>>=-R,R+=d;R>0;x=256*x+o[r+B],B+=Z,R-=8);if(v===0)v=1-z;else{if(v===C)return x?NaN:1/0*(X?-1:1);x+=Math.pow(2,d),v-=z}return(X?-1:1)*x*Math.pow(2,v-d)},KS=function(o,r,a,d,g,v){var x,T,C,z=8*v-g-1,R=(1<<z)-1,B=R>>1,Z=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,X=d?0:v-1,H=d?1:-1,ue=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(T=isNaN(r)?1:0,x=R):(x=Math.floor(Math.log(r)/Math.LN2),r*(C=Math.pow(2,-x))<1&&(x--,C*=2),(r+=x+B>=1?Z/C:Z*Math.pow(2,1-B))*C>=2&&(x++,C/=2),x+B>=R?(T=0,x=R):x+B>=1?(T=(r*C-1)*Math.pow(2,g),x+=B):(T=r*Math.pow(2,B-1)*Math.pow(2,g),x=0));g>=8;o[a+X]=255&T,X+=H,T/=256,g-=8);for(x=x<<g|T,z+=g;z>0;o[a+X]=255&x,X+=H,x/=256,z-=8);o[a+X-H]|=128*ue};function In(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}In.Varint=0,In.Fixed64=1,In.Bytes=2,In.Fixed32=5;var Tl,bv=4294967296,JS=1/bv,QS=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Aa(o){return o.type===In.Bytes?o.readVarint()+o.pos:o.pos+1}function qu(o,r,a){return a?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function e2(o,r,a){var d=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));a.realloc(d);for(var g=a.pos-1;g>=o;g--)a.buf[g+d]=a.buf[g]}function tR(o,r){for(var a=0;a<o.length;a++)r.writeVarint(o[a])}function nR(o,r){for(var a=0;a<o.length;a++)r.writeSVarint(o[a])}function rR(o,r){for(var a=0;a<o.length;a++)r.writeFloat(o[a])}function iR(o,r){for(var a=0;a<o.length;a++)r.writeDouble(o[a])}function oR(o,r){for(var a=0;a<o.length;a++)r.writeBoolean(o[a])}function sR(o,r){for(var a=0;a<o.length;a++)r.writeFixed32(o[a])}function aR(o,r){for(var a=0;a<o.length;a++)r.writeSFixed32(o[a])}function lR(o,r){for(var a=0;a<o.length;a++)r.writeFixed64(o[a])}function cR(o,r){for(var a=0;a<o.length;a++)r.writeSFixed64(o[a])}function Cm(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function Xu(o,r,a){o[a]=r,o[a+1]=r>>>8,o[a+2]=r>>>16,o[a+3]=r>>>24}function t2(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}function uR(o,r,a){o===1&&a.readMessage(dR,r)}function dR(o,r,a){if(o===3){const{id:d,bitmap:g,width:v,height:x,left:T,top:C,advance:z}=a.readMessage(hR,{});r.push({id:d,bitmap:new Ch({width:v+6,height:x+6},g),metrics:{width:v,height:x,left:T,top:C,advance:z}})}}function hR(o,r,a){o===1?r.id=a.readVarint():o===2?r.bitmap=a.readBytes():o===3?r.width=a.readVarint():o===4?r.height=a.readVarint():o===5?r.left=a.readSVarint():o===6?r.top=a.readSVarint():o===7&&(r.advance=a.readVarint())}function n2(o){let r=0,a=0;for(const x of o)r+=x.w*x.h,a=Math.max(a,x.w);o.sort((x,T)=>T.h-x.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),a),h:1/0}];let g=0,v=0;for(const x of o)for(let T=d.length-1;T>=0;T--){const C=d[T];if(!(x.w>C.w||x.h>C.h)){if(x.x=C.x,x.y=C.y,v=Math.max(v,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===C.w&&x.h===C.h){const z=d.pop();T<d.length&&(d[T]=z)}else x.h===C.h?(C.x+=x.w,C.w-=x.w):x.w===C.w?(C.y+=x.h,C.h-=x.h):(d.push({x:C.x+x.w,y:C.y,w:C.w-x.w,h:x.h}),C.y+=x.h,C.h-=x.h);break}}return{w:g,h:v,fill:r/(g*v)||0}}In.prototype={destroy:function(){this.buf=null},readFields:function(o,r,a){for(a=a||this.length;this.pos<a;){var d=this.readVarint(),g=d>>3,v=this.pos;this.type=7&d,o(g,r,this),this.pos===v&&this.skip(d)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=Cm(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=t2(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Cm(this.buf,this.pos)+Cm(this.buf,this.pos+4)*bv;return this.pos+=8,o},readSFixed64:function(){var o=Cm(this.buf,this.pos)+t2(this.buf,this.pos+4)*bv;return this.pos+=8,o},readFloat:function(){var o=YS(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=YS(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,a,d=this.buf;return r=127&(a=d[this.pos++]),a<128?r:(r|=(127&(a=d[this.pos++]))<<7,a<128?r:(r|=(127&(a=d[this.pos++]))<<14,a<128?r:(r|=(127&(a=d[this.pos++]))<<21,a<128?r:function(g,v,x){var T,C,z=x.buf;if(T=(112&(C=z[x.pos++]))>>4,C<128||(T|=(127&(C=z[x.pos++]))<<3,C<128)||(T|=(127&(C=z[x.pos++]))<<10,C<128)||(T|=(127&(C=z[x.pos++]))<<17,C<128)||(T|=(127&(C=z[x.pos++]))<<24,C<128)||(T|=(1&(C=z[x.pos++]))<<31,C<128))return qu(g,T,v);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(a=d[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&QS?function(a,d,g){return QS.decode(a.subarray(d,g))}(this.buf,r,o):function(a,d,g){for(var v="",x=d;x<g;){var T,C,z,R=a[x],B=null,Z=R>239?4:R>223?3:R>191?2:1;if(x+Z>g)break;Z===1?R<128&&(B=R):Z===2?(192&(T=a[x+1]))==128&&(B=(31&R)<<6|63&T)<=127&&(B=null):Z===3?(C=a[x+2],(192&(T=a[x+1]))==128&&(192&C)==128&&((B=(15&R)<<12|(63&T)<<6|63&C)<=2047||B>=55296&&B<=57343)&&(B=null)):Z===4&&(C=a[x+2],z=a[x+3],(192&(T=a[x+1]))==128&&(192&C)==128&&(192&z)==128&&((B=(15&R)<<18|(63&T)<<12|(63&C)<<6|63&z)<=65535||B>=1114112)&&(B=null)),B===null?(B=65533,Z=1):B>65535&&(B-=65536,v+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),v+=String.fromCharCode(B),x+=Z}return v}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==In.Bytes)return o.push(this.readVarint(r));var a=Aa(this);for(o=o||[];this.pos<a;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==In.Bytes)return o.push(this.readSVarint());var r=Aa(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==In.Bytes)return o.push(this.readBoolean());var r=Aa(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==In.Bytes)return o.push(this.readFloat());var r=Aa(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==In.Bytes)return o.push(this.readDouble());var r=Aa(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==In.Bytes)return o.push(this.readFixed32());var r=Aa(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==In.Bytes)return o.push(this.readSFixed32());var r=Aa(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==In.Bytes)return o.push(this.readFixed64());var r=Aa(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==In.Bytes)return o.push(this.readSFixed64());var r=Aa(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===In.Varint)for(;this.buf[this.pos++]>127;);else if(r===In.Bytes)this.pos=this.readVarint()+this.pos;else if(r===In.Fixed32)this.pos+=4;else{if(r!==In.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var a=new Uint8Array(r);a.set(this.buf),this.buf=a,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Xu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Xu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Xu(this.buf,-1&o,this.pos),Xu(this.buf,Math.floor(o*JS),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Xu(this.buf,-1&o,this.pos),Xu(this.buf,Math.floor(o*JS),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,a){var d,g;if(r>=0?(d=r%4294967296|0,g=r/4294967296|0):(g=~(-r/4294967296),4294967295^(d=~(-r%4294967296))?d=d+1|0:(d=0,g=g+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(v,x,T){T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,T.buf[T.pos]=127&(v>>>=7)}(d,0,a),function(v,x){var T=(7&v)<<4;x.buf[x.pos++]|=T|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(g,a)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(Boolean(o))},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(d,g,v){for(var x,T,C=0;C<g.length;C++){if((x=g.charCodeAt(C))>55295&&x<57344){if(!T){x>56319||C+1===g.length?(d[v++]=239,d[v++]=191,d[v++]=189):T=x;continue}if(x<56320){d[v++]=239,d[v++]=191,d[v++]=189,T=x;continue}x=T-55296<<10|x-56320|65536,T=null}else T&&(d[v++]=239,d[v++]=191,d[v++]=189,T=null);x<128?d[v++]=x:(x<2048?d[v++]=x>>6|192:(x<65536?d[v++]=x>>12|224:(d[v++]=x>>18|240,d[v++]=x>>12&63|128),d[v++]=x>>6&63|128),d[v++]=63&x|128)}return v}(this.buf,o,this.pos);var a=this.pos-r;a>=128&&e2(r,a,this),this.pos=r-1,this.writeVarint(a),this.pos+=a},writeFloat:function(o){this.realloc(4),KS(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),KS(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var a=0;a<r;a++)this.buf[this.pos++]=o[a]},writeRawMessage:function(o,r){this.pos++;var a=this.pos;o(r,this);var d=this.pos-a;d>=128&&e2(a,d,this),this.pos=a-1,this.writeVarint(d),this.pos+=d},writeMessage:function(o,r,a){this.writeTag(o,In.Bytes),this.writeRawMessage(r,a)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,tR,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,nR,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,oR,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,rR,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,iR,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,sR,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,aR,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,lR,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,cR,r)},writeBytesField:function(o,r){this.writeTag(o,In.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,In.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,In.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,In.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,In.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,In.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,In.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,In.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,In.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,In.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,Boolean(r))}};class wv{constructor(r,{pixelRatio:a,version:d,stretchX:g,stretchY:v,content:x}){this.paddedRect=r,this.pixelRatio=a,this.stretchX=g,this.stretchY=v,this.content=x,this.version=d}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class r2{constructor(r,a){const d={},g={};this.haveRenderCallbacks=[];const v=[];this.addImages(r,d,v),this.addImages(a,g,v);const{w:x,h:T}=n2(v),C=new go({width:x||1,height:T||1});for(const z in r){const R=r[z],B=d[z].paddedRect;go.copy(R.data,C,{x:0,y:0},{x:B.x+1,y:B.y+1},R.data)}for(const z in a){const R=a[z],B=g[z].paddedRect,Z=B.x+1,X=B.y+1,H=R.data.width,ue=R.data.height;go.copy(R.data,C,{x:0,y:0},{x:Z,y:X},R.data),go.copy(R.data,C,{x:0,y:ue-1},{x:Z,y:X-1},{width:H,height:1}),go.copy(R.data,C,{x:0,y:0},{x:Z,y:X+ue},{width:H,height:1}),go.copy(R.data,C,{x:H-1,y:0},{x:Z-1,y:X},{width:1,height:ue}),go.copy(R.data,C,{x:0,y:0},{x:Z+H,y:X},{width:1,height:ue})}this.image=C,this.iconPositions=d,this.patternPositions=g}addImages(r,a,d){for(const g in r){const v=r[g],x={x:0,y:0,w:v.data.width+2,h:v.data.height+2};d.push(x),a[g]=new wv(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(r,a){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in r.updatedImages)this.patchUpdatedImage(this.iconPositions[d],r.getImage(d),a),this.patchUpdatedImage(this.patternPositions[d],r.getImage(d),a)}patchUpdatedImage(r,a,d){if(!r||!a||r.version===a.version)return;r.version=a.version;const[g,v]=r.tl;d.update(a.data,void 0,{x:g,y:v})}}yt("ImagePosition",wv),yt("ImageAtlas",r2),l.WritingMode=void 0,(Tl=l.WritingMode||(l.WritingMode={}))[Tl.none=0]="none",Tl[Tl.horizontal=1]="horizontal",Tl[Tl.vertical=2]="vertical",Tl[Tl.horizontalOnly=3]="horizontalOnly";const Im=-17;class Lh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,a){const d=new Lh;return d.scale=r||1,d.fontStack=a,d}static forImage(r){const a=new Lh;return a.imageName=r,a}}class Hu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,a){const d=new Hu;for(let g=0;g<r.sections.length;g++){const v=r.sections[g];v.image?d.addImageSection(v):d.addTextSection(v,a)}return d}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let a="";for(let d=0;d<r.length;d++){const g=r.charCodeAt(d+1)||null,v=r.charCodeAt(d-1)||null;a+=g&&lm(g)&&!Rh[r[d+1]]||v&&lm(v)&&!Rh[r[d-1]]||!Rh[r[d]]?r[d]:Rh[r[d]]}return a}(this.text)}trim(){let r=0;for(let d=0;d<this.text.length&&Pm[this.text.charCodeAt(d)];d++)r++;let a=this.text.length;for(let d=this.text.length-1;d>=0&&d>=r&&Pm[this.text.charCodeAt(d)];d--)a--;this.text=this.text.substring(r,a),this.sectionIndex=this.sectionIndex.slice(r,a)}substring(r,a){const d=new Hu;return d.text=this.text.substring(r,a),d.sectionIndex=this.sectionIndex.slice(r,a),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,a)=>Math.max(r,this.sections[a].scale),0)}addTextSection(r,a){this.text+=r.text,this.sections.push(Lh.forText(r.scale,r.fontStack||a));const d=this.sections.length-1;for(let g=0;g<r.text.length;++g)this.sectionIndex.push(d)}addImageSection(r){const a=r.image?r.image.name:"";if(a.length===0)return void de("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Lh.forImage(a)),this.sectionIndex.push(this.sections.length-1)):de("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Mm(o,r,a,d,g,v,x,T,C,z,R,B,Z,X,H,ue){const le=Hu.fromFeature(o,g);let ke;B===l.WritingMode.vertical&&le.verticalizePunctuation();const{processBidirectionalText:Re,processStyledBidirectionalText:Se}=Hi;if(Re&&le.sections.length===1){ke=[];const Ve=Re(le.toString(),Sv(le,z,v,r,d,X,H));for(const gt of Ve){const wt=new Hu;wt.text=gt,wt.sections=le.sections;for(let ut=0;ut<gt.length;ut++)wt.sectionIndex.push(0);ke.push(wt)}}else if(Se){ke=[];const Ve=Se(le.text,le.sectionIndex,Sv(le,z,v,r,d,X,H));for(const gt of Ve){const wt=new Hu;wt.text=gt[0],wt.sectionIndex=gt[1],wt.sections=le.sections,ke.push(wt)}}else ke=function(Ve,gt){const wt=[],ut=Ve.text;let it=0;for(const tt of gt)wt.push(Ve.substring(it,tt)),it=tt;return it<ut.length&&wt.push(Ve.substring(it,ut.length)),wt}(le,Sv(le,z,v,r,d,X,H));const ze=[],Ue={positionedLines:ze,text:le.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:B,iconsInText:!1,verticalizable:!1};return function(Ve,gt,wt,ut,it,tt,dt,at,He,Pt,Et,Yt){let Wn=0,Hn=Im,zr=0,vo=0;const Kr=at==="right"?1:at==="left"?0:.5;let br=0;for(const wr of it){wr.trim();const Qr=wr.getMaxScale(),di=(Qr-1)*Wr,ki={positionedGlyphs:[],lineOffset:0};Ve.positionedLines[br]=ki;const Bi=ki.positionedGlyphs;let Fi=0;if(!wr.length()){Hn+=tt,++br;continue}for(let Nr=0;Nr<wr.length();Nr++){const en=wr.getSection(Nr),Ji=wr.getSectionIndex(Nr),ei=wr.getCharCode(Nr);let hi=0,Oo=null,us=null,ds=null,Ra=Wr;const Bo=!(He===l.WritingMode.horizontal||!Et&&!ph(ei)||Et&&(Pm[ei]||(Fr=ei,ct.Arabic(Fr)||ct["Arabic Supplement"](Fr)||ct["Arabic Extended-A"](Fr)||ct["Arabic Presentation Forms-A"](Fr)||ct["Arabic Presentation Forms-B"](Fr))));if(en.imageName){const _o=ut[en.imageName];if(!_o)continue;ds=en.imageName,Ve.iconsInText=Ve.iconsInText||!0,us=_o.paddedRect;const Ni=_o.displaySize;en.scale=en.scale*Wr/Yt,Oo={width:Ni[0],height:Ni[1],left:1,top:-3,advance:Bo?Ni[1]:Ni[0]},hi=di+(Wr-Ni[1]*en.scale),Ra=Oo.advance;const La=Bo?Ni[0]*en.scale-Wr*Qr:Ni[1]*en.scale-Wr*Qr;La>0&&La>Fi&&(Fi=La)}else{const _o=wt[en.fontStack],Ni=_o&&_o[ei];if(Ni&&Ni.rect)us=Ni.rect,Oo=Ni.metrics;else{const La=gt[en.fontStack],Fh=La&&La[ei];if(!Fh)continue;Oo=Fh.metrics}hi=(Qr-en.scale)*Wr}Bo?(Ve.verticalizable=!0,Bi.push({glyph:ei,imageName:ds,x:Wn,y:Hn+hi,vertical:Bo,scale:en.scale,fontStack:en.fontStack,sectionIndex:Ji,metrics:Oo,rect:us}),Wn+=Ra*en.scale+Pt):(Bi.push({glyph:ei,imageName:ds,x:Wn,y:Hn+hi,vertical:Bo,scale:en.scale,fontStack:en.fontStack,sectionIndex:Ji,metrics:Oo,rect:us}),Wn+=Oo.advance*en.scale+Pt)}Bi.length!==0&&(zr=Math.max(Wn-Pt,zr),mR(Bi,0,Bi.length-1,Kr,Fi)),Wn=0;const Jn=tt*Qr+Fi;ki.lineOffset=Math.max(Fi,di),Hn+=Jn,vo=Math.max(Jn,vo),++br}var Fr;const Jr=Hn-Im,{horizontalAlign:ui,verticalAlign:Oi}=Tv(dt);(function(wr,Qr,di,ki,Bi,Fi,Jn,Nr,en){const Ji=(Qr-di)*Bi;let ei=0;ei=Fi!==Jn?-Nr*ki-Im:(-ki*en+.5)*Jn;for(const hi of wr)for(const Oo of hi.positionedGlyphs)Oo.x+=Ji,Oo.y+=ei})(Ve.positionedLines,Kr,ui,Oi,zr,vo,tt,Jr,it.length),Ve.top+=-Oi*Jr,Ve.bottom=Ve.top+Jr,Ve.left+=-ui*zr,Ve.right=Ve.left+zr}(Ue,r,a,d,ke,x,T,C,B,z,Z,ue),!function(Ve){for(const gt of Ve)if(gt.positionedGlyphs.length!==0)return!1;return!0}(ze)&&Ue}const Pm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},fR={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function i2(o,r,a,d,g,v){if(r.imageName){const x=d[r.imageName];return x?x.displaySize[0]*r.scale*Wr/v+g:0}{const x=a[r.fontStack],T=x&&x[o];return T?T.metrics.advance*r.scale+g:0}}function o2(o,r,a,d){const g=Math.pow(o-r,2);return d?o<r?g/2:2*g:g+Math.abs(a)*a}function pR(o,r,a){let d=0;return o===10&&(d-=1e4),a&&(d+=150),o!==40&&o!==65288||(d+=50),r!==41&&r!==65289||(d+=50),d}function s2(o,r,a,d,g,v){let x=null,T=o2(r,a,g,v);for(const C of d){const z=o2(r-C.x,a,g,v)+C.badness;z<=T&&(x=C,T=z)}return{index:o,x:r,priorBreak:x,badness:T}}function a2(o){return o?a2(o.priorBreak).concat(o.index):[]}function Sv(o,r,a,d,g,v,x){if(v!=="point")return[];if(!o)return[];const T=[],C=function(Z,X,H,ue,le,ke){let Re=0;for(let Se=0;Se<Z.length();Se++){const ze=Z.getSection(Se);Re+=i2(Z.getCharCode(Se),ze,ue,le,X,ke)}return Re/Math.max(1,Math.ceil(Re/H))}(o,r,a,d,g,x),z=o.text.indexOf("​")>=0;let R=0;for(let Z=0;Z<o.length();Z++){const X=o.getSection(Z),H=o.getCharCode(Z);if(Pm[H]||(R+=i2(H,X,d,g,r,x)),Z<o.length()-1){const ue=!((B=H)<11904||!(ct["Bopomofo Extended"](B)||ct.Bopomofo(B)||ct["CJK Compatibility Forms"](B)||ct["CJK Compatibility Ideographs"](B)||ct["CJK Compatibility"](B)||ct["CJK Radicals Supplement"](B)||ct["CJK Strokes"](B)||ct["CJK Symbols and Punctuation"](B)||ct["CJK Unified Ideographs Extension A"](B)||ct["CJK Unified Ideographs"](B)||ct["Enclosed CJK Letters and Months"](B)||ct["Halfwidth and Fullwidth Forms"](B)||ct.Hiragana(B)||ct["Ideographic Description Characters"](B)||ct["Kangxi Radicals"](B)||ct["Katakana Phonetic Extensions"](B)||ct.Katakana(B)||ct["Vertical Forms"](B)||ct["Yi Radicals"](B)||ct["Yi Syllables"](B)));(fR[H]||ue||X.imageName)&&T.push(s2(Z+1,R,C,T,pR(H,o.getCharCode(Z+1),ue&&z),!1))}}var B;return a2(s2(o.length(),R,C,T,0,!0))}function Tv(o){let r=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:r,verticalAlign:a}}function mR(o,r,a,d,g){if(!d&&!g)return;const v=o[a],x=(o[a].x+v.metrics.advance*v.scale)*d;for(let T=r;T<=a;T++)o[T].x-=x,o[T].y+=g}function gR(o,r,a){const{horizontalAlign:d,verticalAlign:g}=Tv(a),v=r[0]-o.displaySize[0]*d,x=r[1]-o.displaySize[1]*g;return{image:o,top:x,bottom:x+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function l2(o,r,a,d,g,v){const x=o.image;let T;if(x.content){const le=x.content,ke=x.pixelRatio||1;T=[le[0]/ke,le[1]/ke,x.displaySize[0]-le[2]/ke,x.displaySize[1]-le[3]/ke]}const C=r.left*v,z=r.right*v;let R,B,Z,X;a==="width"||a==="both"?(X=g[0]+C-d[3],B=g[0]+z+d[1]):(X=g[0]+(C+z-x.displaySize[0])/2,B=X+x.displaySize[0]);const H=r.top*v,ue=r.bottom*v;return a==="height"||a==="both"?(R=g[1]+H-d[0],Z=g[1]+ue+d[2]):(R=g[1]+(H+ue-x.displaySize[1])/2,Z=R+x.displaySize[1]),{image:x,top:R,right:B,bottom:Z,left:X,collisionPadding:T}}const Da=128;function c2(o,r){const{expression:a}=r;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new qn(o+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:g}=a;let v=0;for(;v<d.length&&d[v]<=o;)v++;v=Math.max(0,v-1);let x=v;for(;x<d.length&&d[x]<o+1;)x++;x=Math.min(d.length-1,x);const T=d[v],C=d[x];return a.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:C,interpolationType:g}:{kind:"camera",minZoom:T,maxZoom:C,minSize:a.evaluate(new qn(T)),maxSize:a.evaluate(new qn(C)),interpolationType:g}}}class kl extends Ce{constructor(r,a,d,g){super(r,a),this.angle=d,g!==void 0&&(this.segment=g)}clone(){return new kl(this.x,this.y,this.angle,this.segment)}}function u2(o,r,a,d,g){if(r.segment===void 0)return!0;let v=r,x=r.segment+1,T=0;for(;T>-a/2;){if(x--,x<0)return!1;T-=o[x].dist(v),v=o[x]}T+=o[x].dist(o[x+1]),x++;const C=[];let z=0;for(;T<a/2;){const R=o[x],B=o[x+1];if(!B)return!1;let Z=o[x-1].angleTo(R)-R.angleTo(B);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:T,angleDelta:Z}),z+=Z;T-C[0].distance>d;)z-=C.shift().angleDelta;if(z>g)return!1;x++,T+=R.dist(B)}return!0}function d2(o){let r=0;for(let a=0;a<o.length-1;a++)r+=o[a].dist(o[a+1]);return r}function h2(o,r,a){return o?.6*r*a:0}function f2(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function yR(o,r,a,d,g,v){const x=h2(a,g,v),T=f2(a,d)*v;let C=0;const z=d2(o)/2;for(let R=0;R<o.length-1;R++){const B=o[R],Z=o[R+1],X=B.dist(Z);if(C+X>z){const H=(z-C)/X,ue=On(B.x,Z.x,H),le=On(B.y,Z.y,H),ke=new kl(ue,le,Z.angleTo(B),R);return ke._round(),!x||u2(o,ke,T,x,r)?ke:void 0}C+=X}}function vR(o,r,a,d,g,v,x,T,C){const z=h2(d,v,x),R=f2(d,g),B=R*x,Z=o[0].x===0||o[0].x===C||o[0].y===0||o[0].y===C;return r-B<r/4&&(r=B+r/4),p2(o,Z?r/2*T%r:(R/2+2*v)*x*T%r,r,z,a,B,Z,!1,C)}function p2(o,r,a,d,g,v,x,T,C){const z=v/2,R=d2(o);let B=0,Z=r-a,X=[];for(let H=0;H<o.length-1;H++){const ue=o[H],le=o[H+1],ke=ue.dist(le),Re=le.angleTo(ue);for(;Z+a<B+ke;){Z+=a;const Se=(Z-B)/ke,ze=On(ue.x,le.x,Se),Ue=On(ue.y,le.y,Se);if(ze>=0&&ze<C&&Ue>=0&&Ue<C&&Z-z>=0&&Z+z<=R){const Ve=new kl(ze,Ue,Re,H);Ve._round(),d&&!u2(o,Ve,v,d,g)||X.push(Ve)}}B+=ke}return T||X.length||x||(X=p2(o,B/2,a,d,g,v,x,!0,C)),X}function m2(o,r,a,d,g){const v=[];for(let x=0;x<o.length;x++){const T=o[x];let C;for(let z=0;z<T.length-1;z++){let R=T[z],B=T[z+1];R.x<r&&B.x<r||(R.x<r?R=new Ce(r,R.y+(r-R.x)/(B.x-R.x)*(B.y-R.y))._round():B.x<r&&(B=new Ce(r,R.y+(r-R.x)/(B.x-R.x)*(B.y-R.y))._round()),R.y<a&&B.y<a||(R.y<a?R=new Ce(R.x+(a-R.y)/(B.y-R.y)*(B.x-R.x),a)._round():B.y<a&&(B=new Ce(R.x+(a-R.y)/(B.y-R.y)*(B.x-R.x),a)._round()),R.x>=d&&B.x>=d||(R.x>=d?R=new Ce(d,R.y+(d-R.x)/(B.x-R.x)*(B.y-R.y))._round():B.x>=d&&(B=new Ce(d,R.y+(d-R.x)/(B.x-R.x)*(B.y-R.y))._round()),R.y>=g&&B.y>=g||(R.y>=g?R=new Ce(R.x+(g-R.y)/(B.y-R.y)*(B.x-R.x),g)._round():B.y>=g&&(B=new Ce(R.x+(g-R.y)/(B.y-R.y)*(B.x-R.x),g)._round()),C&&R.equals(C[C.length-1])||(C=[R],v.push(C)),C.push(B)))))}}return v}function g2(o,r,a,d){const g=[],v=o.image,x=v.pixelRatio,T=v.paddedRect.w-2,C=v.paddedRect.h-2,z=o.right-o.left,R=o.bottom-o.top,B=v.stretchX||[[0,T]],Z=v.stretchY||[[0,C]],X=(tt,dt)=>tt+dt[1]-dt[0],H=B.reduce(X,0),ue=Z.reduce(X,0),le=T-H,ke=C-ue;let Re=0,Se=H,ze=0,Ue=ue,Ve=0,gt=le,wt=0,ut=ke;if(v.content&&d){const tt=v.content;Re=zm(B,0,tt[0]),ze=zm(Z,0,tt[1]),Se=zm(B,tt[0],tt[2]),Ue=zm(Z,tt[1],tt[3]),Ve=tt[0]-Re,wt=tt[1]-ze,gt=tt[2]-tt[0]-Se,ut=tt[3]-tt[1]-Ue}const it=(tt,dt,at,He)=>{const Pt=Am(tt.stretch-Re,Se,z,o.left),Et=Dm(tt.fixed-Ve,gt,tt.stretch,H),Yt=Am(dt.stretch-ze,Ue,R,o.top),Wn=Dm(dt.fixed-wt,ut,dt.stretch,ue),Hn=Am(at.stretch-Re,Se,z,o.left),zr=Dm(at.fixed-Ve,gt,at.stretch,H),vo=Am(He.stretch-ze,Ue,R,o.top),Kr=Dm(He.fixed-wt,ut,He.stretch,ue),br=new Ce(Pt,Yt),Fr=new Ce(Hn,Yt),Jr=new Ce(Hn,vo),ui=new Ce(Pt,vo),Oi=new Ce(Et/x,Wn/x),wr=new Ce(zr/x,Kr/x),Qr=r*Math.PI/180;if(Qr){const Bi=Math.sin(Qr),Fi=Math.cos(Qr),Jn=[Fi,-Bi,Bi,Fi];br._matMult(Jn),Fr._matMult(Jn),ui._matMult(Jn),Jr._matMult(Jn)}const di=tt.stretch+tt.fixed,ki=dt.stretch+dt.fixed;return{tl:br,tr:Fr,bl:ui,br:Jr,tex:{x:v.paddedRect.x+1+di,y:v.paddedRect.y+1+ki,w:at.stretch+at.fixed-di,h:He.stretch+He.fixed-ki},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Oi,pixelOffsetBR:wr,minFontScaleX:gt/x/z,minFontScaleY:ut/x/R,isSDF:a}};if(d&&(v.stretchX||v.stretchY)){const tt=y2(B,le,H),dt=y2(Z,ke,ue);for(let at=0;at<tt.length-1;at++){const He=tt[at],Pt=tt[at+1];for(let Et=0;Et<dt.length-1;Et++)g.push(it(He,dt[Et],Pt,dt[Et+1]))}}else g.push(it({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:C+1}));return g}function zm(o,r,a){let d=0;for(const g of o)d+=Math.max(r,Math.min(a,g[1]))-Math.max(r,Math.min(a,g[0]));return d}function y2(o,r,a){const d=[{fixed:-1,stretch:0}];for(const[g,v]of o){const x=d[d.length-1];d.push({fixed:g-x.stretch,stretch:x.stretch}),d.push({fixed:g-x.stretch,stretch:x.stretch+(v-g)})}return d.push({fixed:r+1,stretch:a}),d}function Am(o,r,a,d){return o/r*a+d}function Dm(o,r,a,d){return o-r*a/d}yt("Anchor",kl);class Rm{constructor(r,a,d,g,v,x,T,C,z,R){if(this.boxStartIndex=r.length,z){let B=x.top,Z=x.bottom;const X=x.collisionPadding;X&&(B-=X[1],Z+=X[3]);let H=Z-B;H>0&&(H=Math.max(10,H),this.circleDiameter=H)}else{let B=x.top*T-C[0],Z=x.bottom*T+C[2],X=x.left*T-C[3],H=x.right*T+C[1];const ue=x.collisionPadding;if(ue&&(X-=ue[0]*T,B-=ue[1]*T,H+=ue[2]*T,Z+=ue[3]*T),R){const le=new Ce(X,B),ke=new Ce(H,B),Re=new Ce(X,Z),Se=new Ce(H,Z),ze=R*Math.PI/180;le._rotate(ze),ke._rotate(ze),Re._rotate(ze),Se._rotate(ze),X=Math.min(le.x,ke.x,Re.x,Se.x),H=Math.max(le.x,ke.x,Re.x,Se.x),B=Math.min(le.y,ke.y,Re.y,Se.y),Z=Math.max(le.y,ke.y,Re.y,Se.y)}r.emplaceBack(a.x,a.y,X,B,H,Z,d,g,v)}this.boxEndIndex=r.length}}class _R{constructor(r=[],a=xR){if(this.data=r,this.length=this.data.length,this.compare=a,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:a,compare:d}=this,g=a[r];for(;r>0;){const v=r-1>>1,x=a[v];if(d(g,x)>=0)break;a[r]=x,r=v}a[r]=g}_down(r){const{data:a,compare:d}=this,g=this.length>>1,v=a[r];for(;r<g;){let x=1+(r<<1),T=a[x];const C=x+1;if(C<this.length&&d(a[C],T)<0&&(x=C,T=a[C]),d(T,v)>=0)break;a[r]=T,r=x}a[r]=v}}function xR(o,r){return o<r?-1:o>r?1:0}function bR(o,r=1,a=!1){let d=1/0,g=1/0,v=-1/0,x=-1/0;const T=o[0];for(let X=0;X<T.length;X++){const H=T[X];(!X||H.x<d)&&(d=H.x),(!X||H.y<g)&&(g=H.y),(!X||H.x>v)&&(v=H.x),(!X||H.y>x)&&(x=H.y)}const C=Math.min(v-d,x-g);let z=C/2;const R=new _R([],wR);if(C===0)return new Ce(d,g);for(let X=d;X<v;X+=C)for(let H=g;H<x;H+=C)R.push(new Yu(X+z,H+z,z,o));let B=function(X){let H=0,ue=0,le=0;const ke=X[0];for(let Re=0,Se=ke.length,ze=Se-1;Re<Se;ze=Re++){const Ue=ke[Re],Ve=ke[ze],gt=Ue.x*Ve.y-Ve.x*Ue.y;ue+=(Ue.x+Ve.x)*gt,le+=(Ue.y+Ve.y)*gt,H+=3*gt}return new Yu(ue/H,le/H,0,X)}(o),Z=R.length;for(;R.length;){const X=R.pop();(X.d>B.d||!B.d)&&(B=X,a&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,Z)),X.max-B.d<=r||(z=X.h/2,R.push(new Yu(X.p.x-z,X.p.y-z,z,o)),R.push(new Yu(X.p.x+z,X.p.y-z,z,o)),R.push(new Yu(X.p.x-z,X.p.y+z,z,o)),R.push(new Yu(X.p.x+z,X.p.y+z,z,o)),Z+=4)}return a&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${B.d}`)),B.p}function wR(o,r){return r.max-o.max}function Yu(o,r,a,d){this.p=new Ce(o,r),this.h=a,this.d=function(g,v){let x=!1,T=1/0;for(let C=0;C<v.length;C++){const z=v[C];for(let R=0,B=z.length,Z=B-1;R<B;Z=R++){const X=z[R],H=z[Z];X.y>g.y!=H.y>g.y&&g.x<(H.x-X.x)*(g.y-X.y)/(H.y-X.y)+X.x&&(x=!x),T=Math.min(T,kS(g,X,H))}}return(x?1:-1)*Math.sqrt(T)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}const kv=Number.POSITIVE_INFINITY;function v2(o,r){return r[1]!==kv?function(a,d,g){let v=0,x=0;switch(d=Math.abs(d),g=Math.abs(g),a){case"top-right":case"top-left":case"top":x=g-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-g}switch(a){case"top-right":case"bottom-right":case"right":v=-d;break;case"top-left":case"bottom-left":case"left":v=d}return[v,x]}(o,r[0],r[1]):function(a,d){let g=0,v=0;d<0&&(d=0);const x=d/Math.sqrt(2);switch(a){case"top-right":case"top-left":v=x-7;break;case"bottom-right":case"bottom-left":v=7-x;break;case"bottom":v=7-d;break;case"top":v=d-7}switch(a){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=d;break;case"right":g=-d}return[g,v]}(o,r[0])}function Ev(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function SR(o,r,a,d,g,v,x,T,C,z,R){let B=v.textMaxSize.evaluate(r,{});B===void 0&&(B=x);const Z=o.layers[0].layout,X=Z.get("icon-offset").evaluate(r,{},R),H=x2(a.horizontal),ue=x/24,le=o.tilePixelRatio*ue,ke=o.tilePixelRatio*B/24,Re=o.tilePixelRatio*T,Se=o.tilePixelRatio*Z.get("symbol-spacing"),ze=Z.get("text-padding")*o.tilePixelRatio,Ue=function(He,Pt,Et,Yt=1){const Wn=He.get("icon-padding").evaluate(Pt,{},Et),Hn=Wn&&Wn.values;return[Hn[0]*Yt,Hn[1]*Yt,Hn[2]*Yt,Hn[3]*Yt]}(Z,r,R,o.tilePixelRatio),Ve=Z.get("text-max-angle")/180*Math.PI,gt=Z.get("text-rotation-alignment")!=="viewport"&&Z.get("symbol-placement")!=="point",wt=Z.get("icon-rotation-alignment")==="map"&&Z.get("symbol-placement")!=="point",ut=Z.get("symbol-placement"),it=Se/2,tt=Z.get("icon-text-fit");let dt;d&&tt!=="none"&&(o.allowVerticalPlacement&&a.vertical&&(dt=l2(d,a.vertical,tt,Z.get("icon-text-fit-padding"),X,ue)),H&&(d=l2(d,H,tt,Z.get("icon-text-fit-padding"),X,ue)));const at=(He,Pt)=>{Pt.x<0||Pt.x>=Pr||Pt.y<0||Pt.y>=Pr||function(Et,Yt,Wn,Hn,zr,vo,Kr,br,Fr,Jr,ui,Oi,wr,Qr,di,ki,Bi,Fi,Jn,Nr,en,Ji,ei,hi,Oo){const us=Et.addToLineVertexArray(Yt,Wn);let ds,Ra,Bo,_o,Ni=0,La=0,Fh=0,O2=0,Ov=-1,Bv=-1;const Oa={};let B2=Br.exports(""),Fv=0,Nv=0;if(br._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Fv,Nv]=br.layout.get("text-offset").evaluate(en,{},hi).map($i=>$i*Wr):(Fv=br.layout.get("text-radial-offset").evaluate(en,{},hi)*Wr,Nv=kv),Et.allowVerticalPlacement&&Hn.vertical){const $i=br.layout.get("text-rotate").evaluate(en,{},hi)+90;Bo=new Rm(Fr,Yt,Jr,ui,Oi,Hn.vertical,wr,Qr,di,$i),Kr&&(_o=new Rm(Fr,Yt,Jr,ui,Oi,Kr,Bi,Fi,di,$i))}if(zr){const $i=br.layout.get("icon-rotate").evaluate(en,{}),Ws=br.layout.get("icon-text-fit")!=="none",Nh=g2(zr,$i,ei,Ws),$h=Kr?g2(Kr,$i,ei,Ws):void 0;Ra=new Rm(Fr,Yt,Jr,ui,Oi,zr,Bi,Fi,!1,$i),Ni=4*Nh.length;const $2=Et.iconSizeData;let $c=null;$2.kind==="source"?($c=[Da*br.layout.get("icon-size").evaluate(en,{})],$c[0]>El&&de(`${Et.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):$2.kind==="composite"&&($c=[Da*Ji.compositeIconSizes[0].evaluate(en,{},hi),Da*Ji.compositeIconSizes[1].evaluate(en,{},hi)],($c[0]>El||$c[1]>El)&&de(`${Et.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Et.addSymbols(Et.icon,Nh,$c,Nr,Jn,en,l.WritingMode.none,Yt,us.lineStartIndex,us.lineLength,-1,hi),Ov=Et.icon.placedSymbolArray.length-1,$h&&(La=4*$h.length,Et.addSymbols(Et.icon,$h,$c,Nr,Jn,en,l.WritingMode.vertical,Yt,us.lineStartIndex,us.lineLength,-1,hi),Bv=Et.icon.placedSymbolArray.length-1)}const F2=Object.keys(Hn.horizontal);for(const $i of F2){const Ws=Hn.horizontal[$i];if(!ds){B2=Br.exports(Ws.text);const $h=br.layout.get("text-rotate").evaluate(en,{},hi);ds=new Rm(Fr,Yt,Jr,ui,Oi,Ws,wr,Qr,di,$h)}const Nh=Ws.positionedLines.length===1;if(Fh+=_2(Et,Yt,Ws,vo,br,di,en,ki,us,Hn.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,Nh?F2:[$i],Oa,Ov,Ji,hi),Nh)break}Hn.vertical&&(O2+=_2(Et,Yt,Hn.vertical,vo,br,di,en,ki,us,l.WritingMode.vertical,["vertical"],Oa,Bv,Ji,hi));const OR=ds?ds.boxStartIndex:Et.collisionBoxArray.length,BR=ds?ds.boxEndIndex:Et.collisionBoxArray.length,FR=Bo?Bo.boxStartIndex:Et.collisionBoxArray.length,NR=Bo?Bo.boxEndIndex:Et.collisionBoxArray.length,$R=Ra?Ra.boxStartIndex:Et.collisionBoxArray.length,jR=Ra?Ra.boxEndIndex:Et.collisionBoxArray.length,VR=_o?_o.boxStartIndex:Et.collisionBoxArray.length,UR=_o?_o.boxEndIndex:Et.collisionBoxArray.length;let hs=-1;const Nm=($i,Ws)=>$i&&$i.circleDiameter?Math.max($i.circleDiameter,Ws):Ws;hs=Nm(ds,hs),hs=Nm(Bo,hs),hs=Nm(Ra,hs),hs=Nm(_o,hs);const N2=hs>-1?1:0;N2&&(hs*=Oo/Wr),Et.glyphOffsetArray.length>=Ku.MAX_GLYPHS&&de("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),en.sortKey!==void 0&&Et.addToSortKeyRanges(Et.symbolInstances.length,en.sortKey),Et.symbolInstances.emplaceBack(Yt.x,Yt.y,Oa.right>=0?Oa.right:-1,Oa.center>=0?Oa.center:-1,Oa.left>=0?Oa.left:-1,Oa.vertical||-1,Ov,Bv,B2,OR,BR,FR,NR,$R,jR,VR,UR,Jr,Fh,O2,Ni,La,N2,0,wr,Fv,Nv,hs)}(o,Pt,He,a,d,g,dt,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,le,[ze,ze,ze,ze],gt,C,Re,Ue,wt,X,r,v,z,R,x)};if(ut==="line")for(const He of m2(r.geometry,0,0,Pr,Pr)){const Pt=vR(He,Se,Ve,a.vertical||H,d,24,ke,o.overscaling,Pr);for(const Et of Pt){const Yt=H;Yt&&TR(o,Yt.text,it,Et)||at(He,Et)}}else if(ut==="line-center"){for(const He of r.geometry)if(He.length>1){const Pt=yR(He,Ve,a.vertical||H,d,24,ke);Pt&&at(He,Pt)}}else if(r.type==="Polygon")for(const He of fv(r.geometry,0)){const Pt=bR(He,16);at(He[0],new kl(Pt.x,Pt.y,0))}else if(r.type==="LineString")for(const He of r.geometry)at(He,new kl(He[0].x,He[0].y,0));else if(r.type==="Point")for(const He of r.geometry)for(const Pt of He)at([Pt],new kl(Pt.x,Pt.y,0))}const El=32640;function _2(o,r,a,d,g,v,x,T,C,z,R,B,Z,X,H){const ue=function(Re,Se,ze,Ue,Ve,gt,wt,ut){const it=Ue.layout.get("text-rotate").evaluate(gt,{})*Math.PI/180,tt=[];for(const dt of Se.positionedLines)for(const at of dt.positionedGlyphs){if(!at.rect)continue;const He=at.rect||{};let Pt=4,Et=!0,Yt=1,Wn=0;const Hn=(Ve||ut)&&at.vertical,zr=at.metrics.advance*at.scale/2;if(ut&&Se.verticalizable){const Jn=(at.scale-1)*Wr,Nr=(Wr-at.metrics.width*at.scale)/2;Wn=dt.lineOffset/2-(at.imageName?-Nr:Jn)}if(at.imageName){const Jn=wt[at.imageName];Et=Jn.sdf,Yt=Jn.pixelRatio,Pt=1/Yt}const vo=Ve?[at.x+zr,at.y]:[0,0];let Kr=Ve?[0,0]:[at.x+zr+ze[0],at.y+ze[1]-Wn],br=[0,0];Hn&&(br=Kr,Kr=[0,0]);const Fr=(at.metrics.left-Pt)*at.scale-zr+Kr[0],Jr=(-at.metrics.top-Pt)*at.scale+Kr[1],ui=Fr+He.w*at.scale/Yt,Oi=Jr+He.h*at.scale/Yt,wr=new Ce(Fr,Jr),Qr=new Ce(ui,Jr),di=new Ce(Fr,Oi),ki=new Ce(ui,Oi);if(Hn){const Jn=new Ce(-zr,zr-Im),Nr=-Math.PI/2,en=12-zr,Ji=new Ce(22-en,-(at.imageName?en:0)),ei=new Ce(...br);wr._rotateAround(Nr,Jn)._add(Ji)._add(ei),Qr._rotateAround(Nr,Jn)._add(Ji)._add(ei),di._rotateAround(Nr,Jn)._add(Ji)._add(ei),ki._rotateAround(Nr,Jn)._add(Ji)._add(ei)}if(it){const Jn=Math.sin(it),Nr=Math.cos(it),en=[Nr,-Jn,Jn,Nr];wr._matMult(en),Qr._matMult(en),di._matMult(en),ki._matMult(en)}const Bi=new Ce(0,0),Fi=new Ce(0,0);tt.push({tl:wr,tr:Qr,bl:di,br:ki,tex:He,writingMode:Se.writingMode,glyphOffset:vo,sectionIndex:at.sectionIndex,isSDF:Et,pixelOffsetTL:Bi,pixelOffsetBR:Fi,minFontScaleX:0,minFontScaleY:0})}return tt}(0,a,T,g,v,x,d,o.allowVerticalPlacement),le=o.textSizeData;let ke=null;le.kind==="source"?(ke=[Da*g.layout.get("text-size").evaluate(x,{})],ke[0]>El&&de(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):le.kind==="composite"&&(ke=[Da*X.compositeTextSizes[0].evaluate(x,{},H),Da*X.compositeTextSizes[1].evaluate(x,{},H)],(ke[0]>El||ke[1]>El)&&de(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,ue,ke,T,v,x,z,r,C.lineStartIndex,C.lineLength,Z,H);for(const Re of R)B[Re]=o.text.placedSymbolArray.length-1;return 4*ue.length}function x2(o){for(const r in o)return o[r];return null}function TR(o,r,a,d){const g=o.compareText;if(r in g){const v=g[r];for(let x=v.length-1;x>=0;x--)if(d.dist(v[x])<a)return!0}else g[r]=[];return g[r].push(d),!1}const kR=Sl.VectorTileFeature.types,ER=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Lm(o,r,a,d,g,v,x,T,C,z,R,B,Z){const X=T?Math.min(El,Math.round(T[0])):0,H=T?Math.min(El,Math.round(T[1])):0;o.emplaceBack(r,a,Math.round(32*d),Math.round(32*g),v,x,(X<<1)+(C?1:0),H,16*z,16*R,256*B,256*Z)}function Cv(o,r,a){o.emplaceBack(r.x,r.y,a),o.emplaceBack(r.x,r.y,a),o.emplaceBack(r.x,r.y,a),o.emplaceBack(r.x,r.y,a)}function CR(o){for(const r of o.sections)if(um(r.text))return!0;return!1}class Iv{constructor(r){this.layoutVertexArray=new Ro,this.indexArray=new wi,this.programConfigurations=r,this.segments=new Qt,this.dynamicLayoutVertexArray=new mo,this.opacityVertexArray=new Lo,this.placedSymbolArray=new qe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,a,d,g){this.isEmpty()||(d&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,YD.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,KD.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,ER,!0),this.opacityVertexBuffer.itemSize=1),(d||g)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}yt("SymbolBuffers",Iv);class Mv{constructor(r,a,d){this.layoutVertexArray=new r,this.layoutAttributes=a,this.indexArray=new d,this.segments=new Qt,this.collisionVertexArray=new Yi}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,JD.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}yt("CollisionBuffers",Mv);class Ku{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=av([]),this.placementViewportMatrix=av([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=c2(this.zoom,a["text-size"]),this.iconSizeData=c2(this.zoom,a["icon-size"]);const d=this.layers[0].layout,g=d.get("symbol-sort-key"),v=d.get("symbol-z-order");this.canOverlap=zv(d,"text-overlap","text-allow-overlap")!=="never"||zv(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(x=>l.WritingMode[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID}createArrays(){this.text=new Iv(new Lc(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Iv(new Lc(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new rt,this.lineVertexArray=new mt,this.symbolInstances=new ht}calculateGlyphDependencies(r,a,d,g,v){for(let x=0;x<r.length;x++)if(a[r.charCodeAt(x)]=!0,(d||g)&&v){const T=Rh[r.charAt(x)];T&&(a[T.charCodeAt(0)]=!0)}}populate(r,a,d){const g=this.layers[0],v=g.layout,x=v.get("text-font"),T=v.get("text-field"),C=v.get("icon-image"),z=(T.value.kind!=="constant"||T.value.value instanceof me&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),R=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,B=v.get("symbol-sort-key");if(this.features=[],!z&&!R)return;const Z=a.iconDependencies,X=a.glyphDependencies,H=a.availableImages,ue=new qn(this.zoom);for(const{feature:le,id:ke,index:Re,sourceLayerIndex:Se}of r){const ze=g._featureFilter.needGeometry,Ue=Bc(le,ze);if(!g._featureFilter.filter(ue,Ue,d))continue;let Ve,gt;if(ze||(Ue.geometry=Oc(le)),z){const ut=g.getValueAndResolveTokens("text-field",Ue,d,H),it=me.factory(ut);CR(it)&&(this.hasRTLText=!0),(!this.hasRTLText||Ac()==="unavailable"||this.hasRTLText&&Hi.isParsed())&&(Ve=eR(it,g,Ue))}if(R){const ut=g.getValueAndResolveTokens("icon-image",Ue,d,H);gt=ut instanceof _e?ut:_e.fromString(ut)}if(!Ve&&!gt)continue;const wt=this.sortFeaturesByKey?B.evaluate(Ue,{},d):void 0;if(this.features.push({id:ke,text:Ve,icon:gt,index:Re,sourceLayerIndex:Se,geometry:Ue.geometry,properties:le.properties,type:kR[le.type],sortKey:wt}),gt&&(Z[gt.name]=!0),Ve){const ut=x.evaluate(Ue,{},d).join(","),it=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const tt of Ve.sections)if(tt.image)Z[tt.image.name]=!0;else{const dt=Nu(Ve.toString()),at=tt.fontStack||ut,He=X[at]=X[at]||{};this.calculateGlyphDependencies(tt.text,He,it,this.allowVerticalPlacement,dt)}}}v.get("symbol-placement")==="line"&&(this.features=function(le){const ke={},Re={},Se=[];let ze=0;function Ue(ut){Se.push(le[ut]),ze++}function Ve(ut,it,tt){const dt=Re[ut];return delete Re[ut],Re[it]=dt,Se[dt].geometry[0].pop(),Se[dt].geometry[0]=Se[dt].geometry[0].concat(tt[0]),dt}function gt(ut,it,tt){const dt=ke[it];return delete ke[it],ke[ut]=dt,Se[dt].geometry[0].shift(),Se[dt].geometry[0]=tt[0].concat(Se[dt].geometry[0]),dt}function wt(ut,it,tt){const dt=tt?it[0][it[0].length-1]:it[0][0];return`${ut}:${dt.x}:${dt.y}`}for(let ut=0;ut<le.length;ut++){const it=le[ut],tt=it.geometry,dt=it.text?it.text.toString():null;if(!dt){Ue(ut);continue}const at=wt(dt,tt),He=wt(dt,tt,!0);if(at in Re&&He in ke&&Re[at]!==ke[He]){const Pt=gt(at,He,tt),Et=Ve(at,He,Se[Pt].geometry);delete ke[at],delete Re[He],Re[wt(dt,Se[Et].geometry,!0)]=Et,Se[Pt].geometry=null}else at in Re?Ve(at,He,tt):He in ke?gt(at,He,tt):(Ue(ut),ke[at]=ze-1,Re[He]=ze-1)}return Se.filter(ut=>ut.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((le,ke)=>le.sortKey-ke.sortKey)}update(r,a,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,a,this.layers,d),this.icon.programConfigurations.updatePaintArrays(r,a,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,a){const d=this.lineVertexArray.length;if(r.segment!==void 0){let g=r.dist(a[r.segment+1]),v=r.dist(a[r.segment]);const x={};for(let T=r.segment+1;T<a.length;T++)x[T]={x:a[T].x,y:a[T].y,tileUnitDistanceFromAnchor:g},T<a.length-1&&(g+=a[T+1].dist(a[T]));for(let T=r.segment||0;T>=0;T--)x[T]={x:a[T].x,y:a[T].y,tileUnitDistanceFromAnchor:v},T>0&&(v+=a[T-1].dist(a[T]));for(let T=0;T<a.length;T++){const C=x[T];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(r,a,d,g,v,x,T,C,z,R,B,Z){const X=r.indexArray,H=r.layoutVertexArray,ue=r.segments.prepareSegment(4*a.length,H,X,this.canOverlap?x.sortKey:void 0),le=this.glyphOffsetArray.length,ke=ue.vertexLength,Re=this.allowVerticalPlacement&&T===l.WritingMode.vertical?Math.PI/2:0,Se=x.text&&x.text.sections;for(let ze=0;ze<a.length;ze++){const{tl:Ue,tr:Ve,bl:gt,br:wt,tex:ut,pixelOffsetTL:it,pixelOffsetBR:tt,minFontScaleX:dt,minFontScaleY:at,glyphOffset:He,isSDF:Pt,sectionIndex:Et}=a[ze],Yt=ue.vertexLength,Wn=He[1];Lm(H,C.x,C.y,Ue.x,Wn+Ue.y,ut.x,ut.y,d,Pt,it.x,it.y,dt,at),Lm(H,C.x,C.y,Ve.x,Wn+Ve.y,ut.x+ut.w,ut.y,d,Pt,tt.x,it.y,dt,at),Lm(H,C.x,C.y,gt.x,Wn+gt.y,ut.x,ut.y+ut.h,d,Pt,it.x,tt.y,dt,at),Lm(H,C.x,C.y,wt.x,Wn+wt.y,ut.x+ut.w,ut.y+ut.h,d,Pt,tt.x,tt.y,dt,at),Cv(r.dynamicLayoutVertexArray,C,Re),X.emplaceBack(Yt,Yt+1,Yt+2),X.emplaceBack(Yt+1,Yt+2,Yt+3),ue.vertexLength+=4,ue.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(He[0]),ze!==a.length-1&&Et===a[ze+1].sectionIndex||r.programConfigurations.populatePaintArrays(H.length,x,x.index,{},Z,Se&&Se[Et])}r.placedSymbolArray.emplaceBack(C.x,C.y,le,this.glyphOffsetArray.length-le,ke,z,R,C.segment,d?d[0]:0,d?d[1]:0,g[0],g[1],T,0,!1,0,B)}_addCollisionDebugVertex(r,a,d,g,v,x){return a.emplaceBack(0,0),r.emplaceBack(d.x,d.y,g,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(r,a,d,g,v,x,T){const C=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),z=C.vertexLength,R=v.layoutVertexArray,B=v.collisionVertexArray,Z=T.anchorX,X=T.anchorY;this._addCollisionDebugVertex(R,B,x,Z,X,new Ce(r,a)),this._addCollisionDebugVertex(R,B,x,Z,X,new Ce(d,a)),this._addCollisionDebugVertex(R,B,x,Z,X,new Ce(d,g)),this._addCollisionDebugVertex(R,B,x,Z,X,new Ce(r,g)),C.vertexLength+=4;const H=v.indexArray;H.emplaceBack(z,z+1),H.emplaceBack(z+1,z+2),H.emplaceBack(z+2,z+3),H.emplaceBack(z+3,z),C.primitiveLength+=4}addDebugCollisionBoxes(r,a,d,g){for(let v=r;v<a;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Mv(Us,HS.members,ls),this.iconCollisionBox=new Mv(Us,HS.members,ls);for(let r=0;r<this.symbolInstances.length;r++){const a=this.symbolInstances.get(r);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(r,a,d,g,v,x,T,C,z){const R={};for(let B=a;B<d;B++){const Z=r.get(B);R.textBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},R.textFeatureIndex=Z.featureIndex;break}for(let B=g;B<v;B++){const Z=r.get(B);R.verticalTextBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},R.verticalTextFeatureIndex=Z.featureIndex;break}for(let B=x;B<T;B++){const Z=r.get(B);R.iconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},R.iconFeatureIndex=Z.featureIndex;break}for(let B=C;B<z;B++){const Z=r.get(B);R.verticalIconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},R.verticalIconFeatureIndex=Z.featureIndex;break}return R}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const d=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,a){const d=r.placedSymbolArray.get(a),g=d.vertexStartIndex+4*d.numGlyphs;for(let v=d.vertexStartIndex;v<g;v+=4)r.indexArray.emplaceBack(v,v+1,v+2),r.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(r),d=Math.cos(r),g=[],v=[],x=[];for(let T=0;T<this.symbolInstances.length;++T){x.push(T);const C=this.symbolInstances.get(T);g.push(0|Math.round(a*C.anchorX+d*C.anchorY)),v.push(C.featureIndex)}return x.sort((T,C)=>g[T]-g[C]||v[C]-v[T]),x}addToSortKeyRanges(r,a){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===a?d.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const d=this.symbolInstances.get(a);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((g,v,x)=>{g>=0&&x.indexOf(g)===v&&this.addIndicesForPlacedSymbol(this.text,g)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}yt("SymbolBucket",Ku,{omit:["layers","collisionBoxArray","features","compareText"]}),Ku.MAX_GLYPHS=65535,Ku.addDynamicAttributes=Cv;const IR=new Gr({"symbol-placement":new Tt(Ne.layout_symbol["symbol-placement"]),"symbol-spacing":new Tt(Ne.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Tt(Ne.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Dt(Ne.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Tt(Ne.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Tt(Ne.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Tt(Ne.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Tt(Ne.layout_symbol["icon-ignore-placement"]),"icon-optional":new Tt(Ne.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Tt(Ne.layout_symbol["icon-rotation-alignment"]),"icon-size":new Dt(Ne.layout_symbol["icon-size"]),"icon-text-fit":new Tt(Ne.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Tt(Ne.layout_symbol["icon-text-fit-padding"]),"icon-image":new Dt(Ne.layout_symbol["icon-image"]),"icon-rotate":new Dt(Ne.layout_symbol["icon-rotate"]),"icon-padding":new Dt(Ne.layout_symbol["icon-padding"]),"icon-keep-upright":new Tt(Ne.layout_symbol["icon-keep-upright"]),"icon-offset":new Dt(Ne.layout_symbol["icon-offset"]),"icon-anchor":new Dt(Ne.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Tt(Ne.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Tt(Ne.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Tt(Ne.layout_symbol["text-rotation-alignment"]),"text-field":new Dt(Ne.layout_symbol["text-field"]),"text-font":new Dt(Ne.layout_symbol["text-font"]),"text-size":new Dt(Ne.layout_symbol["text-size"]),"text-max-width":new Dt(Ne.layout_symbol["text-max-width"]),"text-line-height":new Tt(Ne.layout_symbol["text-line-height"]),"text-letter-spacing":new Dt(Ne.layout_symbol["text-letter-spacing"]),"text-justify":new Dt(Ne.layout_symbol["text-justify"]),"text-radial-offset":new Dt(Ne.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Tt(Ne.layout_symbol["text-variable-anchor"]),"text-anchor":new Dt(Ne.layout_symbol["text-anchor"]),"text-max-angle":new Tt(Ne.layout_symbol["text-max-angle"]),"text-writing-mode":new Tt(Ne.layout_symbol["text-writing-mode"]),"text-rotate":new Dt(Ne.layout_symbol["text-rotate"]),"text-padding":new Tt(Ne.layout_symbol["text-padding"]),"text-keep-upright":new Tt(Ne.layout_symbol["text-keep-upright"]),"text-transform":new Dt(Ne.layout_symbol["text-transform"]),"text-offset":new Dt(Ne.layout_symbol["text-offset"]),"text-allow-overlap":new Tt(Ne.layout_symbol["text-allow-overlap"]),"text-overlap":new Tt(Ne.layout_symbol["text-overlap"]),"text-ignore-placement":new Tt(Ne.layout_symbol["text-ignore-placement"]),"text-optional":new Tt(Ne.layout_symbol["text-optional"])});var Pv={paint:new Gr({"icon-opacity":new Dt(Ne.paint_symbol["icon-opacity"]),"icon-color":new Dt(Ne.paint_symbol["icon-color"]),"icon-halo-color":new Dt(Ne.paint_symbol["icon-halo-color"]),"icon-halo-width":new Dt(Ne.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Dt(Ne.paint_symbol["icon-halo-blur"]),"icon-translate":new Tt(Ne.paint_symbol["icon-translate"]),"icon-translate-anchor":new Tt(Ne.paint_symbol["icon-translate-anchor"]),"text-opacity":new Dt(Ne.paint_symbol["text-opacity"]),"text-color":new Dt(Ne.paint_symbol["text-color"],{runtimeType:Ir,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new Dt(Ne.paint_symbol["text-halo-color"]),"text-halo-width":new Dt(Ne.paint_symbol["text-halo-width"]),"text-halo-blur":new Dt(Ne.paint_symbol["text-halo-blur"]),"text-translate":new Tt(Ne.paint_symbol["text-translate"]),"text-translate-anchor":new Tt(Ne.paint_symbol["text-translate-anchor"])}),layout:IR};class b2{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Hr,this.defaultValue=r}evaluate(r){if(r.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(r.formattedSection))return a.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}yt("FormatSectionOverride",b2,{omit:["defaultValue"]});class Om extends Do{constructor(r){super(r,Pv)}recalculate(r,a){if(super.recalculate(r,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const g=[];for(const v of d)g.indexOf(v)<0&&g.push(v);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,a,d,g){const v=this.layout.get(r).evaluate(a,{},d,g),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||_c(x.value)||!v?v:function(T,C){return C.replace(/{([^{}]+)}/g,(z,R)=>R in T?String(T[R]):"")}(a.properties,v)}createBucket(r){return new Ku(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Pv.paint.overridableProperties){if(!Om.hasPaintOverride(this.layout,r))continue;const a=this.paint.get(r),d=new b2(a),g=new Du(d,a.property.specification);let v=null;v=a.value.kind==="constant"||a.value.kind==="source"?new bc("source",g):new lh("composite",g,a.value.zoomStops),this.paint._values[r]=new Ao(a.property,v,a.parameters)}}_handleOverridablePaintPropertyUpdate(r,a,d){return!(!this.layout||a.isDataDriven()||d.isDataDriven())&&Om.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,a){const d=r.get("text-field"),g=Pv.paint.properties[a];let v=!1;const x=T=>{for(const C of T)if(g.overrides&&g.overrides.hasOverride(C))return void(v=!0)};if(d.value.kind==="constant"&&d.value.value instanceof me)x(d.value.value.sections);else if(d.value.kind==="source"){const T=z=>{v||(z instanceof _t&&Oe(z.value)===Un?x(z.value.sections):z instanceof zu?x(z.sections):z.eachChild(T))},C=d.value;C._styleExpression&&T(C._styleExpression.expression)}return v}}function zv(o,r,a){let d="never";const g=o.get(r);return g?d=g:o.get(a)&&(d="always"),d}var MR={paint:new Gr({"background-color":new Tt(Ne.paint_background["background-color"]),"background-pattern":new xh(Ne.paint_background["background-pattern"]),"background-opacity":new Tt(Ne.paint_background["background-opacity"])})},PR={paint:new Gr({"raster-opacity":new Tt(Ne.paint_raster["raster-opacity"]),"raster-hue-rotate":new Tt(Ne.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Tt(Ne.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Tt(Ne.paint_raster["raster-brightness-max"]),"raster-saturation":new Tt(Ne.paint_raster["raster-saturation"]),"raster-contrast":new Tt(Ne.paint_raster["raster-contrast"]),"raster-resampling":new Tt(Ne.paint_raster["raster-resampling"]),"raster-fade-duration":new Tt(Ne.paint_raster["raster-fade-duration"])})};class zR extends Do{constructor(r){super(r,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const AR={circle:class extends Do{constructor(o){super(o,cD)}createBucket(o){return new iv(o)}queryRadius(o){const r=o;return kh("circle-radius",this,r)+kh("circle-stroke-width",this,r)+_m(this.paint.get("circle-translate"))}queryIntersectsFeature(o,r,a,d,g,v,x,T){const C=xm(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,x),z=this.paint.get("circle-radius").evaluate(r,a)+this.paint.get("circle-stroke-width").evaluate(r,a),R=this.paint.get("circle-pitch-alignment")==="map",B=R?C:function(X,H){return X.map(ue=>AS(ue,H))}(C,T),Z=R?z*x:z;for(const X of d)for(const H of X){const ue=R?H:AS(H,T);let le=Z;const ke=bm([],[H.x,H.y,0,1],T);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?le*=ke[3]/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(le*=v.cameraToCenterDistance/ke[3]),iD(B,ue,le))return!0}return!1}},heatmap:class extends Do{constructor(o){super(o,dD),this._updateColorRamp()}createBucket(o){return new DS(o)}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=LS({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Do{constructor(o){super(o,hD)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Do{constructor(o){super(o,ID)}recalculate(o,r){super.recalculate(o,r);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new gv(o)}queryRadius(){return _m(this.paint.get("fill-translate"))}queryIntersectsFeature(o,r,a,d,g,v,x){return TS(xm(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,x),d)}isTileClipped(){return!0}},"fill-extrusion":class extends Do{constructor(o){super(o,VD)}createBucket(o){return new vv(o)}queryRadius(){return _m(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,r,a,d,g,v,x,T){const C=xm(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,x),z=this.paint.get("fill-extrusion-height").evaluate(r,a),R=this.paint.get("fill-extrusion-base").evaluate(r,a),B=function(X,H,ue,le){const ke=[];for(const Re of X){const Se=[Re.x,Re.y,0,1];bm(Se,Se,H),ke.push(new Ce(Se[0]/Se[3],Se[1]/Se[3]))}return ke}(C,T),Z=function(X,H,ue,le){const ke=[],Re=[],Se=le[8]*H,ze=le[9]*H,Ue=le[10]*H,Ve=le[11]*H,gt=le[8]*ue,wt=le[9]*ue,ut=le[10]*ue,it=le[11]*ue;for(const tt of X){const dt=[],at=[];for(const He of tt){const Pt=He.x,Et=He.y,Yt=le[0]*Pt+le[4]*Et+le[12],Wn=le[1]*Pt+le[5]*Et+le[13],Hn=le[2]*Pt+le[6]*Et+le[14],zr=le[3]*Pt+le[7]*Et+le[15],vo=Hn+Ue,Kr=zr+Ve,br=Yt+gt,Fr=Wn+wt,Jr=Hn+ut,ui=zr+it,Oi=new Ce((Yt+Se)/Kr,(Wn+ze)/Kr);Oi.z=vo/Kr,dt.push(Oi);const wr=new Ce(br/ui,Fr/ui);wr.z=Jr/ui,at.push(wr)}ke.push(dt),Re.push(at)}return[ke,Re]}(d,R,z,T);return function(X,H,ue){let le=1/0;TS(ue,H)&&(le=GS(ue,H[0]));for(let ke=0;ke<H.length;ke++){const Re=H[ke],Se=X[ke];for(let ze=0;ze<Re.length-1;ze++){const Ue=Re[ze],Ve=[Ue,Re[ze+1],Se[ze+1],Se[ze],Ue];SS(ue,Ve)&&(le=Math.min(le,GS(ue,Ve)))}}return le!==1/0&&le}(Z[0],Z[1],B)}},line:class extends Do{constructor(o){super(o,ZS),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){o==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof va,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,r){super.recalculate(o,r),this.paint._values["line-floorwidth"]=qS.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new _v(o)}queryRadius(o){const r=o,a=XS(kh("line-width",this,r),kh("line-gap-width",this,r)),d=kh("line-offset",this,r);return a/2+Math.abs(d)+_m(this.paint.get("line-translate"))}queryIntersectsFeature(o,r,a,d,g,v,x){const T=xm(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,x),C=x/2*XS(this.paint.get("line-width").evaluate(r,a),this.paint.get("line-gap-width").evaluate(r,a)),z=this.paint.get("line-offset").evaluate(r,a);return z&&(d=function(R,B){const Z=[];for(let X=0;X<R.length;X++){const H=R[X],ue=[];for(let le=0;le<H.length;le++){const ke=H[le-1],Re=H[le],Se=H[le+1],ze=le===0?new Ce(0,0):Re.sub(ke)._unit()._perp(),Ue=le===H.length-1?new Ce(0,0):Se.sub(Re)._unit()._perp(),Ve=ze._add(Ue)._unit(),gt=Ve.x*Ue.x+Ve.y*Ue.y;gt!==0&&Ve._mult(1/gt),ue.push(Ve._mult(B)._add(Re))}Z.push(ue)}return Z}(d,z*x)),function(R,B,Z){for(let X=0;X<B.length;X++){const H=B[X];if(R.length>=3){for(let ue=0;ue<H.length;ue++)if(Gu(R,H[ue]))return!0}if(oD(R,H,Z))return!0}return!1}(T,d,C)}isTileClipped(){return!0}},symbol:Om,background:class extends Do{constructor(o){super(o,MR)}},raster:class extends Do{constructor(o){super(o,PR)}}};class DR{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const w2=63710088e-1;class lr{constructor(r,a){if(isNaN(r)||isNaN(a))throw new Error(`Invalid LngLat object: (${r}, ${a})`);if(this.lng=+r,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new lr(L(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const a=Math.PI/180,d=this.lat*a,g=r.lat*a,v=Math.sin(d)*Math.sin(g)+Math.cos(d)*Math.cos(g)*Math.cos((r.lng-this.lng)*a);return w2*Math.acos(Math.min(v,1))}toBounds(r=0){const a=360*r/40075017,d=a/Math.cos(Math.PI/180*this.lat);return new Nc(new lr(this.lng-d,this.lat-a),new lr(this.lng+d,this.lat+a))}static convert(r){if(r instanceof lr)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new lr(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new lr(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Nc{constructor(r,a){r&&(a?this.setSouthWest(r).setNorthEast(a):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))}setNorthEast(r){return this._ne=r instanceof lr?new lr(r.lng,r.lat):lr.convert(r),this}setSouthWest(r){return this._sw=r instanceof lr?new lr(r.lng,r.lat):lr.convert(r),this}extend(r){const a=this._sw,d=this._ne;let g,v;if(r instanceof lr)g=r,v=r;else{if(!(r instanceof Nc))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Nc.convert(r)):this.extend(lr.convert(r)):this;if(g=r._sw,v=r._ne,!g||!v)return this}return a||d?(a.lng=Math.min(g.lng,a.lng),a.lat=Math.min(g.lat,a.lat),d.lng=Math.max(v.lng,d.lng),d.lat=Math.max(v.lat,d.lat)):(this._sw=new lr(g.lng,g.lat),this._ne=new lr(v.lng,v.lat)),this}getCenter(){return new lr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new lr(this.getWest(),this.getNorth())}getSouthEast(){return new lr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:a,lat:d}=lr.convert(r);let g=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&g}static convert(r){return r instanceof Nc?r:r&&new Nc(r)}}const S2=2*Math.PI*w2;function T2(o){return S2*Math.cos(o*Math.PI/180)}function k2(o){return(180+o)/360}function E2(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function C2(o,r){return o/T2(r)}function Av(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Bm{constructor(r,a,d=0){this.x=+r,this.y=+a,this.z=+d}static fromLngLat(r,a=0){const d=lr.convert(r);return new Bm(k2(d.lng),E2(d.lat),C2(a,d.lat))}toLngLat(){return new lr(360*this.x-180,Av(this.y))}toAltitude(){return this.z*T2(Av(this.y))}meterInMercatorCoordinateUnits(){return 1/S2*(r=Av(this.y),1/Math.cos(r*Math.PI/180));var r}}function I2(o,r,a){var d=2*Math.PI*6378137/256/Math.pow(2,a);return[o*d-2*Math.PI*6378137/2,r*d-2*Math.PI*6378137/2]}class Dv{constructor(r,a,d){if(r<0||r>25||d<0||d>=Math.pow(2,r)||a<0||a>=Math.pow(2,r))throw new Error(`x=${a}, y=${d}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=a,this.y=d,this.key=Oh(0,r,r,a,d)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,a,d){const g=(x=this.y,T=this.z,C=I2(256*(v=this.x),256*(x=Math.pow(2,T)-x-1),T),z=I2(256*(v+1),256*(x+1),T),C[0]+","+C[1]+","+z[0]+","+z[1]);var v,x,T,C,z;const R=function(B,Z,X){let H,ue="";for(let le=B;le>0;le--)H=1<<le-1,ue+=(Z&H?1:0)+(X&H?2:0);return ue}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,R).replace(/{bbox-epsg-3857}/g,g)}isChildOf(r){const a=this.z-r.z;return a>0&&r.x===this.x>>a&&r.y===this.y>>a}getTilePoint(r){const a=Math.pow(2,this.z);return new Ce((r.x*a-this.x)*Pr,(r.y*a-this.y)*Pr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class M2{constructor(r,a){this.wrap=r,this.canonical=a,this.key=Oh(r,a.z,a.z,a.x,a.y)}}class yo{constructor(r,a,d,g,v){if(r<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${d}`);this.overscaledZ=r,this.wrap=a,this.canonical=new Dv(d,+g,+v),this.key=Oh(a,r,d,g,v)}clone(){return new yo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-r;return r>this.canonical.z?new yo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new yo(r,this.wrap,r,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(r,a){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-r;return r>this.canonical.z?Oh(this.wrap*+a,r,this.canonical.z,this.canonical.x,this.canonical.y):Oh(this.wrap*+a,r,r,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const a=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>a&&r.canonical.y===this.canonical.y>>a}children(r){if(this.overscaledZ>=r)return[new yo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,d=2*this.canonical.x,g=2*this.canonical.y;return[new yo(a,this.wrap,a,d,g),new yo(a,this.wrap,a,d+1,g),new yo(a,this.wrap,a,d,g+1),new yo(a,this.wrap,a,d+1,g+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new yo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new yo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new M2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Bm(r.x-this.wrap,r.y))}}function Oh(o,r,a,d,g){(o*=2)<0&&(o=-1*o-1);const v=1<<a;return(v*v*o+v*g+d).toString(36)+a.toString(36)+r.toString(36)}yt("CanonicalTileID",Dv),yt("OverscaledTileID",yo,{omit:["posMatrix"]});class P2{constructor(r,a,d){if(this.uid=r,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return void de(`"${d}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const g=this.dim=a.height-2;this.data=new Uint32Array(a.data.buffer),this.encoding=d||"mapbox";for(let v=0;v<g;v++)this.data[this._idx(-1,v)]=this.data[this._idx(0,v)],this.data[this._idx(g,v)]=this.data[this._idx(g-1,v)],this.data[this._idx(v,-1)]=this.data[this._idx(v,0)],this.data[this._idx(v,g)]=this.data[this._idx(v,g-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(g,-1)]=this.data[this._idx(g-1,0)],this.data[this._idx(-1,g)]=this.data[this._idx(0,g-1)],this.data[this._idx(g,g)]=this.data[this._idx(g-1,g-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let v=0;v<g;v++)for(let x=0;x<g;x++){const T=this.get(v,x);T>this.max&&(this.max=T),T<this.min&&(this.min=T)}}get(r,a){const d=new Uint8Array(this.data.buffer),g=4*this._idx(r,a);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(d[g],d[g+1],d[g+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(r,a){if(r<-1||r>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(r+1)}_unpackMapbox(r,a,d){return(256*r*256+256*a+d)/10-1e4}_unpackTerrarium(r,a,d){return 256*r+a+d/256-32768}getPixels(){return new go({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,a,d){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let g=a*this.dim,v=a*this.dim+this.dim,x=d*this.dim,T=d*this.dim+this.dim;switch(a){case-1:g=v-1;break;case 1:v=g+1}switch(d){case-1:x=T-1;break;case 1:T=x+1}const C=-a*this.dim,z=-d*this.dim;for(let R=x;R<T;R++)for(let B=g;B<v;B++)this.data[this._idx(B,R)]=r.data[this._idx(B+C,R+z)]}}yt("DEMData",P2);class z2{constructor(r){this._stringToNumber={},this._numberToString=[];for(let a=0;a<r.length;a++){const d=r[a];this._stringToNumber[d]=a,this._numberToString[a]=d}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class A2{constructor(r,a,d,g,v){this.type="Feature",this._vectorTileFeature=r,r._z=a,r._x=d,r._y=g,this.properties=r.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(r[a]=this[a]);return r}}class D2{constructor(r,a){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new zc(Pr,16,0),this.grid3D=new zc(Pr,16,0),this.featureIndexArray=new Ht,this.promoteId=a}insert(r,a,d,g,v,x){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,g,v);const C=x?this.grid3D:this.grid;for(let z=0;z<a.length;z++){const R=a[z],B=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<R.length;Z++){const X=R[Z];B[0]=Math.min(B[0],X.x),B[1]=Math.min(B[1],X.y),B[2]=Math.max(B[2],X.x),B[3]=Math.max(B[3],X.y)}B[0]<Pr&&B[1]<Pr&&B[2]>=0&&B[3]>=0&&C.insert(T,B[0],B[1],B[2],B[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Sl.VectorTile(new xv(this.rawTileData)).layers,this.sourceLayerCoder=new z2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,a,d,g){this.loadVTLayers();const v=r.params||{},x=Pr/r.tileSize/r.scale,T=Ou(v.filter),C=r.queryGeometry,z=r.queryPadding*x,R=L2(C),B=this.grid.query(R.minX-z,R.minY-z,R.maxX+z,R.maxY+z),Z=L2(r.cameraQueryGeometry),X=this.grid3D.query(Z.minX-z,Z.minY-z,Z.maxX+z,Z.maxY+z,(le,ke,Re,Se)=>function(ze,Ue,Ve,gt,wt){for(const it of ze)if(Ue<=it.x&&Ve<=it.y&&gt>=it.x&&wt>=it.y)return!0;const ut=[new Ce(Ue,Ve),new Ce(Ue,wt),new Ce(gt,wt),new Ce(gt,Ve)];if(ze.length>2){for(const it of ut)if(Gu(ze,it))return!0}for(let it=0;it<ze.length-1;it++)if(aD(ze[it],ze[it+1],ut))return!0;return!1}(r.cameraQueryGeometry,le-z,ke-z,Re+z,Se+z));for(const le of X)B.push(le);B.sort(RR);const H={};let ue;for(let le=0;le<B.length;le++){const ke=B[le];if(ke===ue)continue;ue=ke;const Re=this.featureIndexArray.get(ke);let Se=null;this.loadMatchingFeature(H,Re.bucketIndex,Re.sourceLayerIndex,Re.featureIndex,T,v.layers,v.availableImages,a,d,g,(ze,Ue,Ve)=>(Se||(Se=Oc(ze)),Ue.queryIntersectsFeature(C,ze,Ve,Se,this.z,r.transform,x,r.pixelPosMatrix)))}return H}loadMatchingFeature(r,a,d,g,v,x,T,C,z,R,B){const Z=this.bucketLayerIDs[a];if(x&&!function(le,ke){for(let Re=0;Re<le.length;Re++)if(ke.indexOf(le[Re])>=0)return!0;return!1}(x,Z))return;const X=this.sourceLayerCoder.decode(d),H=this.vtLayers[X].feature(g);if(v.needGeometry){const le=Bc(H,!0);if(!v.filter(new qn(this.tileID.overscaledZ),le,this.tileID.canonical))return}else if(!v.filter(new qn(this.tileID.overscaledZ),H))return;const ue=this.getId(H,X);for(let le=0;le<Z.length;le++){const ke=Z[le];if(x&&x.indexOf(ke)<0)continue;const Re=C[ke];if(!Re)continue;let Se={};ue&&R&&(Se=R.getState(Re.sourceLayer||"_geojsonTileLayer",ue));const ze=N({},z[ke]);ze.paint=R2(ze.paint,Re.paint,H,Se,T),ze.layout=R2(ze.layout,Re.layout,H,Se,T);const Ue=!B||B(H,Re,Se);if(!Ue)continue;const Ve=new A2(H,this.z,this.x,this.y,ue);Ve.layer=ze;let gt=r[ke];gt===void 0&&(gt=r[ke]=[]),gt.push({featureIndex:g,feature:Ve,intersectionZ:Ue})}}lookupSymbolFeatures(r,a,d,g,v,x,T,C){const z={};this.loadVTLayers();const R=Ou(v);for(const B of r)this.loadMatchingFeature(z,d,g,B,R,x,T,C,a);return z}hasLayer(r){for(const a of this.bucketLayerIDs)for(const d of a)if(r===d)return!0;return!1}getId(r,a){let d=r.id;return this.promoteId&&(d=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof d=="boolean"&&(d=Number(d))),d}}function R2(o,r,a,d,g){return $(o,(v,x)=>{const T=r instanceof Rc?r.get(x):null;return T&&T.evaluate?T.evaluate(a,d,g):T})}function L2(o){let r=1/0,a=1/0,d=-1/0,g=-1/0;for(const v of o)r=Math.min(r,v.x),a=Math.min(a,v.y),d=Math.max(d,v.x),g=Math.max(g,v.y);return{minX:r,minY:a,maxX:d,maxY:g}}function RR(o,r){return r-o}var Rv;yt("FeatureIndex",D2,{omit:["rawTileData","sourceLayerCoder"]}),l.PerformanceMarkers=void 0,(Rv=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",Rv.load="load",Rv.fullLoad="fullLoad";let Fm=null,Bh=[];const Lv=1e3/30,LR={mark(o){performance.mark(o)},frame(o){const r=o;Fm!=null&&Bh.push(r-Fm),Fm=r},clearMetrics(){Fm=null,Bh=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const o in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure("loadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure("fullLoadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName("loadTime")[0].duration,r=performance.getEntriesByName("fullLoadTime")[0].duration,a=Bh.length,d=1/(Bh.reduce((v,x)=>v+x,0)/a/1e3),g=Bh.filter(v=>v>Lv).reduce((v,x)=>v+(x-Lv)/Lv,0);return{loadTime:o,fullLoadTime:r,fps:d,percentDroppedFrames:g/(a+g)*100}}};l.AJAXError=Ut,l.ARRAY_TYPE=Ti,l.Actor=class{constructor(o,r,a){this.target=o,this.parent=r,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},J(["receive","process"],this),this.invoker=new DR(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=oe()?o:window}send(o,r,a,d,g=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[v]=a);const x=Xe(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:o,hasCallback:!!a,targetMapId:d,mustQueue:g,sourceMapId:this.mapId,data:Ea(r,x)},x),{cancel:()=>{a&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}receive(o){const r=o.data,a=r.id;if(a&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){delete this.tasks[a];const d=this.cancelCallbacks[a];delete this.cancelCallbacks[a],d&&d()}else oe()||r.mustQueue?(this.tasks[a]=r,this.taskQueue.push(a),this.invoker.trigger()):this.processTask(a,r)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),r=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),r&&this.processTask(o,r)}processTask(o,r){if(r.type==="<response>"){const a=this.callbacks[o];delete this.callbacks[o],a&&(r.error?a(Fs(r.error)):a(null,Fs(r.data)))}else{let a=!1;const d=Xe(this.globalScope)?void 0:[],g=r.hasCallback?(T,C)=>{a=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:T?Ea(T):null,data:Ea(C,d)},d)}:T=>{a=!0};let v=null;const x=Fs(r.data);if(this.parent[r.type])v=this.parent[r.type](r.sourceMapId,x,g);else if(this.parent.getWorkerSource){const T=r.type.split(".");v=this.parent.getWorkerSource(r.sourceMapId,T[0],x.source)[T[1]](x,g)}else g(new Error(`Could not find function ${r.type}`));!a&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=Ch,l.CanonicalTileID=Dv,l.CollisionBoxArray=$e,l.CollisionCircleLayoutArray=class extends O{},l.Color=Q,l.DEMData=P2,l.DataConstantProperty=Tt,l.DictionaryCoder=z2,l.EXTENT=Pr,l.ErrorEvent=Di,l.EvaluationParameters=qn,l.Event=Cr,l.Evented=Dr,l.FeatureIndex=D2,l.FillBucket=gv,l.FillExtrusionBucket=vv,l.GeoJSONFeature=A2,l.ImageAtlas=r2,l.ImagePosition=wv,l.LineBucket=_v,l.LineStripIndexArray=class extends ae{},l.LngLat=lr,l.LngLatBounds=Nc,l.MercatorCoordinate=Bm,l.ONE_EM=Wr,l.OverscaledTileID=yo,l.PerformanceUtils=LR,l.PosArray=Mt,l.Properties=Gr,l.QuadTriangleArray=class extends q{},l.RGBAImage=go,l.RasterBoundsArray=class extends p{},l.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},l.ResourceType=zt,l.SegmentVector=Qt,l.SymbolBucket=Ku,l.Transitionable=fm,l.TriangleIndexArray=wi,l.Uniform1f=Pa,l.Uniform1i=class extends Ma{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.Uniform2f=class extends Ma{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},l.Uniform3f=class extends Ma{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},l.Uniform4f=Vu,l.UniformColor=_S,l.UniformMatrix4f=class extends Ma{constructor(o,r){super(o,r),this.current=nD}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},l.UnwrappedTileID=M2,l.ValidationError=nt,l.ZoomHistory=hh,l.add=function(o,r,a){return o[0]=r[0]+a[0],o[1]=r[1]+a[1],o[2]=r[2]+a[2],o},l.addDynamicAttributes=Cv,l.asyncAll=function(o,r,a){if(!o.length)return a(null,[]);let d=o.length;const g=new Array(o.length);let v=null;o.forEach((x,T)=>{r(x,(C,z)=>{C&&(v=C),g[T]=z,--d==0&&a(v,g)})})},l.bezier=k,l.bindAll=J,l.cacheEntryPossiblyAdded=function(o){St++,St>Je&&(o.getActor().send("enforceCacheSizeLimit",Ke),St=0)},l.clamp=E,l.clearTileCache=function(o){const r=caches.delete(We);o&&r.catch(o).then(()=>o())},l.clipLine=m2,l.clone=function(o){var r=new Ti(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},l.clone$1=W,l.clone$2=function(o){var r=new Ti(3);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r},l.collisionCircleLayout=QD,l.config=Me,l.copy=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},l.create=function(){var o=new Ti(16);return Ti!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},l.create$1=CS,l.createExpression=xc,l.createFilter=Ou,l.createLayout=xr,l.createStyleLayer=function(o){return o.type==="custom"?new zR(o):new AR[o.type](o)},l.cross=function(o,r,a){var d=r[0],g=r[1],v=r[2],x=a[0],T=a[1],C=a[2];return o[0]=g*C-v*T,o[1]=v*x-d*C,o[2]=d*T-g*x,o},l.dot=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]},l.dot$1=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},l.ease=M,l.emitValidationErrors=Fu,l.enforceCacheSizeLimit=function(o){pt(),Ye&&Ye.then(r=>{r.keys().then(a=>{for(let d=0;d<a.length-o;d++)r.delete(a[d])})})},l.equals=function(o,r){var a=o[0],d=o[1],g=o[2],v=o[3],x=o[4],T=o[5],C=o[6],z=o[7],R=o[8],B=o[9],Z=o[10],X=o[11],H=o[12],ue=o[13],le=o[14],ke=o[15],Re=r[0],Se=r[1],ze=r[2],Ue=r[3],Ve=r[4],gt=r[5],wt=r[6],ut=r[7],it=r[8],tt=r[9],dt=r[10],at=r[11],He=r[12],Pt=r[13],Et=r[14],Yt=r[15];return Math.abs(a-Re)<=Si*Math.max(1,Math.abs(a),Math.abs(Re))&&Math.abs(d-Se)<=Si*Math.max(1,Math.abs(d),Math.abs(Se))&&Math.abs(g-ze)<=Si*Math.max(1,Math.abs(g),Math.abs(ze))&&Math.abs(v-Ue)<=Si*Math.max(1,Math.abs(v),Math.abs(Ue))&&Math.abs(x-Ve)<=Si*Math.max(1,Math.abs(x),Math.abs(Ve))&&Math.abs(T-gt)<=Si*Math.max(1,Math.abs(T),Math.abs(gt))&&Math.abs(C-wt)<=Si*Math.max(1,Math.abs(C),Math.abs(wt))&&Math.abs(z-ut)<=Si*Math.max(1,Math.abs(z),Math.abs(ut))&&Math.abs(R-it)<=Si*Math.max(1,Math.abs(R),Math.abs(it))&&Math.abs(B-tt)<=Si*Math.max(1,Math.abs(B),Math.abs(tt))&&Math.abs(Z-dt)<=Si*Math.max(1,Math.abs(Z),Math.abs(dt))&&Math.abs(X-at)<=Si*Math.max(1,Math.abs(X),Math.abs(at))&&Math.abs(H-He)<=Si*Math.max(1,Math.abs(H),Math.abs(He))&&Math.abs(ue-Pt)<=Si*Math.max(1,Math.abs(ue),Math.abs(Pt))&&Math.abs(le-Et)<=Si*Math.max(1,Math.abs(le),Math.abs(Et))&&Math.abs(ke-Yt)<=Si*Math.max(1,Math.abs(ke),Math.abs(Yt))},l.evaluateSizeForFeature=function(o,{uSize:r,uSizeT:a},{lowerSize:d,upperSize:g}){return o.kind==="source"?d/Da:o.kind==="composite"?On(d/Da,g/Da,a):r},l.evaluateSizeForZoom=function(o,r){let a=0,d=0;if(o.kind==="constant")d=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:g,minZoom:v,maxZoom:x}=o,T=g?E(li.interpolationFactor(g,r,v,x),0,1):0;o.kind==="camera"?d=On(o.minSize,o.maxSize,T):a=T}return{uSizeT:a,uSize:d}},l.evaluateVariableOffset=v2,l.evented=_h,l.exported=ft,l.exported$1=Ot,l.extend=N,l.filterObject=F,l.fromRotation=function(o,r){var a=Math.sin(r),d=Math.cos(r);return o[0]=d,o[1]=a,o[2]=0,o[3]=-a,o[4]=d,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},l.fromScaling=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},l.getAnchorAlignment=Tv,l.getAnchorJustification=Ev,l.getArrayBuffer=Tn,l.getImage=Er,l.getJSON=function(o,r){return $n(N(o,{type:"json"}),r)},l.getOverlapMode=zv,l.getRTLTextPluginStatus=Ac,l.getReferrer=kt,l.getVideo=function(o,r){const a=window.document.createElement("video");a.muted=!0,a.onloadstart=function(){r(null,a)};for(let d=0;d<o.length;d++){const g=window.document.createElement("source");gr(o[d])||(a.crossOrigin="Anonymous"),g.src=o[d],a.appendChild(g)}return{cancel:()=>{}}},l.identity=av,l.invert=function(o,r){var a=r[0],d=r[1],g=r[2],v=r[3],x=r[4],T=r[5],C=r[6],z=r[7],R=r[8],B=r[9],Z=r[10],X=r[11],H=r[12],ue=r[13],le=r[14],ke=r[15],Re=a*T-d*x,Se=a*C-g*x,ze=a*z-v*x,Ue=d*C-g*T,Ve=d*z-v*T,gt=g*z-v*C,wt=R*ue-B*H,ut=R*le-Z*H,it=R*ke-X*H,tt=B*le-Z*ue,dt=B*ke-X*ue,at=Z*ke-X*le,He=Re*at-Se*dt+ze*tt+Ue*it-Ve*ut+gt*wt;return He?(o[0]=(T*at-C*dt+z*tt)*(He=1/He),o[1]=(g*dt-d*at-v*tt)*He,o[2]=(ue*gt-le*Ve+ke*Ue)*He,o[3]=(Z*Ve-B*gt-X*Ue)*He,o[4]=(C*it-x*at-z*ut)*He,o[5]=(a*at-g*it+v*ut)*He,o[6]=(le*ze-H*gt-ke*Se)*He,o[7]=(R*gt-Z*ze+X*Se)*He,o[8]=(x*dt-T*it+z*wt)*He,o[9]=(d*it-a*dt-v*wt)*He,o[10]=(H*Ve-ue*ze+ke*Re)*He,o[11]=(B*ze-R*Ve-X*Re)*He,o[12]=(T*ut-x*tt-C*wt)*He,o[13]=(a*tt-d*ut+g*wt)*He,o[14]=(ue*Se-H*Ue-le*Re)*He,o[15]=(R*Ue-B*Se+Z*Re)*He,o):null},l.isImageBitmap=ot,l.isSafari=Xe,l.isWorker=oe,l.keysDifference=function(o,r){const a=[];for(const d in o)d in r||a.push(d);return a},l.lazyLoadRTLTextPlugin=function(){Hi.isLoading()||Hi.isLoaded()||Ac()!=="deferred"||hm()},l.makeRequest=$n,l.mapObject=$,l.mercatorXfromLng=k2,l.mercatorYfromLat=E2,l.mercatorZfromAltitude=C2,l.mul=uD,l.mul$1=function(o,r,a){return o[0]=r[0]*a[0],o[1]=r[1]*a[1],o[2]=r[2]*a[2],o[3]=r[3]*a[3],o},l.multiply=IS,l.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},l.normalize=function(o,r){var a=r[0],d=r[1],g=r[2],v=a*a+d*d+g*g;return v>0&&(v=1/Math.sqrt(v)),o[0]=r[0]*v,o[1]=r[1]*v,o[2]=r[2]*v,o},l.number=On,l.ortho=function(o,r,a,d,g,v,x){var T=1/(r-a),C=1/(d-g),z=1/(v-x);return o[0]=-2*T,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*C,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*z,o[11]=0,o[12]=(r+a)*T,o[13]=(g+d)*C,o[14]=(x+v)*z,o[15]=1,o},l.parseCacheControl=be,l.parseGlyphPbf=function(o){return new xv(o).readFields(uR,[])},l.pbf=xv,l.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Pr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0].layout,a=o.bucket.layers[0]._unevaluatedLayout._values,d={layoutIconSize:a["icon-size"].possiblyEvaluate(new qn(o.bucket.zoom+1),o.canonical),layoutTextSize:a["text-size"].possiblyEvaluate(new qn(o.bucket.zoom+1),o.canonical),textMaxSize:a["text-size"].possiblyEvaluate(new qn(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:C,maxZoom:z}=o.bucket.textSizeData;d.compositeTextSizes=[a["text-size"].possiblyEvaluate(new qn(C),o.canonical),a["text-size"].possiblyEvaluate(new qn(z),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:C,maxZoom:z}=o.bucket.iconSizeData;d.compositeIconSizes=[a["icon-size"].possiblyEvaluate(new qn(C),o.canonical),a["icon-size"].possiblyEvaluate(new qn(z),o.canonical)]}const g=r.get("text-line-height")*Wr,v=r.get("text-rotation-alignment")!=="viewport"&&r.get("symbol-placement")!=="point",x=r.get("text-keep-upright"),T=r.get("text-size");for(const C of o.bucket.features){const z=r.get("text-font").evaluate(C,{},o.canonical).join(","),R=T.evaluate(C,{},o.canonical),B=d.layoutTextSize.evaluate(C,{},o.canonical),Z=d.layoutIconSize.evaluate(C,{},o.canonical),X={horizontal:{},vertical:void 0},H=C.text;let ue,le=[0,0];if(H){const Se=H.toString(),ze=r.get("text-letter-spacing").evaluate(C,{},o.canonical)*Wr,Ue=Q0(Se)?ze:0,Ve=r.get("text-anchor").evaluate(C,{},o.canonical),gt=r.get("text-variable-anchor");if(!gt){const dt=r.get("text-radial-offset").evaluate(C,{},o.canonical);le=dt?v2(Ve,[dt*Wr,kv]):r.get("text-offset").evaluate(C,{},o.canonical).map(at=>at*Wr)}let wt=v?"center":r.get("text-justify").evaluate(C,{},o.canonical);const ut=r.get("symbol-placement"),it=ut==="point"?r.get("text-max-width").evaluate(C,{},o.canonical)*Wr:0,tt=()=>{o.bucket.allowVerticalPlacement&&Nu(Se)&&(X.vertical=Mm(H,o.glyphMap,o.glyphPositions,o.imagePositions,z,it,g,Ve,"left",Ue,le,l.WritingMode.vertical,!0,ut,B,R))};if(!v&&gt){const dt=wt==="auto"?gt.map(He=>Ev(He)):[wt];let at=!1;for(let He=0;He<dt.length;He++){const Pt=dt[He];if(!X.horizontal[Pt])if(at)X.horizontal[Pt]=X.horizontal[0];else{const Et=Mm(H,o.glyphMap,o.glyphPositions,o.imagePositions,z,it,g,"center",Pt,Ue,le,l.WritingMode.horizontal,!1,ut,B,R);Et&&(X.horizontal[Pt]=Et,at=Et.positionedLines.length===1)}}tt()}else{wt==="auto"&&(wt=Ev(Ve));const dt=Mm(H,o.glyphMap,o.glyphPositions,o.imagePositions,z,it,g,Ve,wt,Ue,le,l.WritingMode.horizontal,!1,ut,B,R);dt&&(X.horizontal[wt]=dt),tt(),Nu(Se)&&v&&x&&(X.vertical=Mm(H,o.glyphMap,o.glyphPositions,o.imagePositions,z,it,g,Ve,wt,Ue,le,l.WritingMode.vertical,!1,ut,B,R))}}let ke=!1;if(C.icon&&C.icon.name){const Se=o.imageMap[C.icon.name];Se&&(ue=gR(o.imagePositions[C.icon.name],r.get("icon-offset").evaluate(C,{},o.canonical),r.get("icon-anchor").evaluate(C,{},o.canonical)),ke=!!Se.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=ke:o.bucket.sdfIcons!==ke&&de("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Se.pixelRatio!==o.bucket.pixelRatio||r.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Re=x2(X.horizontal)||X.vertical;o.bucket.iconsInText=!!Re&&Re.iconsInText,(Re||ue)&&SR(o.bucket,C,X,ue,o.imageMap,d,B,Z,le,ke,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},l.perspective=function(o,r,a,d,g){var v,x=1/Math.tan(r/2);return o[0]=x/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,g!=null&&g!==1/0?(o[10]=(g+d)*(v=1/(d-g)),o[14]=2*g*d*v):(o[10]=-1,o[14]=-2*d),o},l.pick=function(o,r){const a={};for(let d=0;d<r.length;d++){const g=r[d];g in o&&(a[g]=o[g])}return a},l.plugin=Hi,l.pointGeometry=Ce,l.polygonIntersectsPolygon=SS,l.potpack=n2,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=yt,l.registerForPluginStateChange=function(o){return o({pluginStatus:bi,pluginURL:Ns}),_h.on("pluginStateChange",o),o},l.renderColorRamp=LS,l.rotateX=function(o,r,a){var d=Math.sin(a),g=Math.cos(a),v=r[4],x=r[5],T=r[6],C=r[7],z=r[8],R=r[9],B=r[10],Z=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=v*g+z*d,o[5]=x*g+R*d,o[6]=T*g+B*d,o[7]=C*g+Z*d,o[8]=z*g-v*d,o[9]=R*g-x*d,o[10]=B*g-T*d,o[11]=Z*g-C*d,o},l.rotateZ=function(o,r,a){var d=Math.sin(a),g=Math.cos(a),v=r[0],x=r[1],T=r[2],C=r[3],z=r[4],R=r[5],B=r[6],Z=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=v*g+z*d,o[1]=x*g+R*d,o[2]=T*g+B*d,o[3]=C*g+Z*d,o[4]=z*g-v*d,o[5]=R*g-x*d,o[6]=B*g-T*d,o[7]=Z*g-C*d,o},l.scale=function(o,r,a){var d=a[0],g=a[1],v=a[2];return o[0]=r[0]*d,o[1]=r[1]*d,o[2]=r[2]*d,o[3]=r[3]*d,o[4]=r[4]*g,o[5]=r[5]*g,o[6]=r[6]*g,o[7]=r[7]*g,o[8]=r[8]*v,o[9]=r[9]*v,o[10]=r[10]*v,o[11]=r[11]*v,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},l.scale$1=function(o,r,a){return o[0]=r[0]*a,o[1]=r[1]*a,o[2]=r[2]*a,o},l.setCacheLimits=function(o,r){Ke=o,Je=r},l.setRTLTextPlugin=function(o,r,a=!1){if(bi===mh||bi===gh||bi===yh)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ns=ft.resolveURL(o),bi=mh,vh=r,_l(),a||hm()},l.spec=Ne,l.sphericalToCartesian=function([o,r,a]){return r+=90,r*=Math.PI/180,a*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(a),y:o*Math.sin(r)*Math.sin(a),z:o*Math.cos(a)}},l.sqrLen=function(o){var r=o[0],a=o[1];return r*r+a*a},l.sub=function(o,r,a){return o[0]=r[0]-a[0],o[1]=r[1]-a[1],o[2]=r[2]-a[2],o},l.toEvaluationFeature=Bc,l.transformMat3=function(o,r,a){var d=r[0],g=r[1],v=r[2];return o[0]=d*a[0]+g*a[3]+v*a[6],o[1]=d*a[1]+g*a[4]+v*a[7],o[2]=d*a[2]+g*a[5]+v*a[8],o},l.transformMat4=bm,l.transformMat4$1=function(o,r,a){var d=r[0],g=r[1];return o[0]=a[0]*d+a[4]*g+a[12],o[1]=a[1]*d+a[5]*g+a[13],o},l.translate=function(o,r,a){var d,g,v,x,T,C,z,R,B,Z,X,H,ue=a[0],le=a[1],ke=a[2];return r===o?(o[12]=r[0]*ue+r[4]*le+r[8]*ke+r[12],o[13]=r[1]*ue+r[5]*le+r[9]*ke+r[13],o[14]=r[2]*ue+r[6]*le+r[10]*ke+r[14],o[15]=r[3]*ue+r[7]*le+r[11]*ke+r[15]):(g=r[1],v=r[2],x=r[3],T=r[4],C=r[5],z=r[6],R=r[7],B=r[8],Z=r[9],X=r[10],H=r[11],o[0]=d=r[0],o[1]=g,o[2]=v,o[3]=x,o[4]=T,o[5]=C,o[6]=z,o[7]=R,o[8]=B,o[9]=Z,o[10]=X,o[11]=H,o[12]=d*ue+T*le+B*ke+r[12],o[13]=g*ue+C*le+Z*ke+r[13],o[14]=v*ue+z*le+X*ke+r[14],o[15]=x*ue+R*le+H*ke+r[15]),o},l.triggerPluginCompletionEvent=dm,l.unicodeBlockLookup=ct,l.uniqueId=function(){return V++},l.validateCustomStyleLayer=function(o){const r=[],a=o.id;return a===void 0&&r.push({message:`layers.${a}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),r},l.validateLight=dh,l.validateStyle=Pc,l.vectorTile=Sl,l.warnOnce=de,l.wrap=L}),h(["./shared"],function(l){function b(ee){const D=typeof ee;if(D==="number"||D==="boolean"||D==="string"||ee==null)return JSON.stringify(ee);if(Array.isArray(ee)){let Q="[";for(const he of ee)Q+=`${b(he)},`;return`${Q}]`}const j=Object.keys(ee).sort();let K="{";for(let Q=0;Q<j.length;Q++)K+=`${JSON.stringify(j[Q])}:${b(ee[j[Q]])},`;return`${K}}`}function w(ee){let D="";for(const j of l.refProperties)D+=`/${b(ee[j])}`;return D}class k{constructor(D){this.keyCache={},D&&this.replace(D)}replace(D){this._layerConfigs={},this._layers={},this.update(D,[])}update(D,j){for(const Q of D){this._layerConfigs[Q.id]=Q;const he=this._layers[Q.id]=l.createStyleLayer(Q);he._featureFilter=l.createFilter(he.filter),this.keyCache[Q.id]&&delete this.keyCache[Q.id]}for(const Q of j)delete this.keyCache[Q],delete this._layerConfigs[Q],delete this._layers[Q];this.familiesBySource={};const K=function(Q,he){const ve={};for(let fe=0;fe<Q.length;fe++){const _e=he&&he[Q[fe].id]||w(Q[fe]);he&&(he[Q[fe].id]=_e);let Be=ve[_e];Be||(Be=ve[_e]=[]),Be.push(Q[fe])}const me=[];for(const fe in ve)me.push(ve[fe]);return me}(Object.values(this._layerConfigs),this.keyCache);for(const Q of K){const he=Q.map(Ge=>this._layers[Ge.id]),ve=he[0];if(ve.visibility==="none")continue;const me=ve.source||"";let fe=this.familiesBySource[me];fe||(fe=this.familiesBySource[me]={});const _e=ve.sourceLayer||"_geojsonTileLayer";let Be=fe[_e];Be||(Be=fe[_e]=[]),Be.push(he)}}}class M{constructor(D){const j={},K=[];for(const me in D){const fe=D[me],_e=j[me]={};for(const Be in fe){const Ge=fe[+Be];if(!Ge||Ge.bitmap.width===0||Ge.bitmap.height===0)continue;const Oe={x:0,y:0,w:Ge.bitmap.width+2,h:Ge.bitmap.height+2};K.push(Oe),_e[Be]={rect:Oe,metrics:Ge.metrics}}}const{w:Q,h:he}=l.potpack(K),ve=new l.AlphaImage({width:Q||1,height:he||1});for(const me in D){const fe=D[me];for(const _e in fe){const Be=fe[+_e];if(!Be||Be.bitmap.width===0||Be.bitmap.height===0)continue;const Ge=j[me][_e].rect;l.AlphaImage.copy(Be.bitmap,ve,{x:0,y:0},{x:Ge.x+1,y:Ge.y+1},Be.bitmap)}}this.image=ve,this.positions=j}}l.register("GlyphAtlas",M);class E{constructor(D){this.tileID=new l.OverscaledTileID(D.tileID.overscaledZ,D.tileID.wrap,D.tileID.canonical.z,D.tileID.canonical.x,D.tileID.canonical.y),this.uid=D.uid,this.zoom=D.zoom,this.pixelRatio=D.pixelRatio,this.tileSize=D.tileSize,this.source=D.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=D.showCollisionBoxes,this.collectResourceTiming=!!D.collectResourceTiming,this.returnDependencies=!!D.returnDependencies,this.promoteId=D.promoteId}parse(D,j,K,Q,he){this.status="parsing",this.data=D,this.collisionBoxArray=new l.CollisionBoxArray;const ve=new l.DictionaryCoder(Object.keys(D.layers).sort()),me=new l.FeatureIndex(this.tileID,this.promoteId);me.bucketLayerIDs=[];const fe={},_e={featureIndex:me,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:K},Be=j.familiesBySource[this.source];for(const Lt in Be){const Zt=D.layers[Lt];if(!Zt)continue;Zt.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${Lt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const sn=ve.encode(Lt),vn=[];for(let _r=0;_r<Zt.length;_r++){const An=Zt.feature(_r),Rr=me.getId(An,Lt);vn.push({feature:An,id:Rr,index:_r,sourceLayerIndex:sn})}for(const _r of Be[Lt]){const An=_r[0];An.source!==this.source&&l.warnOnce(`layer.source = ${An.source} does not equal this.source = ${this.source}`),An.minzoom&&this.zoom<Math.floor(An.minzoom)||An.maxzoom&&this.zoom>=An.maxzoom||An.visibility!=="none"&&(L(_r,this.zoom,K),(fe[An.id]=An.createBucket({index:me.bucketLayerIDs.length,layers:_r,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:sn,sourceID:this.source})).populate(vn,_e,this.tileID.canonical),me.bucketLayerIDs.push(_r.map(Rr=>Rr.id)))}}let Ge,Oe,vt,_t;const lt=l.mapObject(_e.glyphDependencies,Lt=>Object.keys(Lt).map(Number));Object.keys(lt).length?Q.send("getGlyphs",{uid:this.uid,stacks:lt},(Lt,Zt)=>{Ge||(Ge=Lt,Oe=Zt,on.call(this))}):Oe={};const It=Object.keys(_e.iconDependencies);It.length?Q.send("getImages",{icons:It,source:this.source,tileID:this.tileID,type:"icons"},(Lt,Zt)=>{Ge||(Ge=Lt,vt=Zt,on.call(this))}):vt={};const At=Object.keys(_e.patternDependencies);function on(){if(Ge)return he(Ge);if(Oe&&vt&&_t){const Lt=new M(Oe),Zt=new l.ImageAtlas(vt,_t);for(const sn in fe){const vn=fe[sn];vn instanceof l.SymbolBucket?(L(vn.layers,this.zoom,K),l.performSymbolLayout({bucket:vn,glyphMap:Oe,glyphPositions:Lt.positions,imageMap:vt,imagePositions:Zt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):vn.hasPattern&&(vn instanceof l.LineBucket||vn instanceof l.FillBucket||vn instanceof l.FillExtrusionBucket)&&(L(vn.layers,this.zoom,K),vn.addFeatures(_e,this.tileID.canonical,Zt.patternPositions))}this.status="done",he(null,{buckets:Object.values(fe).filter(sn=>!sn.isEmpty()),featureIndex:me,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Lt.image,imageAtlas:Zt,glyphMap:this.returnDependencies?Oe:null,iconMap:this.returnDependencies?vt:null,glyphPositions:this.returnDependencies?Lt.positions:null})}}At.length?Q.send("getImages",{icons:At,source:this.source,tileID:this.tileID,type:"patterns"},(Lt,Zt)=>{Ge||(Ge=Lt,_t=Zt,on.call(this))}):_t={},on.call(this)}}function L(ee,D,j){const K=new l.EvaluationParameters(D);for(const Q of ee)Q.recalculate(K,j)}function N(ee,D){const j=l.getArrayBuffer(ee.request,(K,Q,he,ve)=>{K?D(K):Q&&D(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(Q)),rawData:Q,cacheControl:he,expires:ve})});return()=>{j.cancel(),D()}}class V{constructor(D,j,K,Q){this.actor=D,this.layerIndex=j,this.availableImages=K,this.loadVectorData=Q||N,this.loading={},this.loaded={}}loadTile(D,j){const K=D.uid;this.loading||(this.loading={});const Q=!!(D&&D.request&&D.request.collectResourceTiming)&&new l.RequestPerformance(D.request),he=this.loading[K]=new E(D);he.abort=this.loadVectorData(D,(ve,me)=>{if(delete this.loading[K],ve||!me)return he.status="done",this.loaded[K]=he,j(ve);const fe=me.rawData,_e={};me.expires&&(_e.expires=me.expires),me.cacheControl&&(_e.cacheControl=me.cacheControl);const Be={};if(Q){const Ge=Q.finish();Ge&&(Be.resourceTiming=JSON.parse(JSON.stringify(Ge)))}he.vectorTile=me.vectorTile,he.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ge,Oe)=>{if(Ge||!Oe)return j(Ge);j(null,l.extend({rawTileData:fe.slice(0)},Oe,_e,Be))}),this.loaded=this.loaded||{},this.loaded[K]=he})}reloadTile(D,j){const K=this.loaded,Q=D.uid,he=this;if(K&&K[Q]){const ve=K[Q];ve.showCollisionBoxes=D.showCollisionBoxes;const me=(fe,_e)=>{const Be=ve.reloadCallback;Be&&(delete ve.reloadCallback,ve.parse(ve.vectorTile,he.layerIndex,this.availableImages,he.actor,Be)),j(fe,_e)};ve.status==="parsing"?ve.reloadCallback=me:ve.status==="done"&&(ve.vectorTile?ve.parse(ve.vectorTile,this.layerIndex,this.availableImages,this.actor,me):me())}}abortTile(D,j){const K=this.loading,Q=D.uid;K&&K[Q]&&K[Q].abort&&(K[Q].abort(),delete K[Q]),j()}removeTile(D,j){const K=this.loaded,Q=D.uid;K&&K[Q]&&delete K[Q],j()}}class J{constructor(){this.loaded={}}loadTile(D,j){const{uid:K,encoding:Q,rawImageData:he}=D,ve=l.isImageBitmap(he)?this.getImageData(he):he,me=new l.DEMData(K,ve,Q);this.loaded=this.loaded||{},this.loaded[K]=me,j(null,me)}getImageData(D){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(D.width,D.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=D.width,this.offscreenCanvas.height=D.height,this.offscreenCanvasContext.drawImage(D,0,0,D.width,D.height);const j=this.offscreenCanvasContext.getImageData(-1,-1,D.width+2,D.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:j.width,height:j.height},j.data)}removeTile(D){const j=this.loaded,K=D.uid;j&&j[K]&&delete j[K]}}var $=function ee(D,j){var K,Q=D&&D.type;if(Q==="FeatureCollection")for(K=0;K<D.features.length;K++)ee(D.features[K],j);else if(Q==="GeometryCollection")for(K=0;K<D.geometries.length;K++)ee(D.geometries[K],j);else if(Q==="Feature")ee(D.geometry,j);else if(Q==="Polygon")F(D.coordinates,j);else if(Q==="MultiPolygon")for(K=0;K<D.coordinates.length;K++)F(D.coordinates[K],j);return D};function F(ee,D){if(ee.length!==0){W(ee[0],D);for(var j=1;j<ee.length;j++)W(ee[j],!D)}}function W(ee,D){for(var j=0,K=0,Q=0,he=ee.length,ve=he-1;Q<he;ve=Q++){var me=(ee[Q][0]-ee[ve][0])*(ee[ve][1]+ee[Q][1]),fe=j+me;K+=Math.abs(j)>=Math.abs(me)?j-fe+me:me-fe+j,j=fe}j+K>=0!=!!D&&ee.reverse()}const te=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;class de{constructor(D){this._feature=D,this.extent=l.EXTENT,this.type=D.type,this.properties=D.tags,"id"in D&&!isNaN(D.id)&&(this.id=parseInt(D.id,10))}loadGeometry(){if(this._feature.type===1){const D=[];for(const j of this._feature.geometry)D.push([new l.pointGeometry(j[0],j[1])]);return D}{const D=[];for(const j of this._feature.geometry){const K=[];for(const Q of j)K.push(new l.pointGeometry(Q[0],Q[1]));D.push(K)}return D}}toGeoJSON(D,j,K){return te.call(this,D,j,K)}}class pe{constructor(D){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=D.length,this._features=D}feature(D){return new de(this._features[D])}}var ce={exports:{}},oe=l.pointGeometry,be=l.vectorTile.VectorTileFeature,ye=Ae;function Ae(ee,D){this.options=D||{},this.features=ee,this.length=ee.length}function Ze(ee,D){this.id=typeof ee.id=="number"?ee.id:void 0,this.type=ee.type,this.rawGeometry=ee.type===1?[ee.geometry]:ee.geometry,this.properties=ee.tags,this.extent=D||4096}Ae.prototype.feature=function(ee){return new Ze(this.features[ee],this.options.extent)},Ze.prototype.loadGeometry=function(){var ee=this.rawGeometry;this.geometry=[];for(var D=0;D<ee.length;D++){for(var j=ee[D],K=[],Q=0;Q<j.length;Q++)K.push(new oe(j[Q][0],j[Q][1]));this.geometry.push(K)}return this.geometry},Ze.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ee=this.geometry,D=1/0,j=-1/0,K=1/0,Q=-1/0,he=0;he<ee.length;he++)for(var ve=ee[he],me=0;me<ve.length;me++){var fe=ve[me];D=Math.min(D,fe.x),j=Math.max(j,fe.x),K=Math.min(K,fe.y),Q=Math.max(Q,fe.y)}return[D,K,j,Q]},Ze.prototype.toGeoJSON=be.prototype.toGeoJSON;var Xe=l.pbf,ot=ye;function ft(ee){var D=new Xe;return function(j,K){for(var Q in j.layers)K.writeMessage(3,Ce,j.layers[Q])}(ee,D),D.finish()}function Ce(ee,D){var j;D.writeVarintField(15,ee.version||1),D.writeStringField(1,ee.name||""),D.writeVarintField(5,ee.extent||4096);var K={keys:[],values:[],keycache:{},valuecache:{}};for(j=0;j<ee.length;j++)K.feature=ee.feature(j),D.writeMessage(2,Ee,K);var Q=K.keys;for(j=0;j<Q.length;j++)D.writeStringField(3,Q[j]);var he=K.values;for(j=0;j<he.length;j++)D.writeMessage(4,Ke,he[j])}function Ee(ee,D){var j=ee.feature;j.id!==void 0&&D.writeVarintField(1,j.id),D.writeMessage(2,Me,ee),D.writeVarintField(3,j.type),D.writeMessage(4,st,j)}function Me(ee,D){var j=ee.feature,K=ee.keys,Q=ee.values,he=ee.keycache,ve=ee.valuecache;for(var me in j.properties){var fe=j.properties[me],_e=he[me];if(fe!==null){_e===void 0&&(K.push(me),he[me]=_e=K.length-1),D.writeVarint(_e);var Be=typeof fe;Be!=="string"&&Be!=="boolean"&&Be!=="number"&&(fe=JSON.stringify(fe));var Ge=Be+":"+fe,Oe=ve[Ge];Oe===void 0&&(Q.push(fe),ve[Ge]=Oe=Q.length-1),D.writeVarint(Oe)}}}function We(ee,D){return(D<<3)+(7&ee)}function Ye(ee){return ee<<1^ee>>31}function st(ee,D){for(var j=ee.loadGeometry(),K=ee.type,Q=0,he=0,ve=j.length,me=0;me<ve;me++){var fe=j[me],_e=1;K===1&&(_e=fe.length),D.writeVarint(We(1,_e));for(var Be=K===3?fe.length-1:fe.length,Ge=0;Ge<Be;Ge++){Ge===1&&K!==1&&D.writeVarint(We(2,Be-1));var Oe=fe[Ge].x-Q,vt=fe[Ge].y-he;D.writeVarint(Ye(Oe)),D.writeVarint(Ye(vt)),Q+=Oe,he+=vt}K===3&&D.writeVarint(We(7,1))}}function Ke(ee,D){var j=typeof ee;j==="string"?D.writeStringField(1,ee):j==="boolean"?D.writeBooleanField(7,ee):j==="number"&&(ee%1!=0?D.writeDoubleField(3,ee):ee<0?D.writeSVarintField(6,ee):D.writeVarintField(5,ee))}function Je(ee,D,j,K,Q,he){if(Q-K<=j)return;const ve=K+Q>>1;pt(ee,D,ve,K,Q,he%2),Je(ee,D,j,K,ve-1,he+1),Je(ee,D,j,ve+1,Q,he+1)}function pt(ee,D,j,K,Q,he){for(;Q>K;){if(Q-K>600){const _e=Q-K+1,Be=j-K+1,Ge=Math.log(_e),Oe=.5*Math.exp(2*Ge/3),vt=.5*Math.sqrt(Ge*Oe*(_e-Oe)/_e)*(Be-_e/2<0?-1:1);pt(ee,D,j,Math.max(K,Math.floor(j-Be*Oe/_e+vt)),Math.min(Q,Math.floor(j+(_e-Be)*Oe/_e+vt)),he)}const ve=D[2*j+he];let me=K,fe=Q;for(St(ee,D,K,j),D[2*Q+he]>ve&&St(ee,D,K,Q);me<fe;){for(St(ee,D,me,fe),me++,fe--;D[2*me+he]<ve;)me++;for(;D[2*fe+he]>ve;)fe--}D[2*K+he]===ve?St(ee,D,K,fe):(fe++,St(ee,D,fe,Q)),fe<=j&&(K=fe+1),j<=fe&&(Q=fe-1)}}function St(ee,D,j,K){Ot(ee,j,K),Ot(D,2*j,2*K),Ot(D,2*j+1,2*K+1)}function Ot(ee,D,j){const K=ee[D];ee[D]=ee[j],ee[j]=K}function Vt(ee,D,j,K){const Q=ee-j,he=D-K;return Q*Q+he*he}ce.exports=ft,ce.exports.fromVectorTileJs=ft,ce.exports.fromGeojsonVt=function(ee,D){D=D||{};var j={};for(var K in ee)j[K]=new ot(ee[K].features,D),j[K].name=K,j[K].version=D.version,j[K].extent=D.extent;return ft({layers:j})},ce.exports.GeoJSONWrapper=ot;const Bt=ee=>ee[0],ln=ee=>ee[1];class Kn{constructor(D,j=Bt,K=ln,Q=64,he=Float64Array){this.nodeSize=Q,this.points=D;const ve=D.length<65536?Uint16Array:Uint32Array,me=this.ids=new ve(D.length),fe=this.coords=new he(2*D.length);for(let _e=0;_e<D.length;_e++)me[_e]=_e,fe[2*_e]=j(D[_e]),fe[2*_e+1]=K(D[_e]);Je(me,fe,Q,0,me.length-1,0)}range(D,j,K,Q){return function(he,ve,me,fe,_e,Be,Ge){const Oe=[0,he.length-1,0],vt=[];let _t,lt;for(;Oe.length;){const It=Oe.pop(),At=Oe.pop(),on=Oe.pop();if(At-on<=Ge){for(let sn=on;sn<=At;sn++)_t=ve[2*sn],lt=ve[2*sn+1],_t>=me&&_t<=_e&&lt>=fe&&lt<=Be&&vt.push(he[sn]);continue}const Lt=Math.floor((on+At)/2);_t=ve[2*Lt],lt=ve[2*Lt+1],_t>=me&&_t<=_e&&lt>=fe&&lt<=Be&&vt.push(he[Lt]);const Zt=(It+1)%2;(It===0?me<=_t:fe<=lt)&&(Oe.push(on),Oe.push(Lt-1),Oe.push(Zt)),(It===0?_e>=_t:Be>=lt)&&(Oe.push(Lt+1),Oe.push(At),Oe.push(Zt))}return vt}(this.ids,this.coords,D,j,K,Q,this.nodeSize)}within(D,j,K){return function(Q,he,ve,me,fe,_e){const Be=[0,Q.length-1,0],Ge=[],Oe=fe*fe;for(;Be.length;){const vt=Be.pop(),_t=Be.pop(),lt=Be.pop();if(_t-lt<=_e){for(let Zt=lt;Zt<=_t;Zt++)Vt(he[2*Zt],he[2*Zt+1],ve,me)<=Oe&&Ge.push(Q[Zt]);continue}const It=Math.floor((lt+_t)/2),At=he[2*It],on=he[2*It+1];Vt(At,on,ve,me)<=Oe&&Ge.push(Q[It]);const Lt=(vt+1)%2;(vt===0?ve-fe<=At:me-fe<=on)&&(Be.push(lt),Be.push(It-1),Be.push(Lt)),(vt===0?ve+fe>=At:me+fe>=on)&&(Be.push(It+1),Be.push(_t),Be.push(Lt))}return Ge}(this.ids,this.coords,D,j,K,this.nodeSize)}}const qt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ee=>ee},zt=Math.fround||(Ut=new Float32Array(1),ee=>(Ut[0]=+ee,Ut[0]));var Ut;class kt{constructor(D){this.options=Er(Object.create(qt),D),this.trees=new Array(this.options.maxZoom+1)}load(D){const{log:j,minZoom:K,maxZoom:Q,nodeSize:he}=this.options;j&&console.time("total time");const ve=`prepare ${D.length} points`;j&&console.time(ve),this.points=D;let me=[];for(let fe=0;fe<D.length;fe++)D[fe].geometry&&me.push($n(D[fe],fe));this.trees[Q+1]=new Kn(me,yn,Vn,he,Float32Array),j&&console.timeEnd(ve);for(let fe=Q;fe>=K;fe--){const _e=+Date.now();me=this._cluster(me,fe),this.trees[fe]=new Kn(me,yn,Vn,he,Float32Array),j&&console.log("z%d: %d clusters in %dms",fe,me.length,+Date.now()-_e)}return j&&console.timeEnd("total time"),this}getClusters(D,j){let K=((D[0]+180)%360+360)%360-180;const Q=Math.max(-90,Math.min(90,D[1]));let he=D[2]===180?180:((D[2]+180)%360+360)%360-180;const ve=Math.max(-90,Math.min(90,D[3]));if(D[2]-D[0]>=360)K=-180,he=180;else if(K>he){const Be=this.getClusters([K,Q,180,ve],j),Ge=this.getClusters([-180,Q,he,ve],j);return Be.concat(Ge)}const me=this.trees[this._limitZoom(j)],fe=me.range(jt(K),jn(ve),jt(he),jn(Q)),_e=[];for(const Be of fe){const Ge=me.points[Be];_e.push(Ge.numPoints?Tn(Ge):this.points[Ge.index])}return _e}getChildren(D){const j=this._getOriginId(D),K=this._getOriginZoom(D),Q="No cluster with the specified id.",he=this.trees[K];if(!he)throw new Error(Q);const ve=he.points[j];if(!ve)throw new Error(Q);const me=this.options.radius/(this.options.extent*Math.pow(2,K-1)),fe=he.within(ve.x,ve.y,me),_e=[];for(const Be of fe){const Ge=he.points[Be];Ge.parentId===D&&_e.push(Ge.numPoints?Tn(Ge):this.points[Ge.index])}if(_e.length===0)throw new Error(Q);return _e}getLeaves(D,j,K){const Q=[];return this._appendLeaves(Q,D,j=j||10,K=K||0,0),Q}getTile(D,j,K){const Q=this.trees[this._limitZoom(D)],he=Math.pow(2,D),{extent:ve,radius:me}=this.options,fe=me/ve,_e=(K-fe)/he,Be=(K+1+fe)/he,Ge={features:[]};return this._addTileFeatures(Q.range((j-fe)/he,_e,(j+1+fe)/he,Be),Q.points,j,K,he,Ge),j===0&&this._addTileFeatures(Q.range(1-fe/he,_e,1,Be),Q.points,he,K,he,Ge),j===he-1&&this._addTileFeatures(Q.range(0,_e,fe/he,Be),Q.points,-1,K,he,Ge),Ge.features.length?Ge:null}getClusterExpansionZoom(D){let j=this._getOriginZoom(D)-1;for(;j<=this.options.maxZoom;){const K=this.getChildren(D);if(j++,K.length!==1)break;D=K[0].properties.cluster_id}return j}_appendLeaves(D,j,K,Q,he){const ve=this.getChildren(j);for(const me of ve){const fe=me.properties;if(fe&&fe.cluster?he+fe.point_count<=Q?he+=fe.point_count:he=this._appendLeaves(D,fe.cluster_id,K,Q,he):he<Q?he++:D.push(me),D.length===K)break}return he}_addTileFeatures(D,j,K,Q,he,ve){for(const me of D){const fe=j[me],_e=fe.numPoints;let Be,Ge,Oe;if(_e)Be=gr(fe),Ge=fe.x,Oe=fe.y;else{const lt=this.points[fe.index];Be=lt.properties,Ge=jt(lt.geometry.coordinates[0]),Oe=jn(lt.geometry.coordinates[1])}const vt={type:1,geometry:[[Math.round(this.options.extent*(Ge*he-K)),Math.round(this.options.extent*(Oe*he-Q))]],tags:Be};let _t;_e?_t=fe.id:this.options.generateId?_t=fe.index:this.points[fe.index].id&&(_t=this.points[fe.index].id),_t!==void 0&&(vt.id=_t),ve.features.push(vt)}}_limitZoom(D){return Math.max(this.options.minZoom,Math.min(Math.floor(+D),this.options.maxZoom+1))}_cluster(D,j){const K=[],{radius:Q,extent:he,reduce:ve,minPoints:me}=this.options,fe=Q/(he*Math.pow(2,j));for(let _e=0;_e<D.length;_e++){const Be=D[_e];if(Be.zoom<=j)continue;Be.zoom=j;const Ge=this.trees[j+1],Oe=Ge.within(Be.x,Be.y,fe),vt=Be.numPoints||1;let _t=vt;for(const lt of Oe){const It=Ge.points[lt];It.zoom>j&&(_t+=It.numPoints||1)}if(_t>vt&&_t>=me){let lt=Be.x*vt,It=Be.y*vt,At=ve&&vt>1?this._map(Be,!0):null;const on=(_e<<5)+(j+1)+this.points.length;for(const Lt of Oe){const Zt=Ge.points[Lt];if(Zt.zoom<=j)continue;Zt.zoom=j;const sn=Zt.numPoints||1;lt+=Zt.x*sn,It+=Zt.y*sn,Zt.parentId=on,ve&&(At||(At=this._map(Be,!0)),ve(At,this._map(Zt)))}Be.parentId=on,K.push(Jt(lt/_t,It/_t,on,_t,At))}else if(K.push(Be),_t>1)for(const lt of Oe){const It=Ge.points[lt];It.zoom<=j||(It.zoom=j,K.push(It))}}return K}_getOriginId(D){return D-this.points.length>>5}_getOriginZoom(D){return(D-this.points.length)%32}_map(D,j){if(D.numPoints)return j?Er({},D.properties):D.properties;const K=this.points[D.index].properties,Q=this.options.map(K);return j&&Q===K?Er({},Q):Q}}function Jt(ee,D,j,K,Q){return{x:zt(ee),y:zt(D),zoom:1/0,id:j,parentId:-1,numPoints:K,properties:Q}}function $n(ee,D){const[j,K]=ee.geometry.coordinates;return{x:zt(jt(j)),y:zt(jn(K)),zoom:1/0,index:D,parentId:-1}}function Tn(ee){return{type:"Feature",id:ee.id,properties:gr(ee),geometry:{type:"Point",coordinates:[(D=ee.x,360*(D-.5)),yr(ee.y)]}};var D}function gr(ee){const D=ee.numPoints,j=D>=1e4?`${Math.round(D/1e3)}k`:D>=1e3?Math.round(D/100)/10+"k":D;return Er(Er({},ee.properties),{cluster:!0,cluster_id:ee.id,point_count:D,point_count_abbreviated:j})}function jt(ee){return ee/360+.5}function jn(ee){const D=Math.sin(ee*Math.PI/180),j=.5-.25*Math.log((1+D)/(1-D))/Math.PI;return j<0?0:j>1?1:j}function yr(ee){const D=(180-360*ee)*Math.PI/180;return 360*Math.atan(Math.exp(D))/Math.PI-90}function Er(ee,D){for(const j in D)ee[j]=D[j];return ee}function yn(ee){return ee.x}function Vn(ee){return ee.y}function Cr(ee,D,j,K){for(var Q,he=K,ve=j-D>>1,me=j-D,fe=ee[D],_e=ee[D+1],Be=ee[j],Ge=ee[j+1],Oe=D+3;Oe<j;Oe+=3){var vt=Di(ee[Oe],ee[Oe+1],fe,_e,Be,Ge);if(vt>he)Q=Oe,he=vt;else if(vt===he){var _t=Math.abs(Oe-ve);_t<me&&(Q=Oe,me=_t)}}he>K&&(Q-D>3&&Cr(ee,D,Q,K),ee[Q+2]=he,j-Q>3&&Cr(ee,Q,j,K))}function Di(ee,D,j,K,Q,he){var ve=Q-j,me=he-K;if(ve!==0||me!==0){var fe=((ee-j)*ve+(D-K)*me)/(ve*ve+me*me);fe>1?(j=Q,K=he):fe>0&&(j+=ve*fe,K+=me*fe)}return(ve=ee-j)*ve+(me=D-K)*me}function Dr(ee,D,j,K){var Q={id:ee===void 0?null:ee,type:D,geometry:j,tags:K,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(he){var ve=he.geometry,me=he.type;if(me==="Point"||me==="MultiPoint"||me==="LineString")Ne(he,ve);else if(me==="Polygon"||me==="MultiLineString")for(var fe=0;fe<ve.length;fe++)Ne(he,ve[fe]);else if(me==="MultiPolygon")for(fe=0;fe<ve.length;fe++)for(var _e=0;_e<ve[fe].length;_e++)Ne(he,ve[fe][_e])}(Q),Q}function Ne(ee,D){for(var j=0;j<D.length;j+=3)ee.minX=Math.min(ee.minX,D[j]),ee.minY=Math.min(ee.minY,D[j+1]),ee.maxX=Math.max(ee.maxX,D[j]),ee.maxY=Math.max(ee.maxY,D[j+1])}function nt(ee,D,j,K){if(D.geometry){var Q=D.geometry.coordinates,he=D.geometry.type,ve=Math.pow(j.tolerance/((1<<j.maxZoom)*j.extent),2),me=[],fe=D.id;if(j.promoteId?fe=D.properties[j.promoteId]:j.generateId&&(fe=K||0),he==="Point")zo(Q,me);else if(he==="MultiPoint")for(var _e=0;_e<Q.length;_e++)zo(Q[_e],me);else if(he==="LineString")xi(Q,me,ve,!1);else if(he==="MultiLineString"){if(j.lineMetrics){for(_e=0;_e<Q.length;_e++)xi(Q[_e],me=[],ve,!1),ee.push(Dr(fe,"LineString",me,D.properties));return}tn(Q,me,ve,!1)}else if(he==="Polygon")tn(Q,me,ve,!0);else{if(he!=="MultiPolygon"){if(he==="GeometryCollection"){for(_e=0;_e<D.geometry.geometries.length;_e++)nt(ee,{id:fe,geometry:D.geometry.geometries[_e],properties:D.properties},j,K);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<Q.length;_e++){var Be=[];tn(Q[_e],Be,ve,!0),me.push(Be)}}ee.push(Dr(fe,he,me,D.properties))}}function zo(ee,D){D.push(oi(ee[0])),D.push(si(ee[1])),D.push(0)}function xi(ee,D,j,K){for(var Q,he,ve=0,me=0;me<ee.length;me++){var fe=oi(ee[me][0]),_e=si(ee[me][1]);D.push(fe),D.push(_e),D.push(0),me>0&&(ve+=K?(Q*_e-fe*he)/2:Math.sqrt(Math.pow(fe-Q,2)+Math.pow(_e-he,2))),Q=fe,he=_e}var Be=D.length-3;D[2]=1,Cr(D,0,Be,j),D[Be+2]=1,D.size=Math.abs(ve),D.start=0,D.end=D.size}function tn(ee,D,j,K){for(var Q=0;Q<ee.length;Q++){var he=[];xi(ee[Q],he,j,K),D.push(he)}}function oi(ee){return ee/360+.5}function si(ee){var D=Math.sin(ee*Math.PI/180),j=.5-.25*Math.log((1+D)/(1-D))/Math.PI;return j<0?0:j>1?1:j}function ai(ee,D,j,K,Q,he,ve,me){if(K/=D,he>=(j/=D)&&ve<K)return ee;if(ve<j||he>=K)return null;for(var fe=[],_e=0;_e<ee.length;_e++){var Be=ee[_e],Ge=Be.geometry,Oe=Be.type,vt=Q===0?Be.minX:Be.minY,_t=Q===0?Be.maxX:Be.maxY;if(vt>=j&&_t<K)fe.push(Be);else if(!(_t<j||vt>=K)){var lt=[];if(Oe==="Point"||Oe==="MultiPoint")Hr(Ge,lt,j,K,Q);else if(Oe==="LineString")Qe(Ge,lt,j,K,Q,!1,me.lineMetrics);else if(Oe==="MultiLineString")$t(Ge,lt,j,K,Q,!1);else if(Oe==="Polygon")$t(Ge,lt,j,K,Q,!0);else if(Oe==="MultiPolygon")for(var It=0;It<Ge.length;It++){var At=[];$t(Ge[It],At,j,K,Q,!0),At.length&&lt.push(At)}if(lt.length){if(me.lineMetrics&&Oe==="LineString"){for(It=0;It<lt.length;It++)fe.push(Dr(Be.id,Oe,lt[It],Be.tags));continue}Oe!=="LineString"&&Oe!=="MultiLineString"||(lt.length===1?(Oe="LineString",lt=lt[0]):Oe="MultiLineString"),Oe!=="Point"&&Oe!=="MultiPoint"||(Oe=lt.length===3?"Point":"MultiPoint"),fe.push(Dr(Be.id,Oe,lt,Be.tags))}}}return fe.length?fe:null}function Hr(ee,D,j,K,Q){for(var he=0;he<ee.length;he+=3){var ve=ee[he+Q];ve>=j&&ve<=K&&(D.push(ee[he]),D.push(ee[he+1]),D.push(ee[he+2]))}}function Qe(ee,D,j,K,Q,he,ve){for(var me,fe,_e=Xt(ee),Be=Q===0?uo:Rt,Ge=ee.start,Oe=0;Oe<ee.length-3;Oe+=3){var vt=ee[Oe],_t=ee[Oe+1],lt=ee[Oe+2],It=ee[Oe+3],At=ee[Oe+4],on=Q===0?vt:_t,Lt=Q===0?It:At,Zt=!1;ve&&(me=Math.sqrt(Math.pow(vt-It,2)+Math.pow(_t-At,2))),on<j?Lt>j&&(fe=Be(_e,vt,_t,It,At,j),ve&&(_e.start=Ge+me*fe)):on>K?Lt<K&&(fe=Be(_e,vt,_t,It,At,K),ve&&(_e.start=Ge+me*fe)):Ir(_e,vt,_t,lt),Lt<j&&on>=j&&(fe=Be(_e,vt,_t,It,At,j),Zt=!0),Lt>K&&on<=K&&(fe=Be(_e,vt,_t,It,At,K),Zt=!0),!he&&Zt&&(ve&&(_e.end=Ge+me*fe),D.push(_e),_e=Xt(ee)),ve&&(Ge+=me)}var sn=ee.length-3;vt=ee[sn],_t=ee[sn+1],lt=ee[sn+2],(on=Q===0?vt:_t)>=j&&on<=K&&Ir(_e,vt,_t,lt),sn=_e.length-3,he&&sn>=3&&(_e[sn]!==_e[0]||_e[sn+1]!==_e[1])&&Ir(_e,_e[0],_e[1],_e[2]),_e.length&&D.push(_e)}function Xt(ee){var D=[];return D.size=ee.size,D.start=ee.start,D.end=ee.end,D}function $t(ee,D,j,K,Q,he){for(var ve=0;ve<ee.length;ve++)Qe(ee[ve],D,j,K,Q,he,!1)}function Ir(ee,D,j,K){ee.push(D),ee.push(j),ee.push(K)}function uo(ee,D,j,K,Q,he){var ve=(he-D)/(K-D);return ee.push(he),ee.push(j+(Q-j)*ve),ee.push(1),ve}function Rt(ee,D,j,K,Q,he){var ve=(he-j)/(Q-j);return ee.push(D+(K-D)*ve),ee.push(he),ee.push(1),ve}function ho(ee,D){for(var j=[],K=0;K<ee.length;K++){var Q,he=ee[K],ve=he.type;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")Q=Un(he.geometry,D);else if(ve==="MultiLineString"||ve==="Polygon"){Q=[];for(var me=0;me<he.geometry.length;me++)Q.push(Un(he.geometry[me],D))}else if(ve==="MultiPolygon")for(Q=[],me=0;me<he.geometry.length;me++){for(var fe=[],_e=0;_e<he.geometry[me].length;_e++)fe.push(Un(he.geometry[me][_e],D));Q.push(fe)}j.push(Dr(he.id,ve,Q,he.tags))}return j}function Un(ee,D){var j=[];j.size=ee.size,ee.start!==void 0&&(j.start=ee.start,j.end=ee.end);for(var K=0;K<ee.length;K+=3)j.push(ee[K]+D,ee[K+1],ee[K+2]);return j}function Ms(ee,D){if(ee.transformed)return ee;var j,K,Q,he=1<<ee.z,ve=ee.x,me=ee.y;for(j=0;j<ee.features.length;j++){var fe=ee.features[j],_e=fe.geometry,Be=fe.type;if(fe.geometry=[],Be===1)for(K=0;K<_e.length;K+=2)fe.geometry.push(sr(_e[K],_e[K+1],D,he,ve,me));else for(K=0;K<_e.length;K++){var Ge=[];for(Q=0;Q<_e[K].length;Q+=2)Ge.push(sr(_e[K][Q],_e[K][Q+1],D,he,ve,me));fe.geometry.push(Ge)}}return ee.transformed=!0,ee}function sr(ee,D,j,K,Q,he){return[Math.round(j*(ee*K-Q)),Math.round(j*(D*K-he))]}function Ur(ee,D,j,K,Q){for(var he=D===Q.maxZoom?0:Q.tolerance/((1<<D)*Q.extent),ve={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:j,y:K,z:D,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},me=0;me<ee.length;me++){ve.numFeatures++,pn(ve,ee[me],he,Q);var fe=ee[me].minX,_e=ee[me].minY,Be=ee[me].maxX,Ge=ee[me].maxY;fe<ve.minX&&(ve.minX=fe),_e<ve.minY&&(ve.minY=_e),Be>ve.maxX&&(ve.maxX=Be),Ge>ve.maxY&&(ve.maxY=Ge)}return ve}function pn(ee,D,j,K){var Q=D.geometry,he=D.type,ve=[];if(he==="Point"||he==="MultiPoint")for(var me=0;me<Q.length;me+=3)ve.push(Q[me]),ve.push(Q[me+1]),ee.numPoints++,ee.numSimplified++;else if(he==="LineString")Ps(ve,Q,ee,j,!1,!1);else if(he==="MultiLineString"||he==="Polygon")for(me=0;me<Q.length;me++)Ps(ve,Q[me],ee,j,he==="Polygon",me===0);else if(he==="MultiPolygon")for(var fe=0;fe<Q.length;fe++){var _e=Q[fe];for(me=0;me<_e.length;me++)Ps(ve,_e[me],ee,j,!0,me===0)}if(ve.length){var Be=D.tags||null;if(he==="LineString"&&K.lineMetrics){for(var Ge in Be={},D.tags)Be[Ge]=D.tags[Ge];Be.mapbox_clip_start=Q.start/Q.size,Be.mapbox_clip_end=Q.end/Q.size}var Oe={geometry:ve,type:he==="Polygon"||he==="MultiPolygon"?3:he==="LineString"||he==="MultiLineString"?2:1,tags:Be};D.id!==null&&(Oe.id=D.id),ee.features.push(Oe)}}function Ps(ee,D,j,K,Q,he){var ve=K*K;if(K>0&&D.size<(Q?ve:K))j.numPoints+=D.length/3;else{for(var me=[],fe=0;fe<D.length;fe+=3)(K===0||D[fe+2]>ve)&&(j.numSimplified++,me.push(D[fe]),me.push(D[fe+1])),j.numPoints++;Q&&function(_e,Be){for(var Ge=0,Oe=0,vt=_e.length,_t=vt-2;Oe<vt;_t=Oe,Oe+=2)Ge+=(_e[Oe]-_e[_t])*(_e[Oe+1]+_e[_t+1]);if(Ge>0===Be)for(Oe=0,vt=_e.length;Oe<vt/2;Oe+=2){var lt=_e[Oe],It=_e[Oe+1];_e[Oe]=_e[vt-2-Oe],_e[Oe+1]=_e[vt-1-Oe],_e[vt-2-Oe]=lt,_e[vt-1-Oe]=It}}(me,he),ee.push(me)}}function vr(ee,D){var j=(D=this.options=function(Q,he){for(var ve in he)Q[ve]=he[ve];return Q}(Object.create(this.options),D)).debug;if(j&&console.time("preprocess data"),D.maxZoom<0||D.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(D.promoteId&&D.generateId)throw new Error("promoteId and generateId cannot be used together.");var K=function(Q,he){var ve=[];if(Q.type==="FeatureCollection")for(var me=0;me<Q.features.length;me++)nt(ve,Q.features[me],he,me);else nt(ve,Q.type==="Feature"?Q:{geometry:Q},he);return ve}(ee,D);this.tiles={},this.tileCoords=[],j&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",D.indexMaxZoom,D.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),K=function(Q,he){var ve=he.buffer/he.extent,me=Q,fe=ai(Q,1,-1-ve,ve,0,-1,2,he),_e=ai(Q,1,1-ve,2+ve,0,-1,2,he);return(fe||_e)&&(me=ai(Q,1,-ve,1+ve,0,-1,2,he)||[],fe&&(me=ho(fe,1).concat(me)),_e&&(me=me.concat(ho(_e,-1)))),me}(K,D),K.length&&this.splitTile(K,0,0,0),j&&(K.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function es(ee,D,j){return 32*((1<<ee)*j+D)+ee}function ts(ee,D){const j=ee.tileID.canonical;if(!this._geoJSONIndex)return D(null,null);const K=this._geoJSONIndex.getTile(j.z,j.x,j.y);if(!K)return D(null,null);const Q=new pe(K.features);let he=ce.exports(Q);he.byteOffset===0&&he.byteLength===he.buffer.byteLength||(he=new Uint8Array(he)),D(null,{vectorTile:Q,rawData:he.buffer})}vr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vr.prototype.splitTile=function(ee,D,j,K,Q,he,ve){for(var me=[ee,D,j,K],fe=this.options,_e=fe.debug;me.length;){K=me.pop(),j=me.pop(),D=me.pop(),ee=me.pop();var Be=1<<D,Ge=es(D,j,K),Oe=this.tiles[Ge];if(!Oe&&(_e>1&&console.time("creation"),Oe=this.tiles[Ge]=Ur(ee,D,j,K,fe),this.tileCoords.push({z:D,x:j,y:K}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",D,j,K,Oe.numFeatures,Oe.numPoints,Oe.numSimplified),console.timeEnd("creation"));var vt="z"+D;this.stats[vt]=(this.stats[vt]||0)+1,this.total++}if(Oe.source=ee,Q){if(D===fe.maxZoom||D===Q)continue;var _t=1<<Q-D;if(j!==Math.floor(he/_t)||K!==Math.floor(ve/_t))continue}else if(D===fe.indexMaxZoom||Oe.numPoints<=fe.indexMaxPoints)continue;if(Oe.source=null,ee.length!==0){_e>1&&console.time("clipping");var lt,It,At,on,Lt,Zt,sn=.5*fe.buffer/fe.extent,vn=.5-sn,_r=.5+sn,An=1+sn;lt=It=At=on=null,Lt=ai(ee,Be,j-sn,j+_r,0,Oe.minX,Oe.maxX,fe),Zt=ai(ee,Be,j+vn,j+An,0,Oe.minX,Oe.maxX,fe),ee=null,Lt&&(lt=ai(Lt,Be,K-sn,K+_r,1,Oe.minY,Oe.maxY,fe),It=ai(Lt,Be,K+vn,K+An,1,Oe.minY,Oe.maxY,fe),Lt=null),Zt&&(At=ai(Zt,Be,K-sn,K+_r,1,Oe.minY,Oe.maxY,fe),on=ai(Zt,Be,K+vn,K+An,1,Oe.minY,Oe.maxY,fe),Zt=null),_e>1&&console.timeEnd("clipping"),me.push(lt||[],D+1,2*j,2*K),me.push(It||[],D+1,2*j,2*K+1),me.push(At||[],D+1,2*j+1,2*K),me.push(on||[],D+1,2*j+1,2*K+1)}}},vr.prototype.getTile=function(ee,D,j){var K=this.options,Q=K.extent,he=K.debug;if(ee<0||ee>24)return null;var ve=1<<ee,me=es(ee,D=(D%ve+ve)%ve,j);if(this.tiles[me])return Ms(this.tiles[me],Q);he>1&&console.log("drilling down to z%d-%d-%d",ee,D,j);for(var fe,_e=ee,Be=D,Ge=j;!fe&&_e>0;)_e--,Be=Math.floor(Be/2),Ge=Math.floor(Ge/2),fe=this.tiles[es(_e,Be,Ge)];return fe&&fe.source?(he>1&&console.log("found parent tile z%d-%d-%d",_e,Be,Ge),he>1&&console.time("drilling down"),this.splitTile(fe.source,_e,Be,Ge,ee,D,j),he>1&&console.timeEnd("drilling down"),this.tiles[me]?Ms(this.tiles[me],Q):null):null};class zs extends V{constructor(D,j,K,Q){super(D,j,K,ts),Q&&(this.loadGeoJSON=Q)}loadData(D,j){var K;(K=this._pendingRequest)===null||K===void 0||K.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Q=!!(D&&D.request&&D.request.collectResourceTiming)&&new l.RequestPerformance(D.request);this._pendingCallback=j,this._pendingRequest=this.loadGeoJSON(D,(he,ve)=>{if(delete this._pendingCallback,delete this._pendingRequest,he||!ve)return j(he);if(typeof ve!="object")return j(new Error(`Input data given to '${D.source}' is not a valid GeoJSON object.`));{$(ve,!0);try{if(D.filter){const fe=l.createExpression(D.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(fe.result==="error")throw new Error(fe.value.map(Be=>`${Be.key}: ${Be.message}`).join(", "));ve={type:"FeatureCollection",features:ve.features.filter(Be=>fe.value.evaluate({zoom:0},Be))}}this._geoJSONIndex=D.cluster?new kt(function({superclusterOptions:fe,clusterProperties:_e}){if(!_e||!fe)return fe;const Be={},Ge={},Oe={accumulated:null,zoom:0},vt={properties:null},_t=Object.keys(_e);for(const lt of _t){const[It,At]=_e[lt],on=l.createExpression(At),Lt=l.createExpression(typeof It=="string"?[It,["accumulated"],["get",lt]]:It);Be[lt]=on.value,Ge[lt]=Lt.value}return fe.map=lt=>{vt.properties=lt;const It={};for(const At of _t)It[At]=Be[At].evaluate(Oe,vt);return It},fe.reduce=(lt,It)=>{vt.properties=It;for(const At of _t)Oe.accumulated=lt[At],lt[At]=Ge[At].evaluate(Oe,vt)},fe}(D)).load(ve.features):function(fe,_e){return new vr(fe,_e)}(ve,D.geojsonVtOptions)}catch(fe){return j(fe)}this.loaded={};const me={};if(Q){const fe=Q.finish();fe&&(me.resourceTiming={},me.resourceTiming[D.source]=JSON.parse(JSON.stringify(fe)))}j(null,me)}})}reloadTile(D,j){const K=this.loaded;return K&&K[D.uid]?super.reloadTile(D,j):this.loadTile(D,j)}loadGeoJSON(D,j){if(D.request)return l.getJSON(D.request,j);if(typeof D.data=="string")try{j(null,JSON.parse(D.data))}catch{j(new Error(`Input data given to '${D.source}' is not a valid GeoJSON object.`))}else j(new Error(`Input data given to '${D.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(D,j){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),j()}getClusterExpansionZoom(D,j){try{j(null,this._geoJSONIndex.getClusterExpansionZoom(D.clusterId))}catch(K){j(K)}}getClusterChildren(D,j){try{j(null,this._geoJSONIndex.getChildren(D.clusterId))}catch(K){j(K)}}getClusterLeaves(D,j){try{j(null,this._geoJSONIndex.getLeaves(D.clusterId,D.limit,D.offset))}catch(K){j(K)}}}class ns{constructor(D){this.self=D,this.actor=new l.Actor(D,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:V,geojson:zs},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(j,K)=>{if(this.workerSourceTypes[j])throw new Error(`Worker source with name "${j}" already registered.`);this.workerSourceTypes[j]=K},this.self.registerRTLTextPlugin=j=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=j.applyArabicShaping,l.plugin.processBidirectionalText=j.processBidirectionalText,l.plugin.processStyledBidirectionalText=j.processStyledBidirectionalText}}setReferrer(D,j){this.referrer=j}setImages(D,j,K){this.availableImages[D]=j;for(const Q in this.workerSources[D]){const he=this.workerSources[D][Q];for(const ve in he)he[ve].availableImages=j}K()}setLayers(D,j,K){this.getLayerIndex(D).replace(j),K()}updateLayers(D,j,K){this.getLayerIndex(D).update(j.layers,j.removedIds),K()}loadTile(D,j,K){this.getWorkerSource(D,j.type,j.source).loadTile(j,K)}loadDEMTile(D,j,K){this.getDEMWorkerSource(D,j.source).loadTile(j,K)}reloadTile(D,j,K){this.getWorkerSource(D,j.type,j.source).reloadTile(j,K)}abortTile(D,j,K){this.getWorkerSource(D,j.type,j.source).abortTile(j,K)}removeTile(D,j,K){this.getWorkerSource(D,j.type,j.source).removeTile(j,K)}removeDEMTile(D,j){this.getDEMWorkerSource(D,j.source).removeTile(j)}removeSource(D,j,K){if(!this.workerSources[D]||!this.workerSources[D][j.type]||!this.workerSources[D][j.type][j.source])return;const Q=this.workerSources[D][j.type][j.source];delete this.workerSources[D][j.type][j.source],Q.removeSource!==void 0?Q.removeSource(j,K):K()}loadWorkerSource(D,j,K){try{this.self.importScripts(j.url),K()}catch(Q){K(Q.toString())}}syncRTLPluginState(D,j,K){try{l.plugin.setState(j);const Q=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Q!=null){this.self.importScripts(Q);const he=l.plugin.isParsed();K(he?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Q}`),he)}}catch(Q){K(Q.toString())}}getAvailableImages(D){let j=this.availableImages[D];return j||(j=[]),j}getLayerIndex(D){let j=this.layerIndexes[D];return j||(j=this.layerIndexes[D]=new k),j}getWorkerSource(D,j,K){if(this.workerSources[D]||(this.workerSources[D]={}),this.workerSources[D][j]||(this.workerSources[D][j]={}),!this.workerSources[D][j][K]){const Q={send:(he,ve,me)=>{this.actor.send(he,ve,me,D)}};this.workerSources[D][j][K]=new this.workerSourceTypes[j](Q,this.getLayerIndex(D),this.getAvailableImages(D))}return this.workerSources[D][j][K]}getDEMWorkerSource(D,j){return this.demWorkerSources[D]||(this.demWorkerSources[D]={}),this.demWorkerSources[D][j]||(this.demWorkerSources[D][j]=new J),this.demWorkerSources[D][j]}enforceCacheSizeLimit(D,j){l.enforceCacheSizeLimit(j)}}return l.isWorker()&&(self.worker=new ns(self)),ns}),h(["./shared"],function(l){var b=w;function w(p){return!function(i){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var f,y,_=new Blob([""],{type:"text/javascript"}),S=URL.createObjectURL(_);try{y=new Worker(S),f=!0}catch{f=!1}return y&&y.terminate(),URL.revokeObjectURL(S),f}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var f=document.createElement("canvas");f.width=f.height=1;var y=f.getContext("2d");if(!y)return!1;var _=y.getImageData(0,0,1,1);return _&&_.width===f.width}()?(k[u=i&&i.failIfMajorPerformanceCaveat]===void 0&&(k[u]=function(f){var y,_=function(S){var I=document.createElement("canvas"),P=Object.create(w.webGLContextAttributes);return P.failIfMajorPerformanceCaveat=S,I.getContext("webgl",P)||I.getContext("experimental-webgl",P)}(f);if(!_)return!1;try{y=_.createShader(_.VERTEX_SHADER)}catch{return!1}return!(!y||_.isContextLost())&&(_.shaderSource(y,"void main() {}"),_.compileShader(y),_.getShaderParameter(y,_.COMPILE_STATUS)===!0)}(u)),k[u]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var u}(p)}var k={};function M(p,i){if(Array.isArray(p)){if(!Array.isArray(i)||p.length!==i.length)return!1;for(let u=0;u<p.length;u++)if(!M(p[u],i[u]))return!1;return!0}if(typeof p=="object"&&p!==null&&i!==null){if(typeof i!="object"||Object.keys(p).length!==Object.keys(i).length)return!1;for(const u in p)if(!M(p[u],i[u]))return!1;return!0}return p===i}w.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class E{static testProp(i){if(!E.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in E.docStyle)return i[u];return i[0]}static create(i,u,f){const y=window.document.createElement(i);return u!==void 0&&(y.className=u),f&&f.appendChild(y),y}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){E.docStyle&&E.selectProp&&(E.userSelect=E.docStyle[E.selectProp],E.docStyle[E.selectProp]="none")}static enableDrag(){E.docStyle&&E.selectProp&&(E.docStyle[E.selectProp]=E.userSelect)}static setTransform(i,u){i.style[E.transformProp]=u}static addEventListener(i,u,f,y={}){i.addEventListener(u,f,"passive"in y?y:y.capture)}static removeEventListener(i,u,f,y={}){i.removeEventListener(u,f,"passive"in y?y:y.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",E.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",E.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",E.suppressClickInternal,!0)},0)}static mousePos(i,u){const f=i.getBoundingClientRect();return new l.pointGeometry(u.clientX-f.left-i.clientLeft,u.clientY-f.top-i.clientTop)}static touchPos(i,u){const f=i.getBoundingClientRect(),y=[];for(let _=0;_<u.length;_++)y.push(new l.pointGeometry(u[_].clientX-f.left-i.clientLeft,u[_].clientY-f.top-i.clientTop));return y}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}E.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,E.selectProp=E.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),E.transformProp=E.testProp(["transform","WebkitTransform"]);class L{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,f){const y=function(_){const S=_.match(N);if(!S)throw new Error(`Unable to parse URL "${_}"`);return{protocol:S[1],authority:S[2],path:S[3]||"/",params:S[4]?S[4].split("&"):[]}}(i);return y.path+=`${u}${f}`,function(_){const S=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${S}`}(y)}setTransformRequest(i){this._transformRequestFn=i}}const N=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class V{constructor(i,u,f,y){this.context=i,this.format=f,this.texture=i.gl.createTexture(),this.update(u,y)}update(i,u,f){const{width:y,height:_}=i,S=!(this.size&&this.size[0]===y&&this.size[1]===_||f),{context:I}=this,{gl:P}=I;if(this.useMipmap=Boolean(u&&u.useMipmap),P.bindTexture(P.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===P.RGBA&&(!u||u.premultiply!==!1)),S)this.size=[y,_],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.isImageBitmap(i)?P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,P.UNSIGNED_BYTE,i):P.texImage2D(P.TEXTURE_2D,0,this.format,y,_,0,this.format,P.UNSIGNED_BYTE,i.data);else{const{x:A,y:O}=f||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.isImageBitmap(i)?P.texSubImage2D(P.TEXTURE_2D,0,A,O,P.RGBA,P.UNSIGNED_BYTE,i):P.texSubImage2D(P.TEXTURE_2D,0,A,O,y,_,P.RGBA,P.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&P.generateMipmap(P.TEXTURE_2D)}bind(i,u,f){const{context:y}=this,{gl:_}=y;_.bindTexture(_.TEXTURE_2D,this.texture),f!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=_.LINEAR),i!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,i),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,f||i),this.filter=i),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function J(p){const{userImage:i}=p;return!!(i&&i.render&&i.render())&&(p.data.replace(new Uint8Array(i.data.buffer)),!0)}class $ extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:f}of this.requestors)this._notify(u,f);this.requestors=[]}}getImage(i){return this.images[i]}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let f=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(u.content,u)||(this.fire(new l.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,u){if(!i)return!0;let f=0;for(const y of i){if(y[0]<f||y[1]<y[0]||u<y[1])return!1;f=y[1]}return!0}_validateContent(i,u){return!(i&&(i.length!==4||i[0]<0||u.data.width<i[0]||i[1]<0||u.data.height<i[1]||i[2]<0||u.data.width<i[2]||i[3]<0||u.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,u){const f=this.images[i];if(f.data.width!==u.data.width||f.data.height!==u.data.height)throw new Error(`size mismatch between old image (${f.data.width}x${f.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=f.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let f=!0;if(!this.isLoaded())for(const y of i)this.images[y]||(f=!1);this.isLoaded()||f?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const f={};for(const y of i){this.images[y]||this.fire(new l.Event("styleimagemissing",{id:y}));const _=this.images[y];_?f[y]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:Boolean(_.userImage&&_.userImage.render)}:l.warnOnce(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,f)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],f=this.getImage(i);if(!f)return null;if(u&&u.position.version===f.version)return u.position;if(u)u.position.version=f.version;else{const y={w:f.data.width+2,h:f.data.height+2,x:0,y:0},_=new l.ImagePosition(y,f);this.patterns[i]={bin:y,position:_}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new V(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const _ in this.patterns)i.push(this.patterns[_].bin);const{w:u,h:f}=l.potpack(i),y=this.atlasImage;y.resize({width:u||1,height:f||1});for(const _ in this.patterns){const{bin:S}=this.patterns[_],I=S.x+1,P=S.y+1,A=this.images[_].data,O=A.width,G=A.height;l.RGBAImage.copy(A,y,{x:0,y:0},{x:I,y:P},{width:O,height:G}),l.RGBAImage.copy(A,y,{x:0,y:G-1},{x:I,y:P-1},{width:O,height:1}),l.RGBAImage.copy(A,y,{x:0,y:0},{x:I,y:P+G},{width:O,height:1}),l.RGBAImage.copy(A,y,{x:O-1,y:0},{x:I-1,y:P},{width:1,height:G}),l.RGBAImage.copy(A,y,{x:0,y:0},{x:I+O,y:P},{width:1,height:G})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const f=this.images[u];f||l.warnOnce(`Image with ID: "${u}" was not found`),J(f)&&this.updateImage(u,f)}}}const F=1e20;function W(p,i,u,f,y,_,S,I,P){for(let A=i;A<i+f;A++)te(p,u*_+A,_,y,S,I,P);for(let A=u;A<u+y;A++)te(p,A*_+i,1,f,S,I,P)}function te(p,i,u,f,y,_,S){_[0]=0,S[0]=-F,S[1]=F,y[0]=p[i];for(let I=1,P=0,A=0;I<f;I++){y[I]=p[i+I*u];const O=I*I;do{const G=_[P];A=(y[I]-y[G]+O-G*G)/(I-G)/2}while(A<=S[P]&&--P>-1);P++,_[P]=I,S[P]=A,S[P+1]=F}for(let I=0,P=0;I<f;I++){for(;S[P+1]<I;)P++;const A=_[P],O=I-A;p[i+I*u]=y[A]+O*O}}class de{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const f=[];for(const y in i)for(const _ of i[y])f.push({stack:y,id:_});l.asyncAll(f,({stack:y,id:_},S)=>{let I=this.entries[y];I||(I=this.entries[y]={glyphs:{},requests:{},ranges:{}});let P=I.glyphs[_];if(P!==void 0)return void S(null,{stack:y,id:_,glyph:P});if(P=this._tinySDF(I,y,_),P)return I.glyphs[_]=P,void S(null,{stack:y,id:_,glyph:P});const A=Math.floor(_/256);if(256*A>65535)return void S(new Error("glyphs > 65535 not supported"));if(I.ranges[A])return void S(null,{stack:y,id:_,glyph:P});let O=I.requests[A];O||(O=I.requests[A]=[],de.loadGlyphRange(y,A,this.url,this.requestManager,(G,q)=>{if(q){for(const se in q)this._doesCharSupportLocalGlyph(+se)||(I.glyphs[+se]=q[+se]);I.ranges[A]=!0}for(const se of O)se(G,q);delete I.requests[A]})),O.push((G,q)=>{G?S(G):q&&S(null,{stack:y,id:_,glyph:q[_]||null})})},(y,_)=>{if(y)u(y);else if(_){const S={};for(const{stack:I,id:P,glyph:A}of _)(S[I]||(S[I]={}))[P]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};u(null,S)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](i)||l.unicodeBlockLookup["Hangul Syllables"](i)||l.unicodeBlockLookup.Hiragana(i)||l.unicodeBlockLookup.Katakana(i))}_tinySDF(i,u,f){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(f))return;let _=i.tinySDF;if(!_){let I="400";/bold/i.test(u)?I="900":/medium/i.test(u)?I="500":/light/i.test(u)&&(I="200"),_=i.tinySDF=new de.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:y,fontWeight:I})}const S=_.draw(String.fromCharCode(f));return{id:f,bitmap:new l.AlphaImage({width:S.width||30,height:S.height||30},S.data),metrics:{width:S.glyphWidth||24,height:S.glyphHeight||24,left:S.glyphLeft||0,top:S.glyphTop-27||-8,advance:S.glyphAdvance||24}}}}de.loadGlyphRange=function(p,i,u,f,y){const _=256*i,S=_+255,I=f.transformRequest(u.replace("{fontstack}",p).replace("{range}",`${_}-${S}`),l.ResourceType.Glyphs);l.getArrayBuffer(I,(P,A)=>{if(P)y(P);else if(A){const O={};for(const G of l.parseGlyphPbf(A))O[G.id]=G;y(null,O)}})},de.TinySDF=class{constructor({fontSize:p=24,buffer:i=3,radius:u=8,cutoff:f=.25,fontFamily:y="sans-serif",fontWeight:_="normal",fontStyle:S="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=u;const I=this.size=p+4*i,P=this._createCanvas(I),A=this.ctx=P.getContext("2d",{willReadFrequently:!0});A.font=`${S} ${_} ${p}px ${y}`,A.textBaseline="alphabetic",A.textAlign="left",A.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(p){const i=document.createElement("canvas");return i.width=i.height=p,i}draw(p){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:y,actualBoundingBoxRight:_}=this.ctx.measureText(p),S=Math.ceil(u),I=Math.min(this.size-this.buffer,Math.ceil(_-y)),P=Math.min(this.size-this.buffer,S+Math.ceil(f)),A=I+2*this.buffer,O=P+2*this.buffer,G=Math.max(A*O,0),q=new Uint8ClampedArray(G),se={data:q,width:A,height:O,glyphWidth:I,glyphHeight:P,glyphTop:S,glyphLeft:0,glyphAdvance:i};if(I===0||P===0)return se;const{ctx:ne,buffer:re,gridInner:ge,gridOuter:we}=this;ne.clearRect(re,re,I,P),ne.fillText(p,re,re+S);const Ie=ne.getImageData(re,re,I,P);we.fill(F,0,G),ge.fill(0,0,G);for(let ae=0;ae<P;ae++)for(let De=0;De<I;De++){const Pe=Ie.data[4*(ae*I+De)+3]/255;if(Pe===0)continue;const $e=(ae+re)*A+De+re;if(Pe===1)we[$e]=0,ge[$e]=F;else{const je=.5-Pe;we[$e]=je>0?je*je:0,ge[$e]=je<0?je*je:0}}W(we,0,0,A,O,A,this.f,this.v,this.z),W(ge,re,re,I,P,A,this.f,this.v,this.z);for(let ae=0;ae<G;ae++){const De=Math.sqrt(we[ae])-Math.sqrt(ge[ae]);q[ae]=Math.round(255-255*(De/this.radius+this.cutoff))}return se}};const pe=new l.Properties({anchor:new l.DataConstantProperty(l.spec.light.anchor),position:new class{constructor(){this.specification=l.spec.light.position}possiblyEvaluate(p,i){return l.sphericalToCartesian(p.expression.evaluate(i))}interpolate(p,i,u){return{x:l.number(p.x,i.x,u),y:l.number(p.y,i.y,u),z:l.number(p.z,i.z,u)}}},color:new l.DataConstantProperty(l.spec.light.color),intensity:new l.DataConstantProperty(l.spec.light.intensity)}),ce="-transition";class oe extends l.Evented{constructor(i){super(),this._transitionable=new l.Transitionable(pe),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(l.validateLight,i,u))for(const f in i){const y=i[f];f.endsWith(ce)?this._transitionable.setTransition(f.slice(0,-ce.length),y):this._transitionable.setValue(f,y)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,f){return(!f||f.validate!==!1)&&l.emitValidationErrors(this,i.call(l.validateStyle,l.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}class be{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const f=i.join(",")+String(u);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(i,u)),this.dashEntry[f]}getDashRanges(i,u,f){const y=[];let _=i.length%2==1?-i[i.length-1]*f:0,S=i[0]*f,I=!0;y.push({left:_,right:S,isDash:I,zeroLength:i[0]===0});let P=i[0];for(let A=1;A<i.length;A++){I=!I;const O=i[A];_=P*f,P+=O,S=P*f,y.push({left:_,right:S,isDash:I,zeroLength:O===0})}return y}addRoundDash(i,u,f){const y=u/2;for(let _=-f;_<=f;_++){const S=this.width*(this.nextRow+f+_);let I=0,P=i[I];for(let A=0;A<this.width;A++){A/P.right>1&&(P=i[++I]);const O=Math.abs(A-P.left),G=Math.abs(A-P.right),q=Math.min(O,G);let se;const ne=_/f*(y+1);if(P.isDash){const re=y-Math.abs(ne);se=Math.sqrt(q*q+re*re)}else se=y-Math.sqrt(q*q+ne*ne);this.data[S+A]=Math.max(0,Math.min(255,se+128))}}}addRegularDash(i){for(let I=i.length-1;I>=0;--I){const P=i[I],A=i[I+1];P.zeroLength?i.splice(I,1):A&&A.isDash===P.isDash&&(A.left=P.left,i.splice(I,1))}const u=i[0],f=i[i.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const y=this.width*this.nextRow;let _=0,S=i[_];for(let I=0;I<this.width;I++){I/S.right>1&&(S=i[++_]);const P=Math.abs(I-S.left),A=Math.abs(I-S.right),O=Math.min(P,A);this.data[y+I]=Math.max(0,Math.min(255,(S.isDash?O:-O)+128))}}addDash(i,u){const f=u?7:0,y=2*f+1;if(this.nextRow+y>this.height)return l.warnOnce("LineAtlas out of space"),null;let _=0;for(let I=0;I<i.length;I++)_+=i[I];if(_!==0){const I=this.width/_,P=this.getDashRanges(i,this.width,I);u?this.addRoundDash(P,I,f):this.addRegularDash(P)}const S={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:_};return this.nextRow+=y,this.dirty=!0,S}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class ye{constructor(i,u){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=l.uniqueId();const f=this.workerPool.acquire(this.id);for(let y=0;y<f.length;y++){const _=new ye.Actor(f[y],u,this.id);_.name=`Worker ${y}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u,f){l.asyncAll(this.actors,(y,_)=>{y.send(i,u,_)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Ae(p,i,u){const f=function(y,_){if(y)return u(y);if(_){const S=l.pick(l.extend(_,p),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(S.vectorLayers=_.vector_layers,S.vectorLayerIds=S.vectorLayers.map(I=>I.id)),u(null,S)}};return p.url?l.getJSON(i.transformRequest(p.url,l.ResourceType.Source),f):l.exported.frame(()=>f(null,p))}ye.Actor=l.Actor;class Ze{constructor(i,u,f){this.bounds=l.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),f=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*u),y=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*u),_=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*u),S=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*u);return i.x>=f&&i.x<_&&i.y>=y&&i.y<S}}class Xe extends l.Evented{constructor(i,u,f,y){if(super(),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(u,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ae(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i?this.fire(new l.ErrorEvent(i)):u&&(l.extend(this,u),u.bounds&&(this.tileBounds=new Ze(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(f,l.ResourceType.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(S,I){return delete i.request,i.aborted?u(null):S&&S.status!==404?u(S):(I&&I.resourceTiming&&(i.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&i.setExpiryData(I),i.loadVectorData(I,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}y.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",y,_.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",y,_.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class ot extends l.Evented{constructor(i,u,f,y){super(),this.id=i,this.dispatcher=f,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},u),l.extend(this,l.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ae(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new l.ErrorEvent(i)):u&&(l.extend(this,u),u.bounds&&(this.tileBounds=new Ze(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=l.getImage(this.map._requestManager.transformRequest(f,l.ResourceType.Tile),(y,_,S)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(y)i.state="errored",u(y);else if(_){this.map._refreshExpiredTiles&&i.setExpiryData(S);const I=this.map.painter.context,P=I.gl;i.texture=this.map.painter.getTileTexture(_.width),i.texture?i.texture.update(_,{useMipmap:!0}):(i.texture=new V(I,_,P.RGBA,{useMipmap:!0}),i.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&P.texParameterf(P.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),i.state="loaded",l.cacheEntryPossiblyAdded(this.dispatcher),u(null)}})}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}let ft;class Ce extends ot{constructor(i,u,f,y){super(i,u,f,y),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function y(_,S){_&&(i.state="errored",u(_)),S&&(i.dem=S,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",u(null))}i.request=l.getImage(this.map._requestManager.transformRequest(f,l.ResourceType.Tile),function(_,S){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(_)i.state="errored",u(_);else if(S){this.map._refreshExpiredTiles&&i.setExpiryData(S),delete S.cacheControl,delete S.expires;const I=l.isImageBitmap(S)&&(ft==null&&(ft=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ft)?S:l.exported.getImageData(S,1),P={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:I,encoding:this.encoding};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",P,y.bind(this)))}}.bind(this)),i.neighboringTiles=this._getNeighboringTiles(i.tileID)}_getNeighboringTiles(i){const u=i.canonical,f=Math.pow(2,u.z),y=(u.x-1+f)%f,_=u.x===0?i.wrap-1:i.wrap,S=(u.x+1+f)%f,I=u.x+1===f?i.wrap+1:i.wrap,P={};return P[new l.OverscaledTileID(i.overscaledZ,_,u.z,y,u.y).key]={backfilled:!1},P[new l.OverscaledTileID(i.overscaledZ,I,u.z,S,u.y).key]={backfilled:!1},u.y>0&&(P[new l.OverscaledTileID(i.overscaledZ,_,u.z,y,u.y-1).key]={backfilled:!1},P[new l.OverscaledTileID(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},P[new l.OverscaledTileID(i.overscaledZ,I,u.z,S,u.y-1).key]={backfilled:!1}),u.y+1<f&&(P[new l.OverscaledTileID(i.overscaledZ,_,u.z,y,u.y+1).key]={backfilled:!1},P[new l.OverscaledTileID(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},P[new l.OverscaledTileID(i.overscaledZ,I,u.z,S,u.y+1).key]={backfilled:!1}),P}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class Ee extends l.Evented{constructor(i,u,f,y){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(y),this._data=u.data,this._options=l.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.EXTENT,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData("content"),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,f,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:f},y),this}_updateWorkerData(i){const u=l.extend({},this.workerOptions),f=this._data;typeof f=="string"?(u.request=this.map._requestManager.transformRequest(l.exported.resolveURL(f),l.ResourceType.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(f),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(y,_)=>{if(this._pendingLoads--,this._removed||_&&_.abandoned)return void this.fire(new l.Event("dataabort",{dataType:"source",sourceDataType:i}));let S=null;if(_&&_.resourceTiming&&_.resourceTiming[this.id]&&(S=_.resourceTiming[this.id].slice(0)),y)return void this.fire(new l.ErrorEvent(y));const I={dataType:"source",sourceDataType:i};this._collectResourceTiming&&S&&S.length>0&&l.extend(I,{resourceTiming:S}),this.fire(new l.Event("data",I))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const f=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const y={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(f,y,(_,S)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):_?u(_):(i.loadVectorData(S,this.map.painter,f==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Me=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class We extends l.Evented{constructor(i,u,f,y){super(),this.id=i,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=u}load(i,u){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),(f,y)=>{this._loaded=!0,f?this.fire(new l.ErrorEvent(f)):y&&(this.image=y,i&&(this.coordinates=i),u&&u(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}setCoordinates(i){this.coordinates=i;const u=i.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(y){let _=1/0,S=1/0,I=-1/0,P=-1/0;for(const q of y)_=Math.min(_,q.x),S=Math.min(S,q.y),I=Math.max(I,q.x),P=Math.max(P,q.y);const A=Math.max(I-_,P-S),O=Math.max(0,Math.floor(-Math.log(A)/Math.LN2)),G=Math.pow(2,O);return new l.CanonicalTileID(O,Math.floor((_+I)/2*G),Math.floor((S+P)/2*G))}(u),this.minzoom=this.maxzoom=this.tileID.z;const f=u.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(f[2].x,f[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Me.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new V(i,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const f in this.tiles){const y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Ye extends We{constructor(i,u,f,y){super(i,u,f,y),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const i=this.options;this.urls=[];for(const u of i.urls)this.urls.push(this.map._requestManager.transformRequest(u,l.ResourceType.Source).url);l.getVideo(this.urls,(u,f)=>{this._loaded=!0,u?this.fire(new l.ErrorEvent(u)):f&&(this.video=f,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Me.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new V(i,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const f in this.tiles){const y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class st extends We{constructor(i,u,f,y){super(i,u,f,y),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(S=>typeof S!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,f=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Me.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new V(u,this.canvas,f.RGBA,{premultiply:!0});for(const y in this.tiles){const _=this.tiles[y];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Ke={vector:Xe,raster:ot,"raster-dem":Ce,geojson:Ee,video:Ye,image:We,canvas:st};function Je(p,i){const u=l.create();return l.translate(u,u,[1,1,0]),l.scale(u,u,[.5*p.width,.5*p.height,1]),l.multiply(u,u,p.calculatePosMatrix(i.toUnwrapped()))}function pt(p,i,u,f,y,_){const S=function(G,q,se){if(G)for(const ne of G){const re=q[ne];if(re&&re.source===se&&re.type==="fill-extrusion")return!0}else for(const ne in q){const re=q[ne];if(re.source===se&&re.type==="fill-extrusion")return!0}return!1}(y&&y.layers,i,p.id),I=_.maxPitchScaleFactor(),P=p.tilesIn(f,I,S);P.sort(St);const A=[];for(const G of P)A.push({wrappedTileID:G.tileID.wrapped().key,queryResults:G.tile.queryRenderedFeatures(i,u,p._state,G.queryGeometry,G.cameraQueryGeometry,G.scale,y,_,I,Je(p.transform,G.tileID))});const O=function(G){const q={},se={};for(const ne of G){const re=ne.queryResults,ge=ne.wrappedTileID,we=se[ge]=se[ge]||{};for(const Ie in re){const ae=re[Ie],De=we[Ie]=we[Ie]||{},Pe=q[Ie]=q[Ie]||[];for(const $e of ae)De[$e.featureIndex]||(De[$e.featureIndex]=!0,Pe.push($e))}}return q}(A);for(const G in O)O[G].forEach(q=>{const se=q.feature,ne=p.getFeatureState(se.layer["source-layer"],se.id);se.source=se.layer.source,se.layer["source-layer"]&&(se.sourceLayer=se.layer["source-layer"]),se.state=ne});return O}function St(p,i){const u=p.tileID,f=i.tileID;return u.overscaledZ-f.overscaledZ||u.canonical.y-f.canonical.y||u.wrap-f.wrap||u.canonical.x-f.canonical.x}class Ot{constructor(i,u){this.tileID=i,this.uid=l.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<l.exported.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.textures.forEach(u=>i.saveTileTexture(u)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(i,u,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(y,_){const S={};if(!_)return S;for(const I of y){const P=I.layerIds.map(A=>_.getLayer(A)).filter(Boolean);if(P.length!==0){I.layers=P,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(A=>P.filter(O=>O.id===A)[0]));for(const A of P)S[A.id]=I}}return S}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const _=this.buckets[y];if(_ instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!f)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const _=this.buckets[y];if(_ instanceof l.SymbolBucket&&_.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const y in this.buckets){const _=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(y).queryRadius(_))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const f in this.buckets){const y=this.buckets[f];y.uploadPending()&&y.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new V(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new V(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,f,y,_,S,I,P,A,O){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:_,scale:S,tileSize:this.tileSize,pixelPosMatrix:O,transform:P,params:I,queryPadding:this.queryPadding*A},i,u,f):{}}querySourceFeatures(i,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const y=f.loadVTLayers(),_=u?u.sourceLayer:"",S=y._geojsonTileLayer||y[_];if(!S)return;const I=l.createFilter(u&&u.filter),{z:P,x:A,y:O}=this.tileID.canonical,G={z:P,x:A,y:O};for(let q=0;q<S.length;q++){const se=S.feature(q);if(I.needGeometry){const ge=l.toEvaluationFeature(se,!0);if(!I.filter(new l.EvaluationParameters(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!I.filter(new l.EvaluationParameters(this.tileID.overscaledZ),se))continue;const ne=f.getId(se,_),re=new l.GeoJSONFeature(se,P,A,O,ne);re.tile=G,i.push(re)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const f=l.parseCacheControl(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const f=Date.now();let y=!1;if(this.expirationTime>f)y=!1;else if(u)if(this.expirationTime<u)y=!0;else{const _=this.expirationTime-u;_?this.expirationTime=f+Math.max(_,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!u.style.hasLayer(y))continue;const _=this.buckets[y],S=_.layers[0].sourceLayer||"_geojsonTileLayer",I=f[S],P=i[S];if(!I||!P||Object.keys(P).length===0)continue;_.update(P,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const A=u&&u.style&&u.style.getLayer(y);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=l.exported.now()+i}setDependencies(i,u){const f={};for(const y of u)f[y]=!0;this.dependencies[i]=f}hasDependency(i,u){for(const f of i){const y=this.dependencies[f];if(y){for(const _ of u)if(y[_])return!0}}return!1}}class Vt{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,f){const y=i.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const _={value:u,timeout:void 0};if(f!==void 0&&(_.timeout=setTimeout(()=>{this.remove(i,_)},f)),this.data[y].push(_),this.order.push(y),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const f=i.wrapped().key,y=u===void 0?0:this.data[f].indexOf(u),_=this.data[f][y];return this.data[f].splice(y,1),_.timeout&&clearTimeout(_.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(_.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const f in this.data)for(const y of this.data[f])i(y.value)||u.push(y);for(const f of u)this.remove(f.value.tileID,f)}}class Bt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,f){const y=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][y]=this.stateChanges[i][y]||{},l.extend(this.stateChanges[i][y],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(const _ in this.state[i])_!==y&&(this.deletedStates[i][_]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][y]===null){this.deletedStates[i][y]={};for(const _ in this.state[i][y])f[_]||(this.deletedStates[i][y][_]=null)}else for(const _ in f)this.deletedStates[i]&&this.deletedStates[i][y]&&this.deletedStates[i][y][_]===null&&delete this.deletedStates[i][y][_]}removeFeatureState(i,u,f){if(this.deletedStates[i]===null)return;const y=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&u!==void 0)this.deletedStates[i][y]!==null&&(this.deletedStates[i][y]=this.deletedStates[i][y]||{},this.deletedStates[i][y][f]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][y])for(f in this.deletedStates[i][y]={},this.stateChanges[i][y])this.deletedStates[i][y][f]=null;else this.deletedStates[i][y]=null;else this.deletedStates[i]=null}getState(i,u){const f=String(u),y=l.extend({},(this.state[i]||{})[f],(this.stateChanges[i]||{})[f]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const _=this.deletedStates[i][u];if(_===null)return{};for(const S in _)delete y[S]}return y}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const f={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const _={};for(const S in this.stateChanges[y])this.state[y][S]||(this.state[y][S]={}),l.extend(this.state[y][S],this.stateChanges[y][S]),_[S]=this.state[y][S];f[y]=_}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const _={};if(this.deletedStates[y]===null)for(const S in this.state[y])_[S]={},this.state[y][S]={};else for(const S in this.deletedStates[y]){if(this.deletedStates[y][S]===null)this.state[y][S]={};else for(const I of Object.keys(this.deletedStates[y][S]))delete this.state[y][S][I];_[S]=this.state[y][S]}f[y]=f[y]||{},l.extend(f[y],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const y in i)i[y].setFeatureState(f,u)}}class ln extends l.Evented{constructor(i,u,f){super(),this.id=i,this.dispatcher=f,this.on("data",y=>{y.dataType==="source"&&y.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&y.dataType==="source"&&y.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(y,_,S,I){const P=new Ke[_.type](y,_,S,I);if(P.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${P.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],P),P}(i,u,f,this),this._tiles={},this._cache=new Vt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Bt}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new l.Event("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(i),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Kn).map(i=>i.key)}getRenderableIds(i){const u=[];for(const f in this._tiles)this._isIdRenderable(f,i)&&u.push(this._tiles[f]);return i?u.sort((f,y)=>{const _=f.tileID,S=y.tileID,I=new l.pointGeometry(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),P=new l.pointGeometry(S.canonical.x,S.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-S.overscaledZ||P.y-I.y||P.x-I.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(Kn).map(f=>f.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=u),this._loadTile(f,this._tileLoaded.bind(this,f,i,u)))}_tileLoaded(i,u,f,y){if(y)return i.state="errored",void(y.status!==404?this._source.fire(new l.ErrorEvent(y,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=l.exported.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new l.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let y=0;y<u.length;y++){const _=u[y];if(i.neighboringTiles&&i.neighboringTiles[_]){const S=this.getTileByID(_);f(i,S),f(S,i)}}function f(y,_){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let S=_.tileID.canonical.x-y.tileID.canonical.x;const I=_.tileID.canonical.y-y.tileID.canonical.y,P=Math.pow(2,y.tileID.canonical.z),A=_.tileID.key;S===0&&I===0||Math.abs(I)>1||(Math.abs(S)>1&&(Math.abs(S+P)===1?S+=P:Math.abs(S-P)===1&&(S-=P)),_.dem&&y.dem&&(y.dem.backfillBorder(_.dem,S,I),y.neighboringTiles&&y.neighboringTiles[A]&&(y.neighboringTiles[A].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,f,y){for(const _ in this._tiles){let S=this._tiles[_];if(y[_]||!S.hasData()||S.tileID.overscaledZ<=u||S.tileID.overscaledZ>f)continue;let I=S.tileID;for(;S&&S.tileID.overscaledZ>u+1;){const A=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[A.key],S&&S.hasData()&&(I=A)}let P=I;for(;P.overscaledZ>u;)if(P=P.scaledTo(P.overscaledZ-1),i[P.key]){y[I.key]=I;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=i.overscaledZ-1;f>=u;f--){const y=i.scaledTo(f),_=this._getLoadedTile(y);if(_)return _}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,f=Math.ceil(i.height/this._source.tileSize)+1,y=Math.floor(u*f*5),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(_)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const f={};for(const y in this._tiles){const _=this._tiles[y];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),f[_.tileID.key]=_}this._tiles=f;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}update(i,u){if(this.transform=i,this.terrain=u,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(A=>new l.OverscaledTileID(A.canonical.z,A.wrap,A.canonical.z,A.canonical.x,A.canonical.y)):(f=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(f=f.filter(A=>this._source.hasTile(A)))):f=[];const y=i.coveringZoomLevel(this._source),_=Math.max(y-ln.maxOverzooming,this._source.minzoom),S=Math.max(y+ln.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const A={};for(const O of f)if(O.canonical.z>this._source.minzoom){const G=O.scaledTo(O.canonical.z-1);A[G.key]=G;const q=O.scaledTo(Math.max(this._source.minzoom,Math.min(O.canonical.z,5)));A[q.key]=q}f=f.concat(Object.values(A))}const I=this._updateRetainedTiles(f,y);if(qt(this._source.type)){const A={},O={},G=Object.keys(I);for(const q of G){const se=I[q],ne=this._tiles[q];if(!ne||ne.fadeEndTime&&ne.fadeEndTime<=l.exported.now())continue;const re=this.findLoadedParent(se,_);re&&(this._addTile(re.tileID),A[re.tileID.key]=re.tileID),O[q]=se}this._retainLoadedChildren(O,y,S,I);for(const q in A)I[q]||(this._coveredTiles[q]=!0,I[q]=A[q]);if(u){const q={},se={};for(const ne of f)this._tiles[ne.key].hasData()?q[ne.key]=ne:se[ne.key]=ne;for(const ne in se){const re=se[ne].children(this._source.maxzoom);this._tiles[re[0].key]&&this._tiles[re[1].key]&&this._tiles[re[2].key]&&this._tiles[re[3].key]&&(q[re[0].key]=I[re[0].key]=re[0],q[re[1].key]=I[re[1].key]=re[1],q[re[2].key]=I[re[2].key]=re[2],q[re[3].key]=I[re[3].key]=re[3],delete se[ne])}for(const ne in se){const re=this.findLoadedParent(se[ne],this._source.minzoom);if(re){q[re.tileID.key]=I[re.tileID.key]=re.tileID;for(const ge in q)q[ge].isChildOf(re.tileID)&&delete q[ge]}}for(const ne in this._tiles)q[ne]||(this._coveredTiles[ne]=!0)}}for(const A in I)this._tiles[A].clearFadeHold();const P=l.keysDifference(this._tiles,I);for(const A of P){const O=this._tiles[A];O.hasSymbolBuckets&&!O.holdingForFade()?O.setHoldDuration(this.map._fadeDuration):O.hasSymbolBuckets&&!O.symbolFadeFinished()||this._removeTile(A)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const f={},y={},_=Math.max(u-ln.maxOverzooming,this._source.minzoom),S=Math.max(u+ln.maxUnderzooming,this._source.minzoom),I={};for(const P of i){const A=this._addTile(P);f[P.key]=P,A.hasData()||u<this._source.maxzoom&&(I[P.key]=P)}this._retainLoadedChildren(I,u,S,f);for(const P of i){let A=this._tiles[P.key];if(A.hasData())continue;if(u+1>this._source.maxzoom){const G=P.children(this._source.maxzoom)[0],q=this.getTile(G);if(q&&q.hasData()){f[G.key]=G;continue}}else{const G=P.children(this._source.maxzoom);if(f[G[0].key]&&f[G[1].key]&&f[G[2].key]&&f[G[3].key])continue}let O=A.wasRequested();for(let G=P.overscaledZ-1;G>=_;--G){const q=P.scaledTo(G);if(y[q.key]||(y[q.key]=!0,A=this.getTile(q),!A&&O&&(A=this._addTile(q)),A&&(f[q.key]=q,O=A.wasRequested(),A.hasData())))break}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let f,y=this._tiles[i].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){f=this._loadedParentTiles[y.key];break}u.push(y.key);const _=y.scaledTo(y.overscaledZ-1);if(f=this._getLoadedTile(_),f)break;y=_}for(const _ of u)this._loadedParentTiles[_]=f}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const f=u;return u||(u=new Ot(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,f||this._source.fire(new l.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const f=u.getExpiryTimeout();f&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},f))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,f){const y=[],_=this.transform;if(!_)return y;const S=f?_.getCameraQueryGeometry(i):i,I=i.map(ne=>_.pointCoordinate(ne,this.terrain)),P=S.map(ne=>_.pointCoordinate(ne,this.terrain)),A=this.getIds();let O=1/0,G=1/0,q=-1/0,se=-1/0;for(const ne of P)O=Math.min(O,ne.x),G=Math.min(G,ne.y),q=Math.max(q,ne.x),se=Math.max(se,ne.y);for(let ne=0;ne<A.length;ne++){const re=this._tiles[A[ne]];if(re.holdingForFade())continue;const ge=re.tileID,we=Math.pow(2,_.zoom-re.tileID.overscaledZ),Ie=u*re.queryPadding*l.EXTENT/re.tileSize/we,ae=[ge.getTilePoint(new l.MercatorCoordinate(O,G)),ge.getTilePoint(new l.MercatorCoordinate(q,se))];if(ae[0].x-Ie<l.EXTENT&&ae[0].y-Ie<l.EXTENT&&ae[1].x+Ie>=0&&ae[1].y+Ie>=0){const De=I.map($e=>ge.getTilePoint($e)),Pe=P.map($e=>ge.getTilePoint($e));y.push({tile:re,tileID:ge,queryGeometry:De,cameraQueryGeometry:Pe,scale:we})}}return y}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(f=>this._tiles[f].tileID);for(const f of u)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(qt(this._source.type))for(const i in this._tiles){const u=this._tiles[i];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=l.exported.now())return!0}return!1}setFeatureState(i,u,f){this._state.updateState(i=i||"_geojsonTileLayer",u,f)}removeFeatureState(i,u,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,f)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,f){const y=this._tiles[i];y&&y.setDependencies(u,f)}reloadTilesForDependencies(i,u){for(const f in this._tiles)this._tiles[f].hasDependency(i,u)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(i,u))}}function Kn(p,i){const u=Math.abs(2*p.wrap)-+(p.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return p.overscaledZ-i.overscaledZ||f-u||i.canonical.y-p.canonical.y||i.canonical.x-p.canonical.x}function qt(p){return p==="raster"||p==="image"||p==="video"}ln.maxOverzooming=10,ln.maxUnderzooming=3;const zt="mapboxgl_preloaded_worker_pool";class Ut{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Ut.workerCount;)this.workers.push(new Worker(Ca.workerUrl));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[zt]}numActive(){return Object.keys(this.active).length}}const kt=Math.floor(l.exported.hardwareConcurrency/2);let Jt;function $n(){return Jt||(Jt=new Ut),Jt}function Tn(p,i){const u={};for(const f in p)f!=="ref"&&(u[f]=p[f]);return l.refProperties.forEach(f=>{f in i&&(u[f]=i[f])}),u}function gr(p){p=p.slice();const i=Object.create(null);for(let u=0;u<p.length;u++)i[p[u].id]=p[u];for(let u=0;u<p.length;u++)"ref"in p[u]&&(p[u]=Tn(p[u],i[p[u].ref]));return p}Ut.workerCount=Math.max(Math.min(kt,6),1);const jt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function jn(p,i,u){u.push({command:jt.addSource,args:[p,i[p]]})}function yr(p,i,u){i.push({command:jt.removeSource,args:[p]}),u[p]=!0}function Er(p,i,u,f){yr(p,u,f),jn(p,i,u)}function yn(p,i,u){let f;for(f in p[u])if(Object.prototype.hasOwnProperty.call(p[u],f)&&f!=="data"&&!M(p[u][f],i[u][f]))return!1;for(f in i[u])if(Object.prototype.hasOwnProperty.call(i[u],f)&&f!=="data"&&!M(p[u][f],i[u][f]))return!1;return!0}function Vn(p,i,u,f,y,_){let S;for(S in i=i||{},p=p||{})Object.prototype.hasOwnProperty.call(p,S)&&(M(p[S],i[S])||u.push({command:_,args:[f,S,i[S],y]}));for(S in i)Object.prototype.hasOwnProperty.call(i,S)&&!Object.prototype.hasOwnProperty.call(p,S)&&(M(p[S],i[S])||u.push({command:_,args:[f,S,i[S],y]}))}function Cr(p){return p.id}function Di(p,i){return p[i.id]=i,p}class Dr{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=l.clamp(i,0,1);let u=1,f=this._distances[u];const y=i*this.paddedLength+this.padding;for(;f<y&&u<this._distances.length;)f=this._distances[++u];const _=u-1,S=this._distances[_],I=f-S,P=I>0?(y-S)/I:0;return this.points[_].mult(1-P).add(this.points[u].mult(P))}}function Ne(p,i){let u=!0;return p==="always"||p!=="never"&&i!=="never"||(u=!1),u}class nt{constructor(i,u,f){const y=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(u/f);for(let S=0;S<this.xCellCount*this.yCellCount;S++)y.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,f,y,_){this._forEachCell(u,f,y,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(_)}insertCircle(i,u,f,y){this._forEachCell(u-y,f-y,u+y,f+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(f),this.circles.push(y)}_insertBoxCell(i,u,f,y,_,S){this.boxCells[_].push(S)}_insertCircleCell(i,u,f,y,_,S){this.circleCells[_].push(S)}_query(i,u,f,y,_,S,I){if(f<0||i>this.width||y<0||u>this.height)return[];const P=[];if(i<=0&&u<=0&&this.width<=f&&this.height<=y){if(_)return[{key:null,x1:i,y1:u,x2:f,y2:y}];for(let A=0;A<this.boxKeys.length;A++)P.push({key:this.boxKeys[A],x1:this.bboxes[4*A],y1:this.bboxes[4*A+1],x2:this.bboxes[4*A+2],y2:this.bboxes[4*A+3]});for(let A=0;A<this.circleKeys.length;A++){const O=this.circles[3*A],G=this.circles[3*A+1],q=this.circles[3*A+2];P.push({key:this.circleKeys[A],x1:O-q,y1:G-q,x2:O+q,y2:G+q})}}else this._forEachCell(i,u,f,y,this._queryCell,P,{hitTest:_,overlapMode:S,seenUids:{box:{},circle:{}}},I);return P}query(i,u,f,y){return this._query(i,u,f,y,!1,null)}hitTest(i,u,f,y,_,S){return this._query(i,u,f,y,!0,_,S).length>0}hitTestCircle(i,u,f,y,_){const S=i-f,I=i+f,P=u-f,A=u+f;if(I<0||S>this.width||A<0||P>this.height)return!1;const O=[];return this._forEachCell(S,P,I,A,this._queryCellCircle,O,{hitTest:!0,overlapMode:y,circle:{x:i,y:u,radius:f},seenUids:{box:{},circle:{}}},_),O.length>0}_queryCell(i,u,f,y,_,S,I,P){const{seenUids:A,hitTest:O,overlapMode:G}=I,q=this.boxCells[_];if(q!==null){const ne=this.bboxes;for(const re of q)if(!A.box[re]){A.box[re]=!0;const ge=4*re,we=this.boxKeys[re];if(i<=ne[ge+2]&&u<=ne[ge+3]&&f>=ne[ge+0]&&y>=ne[ge+1]&&(!P||P(we))&&(!O||!Ne(G,we.overlapMode))&&(S.push({key:we,x1:ne[ge],y1:ne[ge+1],x2:ne[ge+2],y2:ne[ge+3]}),O))return!0}}const se=this.circleCells[_];if(se!==null){const ne=this.circles;for(const re of se)if(!A.circle[re]){A.circle[re]=!0;const ge=3*re,we=this.circleKeys[re];if(this._circleAndRectCollide(ne[ge],ne[ge+1],ne[ge+2],i,u,f,y)&&(!P||P(we))&&(!O||!Ne(G,we.overlapMode))){const Ie=ne[ge],ae=ne[ge+1],De=ne[ge+2];if(S.push({key:we,x1:Ie-De,y1:ae-De,x2:Ie+De,y2:ae+De}),O)return!0}}}return!1}_queryCellCircle(i,u,f,y,_,S,I,P){const{circle:A,seenUids:O,overlapMode:G}=I,q=this.boxCells[_];if(q!==null){const ne=this.bboxes;for(const re of q)if(!O.box[re]){O.box[re]=!0;const ge=4*re,we=this.boxKeys[re];if(this._circleAndRectCollide(A.x,A.y,A.radius,ne[ge+0],ne[ge+1],ne[ge+2],ne[ge+3])&&(!P||P(we))&&!Ne(G,we.overlapMode))return S.push(!0),!0}}const se=this.circleCells[_];if(se!==null){const ne=this.circles;for(const re of se)if(!O.circle[re]){O.circle[re]=!0;const ge=3*re,we=this.circleKeys[re];if(this._circlesCollide(ne[ge],ne[ge+1],ne[ge+2],A.x,A.y,A.radius)&&(!P||P(we))&&!Ne(G,we.overlapMode))return S.push(!0),!0}}}_forEachCell(i,u,f,y,_,S,I,P){const A=this._convertToXCellCoord(i),O=this._convertToYCellCoord(u),G=this._convertToXCellCoord(f),q=this._convertToYCellCoord(y);for(let se=A;se<=G;se++)for(let ne=O;ne<=q;ne++)if(_.call(this,i,u,f,y,this.xCellCount*ne+se,S,I,P))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,f,y,_,S){const I=y-i,P=_-u,A=f+S;return A*A>I*I+P*P}_circleAndRectCollide(i,u,f,y,_,S,I){const P=(S-y)/2,A=Math.abs(i-(y+P));if(A>P+f)return!1;const O=(I-_)/2,G=Math.abs(u-(_+O));if(G>O+f)return!1;if(A<=P||G<=O)return!0;const q=A-P,se=G-O;return q*q+se*se<=f*f}}function zo(p,i,u,f,y){const _=l.create();return i?(l.scale(_,_,[1/y,1/y,1]),u||l.rotateZ(_,_,f.angle)):l.multiply(_,f.labelPlaneMatrix,p),_}function xi(p,i,u,f,y){if(i){const _=l.clone(p);return l.scale(_,_,[y,y,1]),u||l.rotateZ(_,_,-f.angle),_}return f.glCoordMatrix}function tn(p,i,u){let f;u?(f=[p.x,p.y,u(p.x,p.y),1],l.transformMat4(f,f,i)):(f=[p.x,p.y,0,1],ho(f,f,i));const y=f[3];return{point:new l.pointGeometry(f[0]/y,f[1]/y),signedDistanceFromCamera:y}}function oi(p,i){return .5+p/i*.5}function si(p,i){const u=p[0]/p[3],f=p[1]/p[3];return u>=-i[0]&&u<=i[0]&&f>=-i[1]&&f<=i[1]}function ai(p,i,u,f,y,_,S,I,P,A){const O=f?p.textSizeData:p.iconSizeData,G=l.evaluateSizeForZoom(O,u.transform.zoom),q=[256/u.width*2+1,256/u.height*2+1],se=f?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;se.clear();const ne=p.lineVertexArray,re=f?p.text.placedSymbolArray:p.icon.placedSymbolArray,ge=u.transform.width/u.transform.height;let we=!1;for(let Ie=0;Ie<re.length;Ie++){const ae=re.get(Ie);if(ae.hidden||ae.writingMode===l.WritingMode.vertical&&!we){Rt(ae.numGlyphs,se);continue}let De;if(we=!1,A?(De=[ae.anchorX,ae.anchorY,A(ae.anchorX,ae.anchorY),1],l.transformMat4(De,De,i)):(De=[ae.anchorX,ae.anchorY,0,1],ho(De,De,i)),!si(De,q)){Rt(ae.numGlyphs,se);continue}const Pe=oi(u.transform.cameraToCenterDistance,De[3]),$e=l.evaluateSizeForFeature(O,G,ae),je=S?$e/Pe:$e*Pe,qe=new l.pointGeometry(ae.anchorX,ae.anchorY),Fe=tn(qe,y,A).point,ht={},rt=Xt(ae,je,!1,I,i,y,_,p.glyphOffsetArray,ne,se,Fe,qe,ht,ge,P,A);we=rt.useVertical,(rt.notEnoughRoom||we||rt.needsFlipping&&Xt(ae,je,!0,I,i,y,_,p.glyphOffsetArray,ne,se,Fe,qe,ht,ge,P,A).notEnoughRoom)&&Rt(ae.numGlyphs,se)}f?p.text.dynamicLayoutVertexBuffer.updateData(se):p.icon.dynamicLayoutVertexBuffer.updateData(se)}function Hr(p,i,u,f,y,_,S,I,P,A,O,G,q){const se=I.glyphStartIndex+I.numGlyphs,ne=I.lineStartIndex,re=I.lineStartIndex+I.lineLength,ge=i.getoffsetX(I.glyphStartIndex),we=i.getoffsetX(se-1),Ie=Ir(p*ge,u,f,y,_,S,I.segment,ne,re,P,A,O,G,q);if(!Ie)return null;const ae=Ir(p*we,u,f,y,_,S,I.segment,ne,re,P,A,O,G,q);return ae?{first:Ie,last:ae}:null}function Qe(p,i,u,f){return p===l.WritingMode.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*f?{useVertical:!0}:(p===l.WritingMode.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function Xt(p,i,u,f,y,_,S,I,P,A,O,G,q,se,ne,re){const ge=i/24,we=p.lineOffsetX*ge,Ie=p.lineOffsetY*ge;let ae;if(p.numGlyphs>1){const De=p.glyphStartIndex+p.numGlyphs,Pe=p.lineStartIndex,$e=p.lineStartIndex+p.lineLength,je=Hr(ge,I,we,Ie,u,O,G,p,P,_,q,ne,re);if(!je)return{notEnoughRoom:!0};const qe=tn(je.first.point,S,re).point,Fe=tn(je.last.point,S,re).point;if(f&&!u){const ht=Qe(p.writingMode,qe,Fe,se);if(ht)return ht}ae=[je.first];for(let ht=p.glyphStartIndex+1;ht<De-1;ht++)ae.push(Ir(ge*I.getoffsetX(ht),we,Ie,u,O,G,p.segment,Pe,$e,P,_,q,ne,re));ae.push(je.last)}else{if(f&&!u){const Pe=tn(G,y,re).point,$e=p.lineStartIndex+p.segment+1,je=new l.pointGeometry(P.getx($e),P.gety($e)),qe=tn(je,y,re),Fe=qe.signedDistanceFromCamera>0?qe.point:$t(G,je,Pe,1,y,re),ht=Qe(p.writingMode,Pe,Fe,se);if(ht)return ht}const De=Ir(ge*I.getoffsetX(p.glyphStartIndex),we,Ie,u,O,G,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,P,_,q,ne,re);if(!De)return{notEnoughRoom:!0};ae=[De]}for(const De of ae)l.addDynamicAttributes(A,De.point,De.angle);return{}}function $t(p,i,u,f,y,_){const S=tn(p.add(p.sub(i)._unit()),y,_).point,I=u.sub(S);return u.add(I._mult(f/I.mag()))}function Ir(p,i,u,f,y,_,S,I,P,A,O,G,q,se){const ne=f?p-i:p+i;let re=ne>0?1:-1,ge=0;f&&(re*=-1,ge=Math.PI),re<0&&(ge+=Math.PI);let we=re>0?I+S:I+S+1,Ie=y,ae=y,De=0,Pe=0;const $e=Math.abs(ne),je=[];for(;De+Pe<=$e;){if(we+=re,we<I||we>=P)return null;if(ae=Ie,je.push(Ie),Ie=G[we],Ie===void 0){const mt=new l.pointGeometry(A.getx(we),A.gety(we)),Gt=tn(mt,O,se);if(Gt.signedDistanceFromCamera>0)Ie=G[we]=Gt.point;else{const Ht=we-re;Ie=$t(De===0?_:new l.pointGeometry(A.getx(Ht),A.gety(Ht)),mt,ae,$e-De+1,O,se)}}De+=Pe,Pe=ae.dist(Ie)}const qe=($e-De)/Pe,Fe=Ie.sub(ae),ht=Fe.mult(qe)._add(ae);ht._add(Fe._unit()._perp()._mult(u*re));const rt=ge+Math.atan2(Ie.y-ae.y,Ie.x-ae.x);return je.push(ht),{point:ht,angle:q?rt:0,path:je}}const uo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Rt(p,i){for(let u=0;u<p;u++){const f=i.length;i.resize(f+4),i.float32.set(uo,3*f)}}function ho(p,i,u){const f=i[0],y=i[1];return p[0]=u[0]*f+u[4]*y+u[12],p[1]=u[1]*f+u[5]*y+u[13],p[3]=u[3]*f+u[7]*y+u[15],p}const Un=100;class Ms{constructor(i,u=new nt(i.width+200,i.height+200,25),f=new nt(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=f,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Un,this.screenBottomBoundary=i.height+Un,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,f,y,_,S){const I=this.projectAndGetPerspectiveRatio(y,i.anchorPointX,i.anchorPointY,S),P=f*I.perspectiveRatio,A=i.x1*P+I.point.x,O=i.y1*P+I.point.y,G=i.x2*P+I.point.x,q=i.y2*P+I.point.y;return!this.isInsideGrid(A,O,G,q)||u!=="always"&&this.grid.hitTest(A,O,G,q,u,_)||I.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[A,O,G,q],offscreen:this.isOffscreen(A,O,G,q)}}placeCollisionCircles(i,u,f,y,_,S,I,P,A,O,G,q,se,ne){const re=[],ge=new l.pointGeometry(u.anchorX,u.anchorY),we=tn(ge,S,ne),Ie=oi(this.transform.cameraToCenterDistance,we.signedDistanceFromCamera),ae=(O?_/Ie:_*Ie)/l.ONE_EM,De=tn(ge,I,ne).point,Pe=Hr(ae,y,u.lineOffsetX*ae,u.lineOffsetY*ae,!1,De,ge,u,f,I,{},!1,ne);let $e=!1,je=!1,qe=!0;if(Pe){const Fe=.5*q*Ie+se,ht=new l.pointGeometry(-100,-100),rt=new l.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),mt=new Dr,Gt=Pe.first,Ht=Pe.last;let Mt=[];for(let cn=Gt.path.length-1;cn>=1;cn--)Mt.push(Gt.path[cn]);for(let cn=1;cn<Ht.path.length;cn++)Mt.push(Ht.path[cn]);const xn=2.5*Fe;if(P){const cn=Mt.map(dn=>tn(dn,P,ne));Mt=cn.some(dn=>dn.signedDistanceFromCamera<=0)?[]:cn.map(dn=>dn.point)}let bn=[];if(Mt.length>0){const cn=Mt[0].clone(),dn=Mt[0].clone();for(let kn=1;kn<Mt.length;kn++)cn.x=Math.min(cn.x,Mt[kn].x),cn.y=Math.min(cn.y,Mt[kn].y),dn.x=Math.max(dn.x,Mt[kn].x),dn.y=Math.max(dn.y,Mt[kn].y);bn=cn.x>=ht.x&&dn.x<=rt.x&&cn.y>=ht.y&&dn.y<=rt.y?[Mt]:dn.x<ht.x||cn.x>rt.x||dn.y<ht.y||cn.y>rt.y?[]:l.clipLine([Mt],ht.x,ht.y,rt.x,rt.y)}for(const cn of bn){mt.reset(cn,.25*Fe);let dn=0;dn=mt.length<=.5*Fe?1:Math.ceil(mt.paddedLength/xn)+1;for(let kn=0;kn<dn;kn++){const Lr=kn/Math.max(dn-1,1),Ro=mt.lerp(Lr),mo=Ro.x+Un,Lo=Ro.y+Un;re.push(mo,Lo,Fe,0);const Us=mo-Fe,Yi=Lo-Fe,wi=mo+Fe,ls=Lo+Fe;if(qe=qe&&this.isOffscreen(Us,Yi,wi,ls),je=je||this.isInsideGrid(Us,Yi,wi,ls),i!=="always"&&this.grid.hitTestCircle(mo,Lo,Fe,i,G)&&($e=!0,!A))return{circles:[],offscreen:!1,collisionDetected:$e}}}}return{circles:!A&&$e||!je||Ie<this.perspectiveRatioCutoff?[]:re,offscreen:qe,collisionDetected:$e}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let f=1/0,y=1/0,_=-1/0,S=-1/0;for(const O of i){const G=new l.pointGeometry(O.x+Un,O.y+Un);f=Math.min(f,G.x),y=Math.min(y,G.y),_=Math.max(_,G.x),S=Math.max(S,G.y),u.push(G)}const I=this.grid.query(f,y,_,S).concat(this.ignoredGrid.query(f,y,_,S)),P={},A={};for(const O of I){const G=O.key;if(P[G.bucketInstanceId]===void 0&&(P[G.bucketInstanceId]={}),P[G.bucketInstanceId][G.featureIndex])continue;const q=[new l.pointGeometry(O.x1,O.y1),new l.pointGeometry(O.x2,O.y1),new l.pointGeometry(O.x2,O.y2),new l.pointGeometry(O.x1,O.y2)];l.polygonIntersectsPolygon(u,q)&&(P[G.bucketInstanceId][G.featureIndex]=!0,A[G.bucketInstanceId]===void 0&&(A[G.bucketInstanceId]=[]),A[G.bucketInstanceId].push(G.featureIndex))}return A}insertCollisionBox(i,u,f,y,_,S){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:_,collisionGroupID:S,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,f,y,_,S){const I=f?this.ignoredGrid:this.grid,P={bucketInstanceId:y,featureIndex:_,collisionGroupID:S,overlapMode:u};for(let A=0;A<i.length;A+=4)I.insertCircle(P,i[A],i[A+1],i[A+2])}projectAndGetPerspectiveRatio(i,u,f,y){let _;return y?(_=[u,f,y(u,f),1],l.transformMat4(_,_,i)):(_=[u,f,0,1],ho(_,_,i)),{point:new l.pointGeometry((_[0]/_[3]+1)/2*this.transform.width+Un,(-_[1]/_[3]+1)/2*this.transform.height+Un),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(i,u,f,y){return f<Un||i>=this.screenRightBoundary||y<Un||u>this.screenBottomBoundary}isInsideGrid(i,u,f,y){return f>=0&&i<this.gridRightBoundary&&y>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=l.identity([]);return l.translate(i,i,[-100,-100,0]),i}}function sr(p,i,u){return i*(l.EXTENT/(p.tileSize*Math.pow(2,u-p.tileID.overscaledZ)))}class Ur{constructor(i,u,f,y){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):y&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class pn{constructor(i,u,f,y,_){this.text=new Ur(i?i.text:null,u,f,_),this.icon=new Ur(i?i.icon:null,u,y,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ps{constructor(i,u,f){this.text=i,this.icon=u,this.skipFade=f}}class vr{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class es{constructor(i,u,f,y,_){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=f,this.bucketIndex=y,this.tileID=_}}class ts{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:f=>f.collisionGroupID===u}}return this.collisionGroups[i]}}function zs(p,i,u,f,y){const{horizontalAlign:_,verticalAlign:S}=l.getAnchorAlignment(p),I=-(_-.5)*i,P=-(S-.5)*u,A=l.evaluateVariableOffset(p,f);return new l.pointGeometry(I+A[0]*y,P+A[1]*y)}function ns(p,i,u,f,y,_){const{x1:S,x2:I,y1:P,y2:A,anchorPointX:O,anchorPointY:G}=p,q=new l.pointGeometry(i,u);return f&&q._rotate(y?_:-_),{x1:S+q.x,y1:P+q.y,x2:I+q.x,y2:A+q.y,anchorPointX:O,anchorPointY:G}}class ee{constructor(i,u,f,y,_){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new Ms(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new ts(y),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,f,y){const _=f.getBucket(u),S=f.latestFeatureIndex;if(!_||!S||u.id!==_.layerIds[0])return;const I=f.collisionBoxArray,P=_.layers[0].layout,A=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),O=f.tileSize/l.EXTENT,G=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),q=P.get("text-pitch-alignment")==="map",se=P.get("text-rotation-alignment")==="map",ne=sr(f,1,this.transform.zoom),re=zo(G,q,se,this.transform,ne);let ge=null;if(q){const Ie=xi(G,q,se,this.transform,ne);ge=l.multiply([],this.transform.labelPlaneMatrix,Ie)}this.retainedQueryData[_.bucketInstanceId]=new es(_.bucketInstanceId,S,_.sourceLayerIndex,_.index,f.tileID);const we={bucket:_,layout:P,posMatrix:G,textLabelPlaneMatrix:re,labelToScreenMatrix:ge,scale:A,textPixelRatio:O,holdingForFade:f.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(y)for(const Ie of _.sortKeyRanges){const{sortKey:ae,symbolInstanceStart:De,symbolInstanceEnd:Pe}=Ie;i.push({sortKey:ae,symbolInstanceStart:De,symbolInstanceEnd:Pe,parameters:we})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:we})}attemptAnchorPlacement(i,u,f,y,_,S,I,P,A,O,G,q,se,ne,re,ge){const we=[q.textOffset0,q.textOffset1],Ie=zs(i,f,y,we,_),ae=this.collisionIndex.placeCollisionBox(ns(u,Ie.x,Ie.y,S,I,this.transform.angle),G,P,A,O.predicate,ge);if((!re||this.collisionIndex.placeCollisionBox(ns(re,Ie.x,Ie.y,S,I,this.transform.angle),G,P,A,O.predicate,ge).box.length!==0)&&ae.box.length>0){let De;if(this.prevPlacement&&this.prevPlacement.variableOffsets[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID].text&&(De=this.prevPlacement.variableOffsets[q.crossTileID].anchor),q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[q.crossTileID]={textOffset:we,width:f,height:y,anchor:i,textBoxScale:_,prevAnchor:De},this.markUsedJustification(se,i,q,ne),se.allowVerticalPlacement&&(this.markUsedOrientation(se,ne,q),this.placedOrientations[q.crossTileID]=ne),{shift:Ie,placedGlyphBoxes:ae}}}placeLayerBucketPart(i,u,f){const{bucket:y,layout:_,posMatrix:S,textLabelPlaneMatrix:I,labelToScreenMatrix:P,textPixelRatio:A,holdingForFade:O,collisionBoxArray:G,partiallyEvaluatedTextSize:q,collisionGroup:se}=i.parameters,ne=_.get("text-optional"),re=_.get("icon-optional"),ge=l.getOverlapMode(_,"text-overlap","text-allow-overlap"),we=ge==="always",Ie=l.getOverlapMode(_,"icon-overlap","icon-allow-overlap"),ae=Ie==="always",De=_.get("text-rotation-alignment")==="map",Pe=_.get("text-pitch-alignment")==="map",$e=_.get("icon-text-fit")!=="none",je=_.get("symbol-z-order")==="viewport-y",qe=we&&(ae||!y.hasIconData()||re),Fe=ae&&(we||!y.hasTextData()||ne);!y.collisionArrays&&G&&y.deserializeCollisionBoxes(G);const ht=(rt,mt)=>{if(u[rt.crossTileID])return;if(O)return void(this.placements[rt.crossTileID]=new Ps(!1,!1,!1));let Gt=!1,Ht=!1,Mt=!0,xn=null,bn={box:null,offscreen:null},cn={box:null,offscreen:null},dn=null,kn=null,Lr=null,Ro=0,mo=0,Lo=0;mt.textFeatureIndex?Ro=mt.textFeatureIndex:rt.useRuntimeCollisionCircles&&(Ro=rt.featureIndex),mt.verticalTextFeatureIndex&&(mo=mt.verticalTextFeatureIndex);const Us=this.retainedQueryData[y.bucketInstanceId].tileID,Yi=this.terrain?(Mr,Qt)=>this.terrain.getElevation(Us,Mr,Qt):null;for(const Mr of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const Qt=mt[Mr];Qt&&(Qt.elevation=Yi?Yi(Qt.anchorPointX,Qt.anchorPointY):0)}const wi=mt.textBox;if(wi){const Mr=gn=>{let Or=l.WritingMode.horizontal;if(y.allowVerticalPlacement&&!gn&&this.prevPlacement){const Br=this.prevPlacement.placedOrientations[rt.crossTileID];Br&&(this.placedOrientations[rt.crossTileID]=Br,Or=Br,this.markUsedOrientation(y,Or,rt))}return Or},Qt=(gn,Or)=>{if(y.allowVerticalPlacement&&rt.numVerticalGlyphVertices>0&&mt.verticalTextBox){for(const Br of y.writingModes)if(Br===l.WritingMode.vertical?(bn=Or(),cn=bn):bn=gn(),bn&&bn.box&&bn.box.length)break}else bn=gn()};if(_.get("text-variable-anchor")){let gn=_.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[rt.crossTileID]){const Xn=this.prevPlacement.variableOffsets[rt.crossTileID];gn.indexOf(Xn.anchor)>0&&(gn=gn.filter(Ki=>Ki!==Xn.anchor),gn.unshift(Xn.anchor))}const Or=(Xn,Ki,Ia)=>{const wh=Xn.x2-Xn.x1,bl=Xn.y2-Xn.y1,ym=rt.textBoxScale,Sh=$e&&Ie==="never"?Ki:null;let Gs={box:[],offscreen:!1};const Ma=ge!=="never"?2*gn.length:gn.length;for(let Pa=0;Pa<Ma;++Pa){const Vu=this.attemptAnchorPlacement(gn[Pa%gn.length],Xn,wh,bl,ym,De,Pe,A,S,se,Pa>=gn.length?ge:"never",rt,y,Ia,Sh,Yi);if(Vu&&(Gs=Vu.placedGlyphBoxes,Gs&&Gs.box&&Gs.box.length)){Gt=!0,xn=Vu.shift;break}}return Gs};Qt(()=>Or(wi,mt.iconBox,l.WritingMode.horizontal),()=>{const Xn=mt.verticalTextBox;return y.allowVerticalPlacement&&!(bn&&bn.box&&bn.box.length)&&rt.numVerticalGlyphVertices>0&&Xn?Or(Xn,mt.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),bn&&(Gt=bn.box,Mt=bn.offscreen);const Br=Mr(bn&&bn.box);if(!Gt&&this.prevPlacement){const Xn=this.prevPlacement.variableOffsets[rt.crossTileID];Xn&&(this.variableOffsets[rt.crossTileID]=Xn,this.markUsedJustification(y,Xn.anchor,rt,Br))}}else{const gn=(Or,Br)=>{const Xn=this.collisionIndex.placeCollisionBox(Or,ge,A,S,se.predicate,Yi);return Xn&&Xn.box&&Xn.box.length&&(this.markUsedOrientation(y,Br,rt),this.placedOrientations[rt.crossTileID]=Br),Xn};Qt(()=>gn(wi,l.WritingMode.horizontal),()=>{const Or=mt.verticalTextBox;return y.allowVerticalPlacement&&rt.numVerticalGlyphVertices>0&&Or?gn(Or,l.WritingMode.vertical):{box:null,offscreen:null}}),Mr(bn&&bn.box&&bn.box.length)}}if(dn=bn,Gt=dn&&dn.box&&dn.box.length>0,Mt=dn&&dn.offscreen,rt.useRuntimeCollisionCircles){const Mr=y.text.placedSymbolArray.get(rt.centerJustifiedTextSymbolIndex),Qt=l.evaluateSizeForFeature(y.textSizeData,q,Mr),gn=_.get("text-padding");kn=this.collisionIndex.placeCollisionCircles(ge,Mr,y.lineVertexArray,y.glyphOffsetArray,Qt,S,I,P,f,Pe,se.predicate,rt.collisionCircleDiameter,gn,Yi),kn.circles.length&&kn.collisionDetected&&!f&&l.warnOnce("Collisions detected, but collision boxes are not shown"),Gt=we||kn.circles.length>0&&!kn.collisionDetected,Mt=Mt&&kn.offscreen}if(mt.iconFeatureIndex&&(Lo=mt.iconFeatureIndex),mt.iconBox){const Mr=Qt=>{const gn=$e&&xn?ns(Qt,xn.x,xn.y,De,Pe,this.transform.angle):Qt;return this.collisionIndex.placeCollisionBox(gn,Ie,A,S,se.predicate,Yi)};cn&&cn.box&&cn.box.length&&mt.verticalIconBox?(Lr=Mr(mt.verticalIconBox),Ht=Lr.box.length>0):(Lr=Mr(mt.iconBox),Ht=Lr.box.length>0),Mt=Mt&&Lr.offscreen}const ls=ne||rt.numHorizontalGlyphVertices===0&&rt.numVerticalGlyphVertices===0,ju=re||rt.numIconVertices===0;if(ls||ju?ju?ls||(Ht=Ht&&Gt):Gt=Ht&&Gt:Ht=Gt=Ht&&Gt,Gt&&dn&&dn.box&&this.collisionIndex.insertCollisionBox(dn.box,ge,_.get("text-ignore-placement"),y.bucketInstanceId,cn&&cn.box&&mo?mo:Ro,se.ID),Ht&&Lr&&this.collisionIndex.insertCollisionBox(Lr.box,Ie,_.get("icon-ignore-placement"),y.bucketInstanceId,Lo,se.ID),kn&&(Gt&&this.collisionIndex.insertCollisionCircles(kn.circles,ge,_.get("text-ignore-placement"),y.bucketInstanceId,Ro,se.ID),f)){const Mr=y.bucketInstanceId;let Qt=this.collisionCircleArrays[Mr];Qt===void 0&&(Qt=this.collisionCircleArrays[Mr]=new vr);for(let gn=0;gn<kn.circles.length;gn+=4)Qt.circles.push(kn.circles[gn+0]),Qt.circles.push(kn.circles[gn+1]),Qt.circles.push(kn.circles[gn+2]),Qt.circles.push(kn.collisionDetected?1:0)}if(rt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[rt.crossTileID]=new Ps(Gt||qe,Ht||Fe,Mt||y.justReloaded),u[rt.crossTileID]=!0};if(je){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const rt=y.getSortedSymbolIndexes(this.transform.angle);for(let mt=rt.length-1;mt>=0;--mt){const Gt=rt[mt];ht(y.symbolInstances.get(Gt),y.collisionArrays[Gt])}}else for(let rt=i.symbolInstanceStart;rt<i.symbolInstanceEnd;rt++)ht(y.symbolInstances.get(rt),y.collisionArrays[rt]);if(f&&y.bucketInstanceId in this.collisionCircleArrays){const rt=this.collisionCircleArrays[y.bucketInstanceId];l.invert(rt.invProjMatrix,S),rt.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}markUsedJustification(i,u,f,y){let _;_=y===l.WritingMode.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(u)];const S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const I of S)I>=0&&(i.text.placedSymbolArray.get(I).crossTileID=_>=0&&I!==_?0:f.crossTileID)}markUsedOrientation(i,u,f){const y=u===l.WritingMode.horizontal||u===l.WritingMode.horizontalOnly?u:0,_=u===l.WritingMode.vertical?u:0,S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const I of S)i.text.placedSymbolArray.get(I).placedOrientation=y;f.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let f=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const y=u?u.symbolFadeChange(i):1,_=u?u.opacities:{},S=u?u.variableOffsets:{},I=u?u.placedOrientations:{};for(const P in this.placements){const A=this.placements[P],O=_[P];O?(this.opacities[P]=new pn(O,y,A.text,A.icon),f=f||A.text!==O.text.placed||A.icon!==O.icon.placed):(this.opacities[P]=new pn(null,y,A.text,A.icon,A.skipFade),f=f||A.text||A.icon)}for(const P in _){const A=_[P];if(!this.opacities[P]){const O=new pn(A,y,!1,!1);O.isHidden()||(this.opacities[P]=O,f=f||A.text.placed||A.icon.placed)}}for(const P in S)this.variableOffsets[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.variableOffsets[P]=S[P]);for(const P in I)this.placedOrientations[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.placedOrientations[P]=I[P]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const f={};for(const y of u){const _=y.getBucket(i);_&&y.latestFeatureIndex&&i.id===_.layerIds[0]&&this.updateBucketOpacities(_,f,y.collisionBoxArray)}}updateBucketOpacities(i,u,f){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const y=i.layers[0].layout,_=new pn(null,0,!1,!1,!0),S=y.get("text-allow-overlap"),I=y.get("icon-allow-overlap"),P=y.get("text-variable-anchor"),A=y.get("text-rotation-alignment")==="map",O=y.get("text-pitch-alignment")==="map",G=y.get("icon-text-fit")!=="none",q=new pn(null,0,S&&(I||!i.hasIconData()||y.get("icon-optional")),I&&(S||!i.hasTextData()||y.get("text-optional")),!0);!i.collisionArrays&&f&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(f);const se=(ne,re,ge)=>{for(let we=0;we<re/4;we++)ne.opacityVertexArray.emplaceBack(ge)};for(let ne=0;ne<i.symbolInstances.length;ne++){const re=i.symbolInstances.get(ne),{numHorizontalGlyphVertices:ge,numVerticalGlyphVertices:we,crossTileID:Ie}=re;let ae=this.opacities[Ie];u[Ie]?ae=_:ae||(ae=q,this.opacities[Ie]=ae),u[Ie]=!0;const De=re.numIconVertices>0,Pe=this.placedOrientations[re.crossTileID],$e=Pe===l.WritingMode.vertical,je=Pe===l.WritingMode.horizontal||Pe===l.WritingMode.horizontalOnly;if(ge>0||we>0){const qe=_e(ae.text);se(i.text,ge,$e?Be:qe),se(i.text,we,je?Be:qe);const Fe=ae.text.isHidden();[re.rightJustifiedTextSymbolIndex,re.centerJustifiedTextSymbolIndex,re.leftJustifiedTextSymbolIndex].forEach(mt=>{mt>=0&&(i.text.placedSymbolArray.get(mt).hidden=Fe||$e?1:0)}),re.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(re.verticalPlacedTextSymbolIndex).hidden=Fe||je?1:0);const ht=this.variableOffsets[re.crossTileID];ht&&this.markUsedJustification(i,ht.anchor,re,Pe);const rt=this.placedOrientations[re.crossTileID];rt&&(this.markUsedJustification(i,"left",re,rt),this.markUsedOrientation(i,rt,re))}if(De){const qe=_e(ae.icon),Fe=!(G&&re.verticalPlacedIconSymbolIndex&&$e);re.placedIconSymbolIndex>=0&&(se(i.icon,re.numIconVertices,Fe?qe:Be),i.icon.placedSymbolArray.get(re.placedIconSymbolIndex).hidden=ae.icon.isHidden()),re.verticalPlacedIconSymbolIndex>=0&&(se(i.icon,re.numVerticalIconVertices,Fe?Be:qe),i.icon.placedSymbolArray.get(re.verticalPlacedIconSymbolIndex).hidden=ae.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const qe=i.collisionArrays[ne];if(qe){let Fe=new l.pointGeometry(0,0);if(qe.textBox||qe.verticalTextBox){let rt=!0;if(P){const mt=this.variableOffsets[Ie];mt?(Fe=zs(mt.anchor,mt.width,mt.height,mt.textOffset,mt.textBoxScale),A&&Fe._rotate(O?this.transform.angle:-this.transform.angle)):rt=!1}qe.textBox&&D(i.textCollisionBox.collisionVertexArray,ae.text.placed,!rt||$e,Fe.x,Fe.y),qe.verticalTextBox&&D(i.textCollisionBox.collisionVertexArray,ae.text.placed,!rt||je,Fe.x,Fe.y)}const ht=Boolean(!je&&qe.verticalIconBox);qe.iconBox&&D(i.iconCollisionBox.collisionVertexArray,ae.icon.placed,ht,G?Fe.x:0,G?Fe.y:0),qe.verticalIconBox&&D(i.iconCollisionBox.collisionVertexArray,ae.icon.placed,!ht,G?Fe.x:0,G?Fe.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const ne=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=ne.invProjMatrix,i.placementViewportMatrix=ne.viewportMatrix,i.collisionCircleArray=ne.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const f=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function D(p,i,u,f,y){p.emplaceBack(i?1:0,u?1:0,f||0,y||0),p.emplaceBack(i?1:0,u?1:0,f||0,y||0),p.emplaceBack(i?1:0,u?1:0,f||0,y||0),p.emplaceBack(i?1:0,u?1:0,f||0,y||0)}const j=Math.pow(2,25),K=Math.pow(2,24),Q=Math.pow(2,17),he=Math.pow(2,16),ve=Math.pow(2,9),me=Math.pow(2,8),fe=Math.pow(2,1);function _e(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const i=p.placed?1:0,u=Math.floor(127*p.opacity);return u*j+i*K+u*Q+i*he+u*ve+i*me+u*fe+i}const Be=0;class Ge{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,f,y,_){const S=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(S,y,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((I,P)=>I.sortKey-P.sortKey));this._currentPartIndex<S.length;)if(u.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,_())return!0;return!1}}class Oe{constructor(i,u,f,y,_,S,I,P){this.placement=new ee(i,u,S,I,P),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(i,u,f){const y=l.exported.now(),_=()=>{const S=l.exported.now()-y;return!this._forceFullPlacement&&S>2};for(;this._currentPlacementIndex>=0;){const S=u[i[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=I)&&(!S.maxzoom||S.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new Ge(S)),this._inProgressLayer.continuePlacement(f[S.source],this.placement,this._showCollisionBoxes,S,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const vt=512/l.EXTENT/2;class _t{constructor(i,u,f){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=f;for(let y=0;y<u.length;y++){const _=u.get(y),S=_.key;this.indexedSymbolInstances[S]||(this.indexedSymbolInstances[S]=[]),this.indexedSymbolInstances[S].push({crossTileID:_.crossTileID,coord:this.getScaledCoordinates(_,i)})}}getScaledCoordinates(i,u){const f=vt/Math.pow(2,u.canonical.z-this.tileID.canonical.z);return{x:Math.floor((u.canonical.x*l.EXTENT+i.anchorX)*f),y:Math.floor((u.canonical.y*l.EXTENT+i.anchorY)*f)}}findMatches(i,u,f){const y=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<i.length;_++){const S=i.get(_);if(S.crossTileID)continue;const I=this.indexedSymbolInstances[S.key];if(!I)continue;const P=this.getScaledCoordinates(S,u);for(const A of I)if(Math.abs(A.coord.x-P.x)<=y&&Math.abs(A.coord.y-P.y)<=y&&!f[A.crossTileID]){f[A.crossTileID]=!0,S.crossTileID=A.crossTileID;break}}}}class lt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class It{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const f in this.indexes){const y=this.indexes[f],_={};for(const S in y){const I=y[S];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+u),_[I.tileID.key]=I}this.indexes[f]=_}this.lng=i}addBucket(i,u,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const y=this.usedCrossTileIDs[i.overscaledZ];for(const _ in this.indexes){const S=this.indexes[_];if(Number(_)>i.overscaledZ)for(const I in S){const P=S[I];P.tileID.isChildOf(i)&&P.findMatches(u.symbolInstances,i,y)}else{const I=S[i.scaledTo(Number(_)).key];I&&I.findMatches(u.symbolInstances,i,y)}}for(let _=0;_<u.symbolInstances.length;_++){const S=u.symbolInstances.get(_);S.crossTileID||(S.crossTileID=f.generate(),y[S.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new _t(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const f in u.indexedSymbolInstances)for(const y of u.indexedSymbolInstances[f])delete this.usedCrossTileIDs[i][y.crossTileID]}removeStaleBuckets(i){let u=!1;for(const f in this.indexes){const y=this.indexes[f];for(const _ in y)i[y[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,y[_]),delete y[_],u=!0)}return u}}class At{constructor(){this.layerIndexes={},this.crossTileIDs=new lt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,f){let y=this.layerIndexes[i.id];y===void 0&&(y=this.layerIndexes[i.id]=new It);let _=!1;const S={};y.handleWrapJump(f);for(const I of u){const P=I.getBucket(i);P&&i.id===P.layerIds[0]&&(P.bucketInstanceId||(P.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(I.tileID,P,this.crossTileIDs)&&(_=!0),S[P.bucketInstanceId]=!0)}return y.removeStaleBuckets(S)&&(_=!0),_}pruneUnusedLayers(i){const u={};i.forEach(f=>{u[f]=!0});for(const f in this.layerIndexes)u[f]||delete this.layerIndexes[f]}}var on=l.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Lt extends l.Evented{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=i._cache.max,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const i in this._tiles){const u=this._tiles[i];u.textures.forEach(f=>f.destroy()),u.textures=[]}}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];for(const f of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))this._renderableTilesKeys.push(f.key),this._tiles[f.key]||(f.posMatrix=new Float64Array(16),l.ortho(f.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),this._tiles[f.key]=new Ot(f,this.tileSize))}removeOutdated(i){const u={};this.renderHistory=this.renderHistory.filter((f,y)=>this.renderHistory.indexOf(f)===y).slice(0,this.renderHistorySize);for(const f of this._renderableTilesKeys)u[f]=!0;for(const f of this.renderHistory)u[f]=!0;for(const f in this._tiles)u[f]||(this._tiles[f].clearTextures(i),delete this._tiles[f])}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const u={};for(const f of this._renderableTilesKeys){const y=this._tiles[f].tileID;if(y.canonical.equals(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16),l.ortho(_.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),u[f]=_}else if(y.canonical.isChildOf(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const S=y.canonical.z-i.canonical.z,I=y.canonical.x-(y.canonical.x>>S<<S),P=y.canonical.y-(y.canonical.y>>S<<S),A=l.EXTENT>>S;l.ortho(_.posMatrix,0,A,0,A,0,1),l.translate(_.posMatrix,_.posMatrix,[-I*A,-P*A,0]),u[f]=_}else if(i.canonical.isChildOf(y.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const S=i.canonical.z-y.canonical.z,I=i.canonical.x-(i.canonical.x>>S<<S),P=i.canonical.y-(i.canonical.y>>S<<S),A=l.EXTENT>>S;l.ortho(_.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),l.translate(_.posMatrix,_.posMatrix,[I*A,P*A,0]),l.scale(_.posMatrix,_.posMatrix,[1/2**S,1/2**S,0]),u[f]=_}}return u}getSourceTile(i,u){const f=this.sourceCache._source;let y=i.overscaledZ-this.deltaZoom;if(y>f.maxzoom&&(y=f.maxzoom),y<f.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(y).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!_||!_.dem)&&u)for(;y>=f.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(i.scaledTo(y--).key);return _}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeLoaded>=i)}}class Zt{constructor(i,u,f){this.style=i,this.sourceCache=new Lt(u),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.elevationOffset=typeof f.elevationOffset=="number"?f.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(i,u,f,y=l.EXTENT){if(!(u>=0&&u<y&&f>=0&&f<y))return this.elevationOffset;let _=0;const S=this.getTerrainData(i);if(S.tile&&S.tile.dem){const I=l.transformMat4$1([],[u/y*l.EXTENT,f/y*l.EXTENT],S.u_terrain_matrix),P=[I[0]*S.tile.dem.dim,I[1]*S.tile.dem.dim],A=[Math.floor(P[0]),Math.floor(P[1])],O=S.tile.dem.get(A[0],A[1]),G=S.tile.dem.get(A[0],A[1]+1),q=S.tile.dem.get(A[0]+1,A[1]),se=S.tile.dem.get(A[0]+1,A[1]+1);_=l.number(l.number(O,G,P[0]-A[0]),l.number(q,se,P[0]-A[0]),P[1]-A[1])}return _}rememberForRerender(i,u){for(const f in this.sourceCache._tiles){const y=this.sourceCache._tiles[f];(y.tileID.equals(u)||y.tileID.isChildOf(u))&&(i===this.sourceCache.sourceCache.id&&(y.timeLoaded=Date.now()),this._rerender[i]=this._rerender[i]||{},this._rerender[i][y.tileID.key]=!0)}}needsRerender(i,u){return this._rerender[i]&&this._rerender[i][u.key]}clearRerenderCache(){this._rerender={}}getElevation(i,u,f,y=l.EXTENT){return(this.getDEMElevation(i,u,f,y)+this.elevationOffset)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const y=this.style.map.painter.context,_=new l.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new V(y,_,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new V(y,new l.RGBAImage({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.identity([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const y=this.style.map.painter.context;u.demTexture=this.style.map.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new V(y,u.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),u.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const f=u&&u+u.tileID.key+i.key;if(f&&!this._demMatrixCache[f]){const y=this.sourceCache.sourceCache._source.maxzoom;let _=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=y?_=i.canonical.z-y:l.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=i.canonical.x-(i.canonical.x>>_<<_),I=i.canonical.y-(i.canonical.y>>_<<_),P=l.fromScaling(new Float64Array(16),[1/(l.EXTENT<<_),1/(l.EXTENT<<_),0]);l.translate(P,P,[S*l.EXTENT,I*l.EXTENT,0]),this._demMatrixCache[i.key]={matrix:P,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getRTTFramebuffer(){const i=this.style.map.painter;if(!this._rttFramebuffer){const u=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=i.context.createFramebuffer(u,u,!0),this._rttFramebuffer.depthAttachment.set(i.context.createRenderbuffer(i.context.gl.DEPTH_COMPONENT16,u,u))}return this._rttFramebuffer}getFramebuffer(i){const u=this.style.map.painter,f=u.width/devicePixelRatio,y=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new V(u.context,{width:f,height:y,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new V(u.context,{width:f,height:y,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(f,y,!0),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,f,y))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,S=0;_<this._coordsTextureSize;_++)for(let I=0;I<this._coordsTextureSize;I++,S+=4)u[S+0]=255&I,u[S+1]=255&_,u[S+2]=I>>8<<4|_>>8,u[S+3]=0;const f=new l.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),y=new V(i,f,i.gl.RGBA,{premultiply:!1});return y.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(i){const u=new Uint8Array(4),f=this.style.map.painter,y=f.context,_=y.gl;y.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(i.x,f.height/devicePixelRatio-i.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,u),y.bindFramebuffer.set(null);const S=u[0]+(u[2]>>4<<8),I=u[1]+((15&u[2])<<8),P=this.coordsIndex[255-u[3]],A=P&&this.sourceCache.getTileByID(P);if(!A)return null;const O=this._coordsTextureSize,G=(1<<A.tileID.canonical.z)*O;return new l.MercatorCoordinate((A.tileID.canonical.x*O+S)/G,(A.tileID.canonical.y*O+I)/G,this.getElevation(A.tileID,S,I,O))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.style.map.painter.context,u=new l.PosArray,f=new l.TriangleIndexArray,y=this.meshSize,_=l.EXTENT/y,S=y*y;for(let I=0;I<=y;I++)for(let P=0;P<=y;P++)u.emplaceBack(P*_,I*_);for(let I=0;I<S;I+=y+1)for(let P=0;P<y;P++)f.emplaceBack(P+I,y+P+I+1,y+P+I+2),f.emplaceBack(P+I,y+P+I+2,P+I+1);return this._mesh={indexBuffer:i.createIndexBuffer(f),vertexBuffer:i.createVertexBuffer(u,on.members),segments:l.SegmentVector.simpleSegment(0,0,u.length,f.length)},this._mesh}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,f={minElevation:null,maxElevation:null};return u&&u.dem&&(f.minElevation=(u.dem.min+this.elevationOffset)*this.exaggeration,f.maxElevation=(u.dem.max+this.elevationOffset)*this.exaggeration),f}}const sn=(p,i)=>l.emitValidationErrors(p,i&&i.filter(u=>u.identifier!=="source.canvas")),vn=l.pick(jt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),_r=l.pick(jt,["setCenter","setZoom","setBearing","setPitch"]),An=function(){const p={},i=l.spec.$version;for(const u in l.spec.$root){const f=l.spec.$root[u];if(f.required){let y=null;y=u==="version"?i:f.type==="array"?[]:{},y!=null&&(p[u]=y)}}return p}();class Rr extends l.Evented{constructor(i,u={}){super(),this.map=i,this.dispatcher=new ye($n(),this),this.imageManager=new $,this.imageManager.setEventedParent(this),this.glyphManager=new de(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new be(256,512),this.crossTileSymbolIndex=new At,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const f=this;this._rtlTextPluginCallback=Rr.registerForPluginStateChange(y=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},(_,S)=>{if(l.triggerPluginCompletionEvent(_),S&&S.every(I=>I))for(const I in f.sourceCaches)f.sourceCaches[I].reload()})}),this.on("data",y=>{if(y.dataType!=="source"||y.sourceDataType!=="metadata")return;const _=this.sourceCaches[y.sourceId];if(!_)return;const S=_.getSource();if(S&&S.vectorLayerIds)for(const I in this._layers){const P=this._layers[I];P.source===S.id&&this._validateLayer(P)}})}loadURL(i,u={}){this.fire(new l.Event("dataloading",{dataType:"style"}));const f=typeof u.validate!="boolean"||u.validate,y=this.map._requestManager.transformRequest(i,l.ResourceType.Style);this._request=l.getJSON(y,(_,S)=>{this._request=null,_?this.fire(new l.ErrorEvent(_)):S&&this._load(S,f)})}loadJSON(i,u={}){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,this._load(i,u.validate!==!1)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(An,!1)}_load(i,u){if(u&&sn(this,l.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i;for(const y in i.sources)this.addSource(y,i.sources[y],{validate:!1});i.sprite?this._loadSprite(i.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(i.glyphs);const f=gr(this.stylesheet.layers);this._order=f.map(y=>y.id),this._layers={},this._serializedLayers={};for(let y of f)y=l.createStyleLayer(y),y.setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=y,this._serializedLayers[y.id]=y.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new oe(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}_loadSprite(i){this._spriteRequest=function(u,f,y,_){let S,I,P;const A=y>1?"@2x":"";let O=l.getJSON(f.transformRequest(f.normalizeSpriteURL(u,A,".json"),l.ResourceType.SpriteJSON),(se,ne)=>{O=null,P||(P=se,S=ne,q())}),G=l.getImage(f.transformRequest(f.normalizeSpriteURL(u,A,".png"),l.ResourceType.SpriteImage),(se,ne)=>{G=null,P||(P=se,I=ne,q())});function q(){if(P)_(P);else if(S&&I){const se=l.exported.getImageData(I),ne={};for(const re in S){const{width:ge,height:we,x:Ie,y:ae,sdf:De,pixelRatio:Pe,stretchX:$e,stretchY:je,content:qe}=S[re],Fe=new l.RGBAImage({width:ge,height:we});l.RGBAImage.copy(se,Fe,{x:Ie,y:ae},{x:0,y:0},{width:ge,height:we}),ne[re]={data:Fe,pixelRatio:Pe,sdf:De,stretchX:$e,stretchY:je,content:qe}}_(null,ne)}}return{cancel(){O&&(O.cancel(),O=null),G&&(G.cancel(),G=null)}}}(i,this.map._requestManager,this.map.getPixelRatio(),(u,f)=>{if(this._spriteRequest=null,u)this.fire(new l.ErrorEvent(u));else if(f)for(const y in f)this.imageManager.addImage(y,f[y]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))})}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const f=i.sourceLayer;if(!f)return;const y=u.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(f)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${f}" does not exist on source "${y.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const u=[];for(const f of i){const y=this._layers[f];y.type!=="custom"&&u.push(y.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const y=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(y.length||_.length)&&this._updateWorkerLayers(y,_);for(const S in this._updatedSources){const I=this._updatedSources[S];if(I==="reload")this._reloadSource(S);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(S)}}this._updateTilesForChangedImages();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const f={};for(const y in this.sourceCaches){const _=this.sourceCaches[y];f[y]=_.used,_.used=!1}for(const y of this._order){const _=this._layers[y];_.recalculate(i,this._availableImages),!_.isHidden(i.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const y in f){const _=this.sourceCaches[y];f[y]!==_.used&&_.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(i){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),i){const u=this.sourceCaches[i.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${i.source}`);this.terrain=new Zt(this,u,i),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=f=>{f.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=f=>{f.tile&&(f.sourceId===i.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(f.sourceId,f.tile.tileID)):f.source.type==="geojson"&&this.terrain.rememberForRerender(f.sourceId,f.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new l.Event("terrain",{terrain:i}))}setState(i){if(this._checkLoaded(),sn(this,l.validateStyle(i)))return!1;(i=l.clone$1(i)).layers=gr(i.layers);const u=function(y,_){if(!y)return[{command:jt.setStyle,args:[_]}];let S=[];try{if(!M(y.version,_.version))return[{command:jt.setStyle,args:[_]}];M(y.center,_.center)||S.push({command:jt.setCenter,args:[_.center]}),M(y.zoom,_.zoom)||S.push({command:jt.setZoom,args:[_.zoom]}),M(y.bearing,_.bearing)||S.push({command:jt.setBearing,args:[_.bearing]}),M(y.pitch,_.pitch)||S.push({command:jt.setPitch,args:[_.pitch]}),M(y.sprite,_.sprite)||S.push({command:jt.setSprite,args:[_.sprite]}),M(y.glyphs,_.glyphs)||S.push({command:jt.setGlyphs,args:[_.glyphs]}),M(y.transition,_.transition)||S.push({command:jt.setTransition,args:[_.transition]}),M(y.light,_.light)||S.push({command:jt.setLight,args:[_.light]});const I={},P=[];(function(O,G,q,se){let ne;for(ne in G=G||{},O=O||{})Object.prototype.hasOwnProperty.call(O,ne)&&(Object.prototype.hasOwnProperty.call(G,ne)||yr(ne,q,se));for(ne in G)Object.prototype.hasOwnProperty.call(G,ne)&&(Object.prototype.hasOwnProperty.call(O,ne)?M(O[ne],G[ne])||(O[ne].type==="geojson"&&G[ne].type==="geojson"&&yn(O,G,ne)?q.push({command:jt.setGeoJSONSourceData,args:[ne,G[ne].data]}):Er(ne,G,q,se)):jn(ne,G,q))})(y.sources,_.sources,P,I);const A=[];y.layers&&y.layers.forEach(O=>{I[O.source]?S.push({command:jt.removeLayer,args:[O.id]}):A.push(O)}),S=S.concat(P),function(O,G,q){G=G||[];const se=(O=O||[]).map(Cr),ne=G.map(Cr),re=O.reduce(Di,{}),ge=G.reduce(Di,{}),we=se.slice(),Ie=Object.create(null);let ae,De,Pe,$e,je,qe,Fe;for(ae=0,De=0;ae<se.length;ae++)Pe=se[ae],Object.prototype.hasOwnProperty.call(ge,Pe)?De++:(q.push({command:jt.removeLayer,args:[Pe]}),we.splice(we.indexOf(Pe,De),1));for(ae=0,De=0;ae<ne.length;ae++)Pe=ne[ne.length-1-ae],we[we.length-1-ae]!==Pe&&(Object.prototype.hasOwnProperty.call(re,Pe)?(q.push({command:jt.removeLayer,args:[Pe]}),we.splice(we.lastIndexOf(Pe,we.length-De),1)):De++,qe=we[we.length-ae],q.push({command:jt.addLayer,args:[ge[Pe],qe]}),we.splice(we.length-ae,0,Pe),Ie[Pe]=!0);for(ae=0;ae<ne.length;ae++)if(Pe=ne[ae],$e=re[Pe],je=ge[Pe],!Ie[Pe]&&!M($e,je))if(M($e.source,je.source)&&M($e["source-layer"],je["source-layer"])&&M($e.type,je.type)){for(Fe in Vn($e.layout,je.layout,q,Pe,null,jt.setLayoutProperty),Vn($e.paint,je.paint,q,Pe,null,jt.setPaintProperty),M($e.filter,je.filter)||q.push({command:jt.setFilter,args:[Pe,je.filter]}),M($e.minzoom,je.minzoom)&&M($e.maxzoom,je.maxzoom)||q.push({command:jt.setLayerZoomRange,args:[Pe,je.minzoom,je.maxzoom]}),$e)Object.prototype.hasOwnProperty.call($e,Fe)&&Fe!=="layout"&&Fe!=="paint"&&Fe!=="filter"&&Fe!=="metadata"&&Fe!=="minzoom"&&Fe!=="maxzoom"&&(Fe.indexOf("paint.")===0?Vn($e[Fe],je[Fe],q,Pe,Fe.slice(6),jt.setPaintProperty):M($e[Fe],je[Fe])||q.push({command:jt.setLayerProperty,args:[Pe,Fe,je[Fe]]}));for(Fe in je)Object.prototype.hasOwnProperty.call(je,Fe)&&!Object.prototype.hasOwnProperty.call($e,Fe)&&Fe!=="layout"&&Fe!=="paint"&&Fe!=="filter"&&Fe!=="metadata"&&Fe!=="minzoom"&&Fe!=="maxzoom"&&(Fe.indexOf("paint.")===0?Vn($e[Fe],je[Fe],q,Pe,Fe.slice(6),jt.setPaintProperty):M($e[Fe],je[Fe])||q.push({command:jt.setLayerProperty,args:[Pe,Fe,je[Fe]]}))}else q.push({command:jt.removeLayer,args:[Pe]}),qe=we[we.lastIndexOf(Pe)+1],q.push({command:jt.addLayer,args:[je,qe]})}(A,_.layers,S)}catch(I){console.warn("Unable to compute style diff:",I),S=[{command:jt.setStyle,args:[_]}]}return S}(this.serialize(),i).filter(y=>!(y.command in _r));if(u.length===0)return!1;const f=u.filter(y=>!(y.command in vn));if(f.length>0)throw new Error(`Unimplemented: ${f.map(y=>y.command).join(", ")}.`);return u.forEach(y=>{y.command!=="setTransition"&&this[y.command].apply(this,y.args)}),this.stylesheet=i,!0}addImage(i,u){if(this.getImage(i))return this.fire(new l.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new l.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,f={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.validateStyle.source,`sources.${i}`,u,null,f))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const y=this.sourceCaches[i]=new ln(i,u,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:y.serialize(),sourceId:i})),y.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===i)return this.fire(new l.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${f}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const f=this.sourceCaches[i].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,f={}){this._checkLoaded();const y=i.id;if(this.getLayer(y))return void this.fire(new l.ErrorEvent(new Error(`Layer "${y}" already exists on this map.`)));let _;if(i.type==="custom"){if(sn(this,l.validateCustomStyleLayer(i)))return;_=l.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(y,i.source),i=l.clone$1(i),i=l.extend(i,{source:y})),this._validate(l.validateStyle.layer,`layers.${y}`,i,{arrayIndex:-1},f))return;_=l.createStyleLayer(i),this._validateLayer(_),_.setEventedParent(this,{layer:{id:y}}),this._serializedLayers[_.id]=_.serialize()}const S=u?this._order.indexOf(u):this._order.length;if(u&&S===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${y}" before non-existing layer "${u}".`)));else{if(this._order.splice(S,0,y),this._layerOrderChanged=!0,this._layers[y]=_,this._removedLayers[y]&&_.source&&_.type!=="custom"){const I=this._removedLayers[y];delete this._removedLayers[y],I.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new l.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const f=this._order.indexOf(i);this._order.splice(f,1);const y=u?this._order.indexOf(u):this._order.length;u&&y===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(y,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,f){this._checkLoaded();const y=this.getLayer(i);y?y.minzoom===u&&y.maxzoom===f||(u!=null&&(y.minzoom=u),f!=null&&(y.maxzoom=f),this._updateLayer(y)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,f={}){this._checkLoaded();const y=this.getLayer(i);if(y){if(!M(y.filter,u))return u==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(l.validateStyle.filter,`layers.${y.id}.filter`,u,null,f)||(y.filter=l.clone$1(u),this._updateLayer(y)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return l.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,u,f,y={}){this._checkLoaded();const _=this.getLayer(i);_?M(_.getLayoutProperty(u),f)||(_.setLayoutProperty(u,f,y),this._updateLayer(_)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const f=this.getLayer(i);if(f)return f.getLayoutProperty(u);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,f,y={}){this._checkLoaded();const _=this.getLayer(i);_?M(_.getPaintProperty(u),f)||(_.setPaintProperty(u,f,y)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const f=i.source,y=i.sourceLayer,_=this.sourceCaches[f];if(_===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const S=_.getSource().type;S==="geojson"&&y?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||y?(i.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),_.setFeatureState(y,i.id,u)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const f=i.source,y=this.sourceCaches[f];if(y===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const _=y.getSource().type,S=_==="vector"?i.sourceLayer:void 0;_!=="vector"||S?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(S,i.id,u):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,f=i.sourceLayer,y=this.sourceCaches[u];if(y!==void 0)return y.getSource().type!=="vector"||f?(i.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),y.getFeatureState(f,i.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,i=>i.serialize()),layers:this._serializeLayers(this._order)},i=>i!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=S=>this._layers[S].type==="fill-extrusion",f={},y=[];for(let S=this._order.length-1;S>=0;S--){const I=this._order[S];if(u(I)){f[I]=S;for(const P of i){const A=P[I];if(A)for(const O of A)y.push(O)}}}y.sort((S,I)=>I.intersectionZ-S.intersectionZ);const _=[];for(let S=this._order.length-1;S>=0;S--){const I=this._order[S];if(u(I))for(let P=y.length-1;P>=0;P--){const A=y[P].feature;if(f[A.layer.id]<S)break;_.push(A),y.pop()}else for(const P of i){const A=P[I];if(A)for(const O of A)_.push(O.feature)}}return _}queryRenderedFeatures(i,u,f){u&&u.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const y={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const S of u.layers){const I=this._layers[S];if(!I)return this.fire(new l.ErrorEvent(new Error(`The layer '${S}' does not exist in the map's style and cannot be queried for features.`))),[];y[I.source]=!0}}const _=[];u.availableImages=this._availableImages;for(const S in this.sourceCaches)u.layers&&!y[S]||_.push(pt(this.sourceCaches[S],this._layers,this._serializedLayers,i,u,f));return this.placement&&_.push(function(S,I,P,A,O,G,q){const se={},ne=G.queryRenderedSymbols(A),re=[];for(const ge of Object.keys(ne).map(Number))re.push(q[ge]);re.sort(St);for(const ge of re){const we=ge.featureIndex.lookupSymbolFeatures(ne[ge.bucketInstanceId],I,ge.bucketIndex,ge.sourceLayerIndex,O.filter,O.layers,O.availableImages,S);for(const Ie in we){const ae=se[Ie]=se[Ie]||[],De=we[Ie];De.sort((Pe,$e)=>{const je=ge.featureSortOrder;if(je){const qe=je.indexOf(Pe.featureIndex);return je.indexOf($e.featureIndex)-qe}return $e.featureIndex-Pe.featureIndex});for(const Pe of De)ae.push(Pe)}}for(const ge in se)se[ge].forEach(we=>{const Ie=we.feature,ae=P[S[ge].source].getFeatureState(Ie.layer["source-layer"],Ie.id);Ie.source=Ie.layer.source,Ie.layer["source-layer"]&&(Ie.sourceLayer=Ie.layer["source-layer"]),Ie.state=ae});return se}(this._layers,this._serializedLayers,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(i,u){u&&u.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const f=this.sourceCaches[i];return f?function(y,_){const S=y.getRenderableIds().map(A=>y.getTileByID(A)),I=[],P={};for(let A=0;A<S.length;A++){const O=S[A],G=O.tileID.canonical.key;P[G]||(P[G]=!0,O.querySourceFeatures(I,_))}return I}(f,u):[]}addSourceType(i,u,f){return Rr.getSourceType(i)?f(new Error(`A source type called "${i}" already exists.`)):(Rr.setSourceType(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const f=this.light.getLight();let y=!1;for(const S in i)if(!M(i[S],f[S])){y=!0;break}if(!y)return;const _={now:l.exported.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(_)}_validate(i,u,f,y,_={}){return(!_||_.validate!==!1)&&sn(this,i.call(l.validateStyle,l.extend({key:u,style:this.serialize(),value:f,styleSpec:l.spec},y)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this.sourceCaches){const u=this.sourceCaches[i];u.setEventedParent(null),u.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,f,y,_=!1){let S=!1,I=!1;const P={};for(const A of this._order){const O=this._layers[A];if(O.type!=="symbol")continue;if(!P[O.source]){const q=this.sourceCaches[O.source];P[O.source]=q.getRenderableIds(!0).map(se=>q.getTileByID(se)).sort((se,ne)=>ne.tileID.overscaledZ-se.tileID.overscaledZ||(se.tileID.isLessThan(ne.tileID)?-1:1))}const G=this.crossTileSymbolIndex.addLayer(O,P[O.source],i.center.lng);S=S||G}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),i.zoom))&&(this.pauseablePlacement=new Oe(i,this.terrain,this._order,_,u,f,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,P),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),I=!0),S&&this.pauseablePlacement.placement.setStale()),I||S)for(const A of this._order){const O=this._layers[A];O.type==="symbol"&&this.placement.updateLayerOpacities(O,P[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,f){this.imageManager.getImages(u.icons,f),this._updateTilesForChangedImages();const y=this.sourceCaches[u.source];y&&y.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,f){this.glyphManager.getGlyphs(u.stacks,f)}getResource(i,u,f){return l.makeRequest(u,f)}}Rr.getSourceType=function(p){return Ke[p]},Rr.setSourceType=function(p,i){Ke[p]=i},Rr.registerForPluginStateChange=l.registerForPluginStateChange;var As="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const pa={prelude:_n(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:_n(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:_n(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:_n(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:_n("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:_n(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:_n(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:_n("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:_n("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:_n("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:_n(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:_n(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:_n(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:_n(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:_n(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:_n(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:_n(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:_n(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:_n(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:_n(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:_n(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:_n(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:_n(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:_n(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:_n(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:_n(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:_n("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",As),terrainDepth:_n("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",As),terrainCoords:_n("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",As)};function _n(p,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/attribute ([\w]+) ([\w]+)/g),y=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=_?_.concat(y):y,I={};return{fragmentSource:p=p.replace(u,(P,A,O,G,q)=>(I[q]=!0,A==="define"?`
#ifndef HAS_UNIFORM_u_${q}
varying ${O} ${G} ${q};
#else
uniform ${O} ${G} u_${q};
#endif
`:`
#ifdef HAS_UNIFORM_u_${q}
    ${O} ${G} ${q} = u_${q};
#endif
`)),vertexSource:i=i.replace(u,(P,A,O,G,q)=>{const se=G==="float"?"vec2":"vec4",ne=q.match(/color/)?"color":se;return I[q]?A==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${O} ${se} a_${q};
varying ${O} ${G} ${q};
#else
uniform ${O} ${G} u_${q};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = a_${q};
#else
    ${O} ${G} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = unpack_mix_${ne}(a_${q}, u_${q}_t);
#else
    ${O} ${G} ${q} = u_${q};
#endif
`:A==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${O} ${se} a_${q};
#else
uniform ${O} ${G} u_${q};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${O} ${G} ${q} = a_${q};
#else
    ${O} ${G} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${O} ${G} ${q} = unpack_mix_${ne}(a_${q}, u_${q}_t);
#else
    ${O} ${G} ${q} = u_${q};
#endif
`}),staticAttributes:f,staticUniforms:S}}class lc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,f,y,_,S,I,P,A){this.context=i;let O=this.boundPaintVertexBuffers.length!==y.length;for(let G=0;!O&&G<y.length;G++)this.boundPaintVertexBuffers[G]!==y[G]&&(O=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===u&&this.boundLayoutVertexBuffer===f&&!O&&this.boundIndexBuffer===_&&this.boundVertexOffset===S&&this.boundDynamicVertexBuffer===I&&this.boundDynamicVertexBuffer2===P&&this.boundDynamicVertexBuffer3===A?(i.bindVertexArrayOES.set(this.vao),I&&I.bind(),_&&_.dynamicDraw&&_.bind(),P&&P.bind(),A&&A.bind()):this.freshBind(u,f,y,_,S,I,P,A)}freshBind(i,u,f,y,_,S,I,P){let A;const O=i.numAttributes,G=this.context,q=G.gl;if(G.extVertexArrayObject)this.vao&&this.destroy(),this.vao=G.extVertexArrayObject.createVertexArrayOES(),G.bindVertexArrayOES.set(this.vao),A=0,this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=y,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=P;else{A=G.currentNumAttributes||0;for(let se=O;se<A;se++)q.disableVertexAttribArray(se)}u.enableAttributes(q,i);for(const se of f)se.enableAttributes(q,i);S&&S.enableAttributes(q,i),I&&I.enableAttributes(q,i),P&&P.enableAttributes(q,i),u.bind(),u.setVertexAttribPointers(q,i,_);for(const se of f)se.bind(),se.setVertexAttribPointers(q,i,_);S&&(S.bind(),S.setVertexAttribPointers(q,i,_)),y&&y.bind(),I&&(I.bind(),I.setVertexAttribPointers(q,i,_)),P&&(P.bind(),P.setVertexAttribPointers(q,i,_)),G.currentNumAttributes=O}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function cc(p){const i=[];for(let u=0;u<p.length;u++){if(p[u]===null)continue;const f=p[u].split(" ");i.push(f.pop())}return i}class wu{constructor(i,u,f,y,_,S,I){const P=i.gl;this.program=P.createProgram();const A=cc(f.staticAttributes),O=y?y.getBinderAttributes():[],G=A.concat(O),q=pa.prelude.staticUniforms?cc(pa.prelude.staticUniforms):[],se=f.staticUniforms?cc(f.staticUniforms):[],ne=y?y.getBinderUniforms():[],re=q.concat(se).concat(ne),ge=[];for(const je of re)ge.indexOf(je)<0&&ge.push(je);const we=y?y.defines():[];S&&we.push("#define OVERDRAW_INSPECTOR;"),I&&we.push("#define TERRAIN3D;");const Ie=we.concat(pa.prelude.fragmentSource,f.fragmentSource).join(`
`),ae=we.concat(pa.prelude.vertexSource,f.vertexSource).join(`
`),De=P.createShader(P.FRAGMENT_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);P.shaderSource(De,Ie),P.compileShader(De),P.attachShader(this.program,De);const Pe=P.createShader(P.VERTEX_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);P.shaderSource(Pe,ae),P.compileShader(Pe),P.attachShader(this.program,Pe),this.attributes={};const $e={};this.numAttributes=G.length;for(let je=0;je<this.numAttributes;je++)G[je]&&(P.bindAttribLocation(this.program,je,G[je]),this.attributes[G[je]]=je);P.linkProgram(this.program),P.deleteShader(Pe),P.deleteShader(De);for(let je=0;je<ge.length;je++){const qe=ge[je];if(qe&&!$e[qe]){const Fe=P.getUniformLocation(this.program,qe);Fe&&($e[qe]=Fe)}}this.fixedUniforms=_(i,$e),this.terrainUniforms=((je,qe)=>({u_depth:new l.Uniform1i(je,qe.u_depth),u_terrain:new l.Uniform1i(je,qe.u_terrain),u_terrain_dim:new l.Uniform1f(je,qe.u_terrain_dim),u_terrain_matrix:new l.UniformMatrix4f(je,qe.u_terrain_matrix),u_terrain_unpack:new l.Uniform4f(je,qe.u_terrain_unpack),u_terrain_offset:new l.Uniform1f(je,qe.u_terrain_offset),u_terrain_exaggeration:new l.Uniform1f(je,qe.u_terrain_exaggeration)}))(i,$e),this.binderUniforms=y?y.getUniforms(i,$e):[]}draw(i,u,f,y,_,S,I,P,A,O,G,q,se,ne,re,ge,we,Ie){const ae=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(y),i.setColorMode(_),i.setCullFace(S),P){i.activeTexture.set(ae.TEXTURE2),ae.bindTexture(ae.TEXTURE_2D,P.depthTexture),i.activeTexture.set(ae.TEXTURE3),ae.bindTexture(ae.TEXTURE_2D,P.texture);for(const Pe in this.terrainUniforms)this.terrainUniforms[Pe].set(P[Pe])}for(const Pe in this.fixedUniforms)this.fixedUniforms[Pe].set(I[Pe]);re&&re.setUniforms(i,this.binderUniforms,se,{zoom:ne});let De=0;switch(u){case ae.LINES:De=2;break;case ae.TRIANGLES:De=3;break;case ae.LINE_STRIP:De=1}for(const Pe of q.get()){const $e=Pe.vaos||(Pe.vaos={});($e[A]||($e[A]=new lc)).bind(i,this,O,re?re.getPaintVertexBuffers():[],G,Pe.vertexOffset,ge,we,Ie),ae.drawElements(u,Pe.primitiveLength*De,ae.UNSIGNED_SHORT,Pe.primitiveOffset*De*2)}}}function Su(p,i,u){const f=1/sr(u,1,i.transform.tileZoom),y=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,i.transform.tileZoom)/y,S=_*(u.tileID.canonical.x+u.tileID.wrap*y),I=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[f,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[S>>16,I>>16],u_pixel_coord_lower:[65535&S,65535&I]}}const uc=(p,i,u,f)=>{const y=i.style.light,_=y.properties.get("position"),S=[_.x,_.y,_.z],I=l.create$1();y.properties.get("anchor")==="viewport"&&l.fromRotation(I,-i.transform.angle),l.transformMat3(S,S,I);const P=y.properties.get("color");return{u_matrix:p,u_lightpos:S,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[P.r,P.g,P.b],u_vertical_gradient:+u,u_opacity:f}},ih=(p,i,u,f,y,_,S)=>l.extend(uc(p,i,u,f),Su(_,i,S),{u_height_factor:-Math.pow(2,y.overscaledZ)/S.tileSize/8}),rs=p=>({u_matrix:p}),ma=(p,i,u,f)=>l.extend(rs(p),Su(u,i,f)),Tu=(p,i)=>({u_matrix:p,u_world:i}),ku=(p,i,u,f,y)=>l.extend(ma(p,i,u,f),{u_world:y}),dc=(p,i,u,f)=>{const y=p.transform;let _,S;if(f.paint.get("circle-pitch-alignment")==="map"){const I=sr(u,1,y.zoom);_=!0,S=[I,I]}else _=!1,S=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:p.translatePosMatrix(i.posMatrix,u,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:p.pixelRatio,u_extrude_scale:S}},is=(p,i,u)=>{const f=sr(u,1,i.zoom),y=Math.pow(2,i.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:p,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[i.pixelsToGLUnits[0]/(f*y),i.pixelsToGLUnits[1]/(f*y)],u_overscale_factor:_}},ga=(p,i,u=1)=>({u_matrix:p,u_color:i,u_overlay:0,u_overlay_scale:u}),Ds=p=>({u_matrix:p}),ya=(p,i,u,f)=>({u_matrix:p,u_extrude_scale:sr(i,1,u),u_intensity:f});function ul(p,i){const u=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new l.MercatorCoordinate(0,f/u).toLngLat().lat,new l.MercatorCoordinate(0,(f+1)/u).toLngLat().lat]}const Rs=(p,i,u,f)=>{const y=p.transform;return{u_matrix:_a(p,i,u,f),u_ratio:1/sr(i,1,y.zoom),u_device_pixel_ratio:p.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},hc=(p,i,u,f,y)=>l.extend(Rs(p,i,u,y),{u_image:0,u_image_height:f}),Ls=(p,i,u,f,y)=>{const _=p.transform,S=On(i,_);return{u_matrix:_a(p,i,u,y),u_texsize:i.imageAtlasTexture.size,u_ratio:1/sr(i,1,_.zoom),u_device_pixel_ratio:p.pixelRatio,u_image:0,u_scale:[S,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},va=(p,i,u,f,y,_)=>{const S=p.lineAtlas,I=On(i,p.transform),P=u.layout.get("line-cap")==="round",A=S.getDash(f.from,P),O=S.getDash(f.to,P),G=A.width*y.fromScale,q=O.width*y.toScale;return l.extend(Rs(p,i,u,_),{u_patternscale_a:[I/G,-A.height/2],u_patternscale_b:[I/q,-O.height/2],u_sdfgamma:S.width/(256*Math.min(G,q)*p.pixelRatio)/2,u_image:0,u_tex_y_a:A.y,u_tex_y_b:O.y,u_mix:y.t})};function On(p,i){return 1/sr(p,1,i.tileZoom)}function _a(p,i,u,f){return p.translatePosMatrix(f?f.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const xa=(p,i,u,f,y)=>{return{u_matrix:p,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(S=y.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(_=y.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:dl(y.paint.get("raster-hue-rotate"))};var _,S};function dl(p){p*=Math.PI/180;const i=Math.sin(p),u=Math.cos(p);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const ba=(p,i,u,f,y,_,S,I,P,A)=>{const O=y.transform;return{u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:O.cameraToCenterDistance,u_pitch:O.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:O.width/O.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:S,u_coord_matrix:I,u_is_text:+P,u_pitch_with_map:+f,u_texsize:A,u_texture:0}},Os=(p,i,u,f,y,_,S,I,P,A,O)=>{const G=y.transform;return l.extend(ba(p,i,u,f,y,_,S,I,P,A),{u_gamma_scale:f?Math.cos(G._pitch)*G.cameraToCenterDistance:1,u_device_pixel_ratio:y.pixelRatio,u_is_halo:+O})},Eu=(p,i,u,f,y,_,S,I,P,A)=>l.extend(Os(p,i,u,f,y,_,S,I,!0,P,!0),{u_texsize_icon:A,u_texture_icon:1}),Cu=(p,i,u)=>({u_matrix:p,u_opacity:i,u_color:u}),fc=(p,i,u,f,y,_)=>l.extend(function(S,I,P,A){const O=P.imageManager.getPattern(S.from.toString()),G=P.imageManager.getPattern(S.to.toString()),{width:q,height:se}=P.imageManager.getPixelSize(),ne=Math.pow(2,A.tileID.overscaledZ),re=A.tileSize*Math.pow(2,P.transform.tileZoom)/ne,ge=re*(A.tileID.canonical.x+A.tileID.wrap*ne),we=re*A.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:O.tl,u_pattern_br_a:O.br,u_pattern_tl_b:G.tl,u_pattern_br_b:G.br,u_texsize:[q,se],u_mix:I.t,u_pattern_size_a:O.displaySize,u_pattern_size_b:G.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/sr(A,1,P.transform.tileZoom),u_pixel_coord_upper:[ge>>16,we>>16],u_pixel_coord_lower:[65535&ge,65535&we]}}(f,_,u,y),{u_matrix:p,u_opacity:i}),hl={fillExtrusion:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_lightpos:new l.Uniform3f(p,i.u_lightpos),u_lightintensity:new l.Uniform1f(p,i.u_lightintensity),u_lightcolor:new l.Uniform3f(p,i.u_lightcolor),u_vertical_gradient:new l.Uniform1f(p,i.u_vertical_gradient),u_opacity:new l.Uniform1f(p,i.u_opacity)}),fillExtrusionPattern:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_lightpos:new l.Uniform3f(p,i.u_lightpos),u_lightintensity:new l.Uniform1f(p,i.u_lightintensity),u_lightcolor:new l.Uniform3f(p,i.u_lightcolor),u_vertical_gradient:new l.Uniform1f(p,i.u_vertical_gradient),u_height_factor:new l.Uniform1f(p,i.u_height_factor),u_image:new l.Uniform1i(p,i.u_image),u_texsize:new l.Uniform2f(p,i.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,i.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,i.u_scale),u_fade:new l.Uniform1f(p,i.u_fade),u_opacity:new l.Uniform1f(p,i.u_opacity)}),fill:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix)}),fillPattern:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_image:new l.Uniform1i(p,i.u_image),u_texsize:new l.Uniform2f(p,i.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,i.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,i.u_scale),u_fade:new l.Uniform1f(p,i.u_fade)}),fillOutline:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_world:new l.Uniform2f(p,i.u_world)}),fillOutlinePattern:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_world:new l.Uniform2f(p,i.u_world),u_image:new l.Uniform1i(p,i.u_image),u_texsize:new l.Uniform2f(p,i.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,i.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,i.u_scale),u_fade:new l.Uniform1f(p,i.u_fade)}),circle:(p,i)=>({u_camera_to_center_distance:new l.Uniform1f(p,i.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(p,i.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(p,i.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(p,i.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(p,i.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(p,i.u_matrix)}),collisionBox:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_camera_to_center_distance:new l.Uniform1f(p,i.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(p,i.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(p,i.u_extrude_scale),u_overscale_factor:new l.Uniform1f(p,i.u_overscale_factor)}),collisionCircle:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_inv_matrix:new l.UniformMatrix4f(p,i.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(p,i.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(p,i.u_viewport_size)}),debug:(p,i)=>({u_color:new l.UniformColor(p,i.u_color),u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_overlay:new l.Uniform1i(p,i.u_overlay),u_overlay_scale:new l.Uniform1f(p,i.u_overlay_scale)}),clippingMask:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix)}),heatmap:(p,i)=>({u_extrude_scale:new l.Uniform1f(p,i.u_extrude_scale),u_intensity:new l.Uniform1f(p,i.u_intensity),u_matrix:new l.UniformMatrix4f(p,i.u_matrix)}),heatmapTexture:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_world:new l.Uniform2f(p,i.u_world),u_image:new l.Uniform1i(p,i.u_image),u_color_ramp:new l.Uniform1i(p,i.u_color_ramp),u_opacity:new l.Uniform1f(p,i.u_opacity)}),hillshade:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_image:new l.Uniform1i(p,i.u_image),u_latrange:new l.Uniform2f(p,i.u_latrange),u_light:new l.Uniform2f(p,i.u_light),u_shadow:new l.UniformColor(p,i.u_shadow),u_highlight:new l.UniformColor(p,i.u_highlight),u_accent:new l.UniformColor(p,i.u_accent)}),hillshadePrepare:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_image:new l.Uniform1i(p,i.u_image),u_dimension:new l.Uniform2f(p,i.u_dimension),u_zoom:new l.Uniform1f(p,i.u_zoom),u_unpack:new l.Uniform4f(p,i.u_unpack)}),line:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_ratio:new l.Uniform1f(p,i.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,i.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,i.u_units_to_pixels)}),lineGradient:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_ratio:new l.Uniform1f(p,i.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,i.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,i.u_units_to_pixels),u_image:new l.Uniform1i(p,i.u_image),u_image_height:new l.Uniform1f(p,i.u_image_height)}),linePattern:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_texsize:new l.Uniform2f(p,i.u_texsize),u_ratio:new l.Uniform1f(p,i.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,i.u_device_pixel_ratio),u_image:new l.Uniform1i(p,i.u_image),u_units_to_pixels:new l.Uniform2f(p,i.u_units_to_pixels),u_scale:new l.Uniform3f(p,i.u_scale),u_fade:new l.Uniform1f(p,i.u_fade)}),lineSDF:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_ratio:new l.Uniform1f(p,i.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,i.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,i.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(p,i.u_patternscale_a),u_patternscale_b:new l.Uniform2f(p,i.u_patternscale_b),u_sdfgamma:new l.Uniform1f(p,i.u_sdfgamma),u_image:new l.Uniform1i(p,i.u_image),u_tex_y_a:new l.Uniform1f(p,i.u_tex_y_a),u_tex_y_b:new l.Uniform1f(p,i.u_tex_y_b),u_mix:new l.Uniform1f(p,i.u_mix)}),raster:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_tl_parent:new l.Uniform2f(p,i.u_tl_parent),u_scale_parent:new l.Uniform1f(p,i.u_scale_parent),u_buffer_scale:new l.Uniform1f(p,i.u_buffer_scale),u_fade_t:new l.Uniform1f(p,i.u_fade_t),u_opacity:new l.Uniform1f(p,i.u_opacity),u_image0:new l.Uniform1i(p,i.u_image0),u_image1:new l.Uniform1i(p,i.u_image1),u_brightness_low:new l.Uniform1f(p,i.u_brightness_low),u_brightness_high:new l.Uniform1f(p,i.u_brightness_high),u_saturation_factor:new l.Uniform1f(p,i.u_saturation_factor),u_contrast_factor:new l.Uniform1f(p,i.u_contrast_factor),u_spin_weights:new l.Uniform3f(p,i.u_spin_weights)}),symbolIcon:(p,i)=>({u_is_size_zoom_constant:new l.Uniform1i(p,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,i.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,i.u_size_t),u_size:new l.Uniform1f(p,i.u_size),u_camera_to_center_distance:new l.Uniform1f(p,i.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,i.u_pitch),u_rotate_symbol:new l.Uniform1i(p,i.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,i.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,i.u_fade_change),u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,i.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,i.u_coord_matrix),u_is_text:new l.Uniform1i(p,i.u_is_text),u_pitch_with_map:new l.Uniform1i(p,i.u_pitch_with_map),u_texsize:new l.Uniform2f(p,i.u_texsize),u_texture:new l.Uniform1i(p,i.u_texture)}),symbolSDF:(p,i)=>({u_is_size_zoom_constant:new l.Uniform1i(p,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,i.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,i.u_size_t),u_size:new l.Uniform1f(p,i.u_size),u_camera_to_center_distance:new l.Uniform1f(p,i.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,i.u_pitch),u_rotate_symbol:new l.Uniform1i(p,i.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,i.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,i.u_fade_change),u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,i.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,i.u_coord_matrix),u_is_text:new l.Uniform1i(p,i.u_is_text),u_pitch_with_map:new l.Uniform1i(p,i.u_pitch_with_map),u_texsize:new l.Uniform2f(p,i.u_texsize),u_texture:new l.Uniform1i(p,i.u_texture),u_gamma_scale:new l.Uniform1f(p,i.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(p,i.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(p,i.u_is_halo)}),symbolTextAndIcon:(p,i)=>({u_is_size_zoom_constant:new l.Uniform1i(p,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,i.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,i.u_size_t),u_size:new l.Uniform1f(p,i.u_size),u_camera_to_center_distance:new l.Uniform1f(p,i.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,i.u_pitch),u_rotate_symbol:new l.Uniform1i(p,i.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,i.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,i.u_fade_change),u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,i.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,i.u_coord_matrix),u_is_text:new l.Uniform1i(p,i.u_is_text),u_pitch_with_map:new l.Uniform1i(p,i.u_pitch_with_map),u_texsize:new l.Uniform2f(p,i.u_texsize),u_texsize_icon:new l.Uniform2f(p,i.u_texsize_icon),u_texture:new l.Uniform1i(p,i.u_texture),u_texture_icon:new l.Uniform1i(p,i.u_texture_icon),u_gamma_scale:new l.Uniform1f(p,i.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(p,i.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(p,i.u_is_halo)}),background:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_opacity:new l.Uniform1f(p,i.u_opacity),u_color:new l.UniformColor(p,i.u_color)}),backgroundPattern:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_opacity:new l.Uniform1f(p,i.u_opacity),u_image:new l.Uniform1i(p,i.u_image),u_pattern_tl_a:new l.Uniform2f(p,i.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(p,i.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(p,i.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(p,i.u_pattern_br_b),u_texsize:new l.Uniform2f(p,i.u_texsize),u_mix:new l.Uniform1f(p,i.u_mix),u_pattern_size_a:new l.Uniform2f(p,i.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(p,i.u_pattern_size_b),u_scale_a:new l.Uniform1f(p,i.u_scale_a),u_scale_b:new l.Uniform1f(p,i.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,i.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(p,i.u_tile_units_to_pixels)}),terrain:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_texture:new l.Uniform1i(p,i.u_texture)}),terrainDepth:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix)}),terrainCoords:(p,i)=>({u_matrix:new l.UniformMatrix4f(p,i.u_matrix),u_texture:new l.Uniform1i(p,i.u_texture),u_terrain_coords_id:new l.Uniform1f(p,i.u_terrain_coords_id)})};class fo{constructor(i,u,f){this.context=i;const y=i.gl;this.buffer=y.createBuffer(),this.dynamicDraw=Boolean(f),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const os={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class pc{constructor(i,u,f,y){this.length=u.length,this.attributes=f,this.itemSize=u.bytesPerElement,this.dynamicDraw=y,this.context=i;const _=i.gl;this.buffer=_.createBuffer(),i.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let f=0;f<this.attributes.length;f++){const y=u.attributes[this.attributes[f].name];y!==void 0&&i.enableVertexAttribArray(y)}}setVertexAttribPointers(i,u,f){for(let y=0;y<this.attributes.length;y++){const _=this.attributes[y],S=u.attributes[_.name];S!==void 0&&i.vertexAttribPointer(S,_.components,i[os[_.type]],!1,this.itemSize,_.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class un{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Iu extends un{getDefault(){return l.Color.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Mu extends un{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class wa extends un{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Sa extends un{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class mc extends un{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class li extends un{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class ie extends un{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class xe extends un{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Le extends un{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class xt extends un{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class an extends un{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class mn extends un{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Dn extends un{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class nn extends un{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Cn extends un{getDefault(){return l.Color.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ci extends un{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Yr extends un{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class Xi extends un{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class gc extends un{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class yc extends un{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Pu extends un{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class U0 extends un{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class G0 extends un{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class W0 extends un{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class oh extends un{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class zu extends un{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class sh extends un{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class ah extends un{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class fl extends un{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Wp extends un{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Zp extends un{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Au extends un{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class Ta extends Au{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class qp extends Au{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class pl{constructor(i,u,f,y){this.context=i,this.width=u,this.height=f;const _=i.gl,S=this.framebuffer=_.createFramebuffer();if(this.colorAttachment=new Ta(i,S),y&&(this.depthAttachment=new qp(i,S)),_.checkFramebufferStatus(_.FRAMEBUFFER)!==_.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class Gn{constructor(i,u,f){this.blendFunction=i,this.blendColor=u,this.mask=f}}Gn.Replace=[1,0],Gn.disabled=new Gn(Gn.Replace,l.Color.transparent,[!1,!1,!1,!1]),Gn.unblended=new Gn(Gn.Replace,l.Color.transparent,[!0,!0,!0,!0]),Gn.alphaBlended=new Gn([1,771],l.Color.transparent,[!0,!0,!0,!0]);class Xp{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Iu(this),this.clearDepth=new Mu(this),this.clearStencil=new wa(this),this.colorMask=new Sa(this),this.depthMask=new mc(this),this.stencilMask=new li(this),this.stencilFunc=new ie(this),this.stencilOp=new xe(this),this.stencilTest=new Le(this),this.depthRange=new xt(this),this.depthTest=new an(this),this.depthFunc=new mn(this),this.blend=new Dn(this),this.blendFunc=new nn(this),this.blendColor=new Cn(this),this.blendEquation=new ci(this),this.cullFace=new Yr(this),this.cullFaceSide=new Xi(this),this.frontFace=new gc(this),this.program=new yc(this),this.activeTexture=new Pu(this),this.viewport=new U0(this),this.bindFramebuffer=new G0(this),this.bindRenderbuffer=new W0(this),this.bindTexture=new oh(this),this.bindVertexBuffer=new zu(this),this.bindElementBuffer=new sh(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ah(this),this.pixelStoreUnpack=new fl(this),this.pixelStoreUnpackPremultiplyAlpha=new Wp(this),this.pixelStoreUnpackFlipY=new Zp(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new fo(this,i,u)}createVertexBuffer(i,u,f){return new pc(this,i,u,f)}createRenderbuffer(i,u,f){const y=this.gl,_=y.createRenderbuffer();return this.bindRenderbuffer.set(_),y.renderbufferStorage(y.RENDERBUFFER,i,u,f),this.bindRenderbuffer.set(null),_}createFramebuffer(i,u,f){return new pl(this,i,u,f)}clear({color:i,depth:u}){const f=this.gl;let y=0;i&&(y|=f.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(y|=f.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),f.clear(y)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){M(i.blendFunction,Gn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class rn{constructor(i,u,f){this.func=i,this.mask=u,this.range=f}}rn.ReadOnly=!1,rn.ReadWrite=!0,rn.disabled=new rn(519,rn.ReadOnly,[0,1]);const fn=7680;class Bn{constructor(i,u,f,y,_,S){this.test=i,this.ref=u,this.mask=f,this.fail=y,this.depthFail=_,this.pass=S}}Bn.disabled=new Bn({func:519,mask:0},0,0,fn,fn,fn);class Zn{constructor(i,u,f){this.enable=i,this.mode=u,this.frontFace=f}}let vc;function ml(p,i,u,f,y,_,S){const I=p.context,P=I.gl,A=p.useProgram("collisionBox"),O=[];let G=0,q=0;for(let ae=0;ae<f.length;ae++){const De=f[ae],Pe=i.getTile(De),$e=Pe.getBucket(u);if(!$e)continue;let je=De.posMatrix;y[0]===0&&y[1]===0||(je=p.translatePosMatrix(De.posMatrix,Pe,y,_));const qe=S?$e.textCollisionBox:$e.iconCollisionBox,Fe=$e.collisionCircleArray;if(Fe.length>0){const ht=l.create(),rt=je;l.mul(ht,$e.placementInvProjMatrix,p.transform.glCoordMatrix),l.mul(ht,ht,$e.placementViewportMatrix),O.push({circleArray:Fe,circleOffset:q,transform:rt,invTransform:ht,coord:De}),G+=Fe.length/4,q=G}qe&&A.draw(I,P.LINES,rn.disabled,Bn.disabled,p.colorModeForRenderPass(),Zn.disabled,is(je,p.transform,Pe),p.style.terrain&&p.style.terrain.getTerrainData(De),u.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,null,p.transform.zoom,null,null,qe.collisionVertexBuffer)}if(!S||!O.length)return;const se=p.useProgram("collisionCircle"),ne=new l.CollisionCircleLayoutArray;ne.resize(4*G),ne._trim();let re=0;for(const ae of O)for(let De=0;De<ae.circleArray.length/4;De++){const Pe=4*De,$e=ae.circleArray[Pe+0],je=ae.circleArray[Pe+1],qe=ae.circleArray[Pe+2],Fe=ae.circleArray[Pe+3];ne.emplace(re++,$e,je,qe,Fe,0),ne.emplace(re++,$e,je,qe,Fe,1),ne.emplace(re++,$e,je,qe,Fe,2),ne.emplace(re++,$e,je,qe,Fe,3)}(!vc||vc.length<2*G)&&(vc=function(ae){const De=2*ae,Pe=new l.QuadTriangleArray;Pe.resize(De),Pe._trim();for(let $e=0;$e<De;$e++){const je=6*$e;Pe.uint16[je+0]=4*$e+0,Pe.uint16[je+1]=4*$e+1,Pe.uint16[je+2]=4*$e+2,Pe.uint16[je+3]=4*$e+2,Pe.uint16[je+4]=4*$e+3,Pe.uint16[je+5]=4*$e+0}return Pe}(G));const ge=I.createIndexBuffer(vc,!0),we=I.createVertexBuffer(ne,l.collisionCircleLayout.members,!0);for(const ae of O){const De={u_matrix:ae.transform,u_inv_matrix:ae.invTransform,u_camera_to_center_distance:(Ie=p.transform).cameraToCenterDistance,u_viewport_size:[Ie.width,Ie.height]};se.draw(I,P.TRIANGLES,rn.disabled,Bn.disabled,p.colorModeForRenderPass(),Zn.disabled,De,p.style.terrain&&p.style.terrain.getTerrainData(ae.coord),u.id,we,ge,l.SegmentVector.simpleSegment(0,2*ae.circleOffset,ae.circleArray.length,ae.circleArray.length/2),null,p.transform.zoom,null,null,null)}var Ie;we.destroy(),ge.destroy()}Zn.disabled=new Zn(!1,1029,2305),Zn.backCCW=new Zn(!0,1029,2305);const Z0=l.identity(new Float32Array(16));function q0(p,i,u,f,y,_){const{horizontalAlign:S,verticalAlign:I}=l.getAnchorAlignment(p),P=-(S-.5)*i,A=-(I-.5)*u,O=l.evaluateVariableOffset(p,f);return new l.pointGeometry((P/y+O[0])*_,(A/y+O[1])*_)}function Hp(p,i,u,f,y,_,S,I,P,A,O){const G=p.text.placedSymbolArray,q=p.text.dynamicLayoutVertexArray,se=p.icon.dynamicLayoutVertexArray,ne={};q.clear();for(let re=0;re<G.length;re++){const ge=G.get(re),we=p.allowVerticalPlacement&&!ge.placedOrientation,Ie=ge.hidden||!ge.crossTileID||we?null:f[ge.crossTileID];if(Ie){const ae=new l.pointGeometry(ge.anchorX,ge.anchorY),De=tn(ae,u?S:_,O),Pe=oi(y.cameraToCenterDistance,De.signedDistanceFromCamera);let $e=l.evaluateSizeForFeature(p.textSizeData,P,ge)*Pe/l.ONE_EM;u&&($e*=p.tilePixelRatio/I);const{width:je,height:qe,anchor:Fe,textOffset:ht,textBoxScale:rt}=Ie,mt=q0(Fe,je,qe,ht,rt,$e),Gt=u?tn(ae.add(mt),_,O).point:De.point.add(i?mt.rotate(-y.angle):mt),Ht=p.allowVerticalPlacement&&ge.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let Mt=0;Mt<ge.numGlyphs;Mt++)l.addDynamicAttributes(q,Gt,Ht);A&&ge.associatedIconIndex>=0&&(ne[ge.associatedIconIndex]={shiftedAnchor:Gt,angle:Ht})}else Rt(ge.numGlyphs,q)}if(A){se.clear();const re=p.icon.placedSymbolArray;for(let ge=0;ge<re.length;ge++){const we=re.get(ge);if(we.hidden)Rt(we.numGlyphs,se);else{const Ie=ne[ge];if(Ie)for(let ae=0;ae<we.numGlyphs;ae++)l.addDynamicAttributes(se,Ie.shiftedAnchor,Ie.angle);else Rt(we.numGlyphs,se)}}p.icon.dynamicLayoutVertexBuffer.updateData(se)}p.text.dynamicLayoutVertexBuffer.updateData(q)}function X0(p,i,u){return u.iconsInText&&i?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function Du(p,i,u,f,y,_,S,I,P,A,O,G){const q=p.context,se=q.gl,ne=p.transform,re=I==="map",ge=P==="map",we=I!=="viewport"&&u.layout.get("symbol-placement")!=="point",Ie=re&&!ge&&!we,ae=!u.layout.get("symbol-sort-key").isConstant();let De=!1;const Pe=p.depthModeForSublayer(0,rn.ReadOnly),$e=u.layout.get("text-variable-anchor"),je=[];for(const qe of f){const Fe=i.getTile(qe),ht=Fe.getBucket(u);if(!ht)continue;const rt=y?ht.text:ht.icon;if(!rt||!rt.segments.get().length)continue;const mt=rt.programConfigurations.get(u.id),Gt=y||ht.sdfIcons,Ht=y?ht.textSizeData:ht.iconSizeData,Mt=ge||ne.pitch!==0,xn=p.useProgram(X0(Gt,y,ht),mt),bn=l.evaluateSizeForZoom(Ht,ne.zoom),cn=p.style.terrain&&p.style.terrain.getTerrainData(qe);let dn,kn,Lr,Ro,mo=[0,0],Lo=null;if(y){if(kn=Fe.glyphAtlasTexture,Lr=se.LINEAR,dn=Fe.glyphAtlasTexture.size,ht.iconsInText){mo=Fe.imageAtlasTexture.size,Lo=Fe.imageAtlasTexture;const Ki=Ht.kind==="composite"||Ht.kind==="camera";Ro=Mt||p.options.rotating||p.options.zooming||Ki?se.LINEAR:se.NEAREST}}else{const Ki=u.layout.get("icon-size").constantOr(0)!==1||ht.iconsNeedLinear;kn=Fe.imageAtlasTexture,Lr=Gt||p.options.rotating||p.options.zooming||Ki||Mt?se.LINEAR:se.NEAREST,dn=Fe.imageAtlasTexture.size}const Us=sr(Fe,1,p.transform.zoom),Yi=zo(qe.posMatrix,ge,re,p.transform,Us),wi=xi(qe.posMatrix,ge,re,p.transform,Us),ls=$e&&ht.hasTextData(),ju=u.layout.get("icon-text-fit")!=="none"&&ls&&ht.hasIconData();if(we){const Ki=p.style.terrain?(wh,bl)=>p.style.terrain.getElevation(qe,wh,bl):null,Ia=u.layout.get("text-rotation-alignment")==="map";ai(ht,qe.posMatrix,p,y,Yi,wi,ge,A,Ia,Ki)}const Mr=p.translatePosMatrix(qe.posMatrix,Fe,_,S),Qt=we||y&&$e||ju?Z0:Yi,gn=p.translatePosMatrix(wi,Fe,_,S,!0),Or=Gt&&u.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Br;Br=Gt?ht.iconsInText?Eu(Ht.kind,bn,Ie,ge,p,Mr,Qt,gn,dn,mo):Os(Ht.kind,bn,Ie,ge,p,Mr,Qt,gn,y,dn,!0):ba(Ht.kind,bn,Ie,ge,p,Mr,Qt,gn,y,dn);const Xn={program:xn,buffers:rt,uniformValues:Br,atlasTexture:kn,atlasTextureIcon:Lo,atlasInterpolation:Lr,atlasInterpolationIcon:Ro,isSDF:Gt,hasHalo:Or};if(ae&&ht.canOverlap){De=!0;const Ki=rt.segments.get();for(const Ia of Ki)je.push({segments:new l.SegmentVector([Ia]),sortKey:Ia.sortKey,state:Xn,terrainData:cn})}else je.push({segments:rt.segments,sortKey:0,state:Xn,terrainData:cn})}De&&je.sort((qe,Fe)=>qe.sortKey-Fe.sortKey);for(const qe of je){const Fe=qe.state;if(q.activeTexture.set(se.TEXTURE0),Fe.atlasTexture.bind(Fe.atlasInterpolation,se.CLAMP_TO_EDGE),Fe.atlasTextureIcon&&(q.activeTexture.set(se.TEXTURE1),Fe.atlasTextureIcon&&Fe.atlasTextureIcon.bind(Fe.atlasInterpolationIcon,se.CLAMP_TO_EDGE)),Fe.isSDF){const ht=Fe.uniformValues;Fe.hasHalo&&(ht.u_is_halo=1,_c(Fe.buffers,qe.segments,u,p,Fe.program,Pe,O,G,ht,qe.terrainData)),ht.u_is_halo=0}_c(Fe.buffers,qe.segments,u,p,Fe.program,Pe,O,G,Fe.uniformValues,qe.terrainData)}}function _c(p,i,u,f,y,_,S,I,P,A){const O=f.context;y.draw(O,O.gl.TRIANGLES,_,S,I,Zn.disabled,P,A,u.id,p.layoutVertexBuffer,p.indexBuffer,i,u.paint,f.transform.zoom,p.programConfigurations.get(u.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer)}function xc(p,i,u,f,y,_,S){const I=p.context.gl,P=u.paint.get("fill-pattern"),A=P&&P.constantOr(1),O=u.getCrossfadeParameters();let G,q,se,ne,re;S?(q=A&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",G=I.LINES):(q=A?"fillPattern":"fill",G=I.TRIANGLES);for(const ge of f){const we=i.getTile(ge);if(A&&!we.patternsLoaded())continue;const Ie=we.getBucket(u);if(!Ie)continue;const ae=Ie.programConfigurations.get(u.id),De=p.useProgram(q,ae),Pe=p.style.terrain&&p.style.terrain.getTerrainData(ge);A&&(p.context.activeTexture.set(I.TEXTURE0),we.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),ae.updatePaintBuffers(O));const $e=P.constantOr(null);if($e&&we.imageAtlas){const Fe=we.imageAtlas,ht=Fe.patternPositions[$e.to.toString()],rt=Fe.patternPositions[$e.from.toString()];ht&&rt&&ae.setConstantPatternPositions(ht,rt)}const je=Pe?ge:null,qe=p.translatePosMatrix(je?je.posMatrix:ge.posMatrix,we,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(S){ne=Ie.indexBuffer2,re=Ie.segments2;const Fe=[I.drawingBufferWidth,I.drawingBufferHeight];se=q==="fillOutlinePattern"&&A?ku(qe,p,O,we,Fe):Tu(qe,Fe)}else ne=Ie.indexBuffer,re=Ie.segments,se=A?ma(qe,p,O,we):rs(qe);De.draw(p.context,G,y,p.stencilModeForClipping(ge),_,Zn.disabled,se,Pe,u.id,Ie.layoutVertexBuffer,ne,re,u.paint,p.transform.zoom,ae)}}function bc(p,i,u,f,y,_,S){const I=p.context,P=I.gl,A=u.paint.get("fill-extrusion-pattern"),O=A.constantOr(1),G=u.getCrossfadeParameters(),q=u.paint.get("fill-extrusion-opacity");for(const se of f){const ne=i.getTile(se),re=ne.getBucket(u);if(!re)continue;const ge=p.style.terrain&&p.style.terrain.getTerrainData(se),we=re.programConfigurations.get(u.id),Ie=p.useProgram(O?"fillExtrusionPattern":"fillExtrusion",we);O&&(p.context.activeTexture.set(P.TEXTURE0),ne.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),we.updatePaintBuffers(G));const ae=A.constantOr(null);if(ae&&ne.imageAtlas){const je=ne.imageAtlas,qe=je.patternPositions[ae.to.toString()],Fe=je.patternPositions[ae.from.toString()];qe&&Fe&&we.setConstantPatternPositions(qe,Fe)}const De=p.translatePosMatrix(se.posMatrix,ne,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Pe=u.paint.get("fill-extrusion-vertical-gradient"),$e=O?ih(De,p,Pe,q,se,G,ne):uc(De,p,Pe,q);Ie.draw(I,I.gl.TRIANGLES,y,_,S,Zn.backCCW,$e,ge,u.id,re.layoutVertexBuffer,re.indexBuffer,re.segments,u.paint,p.transform.zoom,we,p.style.terrain&&re.centroidVertexBuffer)}}function lh(p,i,u,f,y,_,S){const I=p.context,P=I.gl,A=u.fbo;if(!A)return;const O=p.useProgram("hillshade"),G=p.style.terrain&&p.style.terrain.getTerrainData(i);I.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,A.colorAttachment.get()),O.draw(I,P.TRIANGLES,y,_,S,Zn.disabled,((q,se,ne,re)=>{const ge=ne.paint.get("hillshade-shadow-color"),we=ne.paint.get("hillshade-highlight-color"),Ie=ne.paint.get("hillshade-accent-color");let ae=ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);ne.paint.get("hillshade-illumination-anchor")==="viewport"&&(ae-=q.transform.angle);const De=!q.options.moving;return{u_matrix:re?re.posMatrix:q.transform.calculatePosMatrix(se.tileID.toUnwrapped(),De),u_image:0,u_latrange:ul(0,se.tileID),u_light:[ne.paint.get("hillshade-exaggeration"),ae],u_shadow:ge,u_highlight:we,u_accent:Ie}})(p,u,f,G?i:null),G,f.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}function Yp(p,i,u,f,y,_){const S=p.context,I=S.gl,P=i.dem;if(P&&P.data){const A=P.dim,O=P.stride,G=P.getPixels();if(S.activeTexture.set(I.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||p.getTileTexture(O),i.demTexture){const se=i.demTexture;se.update(G,{premultiply:!1}),se.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else i.demTexture=new V(S,G,I.RGBA,{premultiply:!1}),i.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);S.activeTexture.set(I.TEXTURE0);let q=i.fbo;if(!q){const se=new V(S,{width:A,height:A,data:null},I.RGBA);se.bind(I.LINEAR,I.CLAMP_TO_EDGE),q=i.fbo=S.createFramebuffer(A,A,!0),q.colorAttachment.set(se.texture)}S.bindFramebuffer.set(q.framebuffer),S.viewport.set([0,0,A,A]),p.useProgram("hillshadePrepare").draw(S,I.TRIANGLES,f,y,_,Zn.disabled,((se,ne)=>{const re=ne.stride,ge=l.create();return l.ortho(ge,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(ge,ge,[0,-l.EXTENT,0]),{u_matrix:ge,u_image:1,u_dimension:[re,re],u_zoom:se.overscaledZ,u_unpack:ne.getUnpackVector()}})(i.tileID,P),null,u.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Ru(p,i,u,f,y,_){const S=f.paint.get("raster-fade-duration");if(!_&&S>0){const I=l.exported.now(),P=(I-p.timeAdded)/S,A=i?(I-i.timeAdded)/S:-1,O=u.getSource(),G=y.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),q=!i||Math.abs(i.tileID.overscaledZ-G)>Math.abs(p.tileID.overscaledZ-G),se=q&&p.refreshedUponExpiration?1:l.clamp(q?P:1-A,0,1);return p.refreshedUponExpiration&&P>=1&&(p.refreshedUponExpiration=!1),i?{opacity:1,mix:1-se}:{opacity:se,mix:0}}return{opacity:1,mix:0}}const Lu=new l.Color(1,0,0,1),po=new l.Color(0,1,0,1),Kp=new l.Color(0,0,1,1),ch=new l.Color(1,0,1,1),Jp=new l.Color(0,1,1,1);function ka(p,i,u,f){gl(p,0,i+u/2,p.transform.width,u,f)}function wc(p,i,u,f){gl(p,i-u/2,0,u,p.transform.height,f)}function gl(p,i,u,f,y,_){const S=p.context,I=S.gl;I.enable(I.SCISSOR_TEST),I.scissor(i*p.pixelRatio,u*p.pixelRatio,f*p.pixelRatio,y*p.pixelRatio),S.clear({color:_}),I.disable(I.SCISSOR_TEST)}function H0(p,i,u){const f=p.context,y=f.gl,_=u.posMatrix,S=p.useProgram("debug"),I=rn.disabled,P=Bn.disabled,A=p.colorModeForRenderPass(),O="$debug",G=p.style.terrain&&p.style.terrain.getTerrainData(u);f.activeTexture.set(y.TEXTURE0),p.emptyTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE);const q=i.getTileByID(u.key).latestRawTileData,se=Math.floor((q&&q.byteLength||0)/1024),ne=i.getTile(u).tileSize,re=512/Math.min(ne,512)*(u.overscaledZ/p.transform.zoom)*.5;let ge=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ge+=` => ${u.overscaledZ}`),function(we,Ie){we.initDebugOverlayCanvas();const ae=we.debugOverlayCanvas,De=we.context.gl,Pe=we.debugOverlayCanvas.getContext("2d");Pe.clearRect(0,0,ae.width,ae.height),Pe.shadowColor="white",Pe.shadowBlur=2,Pe.lineWidth=1.5,Pe.strokeStyle="white",Pe.textBaseline="top",Pe.font="bold 36px Open Sans, sans-serif",Pe.fillText(Ie,5,5),Pe.strokeText(Ie,5,5),we.debugOverlayTexture.update(ae),we.debugOverlayTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE)}(p,`${ge} ${se}kB`),S.draw(f,y.TRIANGLES,I,P,Gn.alphaBlended,Zn.disabled,ga(_,l.Color.transparent,re),null,O,p.debugBuffer,p.quadTriangleIndexBuffer,p.debugSegments),S.draw(f,y.LINE_STRIP,I,P,A,Zn.disabled,ga(_,l.Color.red),G,O,p.debugBuffer,p.tileBorderIndexBuffer,p.debugSegments)}function Ou(p,i,u){const f=p.context,y=f.gl,_=p.colorModeForRenderPass(),S=new rn(y.LEQUAL,rn.ReadWrite,p.depthRangeFor3D),I=p.useProgram("terrain"),P=i.getTerrainMesh(),A=i.getTerrainData(u.tileID);f.bindFramebuffer.set(null),f.viewport.set([0,0,p.width,p.height]),f.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,i.getRTTFramebuffer().colorAttachment.get());const O=p.transform.calculatePosMatrix(u.tileID.toUnwrapped());I.draw(f,y.TRIANGLES,S,Bn.disabled,_,Zn.backCCW,{u_matrix:O,u_texture:0},A,"terrain",P.vertexBuffer,P.indexBuffer,P.segments)}function Qp(p,i,u,f){const y=p.context,_=u.tileSize*i.qualityFactor;u.textures[f]||(u.textures[f]=p.getTileTexture(_)||new V(y,{width:_,height:_,data:null},y.gl.RGBA),u.textures[f].bind(y.gl.LINEAR,y.gl.CLAMP_TO_EDGE),f===0&&i.sourceCache.renderHistory.unshift(u.tileID.key));const S=i.getRTTFramebuffer();S.colorAttachment.set(u.textures[f].texture),y.bindFramebuffer.set(S.framebuffer),y.viewport.set([0,0,_,_])}class em{constructor(i){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=i,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=i.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const i=this.painter.style,u=i.terrain;for(const f in i.sourceCaches){this._coordsDescendingInv[f]={};const y=i.sourceCaches[f].getVisibleCoordinates();for(const _ of y){const S=u.sourceCache.getTerrainCoords(_);for(const I in S)this._coordsDescendingInv[f][I]||(this._coordsDescendingInv[f][I]=[]),this._coordsDescendingInv[f][I].push(S[I])}}for(const f of i._order){const y=i._layers[f],_=y.source;if(this._renderToTexture[y.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const S in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][S]=this._coordsDescendingInv[_][S].map(I=>I.key).sort().join()}}return this._renderableTiles.forEach(f=>{for(const y in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[y][f.tileID.key];_&&_!==f.textureCoords[y]&&f.clearTextures(this.painter),u.needsRerender(y,f.tileID)&&f.clearTextures(this.painter)}this._rerender[f.tileID.key]=!f.textures.length}),u.clearRerenderCache(),u.sourceCache.removeOutdated(this.painter),this}renderLayer(i){const u=i.type,f=this.painter,y=f.style._order,_=f.currentLayer,S=_+1===y.length;if(this._renderToTexture[u]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(y[_]),!S))return!0;if(this._renderToTexture[this._prevType]||u==="hillshade"||this._renderToTexture[u]&&S){this._prevType=u;const I=this._stacks.length-1,P=this._stacks[I]||[];for(const A of this._renderableTiles){if(Qp(f,f.style.terrain,A,I),this._rerender[A.tileID.key]){f.context.clear({color:l.Color.transparent});for(let O=0;O<P.length;O++){const G=f.style._layers[P[O]],q=G.source?this._coordsDescendingInv[G.source][A.tileID.key]:[A.tileID];f._renderTileClippingMasks(G,q),f.renderLayer(f,f.style.sourceCaches[G.source],G,q),G.source&&(A.textureCoords[G.source]=this._coordsDescendingInvStr[G.source][A.tileID.key])}}Ou(f,f.style.terrain,A)}if(u==="hillshade"){this._stacks.push([y[_]]);for(const A of this._renderableTiles){const O=this._coordsDescendingInv[i.source][A.tileID.key];Qp(f,f.style.terrain,A,this._stacks.length-1),f.context.clear({color:l.Color.transparent}),f._renderTileClippingMasks(i,O),f.renderLayer(f,f.style.sourceCaches[i.source],i,O),Ou(f,f.style.terrain,A)}return!0}return this._renderToTexture[u]}return!1}}const Sc={symbol:function(p,i,u,f,y){if(p.renderPass!=="translucent")return;const _=Bn.disabled,S=p.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(I,P,A,O,G,q,se){const ne=P.transform,re=G==="map",ge=q==="map";for(const we of I){const Ie=O.getTile(we),ae=Ie.getBucket(A);if(!ae||!ae.text||!ae.text.segments.get().length)continue;const De=l.evaluateSizeForZoom(ae.textSizeData,ne.zoom),Pe=sr(Ie,1,P.transform.zoom),$e=zo(we.posMatrix,ge,re,P.transform,Pe),je=A.layout.get("icon-text-fit")!=="none"&&ae.hasIconData();if(De){const qe=Math.pow(2,ne.zoom-Ie.tileID.overscaledZ);Hp(ae,re,ge,se,ne,$e,we.posMatrix,qe,De,je,P.style.terrain?(Fe,ht)=>P.style.terrain.getElevation(we,Fe,ht):null)}}}(f,p,u,i,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),y),u.paint.get("icon-opacity").constantOr(1)!==0&&Du(p,i,u,f,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),_,S),u.paint.get("text-opacity").constantOr(1)!==0&&Du(p,i,u,f,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),_,S),i.map.showCollisionBoxes&&(ml(p,i,u,f,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),ml(p,i,u,f,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(p,i,u,f){if(p.renderPass!=="translucent")return;const y=u.paint.get("circle-opacity"),_=u.paint.get("circle-stroke-width"),S=u.paint.get("circle-stroke-opacity"),I=!u.layout.get("circle-sort-key").isConstant();if(y.constantOr(1)===0&&(_.constantOr(1)===0||S.constantOr(1)===0))return;const P=p.context,A=P.gl,O=p.depthModeForSublayer(0,rn.ReadOnly),G=Bn.disabled,q=p.colorModeForRenderPass(),se=[];for(let ne=0;ne<f.length;ne++){const re=f[ne],ge=i.getTile(re),we=ge.getBucket(u);if(!we)continue;const Ie=we.programConfigurations.get(u.id),ae=p.useProgram("circle",Ie),De=we.layoutVertexBuffer,Pe=we.indexBuffer,$e=p.style.terrain&&p.style.terrain.getTerrainData(re),je={programConfiguration:Ie,program:ae,layoutVertexBuffer:De,indexBuffer:Pe,uniformValues:dc(p,re,ge,u),terrainData:$e};if(I){const qe=we.segments.get();for(const Fe of qe)se.push({segments:new l.SegmentVector([Fe]),sortKey:Fe.sortKey,state:je})}else se.push({segments:we.segments,sortKey:0,state:je})}I&&se.sort((ne,re)=>ne.sortKey-re.sortKey);for(const ne of se){const{programConfiguration:re,program:ge,layoutVertexBuffer:we,indexBuffer:Ie,uniformValues:ae,terrainData:De}=ne.state;ge.draw(P,A.TRIANGLES,O,G,q,Zn.disabled,ae,De,u.id,we,Ie,ne.segments,u.paint,p.transform.zoom,re)}},heatmap:function(p,i,u,f){if(u.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const y=p.context,_=y.gl,S=Bn.disabled,I=new Gn([_.ONE,_.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(P,A,O){const G=P.gl;P.activeTexture.set(G.TEXTURE1),P.viewport.set([0,0,A.width/4,A.height/4]);let q=O.heatmapFbo;if(q)G.bindTexture(G.TEXTURE_2D,q.colorAttachment.get()),P.bindFramebuffer.set(q.framebuffer);else{const se=G.createTexture();G.bindTexture(G.TEXTURE_2D,se),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.CLAMP_TO_EDGE),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.CLAMP_TO_EDGE),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.LINEAR),q=O.heatmapFbo=P.createFramebuffer(A.width/4,A.height/4,!1),function(ne,re,ge,we){const Ie=ne.gl;Ie.texImage2D(Ie.TEXTURE_2D,0,Ie.RGBA,re.width/4,re.height/4,0,Ie.RGBA,ne.extRenderToTextureHalfFloat?ne.extTextureHalfFloat.HALF_FLOAT_OES:Ie.UNSIGNED_BYTE,null),we.colorAttachment.set(ge)}(P,A,se,q)}})(y,p,u),y.clear({color:l.Color.transparent});for(let P=0;P<f.length;P++){const A=f[P];if(i.hasRenderableParent(A))continue;const O=i.getTile(A),G=O.getBucket(u);if(!G)continue;const q=G.programConfigurations.get(u.id),se=p.useProgram("heatmap",q),{zoom:ne}=p.transform;se.draw(y,_.TRIANGLES,rn.disabled,S,I,Zn.disabled,ya(A.posMatrix,O,ne,u.paint.get("heatmap-intensity")),null,u.id,G.layoutVertexBuffer,G.indexBuffer,G.segments,u.paint,p.transform.zoom,q)}y.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(y,_){const S=y.context,I=S.gl,P=_.heatmapFbo;if(!P)return;S.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,P.colorAttachment.get()),S.activeTexture.set(I.TEXTURE1);let A=_.colorRampTexture;A||(A=_.colorRampTexture=new V(S,_.colorRamp,I.RGBA)),A.bind(I.LINEAR,I.CLAMP_TO_EDGE),y.useProgram("heatmapTexture").draw(S,I.TRIANGLES,rn.disabled,Bn.disabled,y.colorModeForRenderPass(),Zn.disabled,((O,G,q,se)=>{const ne=l.create();l.ortho(ne,0,O.width,O.height,0,0,1);const re=O.context.gl;return{u_matrix:ne,u_world:[re.drawingBufferWidth,re.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:G.paint.get("heatmap-opacity")}})(y,_),null,_.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments,_.paint,y.transform.zoom)}(p,u))},line:function(p,i,u,f){if(p.renderPass!=="translucent")return;const y=u.paint.get("line-opacity"),_=u.paint.get("line-width");if(y.constantOr(1)===0||_.constantOr(1)===0)return;const S=p.depthModeForSublayer(0,rn.ReadOnly),I=p.colorModeForRenderPass(),P=u.paint.get("line-dasharray"),A=u.paint.get("line-pattern"),O=A.constantOr(1),G=u.paint.get("line-gradient"),q=u.getCrossfadeParameters(),se=O?"linePattern":P?"lineSDF":G?"lineGradient":"line",ne=p.context,re=ne.gl;let ge=!0;for(const we of f){const Ie=i.getTile(we);if(O&&!Ie.patternsLoaded())continue;const ae=Ie.getBucket(u);if(!ae)continue;const De=ae.programConfigurations.get(u.id),Pe=p.context.program.get(),$e=p.useProgram(se,De),je=ge||$e.program!==Pe,qe=p.style.terrain&&p.style.terrain.getTerrainData(we),Fe=A.constantOr(null);if(Fe&&Ie.imageAtlas){const mt=Ie.imageAtlas,Gt=mt.patternPositions[Fe.to.toString()],Ht=mt.patternPositions[Fe.from.toString()];Gt&&Ht&&De.setConstantPatternPositions(Gt,Ht)}const ht=qe?we:null,rt=O?Ls(p,Ie,u,q,ht):P?va(p,Ie,u,P,q,ht):G?hc(p,Ie,u,ae.lineClipsArray.length,ht):Rs(p,Ie,u,ht);if(O)ne.activeTexture.set(re.TEXTURE0),Ie.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),De.updatePaintBuffers(q);else if(P&&(je||p.lineAtlas.dirty))ne.activeTexture.set(re.TEXTURE0),p.lineAtlas.bind(ne);else if(G){const mt=ae.gradients[u.id];let Gt=mt.texture;if(u.gradientVersion!==mt.version){let Ht=256;if(u.stepInterpolant){const Mt=i.getSource().maxzoom,xn=we.canonical.z===Mt?Math.ceil(1<<p.transform.maxZoom-we.canonical.z):1;Ht=l.clamp(l.nextPowerOfTwo(ae.maxLineLength/l.EXTENT*1024*xn),256,ne.maxTextureSize)}mt.gradient=l.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:Ht,image:mt.gradient||void 0,clips:ae.lineClipsArray}),mt.texture?mt.texture.update(mt.gradient):mt.texture=new V(ne,mt.gradient,re.RGBA),mt.version=u.gradientVersion,Gt=mt.texture}ne.activeTexture.set(re.TEXTURE0),Gt.bind(u.stepInterpolant?re.NEAREST:re.LINEAR,re.CLAMP_TO_EDGE)}$e.draw(ne,re.TRIANGLES,S,p.stencilModeForClipping(we),I,Zn.disabled,rt,qe,u.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,u.paint,p.transform.zoom,De,ae.layoutVertexBuffer2),ge=!1}},fill:function(p,i,u,f){const y=u.paint.get("fill-color"),_=u.paint.get("fill-opacity");if(_.constantOr(1)===0)return;const S=p.colorModeForRenderPass(),I=u.paint.get("fill-pattern"),P=p.opaquePassEnabledForLayer()&&!I.constantOr(1)&&y.constantOr(l.Color.transparent).a===1&&_.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===P){const A=p.depthModeForSublayer(1,p.renderPass==="opaque"?rn.ReadWrite:rn.ReadOnly);xc(p,i,u,f,A,S,!1)}if(p.renderPass==="translucent"&&u.paint.get("fill-antialias")){const A=p.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,rn.ReadOnly);xc(p,i,u,f,A,S,!0)}},"fill-extrusion":function(p,i,u,f){const y=u.paint.get("fill-extrusion-opacity");if(y!==0&&p.renderPass==="translucent"){const _=new rn(p.context.gl.LEQUAL,rn.ReadWrite,p.depthRangeFor3D);if(y!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))bc(p,i,u,f,_,Bn.disabled,Gn.disabled),bc(p,i,u,f,_,p.stencilModeFor3D(),p.colorModeForRenderPass());else{const S=p.colorModeForRenderPass();bc(p,i,u,f,_,Bn.disabled,S)}}},hillshade:function(p,i,u,f){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const y=p.context,_=p.depthModeForSublayer(0,rn.ReadOnly),S=p.colorModeForRenderPass(),[I,P]=p.renderPass==="translucent"?p.stencilConfigForOverlap(f):[{},f];for(const A of P){const O=i.getTile(A);O.needsHillshadePrepare!==void 0&&O.needsHillshadePrepare&&p.renderPass==="offscreen"?Yp(p,O,u,_,Bn.disabled,S):p.renderPass==="translucent"&&lh(p,A,O,u,_,I[A.overscaledZ],S)}y.viewport.set([0,0,p.width,p.height])},raster:function(p,i,u,f){if(p.renderPass!=="translucent"||u.paint.get("raster-opacity")===0||!f.length)return;const y=p.context,_=y.gl,S=i.getSource(),I=p.useProgram("raster"),P=p.colorModeForRenderPass(),[A,O]=S instanceof We?[{},f]:p.stencilConfigForOverlap(f),G=O[O.length-1].overscaledZ,q=!p.options.moving;for(const se of O){const ne=p.depthModeForSublayer(se.overscaledZ-G,u.paint.get("raster-opacity")===1?rn.ReadWrite:rn.ReadOnly,_.LESS),re=i.getTile(se);re.registerFadeDuration(u.paint.get("raster-fade-duration"));const ge=i.findLoadedParent(se,0),we=Ru(re,ge,i,u,p.transform,p.style.terrain);let Ie,ae;const De=u.paint.get("raster-resampling")==="nearest"?_.NEAREST:_.LINEAR;y.activeTexture.set(_.TEXTURE0),re.texture.bind(De,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),y.activeTexture.set(_.TEXTURE1),ge?(ge.texture.bind(De,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),Ie=Math.pow(2,ge.tileID.overscaledZ-re.tileID.overscaledZ),ae=[re.tileID.canonical.x*Ie%1,re.tileID.canonical.y*Ie%1]):re.texture.bind(De,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST);const Pe=p.style.terrain&&p.style.terrain.getTerrainData(se),$e=Pe?se:null,je=$e?$e.posMatrix:p.transform.calculatePosMatrix(se.toUnwrapped(),q),qe=xa(je,ae||[0,0],Ie||1,we,u);S instanceof We?I.draw(y,_.TRIANGLES,ne,Bn.disabled,P,Zn.disabled,qe,Pe,u.id,S.boundsBuffer,p.quadTriangleIndexBuffer,S.boundsSegments):I.draw(y,_.TRIANGLES,ne,A[se.overscaledZ],P,Zn.disabled,qe,Pe,u.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}},background:function(p,i,u,f){const y=u.paint.get("background-color"),_=u.paint.get("background-opacity");if(_===0)return;const S=p.context,I=S.gl,P=p.transform,A=P.tileSize,O=u.paint.get("background-pattern");if(p.isPatternMissing(O))return;const G=!O&&y.a===1&&_===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==G)return;const q=Bn.disabled,se=p.depthModeForSublayer(0,G==="opaque"?rn.ReadWrite:rn.ReadOnly),ne=p.colorModeForRenderPass(),re=p.useProgram(O?"backgroundPattern":"background"),ge=f||P.coveringTiles({tileSize:A,terrain:p.style.terrain});O&&(S.activeTexture.set(I.TEXTURE0),p.imageManager.bind(p.context));const we=u.getCrossfadeParameters();for(const Ie of ge){const ae=f?Ie.posMatrix:p.transform.calculatePosMatrix(Ie.toUnwrapped()),De=O?fc(ae,_,p,O,{tileID:Ie,tileSize:A},we):Cu(ae,_,y),Pe=p.style.terrain&&p.style.terrain.getTerrainData(Ie);re.draw(S,I.TRIANGLES,se,q,ne,Zn.disabled,De,Pe,u.id,p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}},debug:function(p,i,u){for(let f=0;f<u.length;f++)H0(p,i,u[f])},custom:function(p,i,u){const f=p.context,y=u.implementation;if(p.renderPass==="offscreen"){const _=y.prerender;_&&(p.setCustomLayerDefaults(),f.setColorMode(p.colorModeForRenderPass()),_.call(y,f.gl,p.transform.customLayerMatrix()),f.setDirty(),p.setBaseState())}else if(p.renderPass==="translucent"){p.setCustomLayerDefaults(),f.setColorMode(p.colorModeForRenderPass()),f.setStencilMode(Bn.disabled);const _=y.renderingMode==="3d"?new rn(p.context.gl.LEQUAL,rn.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,rn.ReadOnly);f.setDepthMode(_),y.render(f.gl,p.transform.customLayerMatrix()),f.setDirty(),p.setBaseState(),f.bindFramebuffer.set(null)}}};class uh{constructor(i,u){this.context=new Xp(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.create(),renderTime:0},this.setup(),this.numSublayers=ln.maxUnderzooming+ln.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new At,this.gpuTimers={}}resize(i,u,f){if(this.width=i*f,this.height=u*f,this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const i=this.context,u=new l.PosArray;u.emplaceBack(0,0),u.emplaceBack(l.EXTENT,0),u.emplaceBack(0,l.EXTENT),u.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(u,on.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const f=new l.PosArray;f.emplaceBack(0,0),f.emplaceBack(l.EXTENT,0),f.emplaceBack(0,l.EXTENT),f.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=i.createVertexBuffer(f,on.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const y=new l.RasterBoundsArray;y.emplaceBack(0,0,0,0),y.emplaceBack(l.EXTENT,0,l.EXTENT,0),y.emplaceBack(0,l.EXTENT,0,l.EXTENT),y.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(y,Me.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const _=new l.PosArray;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(_,on.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const S=new l.LineStripIndexArray;S.emplaceBack(0),S.emplaceBack(1),S.emplaceBack(3),S.emplaceBack(2),S.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(S);const I=new l.TriangleIndexArray;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(I),this.emptyTexture=new V(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA);const P=this.context.gl;this.stencilClearMode=new Bn({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=l.create();l.ortho(f,0,this.width,this.height,0,0,1),l.scale(f,f,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,rn.disabled,this.stencilClearMode,Gn.disabled,Zn.disabled,Ds(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const f=this.context,y=f.gl;this.nextStencilID+u.length>256&&this.clearStencil(),f.setColorMode(Gn.disabled),f.setDepthMode(rn.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const S of u){const I=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,P=this.style.terrain&&this.style.terrain.getTerrainData(S);_.draw(f,y.TRIANGLES,rn.disabled,new Bn({func:y.ALWAYS,mask:0},I,255,y.KEEP,y.KEEP,y.REPLACE),Gn.disabled,Zn.disabled,Ds(S.posMatrix),P,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new Bn({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new Bn({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,f=i.sort((S,I)=>I.overscaledZ-S.overscaledZ),y=f[f.length-1].overscaledZ,_=f[0].overscaledZ-y+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const S={};for(let I=0;I<_;I++)S[I+y]=new Bn({func:u.GEQUAL,mask:255},I+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[S,f]}return[{[y]:Bn.disabled},f]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Gn([i.CONSTANT_COLOR,i.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Gn.unblended:Gn.alphaBlended}depthModeForSublayer(i,u,f){if(!this.opaquePassEnabledForLayer())return rn.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new rn(f||this.context.gl.LEQUAL,u,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const f=this.style._order,y=this.style.sourceCaches,_=this.style.terrain&&new em(this);for(const A in y){const O=y[A];O.used&&O.prepare(this.context)}const S={},I={},P={};for(const A in y){const O=y[A];S[A]=O.getVisibleCoordinates(),I[A]=S[A].slice().reverse(),P[A]=O.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let A=0;A<f.length;A++)if(this.style._layers[f[A]].is3D()){this.opaquePassCutoff=A;break}if(_){this.opaquePassCutoff=0;const A=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||A.length)&&(l.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(O,G){const q=O.context,se=q.gl,ne=Gn.unblended,re=new rn(se.LEQUAL,rn.ReadWrite,[0,1]),ge=G.getTerrainMesh(),we=G.sourceCache.getRenderableTiles(),Ie=O.useProgram("terrainDepth");q.bindFramebuffer.set(G.getFramebuffer("depth").framebuffer),q.viewport.set([0,0,O.width/devicePixelRatio,O.height/devicePixelRatio]),q.clear({color:l.Color.transparent,depth:1});for(const ae of we){const De=G.getTerrainData(ae.tileID),Pe=O.transform.calculatePosMatrix(ae.tileID.toUnwrapped());Ie.draw(q,se.TRIANGLES,re,Bn.disabled,ne,Zn.backCCW,{u_matrix:Pe},De,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments)}q.bindFramebuffer.set(null),q.viewport.set([0,0,O.width,O.height])}(this,this.style.terrain),function(O,G){const q=O.context,se=q.gl,ne=Gn.unblended,re=new rn(se.LEQUAL,rn.ReadWrite,[0,1]),ge=G.getTerrainMesh(),we=G.getCoordsTexture(),Ie=G.sourceCache.getRenderableTiles(),ae=O.useProgram("terrainCoords");q.bindFramebuffer.set(G.getFramebuffer("coords").framebuffer),q.viewport.set([0,0,O.width/devicePixelRatio,O.height/devicePixelRatio]),q.clear({color:l.Color.transparent,depth:1}),G.coordsIndex=[];for(const De of Ie){const Pe=G.getTerrainData(De.tileID);q.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,we.texture);const $e=O.transform.calculatePosMatrix(De.tileID.toUnwrapped());ae.draw(q,se.TRIANGLES,re,Bn.disabled,ne,Zn.backCCW,{u_matrix:$e,u_terrain_coords_id:(255-G.coordsIndex.length)/255,u_texture:0},Pe,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments),G.coordsIndex.push(De.tileID.key)}q.bindFramebuffer.set(null),q.viewport.set([0,0,O.width,O.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const A of f){const O=this.style._layers[A];if(!O.hasOffscreenPass()||O.isHidden(this.transform.zoom))continue;const G=I[O.source];(O.type==="custom"||G.length)&&this.renderLayer(this,y[O.source],O,G)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!_)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const A=this.style._layers[f[this.currentLayer]],O=y[A.source],G=S[A.source];this._renderTileClippingMasks(A,G),this.renderLayer(this,O,A,G)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const A=this.style._layers[f[this.currentLayer]],O=y[A.source];if(_&&_.renderLayer(A))continue;const G=(A.type==="symbol"?P:I)[A.source];this._renderTileClippingMasks(A,S[A.source]),this.renderLayer(this,O,A,G)}if(this.options.showTileBoundaries){let A,O;Object.values(this.style._layers).forEach(G=>{G.source&&!G.isHidden(this.transform.zoom)&&(G.source!==(O&&O.id)&&(O=this.style.sourceCaches[G.source]),(!A||A.getSource().maxzoom<O.getSource().maxzoom)&&(A=O))}),A&&Sc.debug(this,A,A.getVisibleCoordinates())}this.options.showPadding&&function(A){const O=A.transform.padding;ka(A,A.transform.height-(O.top||0),3,Lu),ka(A,O.bottom||0,3,po),wc(A,O.left||0,3,Kp),wc(A,A.transform.width-(O.right||0),3,ch);const G=A.transform.centerPoint;(function(q,se,ne,re){gl(q,se-1,ne-10,2,20,re),gl(q,se-10,ne-1,20,2,re)})(A,G.x,A.transform.height-G.y,Jp)}(this),this.context.setDefault()}renderLayer(i,u,f,y){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(y||[]).length)&&(this.id=f.id,this.gpuTimingStart(f),Sc[f.type](i,u,f,y,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;let f=this.gpuTimers[i.id];f||(f=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),f.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,f.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const u={};for(const f in i){const y=i[f],_=this.context.extTimerQuery,S=_.getQueryObjectEXT(y.query,_.QUERY_RESULT_EXT)/1e6;_.deleteQueryEXT(y.query),u[f]=S}return u}translatePosMatrix(i,u,f,y,_){if(!f[0]&&!f[1])return i;const S=_?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(S){const A=Math.sin(S),O=Math.cos(S);f=[f[0]*O-f[1]*A,f[0]*A+f[1]*O]}const I=[_?f[0]:sr(u,f[0],this.transform.zoom),_?f[1]:sr(u,f[1],this.transform.zoom),0],P=new Float32Array(16);return l.translate(P,i,I),P}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),f=this.imageManager.getPattern(i.to.toString());return!u||!f}useProgram(i,u){this.cache=this.cache||{};const f=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new wu(this.context,i,pa[i],u,hl[i],this._showOverdrawInspector,this.style.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new V(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Bu{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,f){const y=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const P=1/(I=l.transformMat4([],I,i))[3]/u*y;return l.mul$1(I,I,[P,P,1/I[3],P])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const P=l.sub([],_[I[0]],_[I[1]]),A=l.sub([],_[I[2]],_[I[1]]),O=l.normalize([],l.cross([],P,A)),G=-l.dot(O,_[I[1]]);return O.concat(G)});return new Bu(_,S)}}class Tc{constructor(i,u){this.min=i,this.max=u,this.center=l.scale$1([],l.add([],this.min,this.max),.5)}quadrant(i){const u=[i%2==0,i<2],f=l.clone$2(this.min),y=l.clone$2(this.max);for(let _=0;_<u.length;_++)f[_]=u[_]?this.min[_]:this.center[_],y[_]=u[_]?this.center[_]:this.max[_];return y[2]=this.max[2],new Tc(f,y)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let y=0;y<i.planes.length;y++){const _=i.planes[y];let S=0;for(let I=0;I<u.length;I++)l.dot$1(_,u[I])>=0&&S++;if(S===0)return 0;S!==u.length&&(f=!1)}if(f)return 2;for(let y=0;y<3;y++){let _=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let I=0;I<i.points.length;I++){const P=i.points[I][y]-this.min[y];_=Math.min(_,P),S=Math.max(S,P)}if(S<0||_>this.max[y]-this.min[y])return 0}return 1}}class yl{constructor(i=0,u=0,f=0,y=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(f)||f<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=f,this.right=y}interpolate(i,u,f){return u.top!=null&&i.top!=null&&(this.top=l.number(i.top,u.top,f)),u.bottom!=null&&i.bottom!=null&&(this.bottom=l.number(i.bottom,u.bottom,f)),u.left!=null&&i.left!=null&&(this.left=l.number(i.left,u.left,f)),u.right!=null&&i.right!=null&&(this.right=l.number(i.right,u.right,f)),this}getCenter(i,u){const f=l.clamp((this.left+i-this.right)/2,0,i),y=l.clamp((this.top+u-this.bottom)/2,0,u);return new l.pointGeometry(f,y)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new yl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class kc{constructor(i,u,f,y,_){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=_===void 0||!!_,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=f??0,this._maxPitch=y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new yl,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const i=new kc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i._elevation=this._elevation,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-l.wrap(i,-180,180)*Math.PI/180;var f;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(f=new l.ARRAY_TYPE(4),l.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f),function(y,_,S){var I=_[0],P=_[1],A=_[2],O=_[3],G=Math.sin(S),q=Math.cos(S);y[0]=I*q+A*G,y[1]=P*q+O*G,y[2]=I*-G+A*q,y[3]=P*-G+O*q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=l.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,f){this._unmodified=!1,this._edgeInsets.interpolate(i,u,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new l.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const f=this.pointCoordinate(new l.pointGeometry(0,0)),y=this.pointCoordinate(new l.pointGeometry(this.width,0)),_=this.pointCoordinate(new l.pointGeometry(this.width,this.height)),S=this.pointCoordinate(new l.pointGeometry(0,this.height)),I=Math.floor(Math.min(f.x,y.x,_.x,S.x)),P=Math.floor(Math.max(f.x,y.x,_.x,S.x)),A=1;for(let O=I-A;O<=P+A;O++)O!==0&&u.push(new l.UnwrappedTileID(O,i))}return u}coveringTiles(i){var u,f;let y=this.coveringZoomLevel(i);const _=y;if(i.minzoom!==void 0&&y<i.minzoom)return[];i.maxzoom!==void 0&&y>i.maxzoom&&(y=i.maxzoom);const S=this.pointCoordinate(this.getCameraPoint()),I=l.MercatorCoordinate.fromLngLat(this.center),P=Math.pow(2,y),A=[P*S.x,P*S.y,0],O=[P*I.x,P*I.y,0],G=Bu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,y);let q=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(q=y);const se=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,ne=ae=>({aabb:new Tc([ae*P,0,0],[(ae+1)*P,P,0]),zoom:0,x:0,y:0,wrap:ae,fullyVisible:!1}),re=[],ge=[],we=y,Ie=i.reparseOverscaled?_:y;if(this._renderWorldCopies)for(let ae=1;ae<=3;ae++)re.push(ne(-ae)),re.push(ne(ae));for(re.push(ne(0));re.length>0;){const ae=re.pop(),De=ae.x,Pe=ae.y;let $e=ae.fullyVisible;if(!$e){const mt=ae.aabb.intersects(G);if(mt===0)continue;$e=mt===2}const je=i.terrain?A:O,qe=ae.aabb.distanceX(je),Fe=ae.aabb.distanceY(je),ht=Math.max(Math.abs(qe),Math.abs(Fe)),rt=se+(1<<we-ae.zoom)-2;if(ae.zoom===we||ht>rt&&ae.zoom>=q){const mt=we-ae.zoom,Gt=A[0]-.5-(De<<mt),Ht=A[1]-.5-(Pe<<mt);ge.push({tileID:new l.OverscaledTileID(ae.zoom===we?Ie:ae.zoom,ae.wrap,ae.zoom,De,Pe),distanceSq:l.sqrLen([O[0]-.5-De,O[1]-.5-Pe]),tileDistanceToCamera:Math.sqrt(Gt*Gt+Ht*Ht)})}else for(let mt=0;mt<4;mt++){const Gt=(De<<1)+mt%2,Ht=(Pe<<1)+(mt>>1),Mt=ae.zoom+1;let xn=ae.aabb.quadrant(mt);if(i.terrain){const bn=new l.OverscaledTileID(Mt,ae.wrap,Mt,Gt,Ht),cn=i.terrain.getMinMaxElevation(bn),dn=(u=cn.minElevation)!==null&&u!==void 0?u:this.elevation,kn=(f=cn.maxElevation)!==null&&f!==void 0?f:this.elevation;xn=new Tc([xn.min[0],xn.min[1],dn],[xn.max[0],xn.max[1],kn])}re.push({aabb:xn,zoom:Mt,x:Gt,y:Ht,wrap:ae.wrap,fullyVisible:$e})}}return ge.sort((ae,De)=>ae.distanceSq-De.distanceSq).map(ae=>ae.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=l.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.pointGeometry(l.mercatorXfromLng(i.lng)*this.worldSize,l.mercatorYfromLat(u)*this.worldSize)}unproject(i){return new l.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(i){this.freezeElevation||(this.elevation=i?this.getElevation(this._center,i):0)}getElevation(i,u){const f=l.MercatorCoordinate.fromLngLat(i),y=(1<<this.tileZoom)*l.EXTENT,_=f.x*y,S=f.y*y,I=Math.floor(_/l.EXTENT),P=Math.floor(S/l.EXTENT),A=new l.OverscaledTileID(this.tileZoom,0,this.tileZoom,I,P);return u.getElevation(A,_%l.EXTENT,S%l.EXTENT,l.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const u=this.pointLocation(this.centerPoint,i),f=this.getElevation(u,i);if(!(this.elevation-f))return;const y=this.getCameraPosition(),_=l.MercatorCoordinate.fromLngLat(y.lngLat,y.altitude),S=l.MercatorCoordinate.fromLngLat(u,f),I=_.x-S.x,P=_.y-S.y,A=_.z-S.z,O=Math.sqrt(I*I+P*P+A*A),G=this.scaleZoom(this.cameraToCenterDistance/O/this.tileSize);this._elevation=f,this._center=u,this.zoom=G}setLocationAtPoint(i,u){const f=this.pointCoordinate(u),y=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(i),S=new l.MercatorCoordinate(_.x-(f.x-y.x),_.y-(f.y-y.y));this.center=this.coordinateLocation(S),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),this.getElevation(i,u),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return l.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){const q=u.pointCoordinate(i);if(q!=null)return q}const f=[i.x,i.y,0,1],y=[i.x,i.y,1,1];l.transformMat4(f,f,this.pixelMatrixInverse),l.transformMat4(y,y,this.pixelMatrixInverse);const _=f[3],S=y[3],I=f[1]/_,P=y[1]/S,A=f[2]/_,O=y[2]/S,G=A===O?0:(0-A)/(O-A);return new l.MercatorCoordinate(l.number(f[0]/_,y[0]/S,G)/this.worldSize,l.number(I,P,G)/this.worldSize)}coordinatePoint(i,u=0,f=this.pixelMatrix){const y=[i.x*this.worldSize,i.y*this.worldSize,u,1];return l.transformMat4(y,y,f),new l.pointGeometry(y[0]/y[3],y[1]/y[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new l.LngLatBounds().extend(this.pointLocation(new l.pointGeometry(0,i))).extend(this.pointLocation(new l.pointGeometry(this.width,i))).extend(this.pointLocation(new l.pointGeometry(this.width,this.height))).extend(this.pointLocation(new l.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const f=i.key,y=u?this._alignedPosMatrixCache:this._posMatrixCache;if(y[f])return y[f];const _=i.canonical,S=this.worldSize/this.zoomScale(_.z),I=_.x+Math.pow(2,_.z)*i.wrap,P=l.identity(new Float64Array(16));return l.translate(P,P,[I*S,_.y*S,0]),l.scale(P,P,[S/l.EXTENT,S/l.EXTENT,1]),l.multiply(P,u?this.alignedProjMatrix:this.projMatrix,P),y[f]=new Float32Array(P),y[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,f,y,_=-90,S=90,I=-180,P=180;const A=this.size,O=this._unmodified;if(this.latRange){const se=this.latRange;_=l.mercatorYfromLat(se[1])*this.worldSize,S=l.mercatorYfromLat(se[0])*this.worldSize,i=S-_<A.y?A.y/(S-_):0}if(this.lngRange){const se=this.lngRange;I=l.wrap(l.mercatorXfromLng(se[0])*this.worldSize,0,this.worldSize),P=l.wrap(l.mercatorXfromLng(se[1])*this.worldSize,0,this.worldSize),P<I&&(P+=this.worldSize),u=P-I<A.x?A.x/(P-I):0}const G=this.point,q=Math.max(u||0,i||0);if(q)return this.center=this.unproject(new l.pointGeometry(u?(P+I)/2:G.x,i?(S+_)/2:G.y)),this.zoom+=this.scaleZoom(q),this._unmodified=O,void(this._constraining=!1);if(this.latRange){const se=G.y,ne=A.y/2;se-ne<_&&(y=_+ne),se+ne>S&&(y=S-ne)}if(this.lngRange){const se=(I+P)/2,ne=l.wrap(G.x,se-this.worldSize/2,se+this.worldSize/2),re=A.x/2;ne-re<I&&(f=I+re),ne+re>P&&(f=P-re)}f===void 0&&y===void 0||(this.center=this.unproject(new l.pointGeometry(f!==void 0?f:G.x,y!==void 0?y:G.y)).wrap()),this._unmodified=O,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let y=l.identity(new Float64Array(16));l.scale(y,y,[this.width/2,-this.height/2,1]),l.translate(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=l.identity(new Float64Array(16)),l.scale(y,y,[1,-1,1]),l.translate(y,y,[-1,-1,0]),l.scale(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const _=Math.PI/2+this._pitch,S=this._fov*(.5+i.y/this.height),I=Math.sin(S)*this.cameraToSeaLevelDistance/Math.sin(l.clamp(Math.PI-_-S,.01,Math.PI-.01)),P=this.getHorizon(),A=2*Math.atan(P/this.cameraToCenterDistance)*(.5+i.y/(2*P)),O=Math.sin(A)*this.cameraToSeaLevelDistance/Math.sin(l.clamp(Math.PI-_-A,.01,Math.PI-.01)),G=Math.cos(Math.PI/2-this._pitch)*I+this.cameraToSeaLevelDistance,q=Math.cos(Math.PI/2-this._pitch)*O+this.cameraToSeaLevelDistance,se=1.01*Math.min(G,q),ne=this.height/50;y=new Float64Array(16),l.perspective(y,this._fov,this.width/this.height,ne,se),y[8]=2*-i.x/this.width,y[9]=2*i.y/this.height,l.scale(y,y,[1,-1,1]),l.translate(y,y,[0,0,-this.cameraToCenterDistance]),l.rotateX(y,y,this._pitch),l.rotateZ(y,y,this.angle),l.translate(y,y,[-u,-f,0]),this.mercatorMatrix=l.scale([],y,[this.worldSize,this.worldSize,this.worldSize]),l.scale(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,y),l.translate(y,y,[0,0,-this.elevation]),this.projMatrix=y,this.invProjMatrix=l.invert([],y),this.pixelMatrix3D=l.multiply(new Float64Array(16),this.labelPlaneMatrix,y);const re=this.width%2/2,ge=this.height%2/2,we=Math.cos(this.angle),Ie=Math.sin(this.angle),ae=u-Math.round(u)+we*re+Ie*ge,De=f-Math.round(f)+we*ge+Ie*re,Pe=new Float64Array(y);if(l.translate(Pe,Pe,[ae>.5?ae-1:ae,De>.5?De-1:De,0]),this.alignedProjMatrix=Pe,y=l.invert(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new l.pointGeometry(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return l.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.pointGeometry(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let f=u.x,y=u.y,_=u.x,S=u.y;for(const I of i)f=Math.min(f,I.x),y=Math.min(y,I.y),_=Math.max(_,I.x),S=Math.max(S,I.y);return[new l.pointGeometry(f,y),new l.pointGeometry(_,y),new l.pointGeometry(_,S),new l.pointGeometry(f,S),new l.pointGeometry(f,y)]}}}class tm{constructor(i){this._hashName=i&&encodeURIComponent(i),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(u,f){let y=!1,_=null;const S=()=>{_=null,y&&(u(),_=setTimeout(S,300),y=!1)};return()=>(y=!0,_||S(),_)}(this._updateHashUnthrottled.bind(this))}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,y=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,y),S=Math.round(u.lng*_)/_,I=Math.round(u.lat*_)/_,P=this._map.getBearing(),A=this._map.getPitch();let O="";if(O+=i?`/${S}/${I}/${f}`:`${f}/${I}/${S}`,(P||A)&&(O+="/"+Math.round(10*P)/10),A&&(O+=`/${Math.round(A)}`),this._hashName){const G=this._hashName;let q=!1;const se=window.location.hash.slice(1).split("&").map(ne=>{const re=ne.split("=")[0];return re===G?(q=!0,`${re}=${O}`):ne}).filter(ne=>ne);return q||se.push(`${G}=${O}`),`#${se.join("&")}`}return`#${O}`}_getCurrentHash(){const i=window.location.hash.replace("#","");if(this._hashName){let u;return i.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(u=f)}),(u&&u[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:u,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,i)}catch{}}}const Ec={linearity:.3,easing:l.bezier(0,0,.3,1)},nm=l.extend({deceleration:2500,maxSpeed:1400},Ec),rm=l.extend({deceleration:20,maxSpeed:1400},Ec),im=l.extend({deceleration:1e3,maxSpeed:360},Ec),vl=l.extend({deceleration:1e3,maxSpeed:90},Ec);class om{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=l.exported.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(u.pan.mag()){const _=Ic(u.pan.mag(),f,l.extend({},nm,i||{}));y.offset=u.pan.mult(_.amount/u.pan.mag()),y.center=this._map.transform.center,Cc(y,_)}if(u.zoom){const _=Ic(u.zoom,f,rm);y.zoom=this._map.transform.zoom+_.amount,Cc(y,_)}if(u.bearing){const _=Ic(u.bearing,f,im);y.bearing=this._map.transform.bearing+l.clamp(_.amount,-179,179),Cc(y,_)}if(u.pitch){const _=Ic(u.pitch,f,vl);y.pitch=this._map.transform.pitch+_.amount,Cc(y,_)}if(y.zoom||y.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;y.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),l.extend(y,{noMoveStart:!0})}}function Cc(p,i){(!p.duration||p.duration<i.duration)&&(p.duration=i.duration,p.easing=i.easing)}function Ic(p,i,u){const{maxSpeed:f,linearity:y,deceleration:_}=u,S=l.clamp(p*y/(i/1e3),-f,f),I=Math.abs(S)/(_*y);return{easing:u.easing,duration:1e3*I,amount:S*(I/2)}}class Ri extends l.Event{constructor(i,u,f,y={}){const _=E.mousePos(u.getCanvasContainer(),f),S=u.unproject(_);super(i,l.extend({point:_,lngLat:S,originalEvent:f},y)),this._defaultPrevented=!1,this.target=u}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Mc extends l.Event{constructor(i,u,f){const y=i==="touchend"?f.changedTouches:f.touches,_=E.touchPos(u.getCanvasContainer(),y),S=_.map(P=>u.unproject(P)),I=_.reduce((P,A,O,G)=>P.add(A.div(G.length)),new l.pointGeometry(0,0));super(i,{points:_,point:I,lngLats:S,lngLat:u.unproject(I),originalEvent:f}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Li extends l.Event{constructor(i,u,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Y0{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Li(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new Ri(i.type,this._map,i))}mouseup(i){this._map.fire(new Ri(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Ri(i.type,this._map,i))}dblclick(i){return this._firePreventable(new Ri(i.type,this._map,i))}mouseover(i){this._map.fire(new Ri(i.type,this._map,i))}mouseout(i){this._map.fire(new Ri(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Mc(i.type,this._map,i))}touchmove(i){this._map.fire(new Mc(i.type,this._map,i))}touchend(i){this._map.fire(new Mc(i.type,this._map,i))}touchcancel(i){this._map.fire(new Mc(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Bs{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new Ri(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ri("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new Ri(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class sm{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(E.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const f=u;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=f,this._box||(this._box=E.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const _=Math.min(y.x,f.x),S=Math.max(y.x,f.x),I=Math.min(y.y,f.y),P=Math.max(y.y,f.y);E.setTransform(this._box,`translate(${_}px,${I}px)`),this._box.style.width=S-_+"px",this._box.style.height=P-I+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const f=this._startPos,y=u;if(this.reset(),E.suppressClick(),f.x!==y.x||f.y!==y.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:_=>_.fitScreenCoordinates(f,y,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(E.remove(this._box),this._box=null),E.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new l.Event(i,{originalEvent:u}))}}function ss(p,i){if(p.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${p.length}, points ${i.length}`);const u={};for(let f=0;f<p.length;f++)u[p[f].identifier]=i[f];return u}class Pc{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(y){const _=new l.pointGeometry(0,0);for(const S of y)_._add(S);return _.div(y.length)}(u),this.touches=ss(f,u)))}touchmove(i,u,f){if(this.aborted||!this.centroid)return;const y=ss(f,u);for(const _ in this.touches){const S=this.touches[_],I=y[_];(!I||I.dist(S)>30)&&(this.aborted=!0)}}touchend(i,u,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class dh{constructor(i){this.singleTap=new Pc(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,f){this.singleTap.touchstart(i,u,f)}touchmove(i,u,f){this.singleTap.touchmove(i,u,f)}touchend(i,u,f){const y=this.singleTap.touchend(i,u,f);if(y){const _=i.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(y)<30;if(_&&S||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class K0{constructor(){this._zoomIn=new dh({numTouches:1,numTaps:2}),this._zoomOut=new dh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,f){this._zoomIn.touchstart(i,u,f),this._zoomOut.touchstart(i,u,f)}touchmove(i,u,f){this._zoomIn.touchmove(i,u,f),this._zoomOut.touchmove(i,u,f)}touchend(i,u,f){const y=this._zoomIn.touchend(i,u,f),_=this._zoomOut.touchend(i,u,f);return y?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:S.getZoom()+1,around:S.unproject(y)},{originalEvent:i})}):_?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:S.getZoom()-1,around:S.unproject(_)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const J0={0:1,2:2};class Fu{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(i,u){return!1}_move(i,u){return{}}mousedown(i,u){if(this._lastPoint)return;const f=E.mouseButton(i);this._correctButton(i,f)&&(this._lastPoint=u,this._eventButton=f)}mousemoveWindow(i,u){const f=this._lastPoint;if(f){if(i.preventDefault(),function(y,_){const S=J0[_];return y.buttons===void 0||(y.buttons&S)!==S}(i,this._eventButton))this.reset();else if(this._moved||!(u.dist(f)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(f,u)}}mouseupWindow(i){this._lastPoint&&E.mouseButton(i)===this._eventButton&&(this._moved&&E.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zc extends Fu{mousedown(i,u){super.mousedown(i,u),this._lastPoint&&(this._active=!0)}_correctButton(i,u){return u===0&&!i.ctrlKey}_move(i,u){return{around:u,panDelta:u.sub(i)}}}class as extends Fu{_correctButton(i,u){return u===0&&i.ctrlKey||u===2}_move(i,u){const f=.8*(u.x-i.x);if(f)return this._active=!0,{bearingDelta:f}}contextmenu(i){i.preventDefault()}}class yt extends Fu{_correctButton(i,u){return u===0&&i.ctrlKey||u===2}_move(i,u){const f=-.5*(u.y-i.y);if(f)return this._active=!0,{pitchDelta:f}}contextmenu(i){i.preventDefault()}}class am{constructor(i,u){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,u,f){return this._calculateTransform(i,u,f)}touchmove(i,u,f){if(this._map._cooperativeGestures&&(this._minTouches===2&&f.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,f.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(f.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,f)}touchend(i,u,f){this._calculateTransform(i,u,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,f){f.length>0&&(this._active=!0);const y=ss(f,u),_=new l.pointGeometry(0,0),S=new l.pointGeometry(0,0);let I=0;for(const A in y){const O=y[A],G=this._touches[A];G&&(_._add(O),S._add(O.sub(G)),I++,y[A]=O)}if(this._touches=y,I<this._minTouches||!S.mag())return;const P=S.div(I);return this._sum._add(P),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(I),panDelta:P}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ea{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,u,f){return{}}touchstart(i,u,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,f){if(!this._firstTwoTouches)return;i.preventDefault();const[y,_]=this._firstTwoTouches,S=Fs(f,u,y),I=Fs(f,u,_);if(!S||!I)return;const P=this._aroundCenter?null:S.add(I).div(2);return this._move([S,I],P,i)}touchend(i,u,f){if(!this._firstTwoTouches)return;const[y,_]=this._firstTwoTouches,S=Fs(f,u,y),I=Fs(f,u,_);S&&I||(this._active&&E.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Fs(p,i,u){for(let f=0;f<p.length;f++)if(p[f].identifier===u)return i[f]}function hh(p,i){return Math.log(p/i)/Math.LN2}class ct extends Ea{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(hh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:hh(this._distance,f),pinchAround:u}}}function Nu(p,i){return 180*p.angleWith(i)/Math.PI}class Q0 extends Ea{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const f=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Nu(this._vector,f),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,f=Nu(i,this._startVector);return Math.abs(f)<u}}function fh(p){return Math.abs(p.y)>Math.abs(p.x)}class ph extends Ea{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,f){super.touchstart(i,u,f),this._currentTouchCount=f.length}_start(i){this._lastPoints=i,fh(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,f){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const y=i[0].sub(this._lastPoints[0]),_=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,_,f.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(y.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,f){if(this._valid!==void 0)return this._valid;const y=i.mag()>=2,_=u.mag()>=2;if(!y&&!_)return;if(!y||!_)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const S=i.y>0==u.y>0;return fh(i)&&fh(u)&&S}}const lm={panStep:100,bearingStep:15,pitchStep:10};class cm{constructor(){const i=lm;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,f=0,y=0,_=0,S=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),_=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),_=1);break;case 38:i.shiftKey?y=1:(i.preventDefault(),S=-1);break;case 40:i.shiftKey?y=-1:(i.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(f=0,y=0),{cameraAnimation:I=>{const P=I.getZoom();I.easeTo({duration:300,easeId:"keyboardHandler",easing:ev,zoom:u?Math.round(P)+u*(i.shiftKey?2:1):P,bearing:I.getBearing()+f*this._bearingStep,pitch:I.getPitch()+y*this._pitchStep,offset:[-_*this._panStep,-S*this._panStep],center:I.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ev(p){return p*(2-p)}const um=4.000244140625;class mh{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;i.preventDefault()}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const f=l.exported.now(),y=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,u!==0&&u%um==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(y*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=E.mousePos(this._el,i);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(u)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>um?this._wheelZoomRate:this._defaultZoomRate;let P=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&P!==0&&(P=1/P);const A=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(A*P))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,f=this._startZoom,y=this._easing;let _,S=!1;if(this._type==="wheel"&&f&&y){const I=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),P=y(I);_=l.number(f,u,P),I<1?this._frameId||(this._frameId=!0):S=!0}else _=u,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:_-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=l.ease;if(this._prevEase){const f=this._prevEase,y=(l.exported.now()-f.start)/f.duration,_=f.easing(y+.01)-f.easing(y),S=.27/Math.sqrt(_*_+1e-4)*.01,I=Math.sqrt(.0729-S*S);u=l.bezier(S,I,.25,1)}return this._prevEase={start:l.exported.now(),duration:i,easing:u},u}reset(){this._active=!1}}class gh{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class yh{constructor(){this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:f.getZoom()+(i.shiftKey?-1:1),around:f.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vh{constructor(){this._tap=new dh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,u,f){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?f.length>0&&(this._swipePoint=u[0],this._swipeTouch=f[0].identifier):this._tap.touchstart(i,u,f))}touchmove(i,u,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const y=u[0],_=y.y-this._swipePoint.y;return this._swipePoint=y,i.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(i,u,f)}touchend(i,u,f){this._tapTime?this._swipePoint&&f.length===0&&this.reset():this._tap.touchend(i,u,f)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bi{constructor(i,u,f){this._el=i,this._mousePan=u,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ns{constructor(i,u,f){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class dm{constructor(i,u,f,y){this._el=i,this._touchZoom=u,this._touchRotate=f,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const _l=p=>p.zoom||p.drag||p.pitch||p.rotate;class _h extends l.Event{}function Ac(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class hm{constructor(i,u){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new om(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u),l.bindAll(["handleEvent","handleWindowEvent"],this);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,_,S]of this._listeners)E.addEventListener(y,_,y===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[i,u,f]of this._listeners)E.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){const u=this._map,f=u.getCanvasContainer();this._add("mapEvent",new Y0(u,i));const y=u.boxZoom=new sm(u,i);this._add("boxZoom",y);const _=new K0,S=new yh;u.doubleClickZoom=new gh(S,_),this._add("tapZoom",_),this._add("clickZoom",S);const I=new vh;this._add("tapDragZoom",I);const P=u.touchPitch=new ph(u);this._add("touchPitch",P);const A=new as(i),O=new yt(i);u.dragRotate=new Ns(i,A,O),this._add("mouseRotate",A,["mousePitch"]),this._add("mousePitch",O,["mouseRotate"]);const G=new zc(i),q=new am(i,u);u.dragPan=new bi(f,G,q),this._add("mousePan",G),this._add("touchPan",q,["touchZoom","touchRotate"]);const se=new Q0,ne=new ct;u.touchZoomRotate=new dm(f,ne,se,I),this._add("touchRotate",se,["touchPan","touchZoom"]),this._add("touchZoom",ne,["touchPan","touchRotate"]);const re=u.scrollZoom=new mh(u,this);this._add("scrollZoom",re,["mousePan"]);const ge=u.keyboard=new cm;this._add("keyboard",ge),this._add("blockableMapEvent",new Bs(u));for(const we of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[we]&&u[we].enable(i[we])}_add(i,u,f){this._handlers.push({handlerName:i,handler:u,allowed:f}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(_l(this._eventsInProgress))||this.isZooming()}_blockedByActive(i,u,f){for(const y in i)if(y!==f&&(!u||u.indexOf(y)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const u=[];for(const f of i)this._el.contains(f.target)&&u.push(f);return u}handleEvent(i,u){if(i.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const f=i.type==="renderFrame"?void 0:i,y={needsRenderFrame:!1},_={},S={},I=i.touches,P=I?this._getMapTouches(I):void 0,A=P?E.touchPos(this._el,P):E.mousePos(this._el,i);for(const{handlerName:q,handler:se,allowed:ne}of this._handlers){if(!se.isEnabled())continue;let re;this._blockedByActive(S,ne,q)?se.reset():se[u||i.type]&&(re=se[u||i.type](i,A,P),this.mergeHandlerResult(y,_,re,q,f),re&&re.needsRenderFrame&&this._triggerRenderFrame()),(re||se.isActive())&&(S[q]=se)}const O={};for(const q in this._previousActiveHandlers)S[q]||(O[q]=f);this._previousActiveHandlers=S,(Object.keys(O).length||Ac(y))&&(this._changes.push([y,_,O]),this._triggerRenderFrame()),(Object.keys(S).length||Ac(y))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:G}=y;G&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],G(this._map))}mergeHandlerResult(i,u,f,y,_){if(!f)return;l.extend(i,f);const S={handlerName:y,originalEvent:f.originalEvent||_};f.zoomDelta!==void 0&&(u.zoom=S),f.panDelta!==void 0&&(u.drag=S),f.pitchDelta!==void 0&&(u.pitch=S),f.bearingDelta!==void 0&&(u.rotate=S)}_applyChanges(){const i={},u={},f={};for(const[y,_,S]of this._changes)y.panDelta&&(i.panDelta=(i.panDelta||new l.pointGeometry(0,0))._add(y.panDelta)),y.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(i.around=y.around),y.pinchAround!==void 0&&(i.pinchAround=y.pinchAround),y.noInertia&&(i.noInertia=y.noInertia),l.extend(u,_),l.extend(f,S);this._updateMapTransform(i,u,f),this._changes=[]}_updateMapTransform(i,u,f){const y=this._map,_=y.transform,S=y.style&&y.style.terrain;if(!(Ac(i)||S&&this._drag))return this._fireEvents(u,f,!0);let{panDelta:I,zoomDelta:P,bearingDelta:A,pitchDelta:O,around:G,pinchAround:q}=i;q!==void 0&&(G=q),y._stop(!0),G=G||y.transform.centerPoint;const se=_.pointLocation(I?G.sub(I):G);A&&(_.bearing+=A),O&&(_.pitch+=O),P&&(_.zoom+=P),S?u.drag&&!this._drag?(this._drag={center:_.centerPoint,lngLat:_.pointLocation(G),point:G,handlerName:u.drag.handlerName},y.fire(new l.Event("freezeElevation",{freeze:!0}))):this._drag&&f[this._drag.handlerName]?(y.fire(new l.Event("freezeElevation",{freeze:!1})),this._drag=null):u.drag&&this._drag&&(_.center=_.pointLocation(_.centerPoint.sub(I))):_.setLocationAtPoint(se,G),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,f,!0)}_fireEvents(i,u,f){const y=_l(this._eventsInProgress),_=_l(i),S={};for(const O in i){const{originalEvent:G}=i[O];this._eventsInProgress[O]||(S[`${O}start`]=G),this._eventsInProgress[O]=i[O]}!y&&_&&this._fireEvent("movestart",_.originalEvent);for(const O in S)this._fireEvent(O,S[O]);_&&this._fireEvent("move",_.originalEvent);for(const O in i){const{originalEvent:G}=i[O];this._fireEvent(O,G)}const I={};let P;for(const O in this._eventsInProgress){const{handlerName:G,originalEvent:q}=this._eventsInProgress[O];this._handlersById[G].isActive()||(delete this._eventsInProgress[O],P=u[G]||q,I[`${O}end`]=P)}for(const O in I)this._fireEvent(O,I[O]);const A=_l(this._eventsInProgress);if(f&&(y||_)&&!A){this._updatingCamera=!0;const O=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),G=q=>q!==0&&-this._bearingSnap<q&&q<this._bearingSnap;O?(G(O.bearing||this._map.getBearing())&&(O.bearing=0),this._map.easeTo(O,{originalEvent:P})):(this._map.fire(new l.Event("moveend",{originalEvent:P})),G(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new l.Event(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new _h("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Hi={extend:(p,...i)=>l.extend(p,...i),run(p){p()},logToElement(p,i=!1,u="log"){const f=window.document.getElementById(u);f&&(i&&(f.innerHTML=""),f.innerHTML+=`<br>${p}`)}};class qn extends l.Evented{constructor(i,u){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,f){return i=l.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,l.extend({offset:i},u),f)}panTo(i,u,f){return this.easeTo(l.extend({center:i},u),f)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,f){return this.easeTo(l.extend({zoom:i},u),f)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,f){return this.easeTo(l.extend({bearing:i},u),f)}resetNorth(i,u){return this.rotateTo(0,l.extend({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=l.LngLatBounds.convert(i);const f=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),f,u)}_cameraForBoxAndBearing(i,u,f,y){const _={top:0,bottom:0,right:0,left:0};if(typeof(y=l.extend({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const Pe=y.padding;y.padding={top:Pe,bottom:Pe,right:Pe,left:Pe}}y.padding=l.extend(_,y.padding);const S=this.transform,I=S.padding,P=S.project(l.LngLat.convert(i)),A=S.project(l.LngLat.convert(u)),O=P.rotate(-f*Math.PI/180),G=A.rotate(-f*Math.PI/180),q=new l.pointGeometry(Math.max(O.x,G.x),Math.max(O.y,G.y)),se=new l.pointGeometry(Math.min(O.x,G.x),Math.min(O.y,G.y)),ne=q.sub(se),re=(S.width-(I.left+I.right+y.padding.left+y.padding.right))/ne.x,ge=(S.height-(I.top+I.bottom+y.padding.top+y.padding.bottom))/ne.y;if(ge<0||re<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const we=Math.min(S.scaleZoom(S.scale*Math.min(re,ge)),y.maxZoom),Ie=l.pointGeometry.convert(y.offset),ae=new l.pointGeometry((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(f*Math.PI/180),De=Ie.add(ae).mult(S.scale/S.zoomScale(we));return{center:S.unproject(P.add(A).div(2).sub(De)),zoom:we,bearing:f}}fitBounds(i,u,f){return this._fitInternal(this.cameraForBounds(i,u),u,f)}fitScreenCoordinates(i,u,f,y,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.pointGeometry.convert(i)),this.transform.pointLocation(l.pointGeometry.convert(u)),f,y),y,_)}_fitInternal(i,u,f){return i?(delete(u=l.extend(i,u)).padding,u.linear?this.easeTo(u,f):this.flyTo(u,f)):this}jumpTo(i,u){this.stop();const f=this.transform;let y=!1,_=!1,S=!1;return"zoom"in i&&f.zoom!==+i.zoom&&(y=!0,f.zoom=+i.zoom),i.center!==void 0&&(f.center=l.LngLat.convert(i.center)),"bearing"in i&&f.bearing!==+i.bearing&&(_=!0,f.bearing=+i.bearing),"pitch"in i&&f.pitch!==+i.pitch&&(S=!0,f.pitch=+i.pitch),i.padding==null||f.isPaddingEqual(i.padding)||(f.padding=i.padding),this.fire(new l.Event("movestart",u)).fire(new l.Event("move",u)),y&&this.fire(new l.Event("zoomstart",u)).fire(new l.Event("zoom",u)).fire(new l.Event("zoomend",u)),_&&this.fire(new l.Event("rotatestart",u)).fire(new l.Event("rotate",u)).fire(new l.Event("rotateend",u)),S&&this.fire(new l.Event("pitchstart",u)).fire(new l.Event("pitch",u)).fire(new l.Event("pitchend",u)),this.fire(new l.Event("moveend",u))}calculateCameraOptionsFromTo(i,u,f,y=0){const _=l.MercatorCoordinate.fromLngLat(i,u),S=l.MercatorCoordinate.fromLngLat(f,y),I=S.x-_.x,P=S.y-_.y,A=S.z-_.z,O=Math.hypot(I,P,A);if(O===0)throw new Error("Can't calculate camera options with same From and To");const G=Math.hypot(I,P),q=this.transform.scaleZoom(this.transform.cameraToCenterDistance/O/this.transform.tileSize),se=180*Math.atan2(I,-P)/Math.PI;let ne=180*Math.acos(G/O)/Math.PI;return ne=A<0?90-ne:90+ne,{center:S.toLngLat(),zoom:q,pitch:ne,bearing:se}}easeTo(i,u){this._stop(!1,i.easeId),((i=l.extend({offset:[0,0],duration:500,easing:l.ease},i)).animate===!1||!i.essential&&l.exported.prefersReducedMotion)&&(i.duration=0);const f=this.transform,y=this.getZoom(),_=this.getBearing(),S=this.getPitch(),I=this.getPadding(),P="zoom"in i?+i.zoom:y,A="bearing"in i?this._normalizeBearing(i.bearing,_):_,O="pitch"in i?+i.pitch:S,G="padding"in i?i.padding:f.padding,q=l.pointGeometry.convert(i.offset);let se=f.centerPoint.add(q);const ne=f.pointLocation(se),re=l.LngLat.convert(i.center||ne);this._normalizeCenter(re);const ge=f.project(ne),we=f.project(re).sub(ge),Ie=f.zoomScale(P-y);let ae,De;i.around&&(ae=l.LngLat.convert(i.around),De=f.locationPoint(ae));const Pe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||P!==y,this._rotating=this._rotating||_!==A,this._pitching=this._pitching||O!==S,this._padding=!f.isPaddingEqual(G),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,Pe),this._ease($e=>{if(this._zooming&&(f.zoom=l.number(y,P,$e)),this._rotating&&(f.bearing=l.number(_,A,$e)),this._pitching&&(f.pitch=l.number(S,O,$e)),this._padding&&(f.interpolatePadding(I,G,$e),se=f.centerPoint.add(q)),ae)f.setLocationAtPoint(ae,De);else{const je=f.zoomScale(f.zoom-y),qe=P>y?Math.min(2,Ie):Math.max(.5,Ie),Fe=Math.pow(qe,1-$e),ht=f.unproject(ge.add(we.mult($e*Fe)).mult(je));f.setLocationAtPoint(f.renderWorldCopies?ht.wrap():ht,se)}this._fireMoveEvents(u)},$e=>{this._afterEase(u,$e)},i),this}_prepareEase(i,u,f={}){this._moving=!0,this.fire(new l.Event("freezeElevation",{freeze:!0})),u||f.moving||this.fire(new l.Event("movestart",i)),this._zooming&&!f.zooming&&this.fire(new l.Event("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new l.Event("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new l.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new l.Event("move",i)),this._zooming&&this.fire(new l.Event("zoom",i)),this._rotating&&this.fire(new l.Event("rotate",i)),this._pitching&&this.fire(new l.Event("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId,this.fire(new l.Event("freezeElevation",{freeze:!1}));const f=this._zooming,y=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new l.Event("zoomend",i)),y&&this.fire(new l.Event("rotateend",i)),_&&this.fire(new l.Event("pitchend",i)),this.fire(new l.Event("moveend",i))}flyTo(i,u){if(!i.essential&&l.exported.prefersReducedMotion){const Mt=l.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Mt,u)}this.stop(),i=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},i);const f=this.transform,y=this.getZoom(),_=this.getBearing(),S=this.getPitch(),I=this.getPadding(),P="zoom"in i?l.clamp(+i.zoom,f.minZoom,f.maxZoom):y,A="bearing"in i?this._normalizeBearing(i.bearing,_):_,O="pitch"in i?+i.pitch:S,G="padding"in i?i.padding:f.padding,q=f.zoomScale(P-y),se=l.pointGeometry.convert(i.offset);let ne=f.centerPoint.add(se);const re=f.pointLocation(ne),ge=l.LngLat.convert(i.center||re);this._normalizeCenter(ge);const we=f.project(re),Ie=f.project(ge).sub(we);let ae=i.curve;const De=Math.max(f.width,f.height),Pe=De/q,$e=Ie.mag();if("minZoom"in i){const Mt=l.clamp(Math.min(i.minZoom,y,P),f.minZoom,f.maxZoom),xn=De/f.zoomScale(Mt-y);ae=Math.sqrt(xn/$e*2)}const je=ae*ae;function qe(Mt){const xn=(Pe*Pe-De*De+(Mt?-1:1)*je*je*$e*$e)/(2*(Mt?Pe:De)*je*$e);return Math.log(Math.sqrt(xn*xn+1)-xn)}function Fe(Mt){return(Math.exp(Mt)-Math.exp(-Mt))/2}function ht(Mt){return(Math.exp(Mt)+Math.exp(-Mt))/2}const rt=qe(0);let mt=function(Mt){return ht(rt)/ht(rt+ae*Mt)},Gt=function(Mt){return De*((ht(rt)*(Fe(xn=rt+ae*Mt)/ht(xn))-Fe(rt))/je)/$e;var xn},Ht=(qe(1)-rt)/ae;if(Math.abs($e)<1e-6||!isFinite(Ht)){if(Math.abs(De-Pe)<1e-6)return this.easeTo(i,u);const Mt=Pe<De?-1:1;Ht=Math.abs(Math.log(Pe/De))/ae,Gt=function(){return 0},mt=function(xn){return Math.exp(Mt*ae*xn)}}return i.duration="duration"in i?+i.duration:1e3*Ht/("screenSpeed"in i?+i.screenSpeed/ae:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=_!==A,this._pitching=O!==S,this._padding=!f.isPaddingEqual(G),this._prepareEase(u,!1),this._ease(Mt=>{const xn=Mt*Ht,bn=1/mt(xn);f.zoom=Mt===1?P:y+f.scaleZoom(bn),this._rotating&&(f.bearing=l.number(_,A,Mt)),this._pitching&&(f.pitch=l.number(S,O,Mt)),this._padding&&(f.interpolatePadding(I,G,Mt),ne=f.centerPoint.add(se));const cn=Mt===1?ge:f.unproject(we.add(Ie.mult(Gt(xn))).mult(bn));f.setLocationAtPoint(f.renderWorldCopies?cn.wrap():cn,ne),this._fireMoveEvents(u)},()=>this._afterEase(u),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,u)}if(!i){const f=this.handlers;f&&f.stop(!1)}return this}_ease(i,u,f){f.animate===!1||f.duration===0?(i(1),u()):(this._easeStart=l.exported.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,u){i=l.wrap(i,-180,180);const f=Math.abs(i-u);return Math.abs(i-360-u)<f&&(i-=360),Math.abs(i+360-u)<f&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const f=i.lng-u.center.lng;i.lng+=f>180?-360:f<-180?360:0}}class Dc{constructor(i={}){this.options=i,l.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=E.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=E.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=E.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){E.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const f=this._map._getUIString(`AttributionControl.${u}`);i.title=f,i.setAttribute("aria-label",f)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"&&i.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const u=this._map.style.sourceCaches;for(const y in u){const _=u[y];if(_.used||_.usedForTerrain){const S=_.getSource();S.attribution&&i.indexOf(S.attribution)<0&&i.push(S.attribution)}}i=i.filter(y=>String(y).trim()),i.sort((y,_)=>y.length-_.length),i=i.filter((y,_)=>{for(let S=_+1;S<i.length;S++)if(i[S].indexOf(y)>=0)return!1;return!0});const f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class $u{constructor(i={}){this.options=i,l.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=E.create("div","maplibregl-ctrl mapboxgl-ctrl");const u=E.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){E.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const i=this._container.children;if(i.length){const u=i[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&u.classList.add("maplibregl-compact","mapboxgl-compact"):u.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class fm{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,f=u?this._queue.concat(u):this._queue;for(const y of f)if(y.id===i)return void(y.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const f of u)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const pm={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},mm={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},tv={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ao{constructor(i,u,f=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new as({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,f&&(this.mousePitch=new yt({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),E.addEventListener(u,"mousedown",this.mousedown),E.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),E.addEventListener(u,"touchmove",this.touchmove),E.addEventListener(u,"touchend",this.touchend),E.addEventListener(u,"touchcancel",this.reset)}down(i,u){this.mouseRotate.mousedown(i,u),this.mousePitch&&this.mousePitch.mousedown(i,u),E.disableDrag()}move(i,u){const f=this.map,y=this.mouseRotate.mousemoveWindow(i,u);if(y&&y.bearingDelta&&f.setBearing(f.getBearing()+y.bearingDelta),this.mousePitch){const _=this.mousePitch.mousemoveWindow(i,u);_&&_.pitchDelta&&f.setPitch(f.getPitch()+_.pitchDelta)}}off(){const i=this.element;E.removeEventListener(i,"mousedown",this.mousedown),E.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),E.removeEventListener(i,"touchmove",this.touchmove),E.removeEventListener(i,"touchend",this.touchend),E.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){E.enableDrag(),E.removeEventListener(window,"mousemove",this.mousemove),E.removeEventListener(window,"mouseup",this.mouseup)}mousedown(i){this.down(l.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),E.mousePos(this.element,i)),E.addEventListener(window,"mousemove",this.mousemove),E.addEventListener(window,"mouseup",this.mouseup)}mousemove(i){this.move(i,E.mousePos(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=E.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=E.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Rc(p,i,u){if(p=new l.LngLat(p.lng,p.lat),i){const f=new l.LngLat(p.lng-360,p.lat),y=new l.LngLat(p.lng+360,p.lat),_=u.locationPoint(p).distSqr(i);u.locationPoint(f).distSqr(i)<_?p=f:u.locationPoint(y).distSqr(i)<_&&(p=y)}for(;Math.abs(p.lng-u.center.lng)>180;){const f=u.locationPoint(p);if(f.x>=0&&f.y>=0&&f.x<=u.width&&f.y<=u.height)break;p.lng>u.center.lng?p.lng-=360:p.lng+=360}return p}const Tt={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Dt(p,i,u){const f=p.classList;for(const y in Tt)f.remove(`maplibregl-${u}-anchor-${y}`,`mapboxgl-${u}-anchor-${y}`);f.add(`maplibregl-${u}-anchor-${i}`,`mapboxgl-${u}-anchor-${i}`)}class xl extends l.Evented{constructor(i,u){if(super(),(i instanceof HTMLElement||u)&&(i=l.extend({element:i},u)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=l.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=E.create("div"),this._element.setAttribute("aria-label","Map marker");const f=E.createNS("http://www.w3.org/2000/svg","svg"),y=41,_=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${y}px`),f.setAttributeNS(null,"width",`${_}px`),f.setAttributeNS(null,"viewBox",`0 0 ${_} ${y}`);const S=E.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"stroke","none"),S.setAttributeNS(null,"stroke-width","1"),S.setAttributeNS(null,"fill","none"),S.setAttributeNS(null,"fill-rule","evenodd");const I=E.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill-rule","nonzero");const P=E.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(3.0, 29.0)"),P.setAttributeNS(null,"fill","#000000");const A=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ie of A){const ae=E.createNS("http://www.w3.org/2000/svg","ellipse");ae.setAttributeNS(null,"opacity","0.04"),ae.setAttributeNS(null,"cx","10.5"),ae.setAttributeNS(null,"cy","5.80029008"),ae.setAttributeNS(null,"rx",Ie.rx),ae.setAttributeNS(null,"ry",Ie.ry),P.appendChild(ae)}const O=E.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill",this._color);const G=E.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),O.appendChild(G);const q=E.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"opacity","0.25"),q.setAttributeNS(null,"fill","#000000");const se=E.createNS("http://www.w3.org/2000/svg","path");se.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),q.appendChild(se);const ne=E.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ne.setAttributeNS(null,"fill","#FFFFFF");const re=E.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ge=E.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#000000"),ge.setAttributeNS(null,"opacity","0.25"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962");const we=E.createNS("http://www.w3.org/2000/svg","circle");we.setAttributeNS(null,"fill","#FFFFFF"),we.setAttributeNS(null,"cx","5.5"),we.setAttributeNS(null,"cy","5.5"),we.setAttributeNS(null,"r","5.4999962"),re.appendChild(ge),re.appendChild(we),I.appendChild(P),I.appendChild(O),I.appendChild(q),I.appendChild(ne),I.appendChild(re),f.appendChild(I),f.setAttributeNS(null,"height",y*this._scale+"px"),f.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(f),this._offset=l.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()}),Dt(this._element,this._anchor,"marker"),this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),E.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=l.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const y=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(i){const u=i.code,f=i.charCode||i.keyCode;u!=="Space"&&u!=="Enter"&&f!==32&&f!==13||this.togglePopup()}_onMapClick(i){const u=i.originalEvent.target,f=this._element;this._popup&&(u===f||f.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}_update(i){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Rc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let u="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?u=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(u=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let f="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?f="rotateX(0deg)":this._pitchAlignment==="map"&&(f=`rotateX(${this._map.getPitch()}deg)`),i&&i.type!=="moveend"||(this._pos=this._pos.round()),E.setTransform(this._element,`${Tt[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${f} ${u}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const y=this._map.unproject(this._pos),_=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=y.distanceTo(this._lngLat)>20*_?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(i){return this._offset=l.pointGeometry.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const xh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let $s,Gr=0,js=!1;const Do={maxWidth:100,unit:"metric"};function gm(p,i,u){const f=u&&u.maxWidth||100,y=p._container.clientHeight/2,_=p.unproject([0,y]),S=p.unproject([f,y]),I=_.distanceTo(S);if(u&&u.unit==="imperial"){const P=3.2808*I;P>5280?Vs(i,f,P/5280,p._getUIString("ScaleControl.Miles")):Vs(i,f,P,p._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Vs(i,f,I/1852,p._getUIString("ScaleControl.NauticalMiles")):I>=1e3?Vs(i,f,I/1e3,p._getUIString("ScaleControl.Kilometers")):Vs(i,f,I,p._getUIString("ScaleControl.Meters"))}function Vs(p,i,u,f){const y=function(_){const S=Math.pow(10,`${Math.floor(_)}`.length-1);let I=_/S;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(P){const A=Math.pow(10,Math.ceil(-Math.log(P)/Math.LN10));return Math.round(P*A)/A}(I),S*I}(u);p.style.width=i*(y/u)+"px",p.innerHTML=`${y}&nbsp;${f}`}const ar={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},xr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function bh(p){if(p){if(typeof p=="number"){const i=Math.round(Math.sqrt(.5*Math.pow(p,2)));return{center:new l.pointGeometry(0,0),top:new l.pointGeometry(0,p),"top-left":new l.pointGeometry(i,i),"top-right":new l.pointGeometry(-i,i),bottom:new l.pointGeometry(0,-p),"bottom-left":new l.pointGeometry(i,-i),"bottom-right":new l.pointGeometry(-i,-i),left:new l.pointGeometry(p,0),right:new l.pointGeometry(-p,0)}}if(p instanceof l.pointGeometry||Array.isArray(p)){const i=l.pointGeometry.convert(p);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:l.pointGeometry.convert(p.center||[0,0]),top:l.pointGeometry.convert(p.top||[0,0]),"top-left":l.pointGeometry.convert(p["top-left"]||[0,0]),"top-right":l.pointGeometry.convert(p["top-right"]||[0,0]),bottom:l.pointGeometry.convert(p.bottom||[0,0]),"bottom-left":l.pointGeometry.convert(p["bottom-left"]||[0,0]),"bottom-right":l.pointGeometry.convert(p["bottom-right"]||[0,0]),left:l.pointGeometry.convert(p.left||[0,0]),right:l.pointGeometry.convert(p.right||[0,0])}}return bh(new l.pointGeometry(0,0))}const Ca={supported:b,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends qn{constructor(p){var i;if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(p=l.extend({},mm,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new kc(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),{bearingSnap:p.bearingSnap}),this._interactive=p.interactive,this._cooperativeGestures=p.cooperativeGestures,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=p.collectResourceTiming,this._renderTaskQueue=new fm,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},pm,p.locale),this._clickTolerance=p.clickTolerance,this._pixelRatio=(i=p.pixelRatio)!==null&&i!==void 0?i:devicePixelRatio,this._requestManager=new L(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new hm(this,p),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=p.hash&&new tm(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,l.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new Dc({customAttribution:p.customAttribution})),p.maplibreLogo&&this.addControl(new $u,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new l.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new l.Event(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new l.Event("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(p,i){if(i===void 0&&(i=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=p.onAdd(this);this._controls.push(p);const f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(u,f.firstChild):f.appendChild(u),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(p);return i>-1&&this._controls.splice(i,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}calculateCameraOptionsFromTo(p,i,u,f){return f==null&&this.style.terrain&&(f=this.transform.getElevation(u,this.style.terrain)),super.calculateCameraOptionsFromTo(p,i,u,f)}resize(p){const i=this._containerDimensions(),u=i[0],f=i[1];this._resizeCanvas(u,f,this.getPixelRatio()),this.transform.resize(u,f),this.painter.resize(u,f,this.getPixelRatio());const y=!this._moving;return y&&(this.stop(),this.fire(new l.Event("movestart",p)).fire(new l.Event("move",p))),this.fire(new l.Event("resize",p)),y&&this.fire(new l.Event("moveend",p)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(p){const[i,u]=this._containerDimensions();this._pixelRatio=p,this._resizeCanvas(i,u,p),this.painter.resize(i,u,p)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(p){return this.transform.setMaxBounds(l.LngLatBounds.convert(p)),this._update()}setMinZoom(p){if((p=p??-2)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p&&this.setZoom(p),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p??22)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p&&this.setZoom(p),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p&&this.setPitch(p),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p&&this.setPitch(p),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this._update()}project(p){return this.transform.locationPoint(l.LngLat.convert(p),this.style&&this.style.terrain)}unproject(p){return this.transform.pointLocation(l.pointGeometry.convert(p),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(p,i,u){if(p==="mouseenter"||p==="mouseover"){let f=!1;return{layer:i,listener:u,delegates:{mousemove:_=>{const S=this.getLayer(i)?this.queryRenderedFeatures(_.point,{layers:[i]}):[];S.length?f||(f=!0,u.call(this,new Ri(p,this,_.originalEvent,{features:S}))):f=!1},mouseout:()=>{f=!1}}}}if(p==="mouseleave"||p==="mouseout"){let f=!1;return{layer:i,listener:u,delegates:{mousemove:S=>{(this.getLayer(i)?this.queryRenderedFeatures(S.point,{layers:[i]}):[]).length?f=!0:f&&(f=!1,u.call(this,new Ri(p,this,S.originalEvent)))},mouseout:S=>{f&&(f=!1,u.call(this,new Ri(p,this,S.originalEvent)))}}}}{const f=y=>{const _=this.getLayer(i)?this.queryRenderedFeatures(y.point,{layers:[i]}):[];_.length&&(y.features=_,u.call(this,y),delete y.features)};return{layer:i,listener:u,delegates:{[p]:f}}}}on(p,i,u){if(u===void 0)return super.on(p,i);const f=this._createDelegatedListener(p,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(f);for(const y in f.delegates)this.on(y,f.delegates[y]);return this}once(p,i,u){if(u===void 0)return super.once(p,i);const f=this._createDelegatedListener(p,i,u);for(const y in f.delegates)this.once(y,f.delegates[y]);return this}off(p,i,u){return u===void 0?super.off(p,i):(this._delegatedListeners&&this._delegatedListeners[p]&&(f=>{const y=this._delegatedListeners[p];for(let _=0;_<y.length;_++){const S=y[_];if(S.layer===i&&S.listener===u){for(const I in S.delegates)this.off(I,S.delegates[I]);return y.splice(_,1),this}}})(),this)}queryRenderedFeatures(p,i){if(!this.style)return[];let u;if(i!==void 0||p===void 0||p instanceof l.pointGeometry||Array.isArray(p)||(i=p,p=void 0),i=i||{},(p=p||[[0,0],[this.transform.width,this.transform.height]])instanceof l.pointGeometry||typeof p[0]=="number")u=[l.pointGeometry.convert(p)];else{const f=l.pointGeometry.convert(p[0]),y=l.pointGeometry.convert(p[1]);u=[f,new l.pointGeometry(y.x,f.y),y,new l.pointGeometry(f.x,y.y),f]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(p,i){return this.style.querySourceFeatures(p,i)}setStyle(p,i){return(i=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&p?(this._diffStyle(p,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(p,i))}setTransformRequest(p){return this._requestManager.setTransformRequest(p),this}_getUIString(p){const i=this._locale[p];if(i==null)throw new Error(`Missing UI string '${p}'`);return i}_updateStyle(p,i){return this.style&&(this.style.setEventedParent(null),this.style._remove()),p?(this.style=new Rr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p):this.style.loadJSON(p),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Rr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,i){if(typeof p=="string"){const u=this._requestManager.transformRequest(p,l.ResourceType.Style);l.getJSON(u,(f,y)=>{f?this.fire(new l.ErrorEvent(f)):y&&this._updateDiff(y,i)})}else typeof p=="object"&&this._updateDiff(p,i)}_updateDiff(p,i){try{this.style.setState(p)&&this._update(!0)}catch(u){l.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(p,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(p,i){return this._lazyInitEmptyStyle(),this.style.addSource(p,i),this._update(!0)}isSourceLoaded(p){const i=this.style&&this.style.sourceCaches[p];if(i!==void 0)return i.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${p}'`)))}setTerrain(p){return this.style.setTerrain(p),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const p=this.style&&this.style.sourceCaches;for(const i in p){const u=p[i]._tiles;for(const f in u){const y=u[f];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}addSourceType(p,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(p,i,u)}removeSource(p){return this.style.removeSource(p),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,i,{pixelRatio:u=1,sdf:f=!1,stretchX:y,stretchY:_,content:S}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||l.isImageBitmap(i)){const{width:I,height:P,data:A}=l.exported.getImageData(i);this.style.addImage(p,{data:new l.RGBAImage({width:I,height:P},A),pixelRatio:u,stretchX:y,stretchY:_,content:S,sdf:f,version:0})}else{if(i.width===void 0||i.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:I,height:P,data:A}=i,O=i;this.style.addImage(p,{data:new l.RGBAImage({width:I,height:P},new Uint8Array(A)),pixelRatio:u,stretchX:y,stretchY:_,content:S,sdf:f,version:0,userImage:O}),O.onAdd&&O.onAdd(this,p)}}}updateImage(p,i){const u=this.style.getImage(p);if(!u)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=i instanceof HTMLImageElement||l.isImageBitmap(i)?l.exported.getImageData(i):i,{width:y,height:_,data:S}=f;if(y===void 0||_===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==u.data.width||_!==u.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(i instanceof HTMLImageElement||l.isImageBitmap(i));u.data.replace(S,I),this.style.updateImage(p,u)}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,i){l.getImage(this._requestManager.transformRequest(p,l.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(p,i){return this._lazyInitEmptyStyle(),this.style.addLayer(p,i),this._update(!0)}moveLayer(p,i){return this.style.moveLayer(p,i),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,i,u){return this.style.setLayerZoomRange(p,i,u),this._update(!0)}setFilter(p,i,u={}){return this.style.setFilter(p,i,u),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,i,u,f={}){return this.style.setPaintProperty(p,i,u,f),this._update(!0)}getPaintProperty(p,i){return this.style.getPaintProperty(p,i)}setLayoutProperty(p,i,u,f={}){return this.style.setLayoutProperty(p,i,u,f),this._update(!0)}getLayoutProperty(p,i){return this.style.getLayoutProperty(p,i)}setLight(p,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(p,i){return this.style.setFeatureState(p,i),this._update()}removeFeatureState(p,i){return this.style.removeFeatureState(p,i),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let p=0,i=0;return this._container&&(p=this._container.clientWidth||400,i=this._container.clientHeight||300),[p,i]}_setupContainer(){const p=this._container;p.classList.add("maplibregl-map","mapboxgl-map");const i=this._canvasContainer=E.create("div","maplibregl-canvas-container mapboxgl-canvas-container",p);this._interactive&&i.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=E.create("canvas","maplibregl-canvas mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions();this._resizeCanvas(u[0],u[1],this.getPixelRatio());const f=this._controlContainer=E.create("div","maplibregl-control-container mapboxgl-control-container",p),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(_=>{y[_]=E.create("div",`maplibregl-ctrl-${_} mapboxgl-ctrl-${_}`,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const p=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=E.create("div","maplibregl-cooperative-gesture-screen",p);let i="Control",u=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(u=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map",i="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${u}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",f=>{f.key===i&&(this._metaPress=!0)}),document.addEventListener("keyup",f=>{f.key===i&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",f=>{this._onCooperativeGesture(f,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(p,i,u){this._canvas.width=u*p,this._canvas.height=u*i,this._canvas.style.width=`${p}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const p=l.extend({},b.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);i?(this.painter=new uh(i,this.transform),l.exported$1.testSupport(i)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(p,i,u){return!i&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_render(p){let i,u=0;const f=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=f.createQueryEXT(),f.beginQueryEXT(f.TIME_ELAPSED_EXT,i),u=l.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),this._removed)return;let y=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const S=this.transform.zoom,I=l.exported.now();this.style.zoomHistory.update(S,I);const P=new l.EvaluationParameters(S,{now:I,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=P.crossFadingFactor();A===1&&A===this._crossFadingFactor||(y=!0,this._crossFadingFactor=A),this.style.update(P)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||y)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const S=l.exported.now()-u;f.endQueryEXT(f.TIME_ELAPSED_EXT,i),setTimeout(()=>{const I=f.getQueryObjectEXT(i,f.QUERY_RESULT_EXT)/1e6;f.deleteQueryEXT(i),this.fire(new l.Event("gpu-timing-frame",{cpuTime:S,gpuTime:I}))},50)}if(this.listens("gpu-timing-layer")){const S=this.painter.collectGpuTimers();setTimeout(()=>{const I=this.painter.queryGpuTimers(S);this.fire(new l.Event("gpu-timing-layer",{layerTimes:I}))},50)}const _=this._sourcesDirty||this._styleDirty||this._placementDirty;return _||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||_||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),E.remove(this._canvasContainer),E.remove(this._controlContainer),this._cooperativeGestures&&E.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.exported.frame(p=>{l.PerformanceUtils.frame(p),this._frame=null,this._render(p)}))}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}_setCacheLimits(p,i){l.setCacheLimits(p,i)}get version(){return"2.4.0"}},NavigationControl:class{constructor(p){this.options=l.extend({},tv,p),this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),E.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),E.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=E.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map.getZoom(),i=p===this._map.getMaxZoom(),u=p===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){const p=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=p}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ao(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){E.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(p,i){const u=E.create("button",p,this._container);return u.type="button",u.addEventListener("click",i),u}_setButtonTitle(p,i){const u=this._map._getUIString(`NavigationControl.${i}`);p.title=u,p.setAttribute("aria-label",u)}},GeolocateControl:class extends l.Evented{constructor(p){super(),this.options=l.extend({},xh,p),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(p){var i;return this._map=p,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,$s!==void 0?i($s):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(u=>{$s=u.state!=="denied",i($s)}):($s=!!window.navigator.geolocation,i($s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),E.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Gr=0,js=!1}_isOutOfMapMaxBounds(p){const i=this._map.getMaxBounds(),u=p.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",p)),this._finish()}}_updateCamera(p){const i=new l.LngLat(p.coords.longitude,p.coords.latitude),u=p.coords.accuracy,f=this._map.getBearing(),y=l.extend({bearing:f},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(u),y,{geolocateSource:!0})}_updateMarker(p){if(p){const i=new l.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map._container.clientHeight/2,i=this._map.unproject([0,p]),u=this._map.unproject([1,p]),f=i.distanceTo(u),y=Math.ceil(2*this._accuracy/f);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&js)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=E.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),E.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=E.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new xl(this._dotElement),this._circleElement=E.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new xl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Gr--,js=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Gr++,Gr>1?(p={maximumAge:6e5,timeout:0},js=!0):(p=this.options.positionOptions,js=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,p)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Dc,LogoControl:$u,ScaleControl:class{constructor(p){this.options=l.extend({},Do,p),l.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){gm(this._map,this._container,this.options)}onAdd(p){return this._map=p,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){E.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(p){this.options.unit=p,gm(this._map,this._container,this.options)}},FullscreenControl:class{constructor(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof HTMLElement?this._container=p.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=E.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){E.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=E.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);E.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.title=p}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(p){this.options=p,l.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(p){return this._map=p,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=E.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),E.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){E.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends l.Evented{constructor(p){super(),this.options=l.extend(Object.create(ar),p),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&E.remove(this._content),this._container&&(E.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){return this._lngLat=l.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(document.createTextNode(p))}setHTML(p){const i=document.createDocumentFragment(),u=document.createElement("body");let f;for(u.innerHTML=p;f=u.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=E.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(p),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(p){this._container&&this._container.classList.add(p)}removeClassName(p){this._container&&this._container.classList.remove(p)}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){if(this._container)return this._container.classList.toggle(p)}_createCloseButton(){this.options.closeButton&&(this._closeButton=E.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(p){this._update(p.point)}_onMouseMove(p){this._update(p.point)}_onDrag(p){this._update(p.point)}_update(p){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=E.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=E.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(_=>this._container.classList.add(_)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Rc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!p))return;const i=this._pos=this._trackPointer&&p?p:this._map.project(this._lngLat);let u=this.options.anchor;const f=bh(this.options.offset);if(!u){const _=this._container.offsetWidth,S=this._container.offsetHeight;let I;I=i.y+f.bottom.y<S?["top"]:i.y>this._map.transform.height-S?["bottom"]:[],i.x<_/2?I.push("left"):i.x>this._map.transform.width-_/2&&I.push("right"),u=I.length===0?"bottom":I.join("-")}const y=i.add(f[u]).round();E.setTransform(this._container,`${Tt[u]} translate(${y.x}px,${y.y}px)`),Dt(this._container,u,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(xr);p&&p.focus()}_onClose(){this.remove()}},Marker:xl,Style:Rr,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.pointGeometry,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,AJAXError:l.AJAXError,config:l.config,CanvasSource:st,GeoJSONSource:Ee,ImageSource:We,RasterDEMTileSource:Ce,RasterTileSource:ot,VectorTileSource:Xe,VideoSource:Ye,prewarm:function(){$n().acquire(zt)},clearPrewarmedResources:function(){const p=Jt;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(zt),Jt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return Ut.workerCount},set workerCount(p){Ut.workerCount=p},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){l.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){l.clearTileCache(p)},workerUrl:"",addProtocol(p,i){l.config.REGISTERED_PROTOCOLS[p]=i},removeProtocol(p){delete l.config.REGISTERED_PROTOCOLS[p]}};return Hi.extend(Ca,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),Ca});var m=c;return m})})(hY);const Uy=Xd,Gp=Is(void 0);Is(!1);const V5=Is(void 0),U5=Is(void 0),fY=Is(void 0),pY=Is(void 0),mY=Is(void 0),bu=Is(void 0),G5=Is("dove"),gY=Is(!1);Is("");const yY="https://map.ir",vY={tile:new URL("/vector",yY)};const _Y="/assets/default-55decd38.webp",xY="/assets/light-654fb1ff.webp",bY="/assets/dark-8a61fa9f.webp",wY="/assets/min-poi-4e7d46df.webp",SY="/assets/dove-66e4f9d1.webp";Uy.getRTLTextPluginStatus()==="unavailable"&&Uy.setRTLTextPlugin("https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js",e=>{e&&console.error(e)},!0);function TY({}){const[e,t]=kr(bu),[n]=kr(G5),[,s]=kr(gY),[,c]=kr(V5),[h]=kr(Gp),m=U.useRef(null),l=U.useRef(!1);return U.useEffect(()=>{if(l.current)return;console.log("mapp");const b=new Uy.Map({container:m.current||"",style:"https://map.ir/vector/styles/main/mapir-Dove-style.json",center:[54.82,31.77],zoom:5,pitch:0,hash:!0,attributionControl:!0,customAttribution:"© Map.ir © Openstreetmap",trackResize:!0,transformRequest:w=>({url:w,headers:{"x-api-key":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjBkZTBjZTQ5Njg2MTMwOTc0YWU2NDhkOGMwZjU5NWRhYzFlMTVhZTMzZDg1ODk1NTk2NDQwMjA4MmU3MjMzNTM5MTAyNGM5OGJmY2M3ZDU1In0.eyJhdWQiOiI5NTgxIiwianRpIjoiMGRlMGNlNDk2ODYxMzA5NzRhZTY0OGQ4YzBmNTk1ZGFjMWUxNWFlMzNkODU4OTU1OTY0NDAyMDgyZTcyMzM1MzkxMDI0Yzk4YmZjYzdkNTUiLCJpYXQiOjE1OTIyMDEyNTcsIm5iZiI6MTU5MjIwMTI1NywiZXhwIjoxNTk0NDQ3NjU3LCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.eG2UAq4zVsdnYkW7IMrJWWdXuxtT_EAVY-XiPPzgWJtMtG8vDnnsLQsajdgej1_u0bWzrZvdk2AzpQoABct9etvHTUbK8wBZn6CM7mzu3Uy5KzsR-0zbyDc0vqpfMcZekwXqgze6w8p8INlL4-ImpINrRstRDqsJWFsA2REnwUG-UUPRh6Sjz_lVbow4q975pI6ogt6P8nkcXXaJjmI3KCGXj-xtvvbnZiViUIw4Y12UDCNWb3ykzVfjVUnOcZ-Zbxi8591OZu_VKGfgt5VuNnNbUz654BQzpiiNdTcFhJdUTKsEvMJut0kU0YSX7EUwS50h_5EF32kR3abyJh7nIg"}})});l.current=!0,b.on("load",()=>{b.resize(),s(!0)}),b.on("contextmenu",function(w){c(w)}),t==null||t(b)},[]),U.useEffect(()=>{if(!e)return;const b=W5.find(({id:w})=>w===n);b?(e.setStyle(b.url),localStorage.setItem("map-style-id",b.id)):console.assert(!1,{message:`style id specified (${n}) is not valid`})},[n]),U.useEffect(()=>{e==null||e.resize()},[h]),Y.jsx(ta,{w:"full",h:"full",position:"relative",overflow:"hidden",borderRadius:2,bg:"gray.100",children:Y.jsx(ta,{w:"full",h:"full",id:"map",ref:m})})}const W5=[{id:"default",name:"پیش فرض",src:"mapir-xyz-no-building.json",previewSrc:_Y,scheme:"light"},{id:"light",name:"سبک",src:"mapir-xyz-light-style.json",previewSrc:xY,scheme:"light"},{id:"dark",name:"شب",src:"mapir-style-dark.json",previewSrc:bY,scheme:"dark"},{id:"min-poi",name:"کم جزئیات",src:"mapir-xyz-style-min-poi.json",previewSrc:wY,scheme:"light"},{id:"dove",name:"کبوتر",src:"mapir-Dove-style.json",previewSrc:SY,scheme:"light"}].map(e=>({...e,url:`${vY.tile}/styles/main/${e.src}`})),kY=e=>e!=null,EY=(e,t=!0)=>Object.fromEntries(Object.entries(e).filter(([n,s])=>t?Boolean(s):kY(s))),Z1=function(e){if(e=e.toString(),!e)return"";const t=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];return e.replace(/[0-9]/g,function(n){return t[+n]})},Z5=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[t,String(n)])),q1=e=>new URLSearchParams(Z5(EY(e))).toString(),CY=()=>new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:3e3,maximumAge:0}):t("Geolocation is not supported by your browser")}),IY=e=>Y.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...e,children:Y.jsx("path",{fill:"currentColor",d:"M10 2.5a7.5 7.5 0 0 1 5.964 12.048l4.743 4.745a1 1 0 0 1-1.32 1.497l-.094-.083l-4.745-4.743A7.5 7.5 0 1 1 10 2.5Zm0 2a5.5 5.5 0 1 0 0 11a5.5 5.5 0 0 0 0-11Z"})}),MY=e=>Y.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...e,children:Y.jsx("path",{fill:"currentColor",d:"M18.71 2.292a1 1 0 1 0-1.414 1.416l1.292 1.289h-5.592a3 3 0 0 0-3 3v9a1 1 0 0 1-1 1H7.828a3.001 3.001 0 1 0 .003 2h1.165a3 3 0 0 0 3-3v-9a1 1 0 0 1 1-1h5.589l-1.295 1.29a1 1 0 1 0 1.41 1.418l3.01-2.999a1 1 0 0 0 0-1.416l-3-2.998Z"})}),PY=e=>Y.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...e,children:Y.jsx("path",{fill:"currentColor",d:"M12 2a1 1 0 0 1 .993.883L13 3v1.314a7.754 7.754 0 0 1 6.686 6.687L21 11a1 1 0 0 1 .117 1.993L21 13h-1.314A7.754 7.754 0 0 1 13 19.686V21a1 1 0 0 1-1.993.117L11 21v-1.314A7.754 7.754 0 0 1 4.315 13H3a1 1 0 0 1-.117-1.993L3 11h1.314A7.754 7.754 0 0 1 11 4.315V3a1 1 0 0 1 1-1Zm0 4.25a5.75 5.75 0 1 0 0 11.5a5.75 5.75 0 0 0 0-11.5ZM12 8a4 4 0 1 1 0 8a4 4 0 0 1 0-8Z"})}),zY=e=>Y.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...e,children:Y.jsx("path",{fill:"currentColor",d:"m13.387 3.425l6.365 4.243a1 1 0 0 1 0 1.664l-6.365 4.244a2.5 2.5 0 0 1-2.774 0L4.248 9.332a1 1 0 0 1 0-1.664l6.365-4.243a2.5 2.5 0 0 1 2.774 0Zm6.639 8.767a2.002 2.002 0 0 1-.577.598l-6.05 4.084a2.5 2.5 0 0 1-2.798 0l-6.05-4.084a2 2 0 0 1-.779-2.29l6.841 4.56a2.5 2.5 0 0 0 2.613.098l.16-.098l6.841-4.56a1.996 1.996 0 0 1-.201 1.692Zm0 3.25a2.002 2.002 0 0 1-.577.598l-6.05 4.084a2.5 2.5 0 0 1-2.798 0l-6.05-4.084a2 2 0 0 1-.779-2.29l6.841 4.56a2.5 2.5 0 0 0 2.613.098l.16-.098l6.841-4.56a1.996 1.996 0 0 1-.201 1.692Z"})}),AY=e=>Y.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...e,children:Y.jsx("path",{fill:"currentColor",d:"M12.013 2.25c.734.008 1.465.093 2.181.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.928 1.116l1.4-.615a.75.75 0 0 1 .85.174a9.793 9.793 0 0 1 2.204 3.792a.75.75 0 0 1-.271.825l-1.242.916a1.38 1.38 0 0 0 .001 2.226l1.243.915a.75.75 0 0 1 .271.826a9.798 9.798 0 0 1-2.203 3.792a.75.75 0 0 1-.849.175l-1.406-.617a1.38 1.38 0 0 0-1.927 1.114l-.169 1.526a.75.75 0 0 1-.572.647a9.518 9.518 0 0 1-4.405 0a.75.75 0 0 1-.572-.647l-.17-1.524a1.382 1.382 0 0 0-1.924-1.11l-1.407.616a.75.75 0 0 1-.849-.175a9.798 9.798 0 0 1-2.203-3.796a.75.75 0 0 1 .271-.826l1.244-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.272-.826a9.793 9.793 0 0 1 2.205-3.792a.75.75 0 0 1 .849-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.718-.159 1.45-.243 2.202-.252ZM12 9a3 3 0 1 0 0 6a3 3 0 0 0 0-6Z"})});var VC;function X1(){return X1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},X1.apply(this,arguments)}var q5=function(t){return U.createElement("svg",X1({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20.813 37"},t),VC||(VC=U.createElement("path",{"data-name":"Icon awesome-map-pin",d:"M8.094 22.9v11.328l1.591 2.386a.868.868 0 0 0 1.443 0l1.591-2.386V22.9a12.2 12.2 0 0 1-4.625 0ZM10.407 0a10.407 10.407 0 1 0 10.406 10.407A10.406 10.406 0 0 0 10.407 0Zm0 5.492a4.919 4.919 0 0 0-4.914 4.914.867.867 0 1 1-1.734 0 6.657 6.657 0 0 1 6.649-6.649.867.867 0 1 1 0 1.734Z",fill:"currentColor"})))};function DY(){const[e]=kr(bu),[t,n]=kr(Gp),[,s]=kr(fY),[c,h]=kr(pY),m=OW(),l=()=>{c==="not-supported"?m({title:"مرورگر شما از دریافت امکان دریافت موقعیت پشتبانی نمی‌کند.",status:"error"}):c==="failed"||(h("loading"),CY().then(w=>{h("success");const{longitude:k,latitude:M}=w.coords,E={lng:k,lat:M};s(E),e&&(e==null||e.flyTo({center:E,zoom:19}))}).catch(w=>{console.error(w),h("failed"),m({title:"متاسفانه امکان دریافت موقعیت وجود ندارد.",status:"error"})}))};function b(w){n(k=>{if(k!==w)return w})}return Y.jsx(qa,{w:"90%",bg:"white",margin:"0 auto 0",p:2,position:"absolute",top:4,left:"5%",shadow:"base",borderRadius:10,zIndex:9,children:Y.jsxs(_p,{w:"full",justify:"start",divider:Y.jsx(xp,{borderColor:"gray.200"}),fontSize:"1.2em",p:2,overflow:"auto",children:[Y.jsx(qc,{label:Y.jsxs(nd,{children:["جستجو ",Y.jsx(qg,{color:"blackAlpha.800",children:"S"})]}),"aria-label":"search action",children:Y.jsx(Zc,{"aria-label":"Search",icon:Y.jsx(bo,{as:IY}),colorScheme:t==="search"?"blue":"gray",onClick:b.bind(null,"search")})}),Y.jsx(qc,{label:Y.jsxs(nd,{children:["مسیریابی",Y.jsx(qg,{color:"blackAlpha.800",children:"R"})]}),"aria-label":"Routing action",children:Y.jsx(Zc,{"aria-label":"Routing",icon:Y.jsx(bo,{as:MY}),colorScheme:t==="route"?"blue":"gray",onClick:b.bind(null,"route")})}),Y.jsx(qc,{label:Y.jsxs(nd,{children:["آدرس‌یابی ",Y.jsx(qg,{color:"blackAlpha.800",children:"M"})]}),"aria-label":"reverse-geocode action",children:Y.jsx(Zc,{"aria-label":"Reverse Geocode",icon:Y.jsx(bo,{as:q5}),colorScheme:t==="reverse-geocode"?"blue":"gray",onClick:b.bind(null,"reverse-geocode")})}),Y.jsx(eS,{}),Y.jsx(qc,{label:Y.jsx(nd,{children:"مکان من"}),"aria-label":"Find my locaiton action",children:Y.jsx(Zc,{"aria-label":"Find My Location",icon:Y.jsx(bo,{as:PY}),onClick:l})}),Y.jsx(qc,{label:Y.jsx(nd,{children:"تنظیمات"}),"aria-label":"layers action",children:Y.jsx(Zc,{"aria-label":"Layers",icon:Y.jsx(bo,{as:zY}),colorScheme:t==="layers"?"blue":"gray",onClick:b.bind(null,"layers")})}),Y.jsx(qc,{label:Y.jsx(nd,{children:"تنظیمات"}),"aria-label":"settings action",children:Y.jsx(Zc,{"aria-label":"Settings",icon:Y.jsx(bo,{as:AY}),colorScheme:t==="settings"?"blue":"gray",onClick:b.bind(null,"settings")})}),Y.jsx(GA,{minW:"100px",maxW:"400px",ratio:40/11,children:Y.jsx(L0,{src:"/logo.svg",alt:"logo"})})]})})}const nd=bt(Vo,{baseStyle:{as:"span",display:"inline-flex",alignItems:"center",gap:"1ch",verticalAlign:"middle"}});function RY(e,t){U.useEffect(()=>{function n(s){var c;(c=e.current)!=null&&c.contains(s.target)||t(s)}return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e])}function LY(){const[e,t]=kr(V5),[,n]=kr(U5),s=U.useRef(null),[c,h]=U.useState(null),[m,l]=U.useState(!1);RY(U.useMemo(()=>({current:c}),[c]),()=>{l(!1)}),U.useEffect(()=>{if(e){const{x:w,y:k}=e.point;s.current&&(s.current.style.top=`${k}px`,s.current.style.left=`${w}px`),l(!0)}else h(null),l(!1)},[e]);function b(){n(e==null?void 0:e.lngLat)}return Y.jsxs(c5,{closeOnSelect:!1,isOpen:Boolean(m),placement:"auto-start",children:[Y.jsx(m5,{ref:s,sx:{width:0,height:0,position:"absolute"}}),Y.jsxs(f5,{minWidth:"240px",ref:h,children:[Y.jsx(cS,{title:"عملگرها",children:Y.jsx(h5,{onClick:b,children:"آدرس‌یابی"})}),Y.jsx(g5,{}),Y.jsxs(p5,{title:"اطلاعات",type:"checkbox",children:[Y.jsxs($y,{value:"lng",textAlign:"end",children:["lng: ",e==null?void 0:e.lngLat.lng]}),Y.jsxs($y,{value:"lat",textAlign:"end",children:["lat: ",e==null?void 0:e.lngLat.lat]})]})]})]})}var H1={},OY={get exports(){return H1},set exports(e){H1=e}},X5={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hd=U;function BY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var FY=typeof Object.is=="function"?Object.is:BY,NY=Hd.useState,$Y=Hd.useEffect,jY=Hd.useLayoutEffect,VY=Hd.useDebugValue;function UY(e,t){var n=t(),s=NY({inst:{value:n,getSnapshot:t}}),c=s[0].inst,h=s[1];return jY(function(){c.value=n,c.getSnapshot=t,Q_(c)&&h({inst:c})},[e,n,t]),$Y(function(){return Q_(c)&&h({inst:c}),e(function(){Q_(c)&&h({inst:c})})},[e]),VY(n),n}function Q_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!FY(e,n)}catch{return!0}}function GY(e,t){return t()}var WY=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?GY:UY;X5.useSyncExternalStore=Hd.useSyncExternalStore!==void 0?Hd.useSyncExternalStore:WY;(function(e){e.exports=X5})(OY);const ja=new WeakMap,ex={},xg={},Ul=()=>{},ws=Ul(),tx=Object,Yn=e=>e===ws,Va=e=>typeof e=="function",nc=(e,t)=>({...e,...t}),gS="undefined",V0=typeof window!=gS,Y1=typeof document!=gS,ZY=()=>V0&&typeof window.requestAnimationFrame!=gS,H5=(e,t)=>{const n=ja.get(e);return[()=>e.get(t)||ex,s=>{if(!Yn(t)){const c=e.get(t);t in xg||(xg[t]=c),n[5](t,nc(c,s),c||ex)}},n[6],()=>!Yn(t)&&t in xg?xg[t]:e.get(t)||ex]},bg=new WeakMap;let qY=0;const Tp=e=>{const t=typeof e,n=e&&e.constructor,s=n==Date;let c,h;if(tx(e)===e&&!s&&n!=RegExp){if(c=bg.get(e),c)return c;if(c=++qY+"~",bg.set(e,c),n==Array){for(c="@",h=0;h<e.length;h++)c+=Tp(e[h])+",";bg.set(e,c)}if(n==tx){c="#";const m=tx.keys(e).sort();for(;!Yn(h=m.pop());)Yn(e[h])||(c+=h+":"+Tp(e[h])+",");bg.set(e,c)}}else c=s?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return c};let K1=!0;const XY=()=>K1,[J1,Q1]=V0&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Ul,Ul],HY=()=>{const e=Y1&&document.visibilityState;return Yn(e)||e!=="hidden"},YY=e=>(Y1&&document.addEventListener("visibilitychange",e),J1("focus",e),()=>{Y1&&document.removeEventListener("visibilitychange",e),Q1("focus",e)}),KY=e=>{const t=()=>{K1=!0,e()},n=()=>{K1=!1};return J1("online",t),J1("offline",n),()=>{Q1("online",t),Q1("offline",n)}},JY={isOnline:XY,isVisible:HY},QY={initFocus:YY,initReconnect:KY},UC=!da.useId,kp=!V0||"Deno"in window,eK=e=>ZY()?window.requestAnimationFrame(e):setTimeout(e,1),nx=kp?U.useEffect:U.useLayoutEffect,rx=typeof navigator<"u"&&navigator.connection,GC=!kp&&rx&&(["slow-2g","2g"].includes(rx.effectiveType)||rx.saveData),yS=e=>{if(Va(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Tp(e):"",[e,t]};let tK=0;const eb=()=>++tK,Y5=0,K5=1,J5=2,nK=3;var of={__proto__:null,FOCUS_EVENT:Y5,RECONNECT_EVENT:K5,MUTATE_EVENT:J5,ERROR_REVALIDATE_EVENT:nK};async function Q5(...e){const[t,n,s,c]=e,h=nc({populateCache:!0,throwOnError:!0},typeof c=="boolean"?{revalidate:c}:c||{});let m=h.populateCache;const l=h.rollbackOnError;let b=h.optimisticData;const w=h.revalidate!==!1,k=L=>typeof l=="function"?l(L):l!==!1,M=h.throwOnError;if(Va(n)){const L=n,N=[],V=t.keys();for(let J=V.next();!J.done;J=V.next()){const $=J.value;!/^\$(inf|sub)\$/.test($)&&L(t.get($)._k)&&N.push($)}return Promise.all(N.map(E))}return E(n);async function E(L){const[N]=yS(L);if(!N)return;const[V,J]=H5(t,N),[$,F,W]=ja.get(t),te=$[N],de=()=>w&&(delete W[N],te&&te[0])?te[0](J5).then(()=>V().data):V().data;if(e.length<3)return de();let pe=s,ce;const oe=eb();F[N]=[oe,0];const be=!Yn(b),ye=V(),Ae=ye.data,Ze=ye._c,Xe=Yn(Ze)?Ae:Ze;if(be&&(b=Va(b)?b(Xe):b,J({data:b,_c:Xe})),Va(pe))try{pe=pe(Xe)}catch(ft){ce=ft}if(pe&&Va(pe.then))if(pe=await pe.catch(ft=>{ce=ft}),oe!==F[N][0]){if(ce)throw ce;return pe}else ce&&be&&k(ce)&&(m=!0,pe=Xe,J({data:pe,_c:ws}));m&&(ce||(Va(m)&&(pe=m(pe,Xe)),J({data:pe,_c:ws}))),F[N][1]=eb();const ot=await de();if(J({_c:ws}),ce){if(M)throw ce;return}return m?ot:pe}}const WC=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},rK=(e,t)=>{if(!ja.has(e)){const n=nc(QY,t),s={},c=Q5.bind(ws,e);let h=Ul;const m={},l=(k,M)=>{const E=m[k]||[];return m[k]=E,E.push(M),()=>E.splice(E.indexOf(M),1)},b=(k,M,E)=>{e.set(k,M);const L=m[k];if(L)for(const N of L)N(M,E)},w=()=>{if(!ja.has(e)&&(ja.set(e,[s,{},{},{},c,b,l]),!kp)){const k=n.initFocus(setTimeout.bind(ws,WC.bind(ws,s,Y5))),M=n.initReconnect(setTimeout.bind(ws,WC.bind(ws,s,K5)));h=()=>{k&&k(),M&&M(),ja.delete(e)}}};return w(),[e,c,w,h]}return[e,ja.get(e)[4]]},iK=(e,t,n,s,c)=>{const h=n.errorRetryCount,m=c.retryCount,l=~~((Math.random()+.5)*(1<<(m<8?m:8)))*n.errorRetryInterval;!Yn(h)&&m>h||setTimeout(s,l,c)},oK=(e,t)=>Tp(e)==Tp(t),[eD,sK]=rK(new Map),aK=nc({onLoadingSlow:Ul,onSuccess:Ul,onError:Ul,onErrorRetry:iK,onDiscarded:Ul,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:GC?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:GC?5e3:3e3,compare:oK,isPaused:()=>!1,cache:eD,mutate:sK,fallback:{}},JY),lK=(e,t)=>{const n=nc(e,t);if(t){const{use:s,fallback:c}=e,{use:h,fallback:m}=t;s&&h&&(n.use=s.concat(h)),c&&m&&(n.fallback=nc(c,m))}return n},cK=U.createContext({}),tD=V0&&window.__SWR_DEVTOOLS_USE__,uK=tD?window.__SWR_DEVTOOLS_USE__:[],dK=()=>{tD&&(window.__SWR_DEVTOOLS_REACT__=da)},hK=e=>Va(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],fK=()=>nc(aK,U.useContext(cK)),pK=e=>(t,n,s)=>e(t,n&&((...h)=>{const m=yS(t)[0],[,,,l]=ja.get(eD),b=l[m];return b?(delete l[m],b):n(...h)}),s),mK=uK.concat(pK),gK=e=>function(...n){const s=fK(),[c,h,m]=hK(n),l=lK(s,m);let b=e;const{use:w}=l,k=(w||[]).concat(mK);for(let M=k.length;M--;)b=k[M](b);return b(c,h||l.fetcher||null,l)},yK=(e,t,n)=>{const s=t[e]||(t[e]=[]);return s.push(n),()=>{const c=s.indexOf(n);c>=0&&(s[c]=s[s.length-1],s.pop())}};dK();const ix={dedupe:!0},vK=(e,t,n)=>{const{cache:s,compare:c,suspense:h,fallbackData:m,revalidateOnMount:l,revalidateIfStale:b,refreshInterval:w,refreshWhenHidden:k,refreshWhenOffline:M,keepPreviousData:E}=n,[L,N,V]=ja.get(s),[J,$]=yS(e),F=U.useRef(!1),W=U.useRef(!1),te=U.useRef(J),de=U.useRef(t),pe=U.useRef(n),ce=()=>pe.current,oe=()=>ce().isVisible()&&ce().isOnline(),[be,ye,Ae,Ze]=H5(s,J),Xe=U.useRef({}).current,ot=Yn(m)?n.fallback[J]:m,ft=(qt,zt)=>{let Ut=!0;for(const kt in Xe){const Jt=kt;Jt==="data"?c(zt[Jt],qt[Jt])||Yn(qt[Jt])&&c(zt[Jt],pt)||(Ut=!1):zt[Jt]!==qt[Jt]&&(Ut=!1)}return Ut},Ce=U.useMemo(()=>{const qt=(()=>!J||!t?!1:Yn(l)?ce().isPaused()||h?!1:Yn(b)?!0:b:l)(),zt=gr=>{const jt=nc(gr);return delete jt._k,qt?{isValidating:!0,isLoading:!0,...jt}:jt},Ut=be(),kt=Ze(),Jt=zt(Ut),$n=Ut===kt?Jt:zt(kt);let Tn=Jt;return[()=>{const gr=zt(be());return ft(gr,Tn)?Tn:Tn=gr},()=>$n]},[s,J]),Ee=H1.useSyncExternalStore(U.useCallback(qt=>Ae(J,(zt,Ut)=>{ft(Ut,zt)||qt()}),[s,J]),Ce[0],Ce[1]),Me=!F.current,We=L[J]&&L[J].length>0,Ye=Ee.data,st=Yn(Ye)?ot:Ye,Ke=Ee.error,Je=U.useRef(st),pt=E?Yn(Ye)?Je.current:Ye:st,St=(()=>We&&!Yn(Ke)?!1:Me&&!Yn(l)?l:ce().isPaused()?!1:h?Yn(st)?!1:b:Yn(st)||b)(),Ot=!!(J&&t&&Me&&St),Vt=Yn(Ee.isValidating)?Ot:Ee.isValidating,Bt=Yn(Ee.isLoading)?Ot:Ee.isLoading,ln=U.useCallback(async qt=>{const zt=de.current;if(!J||!zt||W.current||ce().isPaused())return!1;let Ut,kt,Jt=!0;const $n=qt||{},Tn=!V[J]||!$n.dedupe,gr=()=>UC?!W.current&&J===te.current&&F.current:J===te.current,jt={isValidating:!1,isLoading:!1},jn=()=>{ye(jt)},yr=()=>{const yn=V[J];yn&&yn[1]===kt&&delete V[J]},Er={isValidating:!0};Yn(be().data)&&(Er.isLoading=!0);try{if(Tn&&(ye(Er),n.loadingTimeout&&Yn(be().data)&&setTimeout(()=>{Jt&&gr()&&ce().onLoadingSlow(J,n)},n.loadingTimeout),V[J]=[zt($),eb()]),[Ut,kt]=V[J],Ut=await Ut,Tn&&setTimeout(yr,n.dedupingInterval),!V[J]||V[J][1]!==kt)return Tn&&gr()&&ce().onDiscarded(J),!1;jt.error=ws;const yn=N[J];if(!Yn(yn)&&(kt<=yn[0]||kt<=yn[1]||yn[1]===0))return jn(),Tn&&gr()&&ce().onDiscarded(J),!1;const Vn=be().data;jt.data=c(Vn,Ut)?Vn:Ut,Tn&&gr()&&ce().onSuccess(Ut,J,n)}catch(yn){yr();const Vn=ce(),{shouldRetryOnError:Cr}=Vn;Vn.isPaused()||(jt.error=yn,Tn&&gr()&&(Vn.onError(yn,J,Vn),(Cr===!0||Va(Cr)&&Cr(yn))&&oe()&&Vn.onErrorRetry(yn,J,Vn,Di=>{const Dr=L[J];Dr&&Dr[0]&&Dr[0](of.ERROR_REVALIDATE_EVENT,Di)},{retryCount:($n.retryCount||0)+1,dedupe:!0})))}return Jt=!1,jn(),!0},[J,s]),Kn=U.useCallback((...qt)=>Q5(s,te.current,...qt),[]);if(nx(()=>{de.current=t,pe.current=n,Yn(Ye)||(Je.current=Ye)}),nx(()=>{if(!J)return;const qt=ln.bind(ws,ix);let zt=0;const kt=yK(J,L,(Jt,$n={})=>{if(Jt==of.FOCUS_EVENT){const Tn=Date.now();ce().revalidateOnFocus&&Tn>zt&&oe()&&(zt=Tn+ce().focusThrottleInterval,qt())}else if(Jt==of.RECONNECT_EVENT)ce().revalidateOnReconnect&&oe()&&qt();else{if(Jt==of.MUTATE_EVENT)return ln();if(Jt==of.ERROR_REVALIDATE_EVENT)return ln($n)}});return W.current=!1,te.current=J,F.current=!0,ye({_k:$}),St&&(Yn(st)||kp?qt():eK(qt)),()=>{W.current=!0,kt()}},[J]),nx(()=>{let qt;function zt(){const kt=Va(w)?w(st):w;kt&&qt!==-1&&(qt=setTimeout(Ut,kt))}function Ut(){!be().error&&(k||ce().isVisible())&&(M||ce().isOnline())?ln(ix).then(zt):zt()}return zt(),()=>{qt&&(clearTimeout(qt),qt=-1)}},[w,k,M,J]),U.useDebugValue(pt),h&&Yn(st)&&J)throw!UC&&kp?new Error("Fallback data is required when using suspense in SSR."):(de.current=t,pe.current=n,W.current=!1,Yn(Ke)?ln(ix):Ke);return{mutate:Kn,get data(){return Xe.data=!0,pt},get error(){return Xe.error=!0,Ke},get isValidating(){return Xe.isValidating=!0,Vt},get isLoading(){return Xe.isLoading=!0,Bt}}};var Gy=gK(vK);function _K(e,t="car",n={}){const s={alternatives:!0,steps:!0,overview:!1},c={car:"route",walking:"walking",bicycle:"bicycle"}[t];try{const m=e.map(k=>Xd.LngLat.convert(k)).map(k=>[k.lng,k.lat].join()).join(";"),l=Object.assign(s,n),b=q1(Z5(l)),w=new URL(`/routes/${c}/v1/driving/${m}?${b}`,this.baseURL);return fetch(w,{method:"GET",headers:{"x-api-key":this.apiKey,"content-type":"application/json"}}).then(k=>k.json()).then(k=>k)}catch(h){console.error("🚀 ~ file: route.ts:34 ~ err:",h)}}class vS{constructor(t){$m(this,"apiKey","eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImY0NGNlZWQ3MjNkZDNmZTE0ZDRlYzhlYjY0YjVmMjc2YjAwM2NlZmQ1OTFkMGNjNmEyOWVhMTI3Nzc3NWMwZDNiNDJkYTFlZmNmZDFlZWVlIn0.eyJhdWQiOiI2OTQ1IiwianRpIjoiZjQ0Y2VlZDcyM2RkM2ZlMTRkNGVjOGViNjRiNWYyNzZiMDAzY2VmZDU5MWQwY2M2YTI5ZWExMjc3Nzc1YzBkM2I0MmRhMWVmY2ZkMWVlZWUiLCJpYXQiOjE1ODQ5ODQwOTYsIm5iZiI6MTU4NDk4NDA5NiwiZXhwIjoxNTg2MzY2NDk2LCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.oiJxIJIKQ0Z9QgoE3c6MwxvdBLcfUu_-Y2MK5581PhZ5r23L5xkVIvGVpuHyNjJqx4iUpNWXH_qZ68Z5X2c4cviZ-fLuc8wMdNsJAH6F2X0s9fJXVZVwdZhVOpdsgEFB_AE-zhY8FoRGAqLcJqBWUefh7jviQvB_0v_Z-yC8-c8ve95XxS7xQvZLMN3Ca4TTCqXdgLi7KpbAN0i-nTX7xr8Vb3oes92_ZiB9AWnxS8YRKGC7_EIEdkPdqyFhjEu-Lp09ZJ--UxQMjwDPSfX0pTANUd33tMcZ-du4fqM1oiTlZKIJ3g5S2fKGSpDo_5CP_n9zi0lp6eg3NHA--fDDfA");$m(this,"baseURL","https://map.ir");$m(this,"route",_K);const{apiKey:n,baseURL:s}=t??{};n&&(this.apiKey=n),s&&(this.baseURL=s)}search(t,n,s){const c=new URL(`/search${s?"/autocomplete":""}`,this.baseURL);return fetch(c,{method:"POST",headers:{"x-api-key":this.apiKey,"content-type":"application/json"},body:JSON.stringify({text:t,returnid:!0,location:{type:"Point",coordinates:[n.lng,n.lat]}})}).then(h=>h.json()).then(h=>h)}reverseGeocode(t){const n=Xd.LngLat.convert(t),s=q1({lat:n.lat.toString(),lon:n.lng.toString()}),c=new URL(`/reverse?${s}`,this.baseURL);return fetch(c,{method:"GET",headers:{"x-api-key":this.apiKey,"content-type":"application/json"}}).then(h=>h.json()).then(h=>h)}staticMap(t,n){const{width:s=700,height:c=500,zoom:h=13,colors:m=["red","red"],labels:l}=n??{},b=t.map((M,E)=>{const L=Xd.LngLat.convert(M);return[`color:${m[E]}`,[L.lng,L.lat].join(),l==null?void 0:l[E]].filter(Boolean).join("|")}).join(),w=q1({markers:b,width:String(s),height:String(c),zoom_level:String(h)}),k=new URL(`/static?${w}`,this.baseURL);return fetch(k,{method:"GET",headers:{"x-api-key":this.apiKey}}).then(M=>M.blob()).then(M=>M)}}function Wy({position:e,icon:t,color:n,onRemove:s}){const[c]=kr(bu),h=U.useRef(),m=U.useRef(),[l,b]=U.useState(null),w=U.useCallback(()=>new Uy.Marker({element:h.current,anchor:"bottom"}),[]),k=U.useCallback(M=>{M.stopPropagation(),s==null||s()},[s]);return U.useEffect(()=>(h.current=document.createElement("div"),h.current.className="marker",m.current=Yg.createRoot(h.current),()=>{var M;(M=h.current)==null||M.remove(),l==null||l.remove()}),[]),U.useEffect(()=>{var E;(E=m.current)==null||E.render(Y.jsx(xK,{color:n}));const M=w();return b(M),()=>{M==null||M.remove(),b(null)}},[]),U.useEffect(()=>{if(!(!c||!h.current))if(l&&e)l.setLngLat(e).addTo(c);else if(!l&&e){const M=w();b(M)}else l&&(l==null||l.remove(),b(null))},[c,e,k,l]),{}}function xK({className:e,style:t,id:n,color:s}){return Y.jsx(q5,{color:s??"#222",style:{fontSize:"3em"}})}const bK="/assets/geocode-cursor-light-1f5e4e79.svg";function wK(e,t,n,s=document.body,c=!1){const{when:h}=n??{when:!0},m=Boolean(h),l=U.useRef();U.useEffect(()=>{l.current=t},[t]),U.useEffect(()=>{const b=s&&s.addEventListener;if(!m||!b)return;const w=k=>{var M;return(M=l.current)==null?void 0:M.call(l,k)};return s.addEventListener(e,w,{once:c}),()=>{s.removeEventListener(e,w)}},[e,s,m])}const tb=e=>{const{map:t,isSelectingLocation:n=!1,changeCursor:s=!1,onSelect:c,onCancel:h}=e??{},[m,l]=U.useState(null);wK("keyup",M=>{M.code==="Escape"&&(h==null||h(),w())},{when:m?!1:n},void 0,!0);const b=U.useCallback(()=>{l(null)},[]),w=U.useCallback(()=>{t&&s&&(t.getCanvas().style.cursor="")},[t]),k=U.useCallback(M=>{w();const E=[M.lngLat.lng,M.lngLat.lat];l(E),c==null||c(E)},[w]);return U.useEffect(()=>{if(t&&(n||t.off("click",k),n)){if(s){const M=bK;t.getCanvas().style.cursor=`url(${M}) 8 30, wait`}return t.once("click",k),()=>{t.off("click",k)}}},[t,n]),{selectedLocation:m,clear:b}};function SK({map:e}){const[t,n]=U.useState((e==null?void 0:e.getZoom())??10);U.useEffect(()=>{if(!e)return;function c(h){const m=e.getZoom();m&&n(m)}return e.on("zoomend",c),()=>{e.off("zoomend",c)}},[e]);const s=U.useCallback(c=>{e==null||e.zoomTo(c,{duration:500})},[e]);return U.useEffect(()=>{s(t)},[t]),{zoom:t,minZoom:e==null?void 0:e.getMinZoom(),maxZoom:e==null?void 0:e.getMaxZoom(),setZoom:n}}const ZC=new vS;function TK({onClose:e}){const[t]=kr(bu),[n]=kr(Gp),[s,c]=kr(U5),[h,m]=U.useState(!1),[l,b]=U.useState(),{zoom:w}=SK({map:t}),{data:k,isLoading:M,isValidating:E}=Gy(s?["reverse-geocode",s]:null,([,$])=>ZC.reverseGeocode($),{revalidateOnFocus:!1}),{data:L,isLoading:N,isValidating:V}=Gy(s?["static-map",s,w]:null,([,$,F])=>ZC.staticMap([$],{zoom:Math.floor(F)}),{revalidateOnFocus:!1});tb({map:t,isSelectingLocation:h,changeCursor:!0,onSelect($){c($)},onCancel(){}}),Wy({position:s}),U.useEffect(()=>{m(n==="reverse-geocode")},[n]),U.useEffect(()=>{if(!L)return;const $=window.URL.createObjectURL(L);return b($),()=>{window.URL.revokeObjectURL($)}},[L]);function J(){c(void 0)}return s?Y.jsx(eh,{children:Y.jsx(MA,{maxW:"sm",overflow:"hidden",shadow:"dark-lg",sx:{position:"absolute",bottom:"1em",left:"1em"},children:M?Y.jsx(qa,{p:10,children:Y.jsx(Qa,{})}):Y.jsxs(Y.Fragment,{children:[Y.jsx(Zw,{sx:{position:"absolute",top:"1em",left:"1em"},onClick:J}),Y.jsx(qa,{children:N?Y.jsx(qa,{p:4,children:Y.jsx(Qa,{})}):Y.jsx(L0,{objectFit:"cover",src:l,alt:"static map",fallbackSrc:`https://via.placeholder.com/${500}`})}),Y.jsx(nZ,{children:Y.jsxs(Wo,{children:[Y.jsx(Ud,{size:"sm",children:k==null?void 0:k.last}),Y.jsx(Vo,{children:k==null?void 0:k.region})]})}),Y.jsx(IA,{py:0,children:M?Y.jsx(qa,{children:Y.jsx(Qa,{})}):Y.jsx(Vo,{children:k==null?void 0:k.address_compact})}),Y.jsx(tZ,{justify:"space-between",flexWrap:"wrap",sx:{"& > button":{minW:"136px"}},children:k&&Y.jsxs(CA,{fontSize:"x-small",color:"gray.500",children:[Y.jsx(Wg,{children:Y.jsx(Vo,{as:"span",children:k==null?void 0:k.country})}),Y.jsx(Wg,{children:Y.jsx(Vo,{as:"span",children:k==null?void 0:k.county})}),Y.jsx(Wg,{isCurrentPage:!0,children:Y.jsx(Vo,{as:"span",children:k==null?void 0:k.city})})]})})]})})}):null}function kK(e,t="fa"){return e.map(n=>{const{name:s,maneuver:c,distance:h,duration:m}=n,l=Mi[t]["map-routing-unknown"];let b="";const w=c.type!==void 0?"map-routing-"+qC(c.type):"",k=c.modifier!==void 0?"map-routing-"+qC(c.modifier):"";c.type!=="depart"&&(b+=Mi[t]["map-routing-after"]+" "),b+=Mi[t][w]+" "+(k?Mi[t][k]+"، ":"، ")+Mi[t]["map-routing-move"]+" "+Mi[t]["map-and"]+" "+nb(h,"meters")+" ",w!=="map-routing-arrive"&&(b+=Mi[t]["map-routing-in"]+" "+l+" "),b+=Mi[t]["map-routing-advance"]+".";const M=m?" "+nb(m,"seconds"):"";return{instructionText:b,durationText:M}})}function nb(e,t,n="fa"){const s=[];if(t==="minutes"){const h=Math.floor(e/3600),m=Math.floor(e/60%60);h!==0&&s.push(h+" "+Mi[n]["map-hours"]),m!==0&&s.push(m/5*5+" "+Mi[n]["map-minutes"])}else if(t==="seconds"){const h=Math.floor(e/3600),m=Math.floor(e/60),l=Math.round(e-h*3600-m*60);h!==0&&s.push(h+" "+Mi[n]["map-hours"]),m!==0&&s.push(m+" "+Mi[n]["map-minutes"]),l!==0&&s.push(l+" "+Mi[n]["map-seconds"])}if(t==="meters"){const h=Math.floor(e/1e3),m=Math.floor(e%1e3);h!==0&&s.push(h+" "+Mi[n]["map-kilometers"]),m!==0&&s.push(Math.ceil(m/10)*10+" "+Mi[n]["map-meters"])}const c=s.join(" "+Mi[n]["map-and"]+" ");return n==="fa"?Z1(c):c}function qC(e){return e.replace(/\s+/g,"-").toLowerCase()}const Mi={fa:{"map-and":"و","map-start":"شروع","map-end":"پایان","map-routing-depart":"از نقطه شروع","map-routing-arrive":"رسیدن به مقصد","map-routing-continue":"ادامه دادن","map-routing-turn":"پیچیدن","map-routing-on-ramp":"ورودی بزرگراه","map-routing-off-ramp":"خروجی بزرگراه","map-routing-end-of-road":"پایان مسیر","map-routing-new-name":"تقاطع","map-routing-fork":"دو راهی","map-routing-rotary":"چرخش","map-routing-error":"دریافت اطلاعات مسیریابی با خطا مواجه شد","map-routing-after":"بعد از","map-routing-in":"در","map-routing-right":"به سمت راست","map-routing-left":"به سمت چپ","map-routing-slight-right":"کمی به راست","map-routing-slight-left":"کمی به چپ","map-routing-straight":"مستقیم","map-routing-merge":"اتصال","map-routing-continue-uturn":"ادامه‎ی دوربرگردان","map-routing-uturn":"دوربرگردان","map-routing-sharp-left":"پیچ تند به چپ","map-routing-sharp-right":"پیچ تند به راست","map-routing-move":"حرکت کرده","map-routing-advance":"به پیش بروید","map-routing-exit-rotary":"خروج از پیچ","map-routing-exit-roundabout":"خروج از میدانَََََ","map-routing-roundabout":"میدان","map-routing-unknown":"مسیر","map-seconds":"ثانیه","map-about":"حدود","map-distance":"مسافت","map-duration":"مدت","map-comma":"،","map-kilometer":"کیلومتر","map-kilometers":"کیلومتر","map-meter":"متر","map-meters":"متر","map-minute":"دقیقه","map-minutes":"دقیقه","map-hour":"ساعت","map-hours":"ساعت"},en:{}},EK=new vS;function CK({width:e,onClose:t}){const[n]=kr(bu),[s,c]=kr(Gp),[h,m]=kr(mY),[l,b]=U.useState(!1),[w,k]=U.useState(!1);U.useEffect(()=>(k(s==="route"),()=>{m(void 0)}),[s]),tb({map:n,isSelectingLocation:w,changeCursor:!0,onSelect(V){m([V]),k(!1)},onCancel(){c(void 0)}}),tb({map:n,isSelectingLocation:(h==null?void 0:h.length)===1,changeCursor:!0,onSelect(V){m(J=>[...J,V]),k(!1),b(!0)},onCancel(){c(void 0)}});const{data:M,isLoading:E,isValidating:L}=Gy(((h==null?void 0:h.length)??0)===2?["route",h]:null,([,V])=>EK.route(V),{revalidateOnFocus:!1});Wy({position:h==null?void 0:h[0],color:"green"}),Wy({position:h==null?void 0:h[1],color:"red"});function N(){m(void 0),k(!0)}return l?Y.jsx(Wo,{width:e,h:"full",p:2,overflow:"auto",divider:Y.jsx(xp,{borderColor:"gray.200"}),children:E?Y.jsx(qa,{p:10,children:Y.jsx(Qa,{})}):M?Y.jsxs(Wo,{pt:"6",children:[Y.jsxs(Wo,{children:[Y.jsx(Ud,{size:"md",children:"مسیریابی"}),Y.jsxs(_p,{children:[Y.jsxs(ta,{children:[(M==null?void 0:M.waypoints[0].name)&&Y.jsxs(Y.Fragment,{children:["از"," ",Y.jsx(Vo,{as:"span",color:"green.600",children:M==null?void 0:M.waypoints[0].name})," "]}),(M==null?void 0:M.waypoints[1].name)&&Y.jsxs(Y.Fragment,{children:["به"," ",Y.jsx(Vo,{as:"span",color:"red.600",children:M==null?void 0:M.waypoints[1].name})]})]}),Y.jsx(eS,{}),Y.jsx(Xw,{size:"sm",onClick:N,children:"ویرایش"})]})]}),L?Y.jsx(qa,{children:Y.jsx(Qa,{})}):Y.jsxs(_5,{colorScheme:"green",children:[Y.jsx(x5,{children:M==null?void 0:M.routes.map((V,J)=>Y.jsxs(S5,{fontWeight:"bold",children:["مسیر ",Z1(J+1)," ",Y.jsx(WA,{colorScheme:"green",marginInlineStart:2,fontWeight:"normal",children:Z1(nb(V.duration,"minutes"))})]}))}),Y.jsx(w5,{children:M==null?void 0:M.routes.map(V=>Y.jsx(b5,{children:V.legs.map(J=>Y.jsx(Wo,{spacing:2,divider:Y.jsx(xp,{borderColor:"gray.200"}),children:kK(J.steps).map(({instructionText:$,durationText:F})=>Y.jsxs(_p,{justify:"space-between",bg:"gray.50",p:2,children:[Y.jsx(Vo,{children:$}),F&&Y.jsx(Vo,{fontSize:"sm",color:"gray.500",children:F})]}))}))}))})]})]}):null}):null}var XC=Object.prototype.hasOwnProperty;function HC(e,t,n){for(n of e.keys())if(Vf(n,t))return n}function Vf(e,t){var n,s,c;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((s=e.length)===t.length)for(;s--&&Vf(e[s],t[s]););return s===-1}if(n===Set){if(e.size!==t.size)return!1;for(s of e)if(c=s,c&&typeof c=="object"&&(c=HC(t,c),!c)||!t.has(c))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(s of e)if(c=s[0],c&&typeof c=="object"&&(c=HC(t,c),!c)||!Vf(s[1],t.get(c)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((s=e.byteLength)===t.byteLength)for(;s--&&e.getInt8(s)===t.getInt8(s););return s===-1}if(ArrayBuffer.isView(e)){if((s=e.byteLength)===t.byteLength)for(;s--&&e[s]===t[s];);return s===-1}if(!n||typeof e=="object"){s=0;for(n in e)if(XC.call(e,n)&&++s&&!XC.call(t,n)||!(n in t)||!Vf(e[n],t[n]))return!1;return Object.keys(t).length===s}}return e!==e&&t!==t}function IK(e){var t=U.useRef(e),n=U.useRef(0);return Vf(e,t.current)||(t.current=e,n.current+=1),U.useMemo(function(){return t.current},[n.current])}function MK(e,t){return U.useEffect(e,IK(t))}function PK(e,t){const[n,s]=U.useState(e);return MK(()=>{const c=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(c)}},[e,t]),n}var zK=vW({d:"M23.384,21.619,16.855,15.09a9.284,9.284,0,1,0-1.768,1.768l6.529,6.529a1.266,1.266,0,0,0,1.768,0A1.251,1.251,0,0,0,23.384,21.619ZM2.75,9.5a6.75,6.75,0,1,1,6.75,6.75A6.758,6.758,0,0,1,2.75,9.5Z",displayName:"SearchIcon"});const AK=new vS;function DK({width:e}){var N;const[t]=kr(bu),[n,s]=U.useState(""),[c,h]=U.useState(!1),[m,l]=U.useState(),b=PK(n,400),{data:w,isLoading:k,isValidating:M,mutate:E}=Gy(b.length>0?["search",b,c]:null,([,V,J])=>{const $=t==null?void 0:t.getCenter();if($)return AK.search(V,$,J)});Wy({position:m});function L(V){const{Coordinate:J}=V;l(J),t==null||t.flyTo({center:J})}return Y.jsxs(Wo,{width:e,h:"full",p:2,pt:4,overflow:"auto",children:[Y.jsxs(FA,{children:[Y.jsx(Kw,{pointerEvents:"none",color:"gray.300",fontSize:"1.2em",children:M?Y.jsx(Qa,{size:"sm"}):null}),Y.jsx(Qw,{placeholder:"جستجو",value:n,onChange:V=>s(V.target.value)}),Y.jsx(Jw,{children:Y.jsx(zK,{color:"grey.500",onClick:()=>E()})})]}),Y.jsx(AA,{size:"sm",colorScheme:"green",isChecked:c,onChange:V=>h(V.target.checked),children:"autocomplete"}),Y.jsx(ZA,{p:4}),Y.jsx(Wo,{spacing:2,align:"stretch",pt:2,children:(N=w==null?void 0:w.value)==null?void 0:N.map(V=>Y.jsxs(Wo,{p:2,spacing:0,cursor:"pointer",onClick:L.bind(null,V),bg:"gray.50",_hover:{background:"gray.100"},children:[Y.jsx(Ud,{size:"xs",textTransform:"uppercase",children:V.Title}),Y.jsx(Vo,{pt:"2",fontSize:"sm",children:V.Text})]},V.Id))})]})}function RK({width:e}){kr(bu);const[t,n]=kr(G5);return Y.jsx(Wo,{width:e,h:"full",p:2,overflow:"auto",divider:Y.jsx(xp,{borderColor:"gray.200"}),children:Y.jsxs(Wo,{spacing:4,children:[Y.jsx(Ud,{as:"h5",size:"sm",children:"لایه پس‌زمینه"}),Y.jsx(jA,{columns:3,spacing:2,children:W5.map(({id:s,name:c,previewSrc:h,scheme:m})=>Y.jsxs(MA,{size:"sm",onClick:()=>{t!==s&&n(s)},sx:{boxShadow:t===s?"outline":"base"},children:[Y.jsx(L0,{src:h}),Y.jsx(IA,{children:Y.jsx(Ud,{size:"sm",children:c})})]},s))})]})})}const LK=e=>Y.jsx("svg",{viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...e,children:Y.jsx("path",{fill:"currentColor",d:"M5.5 5a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3Zm0 4.5a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3Zm1.5 3a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0ZM10.5 5a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3ZM12 8a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0Zm-1.5 6a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3Z"})});function OK(){const[e,t]=U.useState(!1),[n,s]=kr(Gp),c=KZ({base:"mobile",lg:"desktop"});console.log("🚀 ~ file: App.tsx:42 ~ App ~ deviceType:",c),console.log("🚀 ~ file: App.tsx:45 ~ SideBar ~ activeTool:",n);const h=U.useMemo(()=>n==="search"?Y.jsx(DK,{width:"full"}):n==="settings"?Y.jsx(RK,{width:"full"}):n==="reverse-geocode"?Y.jsx(TK,{}):n==="route"?Y.jsx(CK,{width:"full"}):void 0,[n]);return Y.jsxs(_p,{w:"full",h:"full",spacing:0,children:[Y.jsx(ta,{w:"full",h:"full",position:"fixed",zIndex:0,children:Y.jsx(TY,{})}),Y.jsx(LY,{}),Y.jsxs(ta,{as:R5,direction:"horizontal",children:[c==="desktop"&&h&&Y.jsxs(Y.Fragment,{children:[Y.jsx(j1,{defaultSize:30,minSize:30,maxSize:50,children:Y.jsx(ta,{h:"full",bg:"white",zIndex:1,position:"relative",children:h})}),Y.jsx(ta,{as:L5,flex:"0 0 1.5em",position:"relative",outline:"none",css:`
                --background-color: transparent;
                &[data-resize-handle-active] {
                  --background-color: var(--chakra-colors-gray-100);
                }
              `,children:Y.jsx(qa,{position:"absolute",top:"0.25em",bottom:"0.25em",left:"0.25em",right:"0.25em",borderRadius:"0.25em",sx:{backgroundColor:"var(--background-color)"},children:Y.jsx(bo,{as:LK})})})]}),Y.jsx(j1,{children:Y.jsx(ta,{position:"relative",shadow:"md",children:Y.jsx(DY,{})})})]}),Y.jsx(Vl,{isOpen:Boolean(n),detent:"full-height",snapPoints:[.8,.6,.4,200,0],initialSnap:1,onClose:()=>{t(!1),s(void 0)},children:c==="mobile"&&h?Y.jsxs(Vl.Container,{children:[Y.jsx(Vl.Header,{style:{direction:"ltr"}}),Y.jsx(Vl.Content,{children:h})]}):null})]})}const BK={brand:{900:"#1a365d",800:"#153e75",700:"#2a69ac"}},FK=fU({colors:BK,styles:{global:{body:{fontFamily:"IRANSansX"},heading:{fontFamily:"IRANSansX"}}}});Yg.createRoot(document.getElementById("root")).render(Y.jsx(da.StrictMode,{children:Y.jsx(FW,{theme:FK,children:Y.jsx(OK,{})})}));
